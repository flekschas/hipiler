var requirejs,require,define;!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("pixi.js"),require("react-dom"),require("react-bootstrap")):"function"==typeof define&&define.amd?define(["react","pixi.js","react-dom","react-bootstrap"],t):"object"==typeof exports?exports.hglib=t(require("react"),require("pixi.js"),require("react-dom"),require("react-bootstrap")):e.hglib=t(e.React,e.PIXI,e.ReactDOM,e.ReactBootstrap)}("undefined"!=typeof self?self:this,function(d,e,f,g){return function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=283)}([function(e,t){e.exports=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(197),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}()},function(e,t,n){e.exports={default:n(348),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(79),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(355)),i=a(n(359)),o=a(n(79));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(311);Object.defineProperty(t,"absToChr",{enumerable:!0,get:function(){return se(r).default}});var i=n(312);Object.defineProperty(t,"accessorTransposition",{enumerable:!0,get:function(){return se(i).default}});var o=n(313);Object.defineProperty(t,"addArrays",{enumerable:!0,get:function(){return se(o).default}});var a=n(314);Object.defineProperty(t,"addClass",{enumerable:!0,get:function(){return se(a).default}});var s=n(315);Object.defineProperty(t,"base64ToCanvas",{enumerable:!0,get:function(){return se(s).default}});var l=n(316);Object.defineProperty(t,"chromInfoBisector",{enumerable:!0,get:function(){return se(l).default}});var u=n(317);Object.defineProperty(t,"chrToAbs",{enumerable:!0,get:function(){return se(u).default}});var c=n(192);Object.defineProperty(t,"cloneEvent",{enumerable:!0,get:function(){return se(c).default}});var d=n(318);Object.defineProperty(t,"colorDomainToRgbaArray",{enumerable:!0,get:function(){return se(d).default}});var h=n(319);Object.defineProperty(t,"colorToHex",{enumerable:!0,get:function(){return se(h).default}});var f=n(193);Object.defineProperty(t,"dataToGenomicLoci",{enumerable:!0,get:function(){return se(f).default}});var p=n(320);Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return se(p).default}});var v=n(321);Object.defineProperty(t,"dictFromTuples",{enumerable:!0,get:function(){return se(v).default}});var m=n(322);Object.defineProperty(t,"dictItems",{enumerable:!0,get:function(){return se(m).default}});var g=n(323);Object.defineProperty(t,"dictKeys",{enumerable:!0,get:function(){return se(g).default}});var y=n(324);Object.defineProperty(t,"dictValues",{enumerable:!0,get:function(){return se(y).default}});var b=n(325);Object.defineProperty(t,"download",{enumerable:!0,get:function(){return se(b).default}});var w=n(326);Object.defineProperty(t,"fillInMinWidths",{enumerable:!0,get:function(){return se(w).default}});var x=n(637);Object.defineProperty(t,"flatten",{enumerable:!0,get:function(){return se(x).default}});var _=n(638);Object.defineProperty(t,"forEach",{enumerable:!0,get:function(){return se(_).default}});var k=n(639);Object.defineProperty(t,"forwardEvent",{enumerable:!0,get:function(){return se(k).default}});var S=n(640);Object.defineProperty(t,"genomeLociToPixels",{enumerable:!0,get:function(){return se(S).default}});var T=n(641);Object.defineProperty(t,"getTrackByUid",{enumerable:!0,get:function(){return se(T).default}});var C=n(642);Object.defineProperty(t,"getTrackPositionByUid",{enumerable:!0,get:function(){return se(C).default}});var O=n(149);Object.defineProperty(t,"hasClass",{enumerable:!0,get:function(){return se(O).default}});var E=n(643);Object.defineProperty(t,"hasParent",{enumerable:!0,get:function(){return se(E).default}});var M=n(644);Object.defineProperty(t,"hexStrToInt",{enumerable:!0,get:function(){return se(M).default}});var P=n(645);Object.defineProperty(t,"intoTheVoid",{enumerable:!0,get:function(){return se(P).default}});var A=n(646);Object.defineProperty(t,"isTrackOrChildTrack",{enumerable:!0,get:function(){return se(A).default}});var R=n(647);Object.defineProperty(t,"isWithin",{enumerable:!0,get:function(){return se(R).default}});var j=n(648);Object.defineProperty(t,"latToY",{enumerable:!0,get:function(){return se(j).default}});var I=n(649);Object.defineProperty(t,"loadChromInfos",{enumerable:!0,get:function(){return se(I).default}});var L=n(650);Object.defineProperty(t,"lngToX",{enumerable:!0,get:function(){return se(L).default}});var D=n(651);Object.defineProperty(t,"map",{enumerable:!0,get:function(){return se(D).default}});var N=n(652);Object.defineProperty(t,"max",{enumerable:!0,get:function(){return se(N).default}});var B=n(653);Object.defineProperty(t,"min",{enumerable:!0,get:function(){return se(B).default}});var F=n(654);Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return se(F).default}});var V=n(655);Object.defineProperty(t,"objVals",{enumerable:!0,get:function(){return se(V).default}});var z=n(656);Object.defineProperty(t,"or",{enumerable:!0,get:function(){return se(z).default}});var H=n(657);Object.defineProperty(t,"pixiTextToSvg",{enumerable:!0,get:function(){return se(H).default}});var U=n(282);Object.defineProperty(t,"positionedTracksToAllTracks",{enumerable:!0,get:function(){return se(U).default}});var q=n(658);Object.defineProperty(t,"q",{enumerable:!0,get:function(){return se(q).default}});var W=n(281);Object.defineProperty(t,"reduce",{enumerable:!0,get:function(){return se(W).default}});var G=n(659);Object.defineProperty(t,"rangeQuery2d",{enumerable:!0,get:function(){return se(G).default}});var Y=n(660);Object.defineProperty(t,"relToAbsChromPos",{enumerable:!0,get:function(){return se(Y).default}});var X=n(661);Object.defineProperty(t,"removeClass",{enumerable:!0,get:function(){return se(X).default}});var Z=n(662);Object.defineProperty(t,"resetD3BrushStyle",{enumerable:!0,get:function(){return se(Z).default}});var K=n(663);Object.defineProperty(t,"scalesCenterAndK",{enumerable:!0,get:function(){return se(K).default}});var $=n(664);Object.defineProperty(t,"scalesToGenomeLoci",{enumerable:!0,get:function(){return se($).default}});var Q=n(665);Object.defineProperty(t,"showMousePosition",{enumerable:!0,get:function(){return se(Q).default}});var J=n(666);Object.defineProperty(t,"sum",{enumerable:!0,get:function(){return se(J).default}});var ee=n(667);Object.defineProperty(t,"svgLine",{enumerable:!0,get:function(){return se(ee).default}});var te=n(668);Object.defineProperty(t,"tileToCanvas",{enumerable:!0,get:function(){return se(te).default}});var ne=n(669);Object.defineProperty(t,"totalTrackPixelHeight",{enumerable:!0,get:function(){return se(ne).default}});var re=n(670);Object.defineProperty(t,"trimTrailingSlash",{enumerable:!0,get:function(){return se(re).default}});var ie=n(671);Object.defineProperty(t,"valueToColor",{enumerable:!0,get:function(){return se(ie).default}});var oe=n(672);Object.defineProperty(t,"expandCombinedTracks",{enumerable:!0,get:function(){return se(oe).default}});var ae=n(673);function se(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"segmentsToRows",{enumerable:!0,get:function(){return se(ae).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactCSS=t.loop=t.handleActive=t.handleHover=t.hover=void 0;var a=u(n(549)),s=u(n(552)),l=u(n(576)),r=u(n(577)),i=u(n(578)),o=u(n(579));function u(e){return e&&e.__esModule?e:{default:e}}t.hover=r.default,t.handleHover=r.default,t.handleActive=i.default,t.loop=o.default;var c=t.ReactCSS=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=(0,a.default)(n),o=(0,s.default)(e,i);return(0,l.default)(o)};t.default=c},function(e,t,n){e.exports=n(380)()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(285);Object.defineProperty(t,"chromInfo",{enumerable:!0,get:function(){return l(r).default}});var i=n(292);Object.defineProperty(t,"domEvent",{enumerable:!0,get:function(){return l(i).default}});var o=n(78);Object.defineProperty(t,"pubSub",{enumerable:!0,get:function(){return l(o).default}}),Object.defineProperty(t,"pubSubCreate",{enumerable:!0,get:function(){return o.create}});var a=n(302);Object.defineProperty(t,"tileProxy",{enumerable:!0,get:function(){return l(a).default}}),Object.defineProperty(t,"requestsInFlight",{enumerable:!0,get:function(){return a.requestsInFlight}}),Object.defineProperty(t,"setTileProxyAuthHeader",{enumerable:!0,get:function(){return a.setTileProxyAuthHeader}}),Object.defineProperty(t,"authHeader",{enumerable:!0,get:function(){return a.authHeader}});var s=n(171);function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"getDarkTheme",{enumerable:!0,get:function(){return s.getDarkTheme}}),Object.defineProperty(t,"setDarkTheme",{enumerable:!0,get:function(){return s.setDarkTheme}})},function(e,t,n){"use strict";t.__esModule=!0;var s=r(n(3)),l=r(n(352));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t,n,r){null===t&&(t=Function.prototype);var i=(0,l.default)(t,n);if(void 0===i){var o=(0,s.default)(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}},function(e,t,n){e.exports={default:n(142),__esModule:!0}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(327);Object.defineProperty(t,"AVAILABLE_FOR_PLUGINS",{enumerable:!0,get:function(){return p(r).default}});var i=n(485);Object.defineProperty(t,"AVAILABLE_TRACK_TYPES",{enumerable:!0,get:function(){return p(i).default}});var o=n(486);Object.defineProperty(t,"DATATYPE_TO_TRACK_TYPE",{enumerable:!0,get:function(){return p(o).default}});var a=n(487);Object.defineProperty(t,"HEATED_OBJECT_MAP",{enumerable:!0,get:function(){return p(a).default}});var s=n(488);Object.defineProperty(t,"IS_TRACK_RANGE_SELECTABLE",{enumerable:!0,get:function(){return p(s).default}});var l=n(489);Object.defineProperty(t,"OPTIONS_INFO",{enumerable:!0,get:function(){return p(l).default}});var u=n(632);Object.defineProperty(t,"TRACKS_INFO",{enumerable:!0,get:function(){return p(u).default}});var c=n(633);Object.defineProperty(t,"TRACKS_INFO_BY_TYPE",{enumerable:!0,get:function(){return p(c).default}});var d=n(634);Object.defineProperty(t,"POSITIONS_BY_DATATYPE",{enumerable:!0,get:function(){return p(d).default}});var h=n(635);Object.defineProperty(t,"USED_SERVER",{enumerable:!0,get:function(){return p(h).default}});var f=n(636);function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"DEFAULT_TRACKS_FOR_DATATYPE",{enumerable:!0,get:function(){return p(f).default}});t.MOUSE_TOOL_MOVE="move",t.MOUSE_TOOL_SELECT="select",t.TILE_FETCH_DEBOUNCE=100,t.ZOOM_DEBOUNCE=10,t.SHORT_DRAG_TIMEOUT=110,t.LONG_DRAG_TIMEOUT=3e3,t.LOCATION_LISTENER_PREFIX="locationListenerPrefix",t.ZOOM_TRANSITION_DURATION=1e3,t.DEFAULT_SERVER="http://higlass.io/api/v1",t.VIEW_HEADER_MED_WIDTH_SEARCH_BAR=400,t.VIEW_HEADER_MIN_WIDTH_SEARCH_BAR=300,t.TRACK_LOCATIONS=["top","left","right","bottom","center","whole","gallery"],t.MIN_HORIZONTAL_HEIGHT=20,t.MIN_VERTICAL_WIDTH=20},function(e,t){var n=e.exports={version:"2.5.2"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(582);Object.defineProperty(t,"Alpha",{enumerable:!0,get:function(){return d(r).default}});var i=n(277);Object.defineProperty(t,"Checkboard",{enumerable:!0,get:function(){return d(i).default}});var o=n(585);Object.defineProperty(t,"EditableInput",{enumerable:!0,get:function(){return d(o).default}});var a=n(586);Object.defineProperty(t,"Hue",{enumerable:!0,get:function(){return d(a).default}});var s=n(588);Object.defineProperty(t,"Raised",{enumerable:!0,get:function(){return d(s).default}});var l=n(589);Object.defineProperty(t,"Saturation",{enumerable:!0,get:function(){return d(l).default}});var u=n(279);Object.defineProperty(t,"ColorWrap",{enumerable:!0,get:function(){return d(u).default}});var c=n(596);function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Swatch",{enumerable:!0,get:function(){return d(c).default}})},function(e,t,n){var v=n(17),m=n(13),g=n(38),y=n(30),b="prototype",w=function(e,t,n){var r,i,o,a=e&w.F,s=e&w.G,l=e&w.S,u=e&w.P,c=e&w.B,d=e&w.W,h=s?m:m[t]||(m[t]={}),f=h[b],p=s?v:l?v[t]:(v[t]||{})[b];for(r in s&&(n=t),n)(i=!a&&p&&void 0!==p[r])&&r in h||(o=i?p[r]:n[r],h[r]=s&&"function"!=typeof p[r]?n[r]:c&&i?g(o,v):d&&p[r]==o?function(r){var e=function(e,t,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(e);case 2:return new r(e,t)}return new r(e,t,n)}return r.apply(this,arguments)};return e[b]=r[b],e}(o):u&&"function"==typeof o?g(Function.call,o):o,u&&((h.virtual||(h.virtual={}))[r]=o,e&w.R&&f&&!f[r]&&y(f,r,o)))};w.F=1,w.G=2,w.S=4,w.P=8,w.B=16,w.W=32,w.U=64,w.R=128,e.exports=w},function(e,t,n){var r=n(75)("wks"),i=n(63),o=n(17).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function i(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function u(){}var o=1/.7,a="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3})$/,d=/^#([0-9a-f]{6})$/,h=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),f=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),p=new RegExp("^rgba\\("+[a,a,a,s]+"\\)$"),v=new RegExp("^rgba\\("+[l,l,l,s]+"\\)$"),m=new RegExp("^hsl\\("+[s,l,l]+"\\)$"),g=new RegExp("^hsla\\("+[s,l,l,s]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function b(e){var t;return e=(e+"").trim().toLowerCase(),(t=c.exec(e))?new S((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=d.exec(e))?w(parseInt(t[1],16)):(t=h.exec(e))?new S(t[1],t[2],t[3],1):(t=f.exec(e))?new S(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=p.exec(e))?x(t[1],t[2],t[3],t[4]):(t=v.exec(e))?x(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=m.exec(e))?T(t[1],t[2]/100,t[3]/100,1):(t=g.exec(e))?T(t[1],t[2]/100,t[3]/100,t[4]):y.hasOwnProperty(e)?w(y[e]):"transparent"===e?new S(NaN,NaN,NaN,0):null}function w(e){return new S(e>>16&255,e>>8&255,255&e,1)}function x(e,t,n,r){return r<=0&&(e=t=n=NaN),new S(e,t,n,r)}function _(e){return e instanceof u||(e=b(e)),e?new S((e=e.rgb()).r,e.g,e.b,e.opacity):new S}function k(e,t,n,r){return 1===arguments.length?_(e):new S(e,t,n,null==r?1:r)}function S(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function T(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||1<=n?e=t=NaN:t<=0&&(e=NaN),new O(e,t,n,r)}function C(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof O)return new O(e.h,e.s,e.l,e.opacity);if(e instanceof u||(e=b(e)),!e)return new O;if(e instanceof O)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=0<l&&l<1?0:a,new O(a,s,l,e.opacity)}(e):new O(e,t,n,null==r?1:r)}function O(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function E(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}r(u,b,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),r(S,k,i(u,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new S(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new S(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),r(O,C,i(u,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new O(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new O(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new S(E(240<=e?e-240:e+120,i,r),E(e,i,r),E(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var M=Math.PI/180,P=180/Math.PI,A=.95047,R=1,j=1.08883,I=4/29,L=6/29,D=3*L*L,N=L*L*L;function B(e){if(e instanceof V)return new V(e.l,e.a,e.b,e.opacity);if(e instanceof G){var t=e.h*M;return new V(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof S||(e=_(e));var n=q(e.r),r=q(e.g),i=q(e.b),o=z((.4124564*n+.3575761*r+.1804375*i)/A),a=z((.2126729*n+.7151522*r+.072175*i)/R);return new V(116*a-16,500*(o-a),200*(a-z((.0193339*n+.119192*r+.9503041*i)/j)),e.opacity)}function F(e,t,n,r){return 1===arguments.length?B(e):new V(e,t,n,null==r?1:r)}function V(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function z(e){return N<e?Math.pow(e,1/3):e/D+I}function H(e){return L<e?e*e*e:D*(e-I)}function U(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function q(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function W(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof G)return new G(e.h,e.c,e.l,e.opacity);e instanceof V||(e=B(e));var t=Math.atan2(e.b,e.a)*P;return new G(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new G(e,t,n,null==r?1:r)}function G(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}r(V,F,i(u,{brighter:function(e){return new V(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new V(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=R*H(e),new S(U(3.2404542*(t=A*H(t))-1.5371385*e-.4985314*(n=j*H(n))),U(-.969266*t+1.8760108*e+.041556*n),U(.0556434*t-.2040259*e+1.0572252*n),this.opacity)}})),r(G,W,i(u,{brighter:function(e){return new G(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new G(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return B(this).rgb()}}));var Y=1.78277,X=-.29227,Z=-.90649,K=1.97294,$=K*Z,Q=K*Y,J=Y*X- -.14861*Z;function ee(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof te)return new te(e.h,e.s,e.l,e.opacity);e instanceof S||(e=_(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(J*r+$*t-Q*n)/(J+$-Q),o=r-i,a=(K*(n-i)-X*o)/Z,s=Math.sqrt(a*a+o*o)/(K*i*(1-i)),l=s?Math.atan2(a,o)*P-120:NaN;return new te(l<0?l+360:l,s,i,e.opacity)}(e):new te(e,t,n,null==r?1:r)}function te(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}r(te,ee,i(u,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new te(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new te(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*M,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new S(255*(t+n*(-.14861*r+Y*i)),255*(t+n*(X*r+Z*i)),255*(t+n*(K*r)),this.opacity)}})),n.d(t,"color",function(){return b}),n.d(t,"rgb",function(){return k}),n.d(t,"hsl",function(){return C}),n.d(t,"lab",function(){return F}),n.d(t,"hcl",function(){return W}),n.d(t,"cubehelix",function(){return ee})},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(107);var r=Array.prototype;r.map,r.slice;throw new Error('Cannot find module "d3-array"')},function(e,t,n){e.exports=n(305)},function(e,t,n){e.exports={default:n(331),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r=i(n(345)),l=i(n(11));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=(0,l.default)(e);!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){e.exports={default:n(303),__esModule:!0}},function(e,t,n){var r=n(26),i=n(101),o=n(88),a=Object.defineProperty;t.f=n(28)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(27);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(45)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=f},function(e,t,n){var r=n(25),i=n(51);e.exports=n(28)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,n,t){var r=Object.keys(n),i=t&&t.handleMissingStyleName||"throw";return e.split(" ").filter(function(e){return e}).map(function(e){if(-1!==e.indexOf("."))return function(e,t,n){var r=e.split("."),i=r[0],o=r[1],a=n||"throw";if(!o){if("throw"===a)throw new Error("Invalid style name: "+e);if("warn"!==a)return null;console.warn("Invalid style name: "+e)}if(!t[i]){if("throw"===a)throw new Error("CSS module import does not exist: "+i);if("warn"!==a)return null;console.warn("CSS module import does not exist: "+i)}if(!t[i][o]){if("throw"===a)throw new Error("CSS module does not exist: "+o);if("warn"!==a)return null;console.warn("CSS module does not exist: "+o)}return t[i][o]}(e,n,i);if(0===r.length)throw new Error("Cannot use styleName attribute for style name '"+e+"' without importing at least one stylesheet.");if(1<r.length)throw new Error("Cannot use anonymous style name '"+e+"' with more than one stylesheet import.");var t=n[r[0]];if(!t[e]){if("throw"===i)throw new Error("Could not resolve the styleName '"+e+"'.");"warn"===i&&console.warn("Could not resolve the styleName '"+e+"'.")}return t[e]}).filter(function(e){return e}).join(" ")}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(89),i=n(60);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";var l=n(18);function u(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}var r=function(a){var s=a.length-1;return function(e){var t=e<=0?e=0:1<=e?s-(e=1):Math.floor(e*s),n=a[t],r=a[t+1],i=0<t?a[t-1]:2*n-r,o=t<s-1?a[t+2]:2*r-n;return u((e-t/s)*s,i,n,r,o)}},i=function(a){var s=a.length;return function(e){var t=Math.floor(((e%=1)<0?++e:e)*s),n=a[(t+s-1)%s],r=a[t%s],i=a[(t+1)%s],o=a[(t+2)%s];return u((e-t/s)*s,n,r,i,o)}},a=function(e){return function(){return e}};function o(t,n){return function(e){return t+e*n}}function s(e,t){var n=t-e;return n?o(e,180<n||n<-180?n-360*Math.round(n/360):n):a(isNaN(e)?t:e)}function c(o){return 1==(o=+o)?d:function(e,t){return t-e?(n=e,r=t,i=o,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(e){return Math.pow(n+e*r,i)}):a(isNaN(e)?t:e);var n,r,i}}function d(e,t){var n=t-e;return n?o(e,n):a(isNaN(e)?t:e)}var h=function e(t){var a=c(t);function n(t,e){var n=a((t=Object(l.rgb)(t)).r,(e=Object(l.rgb)(e)).r),r=a(t.g,e.g),i=a(t.b,e.b),o=d(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=r(e),t.b=i(e),t.opacity=o(e),t+""}}return n.gamma=e,n}(1);function f(s){return function(e){var t,n,r=e.length,i=new Array(r),o=new Array(r),a=new Array(r);for(t=0;t<r;++t)n=Object(l.rgb)(e[t]),i[t]=n.r||0,o[t]=n.g||0,a[t]=n.b||0;return i=s(i),o=s(o),a=s(a),n.opacity=1,function(e){return n.r=i(e),n.g=o(e),n.b=a(e),n+""}}}var p=f(r),v=f(i),m=function(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(r),a=new Array(r);for(n=0;n<i;++n)o[n]=O(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}},g=function(t,n){var r=new Date;return n-=t=+t,function(e){return r.setTime(t+n*e),r}},y=function(t,n){return n-=t=+t,function(e){return t+n*e}},b=function(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=O(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},w=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,x=new RegExp(w.source,"g");var _,k,S,T,C=function(e,r){var t,n,i,o,a,s=w.lastIndex=x.lastIndex=0,l=-1,u=[],c=[];for(e+="",r+="";(t=w.exec(e))&&(n=x.exec(r));)(i=n.index)>s&&(i=r.slice(s,i),u[l]?u[l]+=i:u[++l]=i),(t=t[0])===(n=n[0])?u[l]?u[l]+=n:u[++l]=n:(u[++l]=null,c.push({i:l,x:y(t,n)})),s=x.lastIndex;return s<r.length&&(i=r.slice(s),u[l]?u[l]+=i:u[++l]=i),u.length<2?c[0]?(a=c[0].x,function(e){return a(e)+""}):(o=r,function(){return o}):(r=c.length,function(e){for(var t,n=0;n<r;++n)u[(t=c[n]).i]=t.x(e);return u.join("")})},O=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?a(t):("number"===r?y:"string"===r?(n=Object(l.color)(t))?(t=n,h):C:t instanceof l.color?h:t instanceof Date?g:Array.isArray(t)?m:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?b:y)(e,t)},E=function(t,n){return n-=t=+t,function(e){return Math.round(t+n*e)}},M=180/Math.PI,P={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},A=function(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*M,skewX:Math.atan(l)*M,scaleX:a,scaleY:s}};function R(h,f,p,v){function m(e){return e.length?e.pop()+" ":""}return function(e,t){var n,r,i,o,a,s,l,u,c=[],d=[];return e=h(e),t=h(t),function(e,t,n,r,i,o){if(e!==n||t!==r){var a=i.push("translate(",null,f,null,p);o.push({i:a-4,x:y(e,n)},{i:a-2,x:y(t,r)})}else(n||r)&&i.push("translate("+n+f+r+p)}(e.translateX,e.translateY,t.translateX,t.translateY,c,d),n=e.rotate,r=t.rotate,i=c,o=d,n!==r?(180<n-r?r+=360:180<r-n&&(n+=360),o.push({i:i.push(m(i)+"rotate(",null,v)-2,x:y(n,r)})):r&&i.push(m(i)+"rotate("+r+v),a=e.skewX,s=t.skewX,l=c,u=d,a!==s?u.push({i:l.push(m(l)+"skewX(",null,v)-2,x:y(a,s)}):s&&l.push(m(l)+"skewX("+s+v),function(e,t,n,r,i,o){if(e!==n||t!==r){var a=i.push(m(i)+"scale(",null,",",null,")");o.push({i:a-4,x:y(e,n)},{i:a-2,x:y(t,r)})}else 1===n&&1===r||i.push(m(i)+"scale("+n+","+r+")")}(e.scaleX,e.scaleY,t.scaleX,t.scaleY,c,d),e=t=null,function(e){for(var t,n=-1,r=d.length;++n<r;)c[(t=d[n]).i]=t.x(e);return c.join("")}}}var j=R(function(e){return"none"===e?P:(_||(_=document.createElement("DIV"),k=document.documentElement,S=document.defaultView),_.style.transform=e,e=S.getComputedStyle(k.appendChild(_),null).getPropertyValue("transform"),k.removeChild(_),e=e.slice(7,-1).split(","),A(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),I=R(function(e){return null==e?P:(T||(T=document.createElementNS("http://www.w3.org/2000/svg","g")),T.setAttribute("transform",e),(e=T.transform.baseVal.consolidate())?(e=e.matrix,A(e.a,e.b,e.c,e.d,e.e,e.f)):P)},", ",")",")"),L=Math.SQRT2;function D(e){return((e=Math.exp(e))+1/e)/2}var N=function(e,t){var n,a,s=e[0],l=e[1],u=e[2],r=t[0],i=t[1],o=t[2],c=r-s,d=i-l,h=c*c+d*d;if(h<1e-12)a=Math.log(o/u)/L,n=function(e){return[s+e*c,l+e*d,u*Math.exp(L*e*a)]};else{var f=Math.sqrt(h),p=(o*o-u*u+4*h)/(2*u*2*f),v=(o*o-u*u-4*h)/(2*o*2*f),m=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(v*v+1)-v);a=(g-m)/L,n=function(e){var t,n,r=e*a,i=D(m),o=u/(2*f)*(i*(n=L*r+m,((n=Math.exp(2*n))-1)/(n+1))-(t=m,((t=Math.exp(t))-1/t)/2));return[s+o*c,l+o*d,u*i/D(L*r+m)]}}return n.duration=1e3*a,n};function B(a){return function(t,e){var n=a((t=Object(l.hsl)(t)).h,(e=Object(l.hsl)(e)).h),r=d(t.s,e.s),i=d(t.l,e.l),o=d(t.opacity,e.opacity);return function(e){return t.h=n(e),t.s=r(e),t.l=i(e),t.opacity=o(e),t+""}}}var F=B(s),V=B(d);function z(t,e){var n=d((t=Object(l.lab)(t)).l,(e=Object(l.lab)(e)).l),r=d(t.a,e.a),i=d(t.b,e.b),o=d(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function H(a){return function(t,e){var n=a((t=Object(l.hcl)(t)).h,(e=Object(l.hcl)(e)).h),r=d(t.c,e.c),i=d(t.l,e.l),o=d(t.opacity,e.opacity);return function(e){return t.h=n(e),t.c=r(e),t.l=i(e),t.opacity=o(e),t+""}}}var U=H(s),q=H(d);function W(s){return function e(a){function t(t,e){var n=s((t=Object(l.cubehelix)(t)).h,(e=Object(l.cubehelix)(e)).h),r=d(t.s,e.s),i=d(t.l,e.l),o=d(t.opacity,e.opacity);return function(e){return t.h=n(e),t.s=r(e),t.l=i(Math.pow(e,a)),t.opacity=o(e),t+""}}return a=+a,t.gamma=e,t}(1)}var G=W(s),Y=W(d),X=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n};n.d(t,"a",function(){return O}),n.d(t,!1,function(){return m}),n.d(t,!1,function(){return r}),n.d(t,!1,function(){return i}),n.d(t,!1,function(){return g}),n.d(t,"c",function(){return y}),n.d(t,!1,function(){return b}),n.d(t,"d",function(){return E}),n.d(t,!1,function(){return C}),n.d(t,!1,function(){return j}),n.d(t,!1,function(){return I}),n.d(t,"e",function(){return N}),n.d(t,!1,function(){return h}),n.d(t,!1,function(){return p}),n.d(t,!1,function(){return v}),n.d(t,!1,function(){return F}),n.d(t,!1,function(){return V}),n.d(t,!1,function(){return z}),n.d(t,!1,function(){return U}),n.d(t,!1,function(){return q}),n.d(t,!1,function(){return G}),n.d(t,"b",function(){return Y}),n.d(t,!1,function(){return X})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var S,s=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[1<r.length?r[0]+r.slice(2):r,+e.slice(n+1)]},u=function(e){return(e=s(Math.abs(e)))?e[1]:NaN},r=function(e,t){var n=s(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},T={"":function(e,t){e:for(var n,r=(e=e.toPrecision(t)).length,i=1,o=-1;i<r;++i)switch(e[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break e;default:0<o&&(o=0)}return 0<o?e.slice(0,o)+e.slice(n+1):e},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return r(100*e,t)},r:r,s:function(e,t){var n=s(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(S=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:a<o?r+new Array(o-a+1).join("0"):0<o?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+s(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},d=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function C(e){return new i(e)}function i(e){if(!(t=d.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",o=t[4]||"",a=!!t[5],s=t[6]&&+t[6],l=!!t[7],u=t[8]&&+t[8].slice(1),c=t[9]||"";"n"===c?(l=!0,c="g"):T[c]||(c=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=l,this.precision=u,this.type=c}C.prototype=i.prototype,i.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var o,a,l,c=function(e){return e},O=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],h=function(e){var t,s,l,x=e.grouping&&e.thousands?(s=e.grouping,l=e.thousands,function(e,t){for(var n=e.length,r=[],i=0,o=s[0],a=0;0<n&&0<o&&(t<a+o+1&&(o=Math.max(1,t-a)),r.push(e.substring(n-=o,n+o)),!((a+=o+1)>t));)o=s[i=(i+1)%s.length];return r.reverse().join(l)}):c,r=e.currency,_=e.decimal,k=e.numerals?(t=e.numerals,function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}):c,i=e.percent||"%";function a(e){var u=(e=C(e)).fill,c=e.align,d=e.sign,t=e.symbol,h=e.zero,f=e.width,p=e.comma,v=e.precision,m=e.type,g="$"===t?r[0]:"#"===t&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",y="$"===t?r[1]:/[%p]/.test(m)?i:"",b=T[m],w=!m||/[defgprs%]/.test(m);function n(e){var t,n,r,i=g,o=y;if("c"===m)o=b(e)+o,e="";else{var a=(e=+e)<0;if(e=b(Math.abs(e),v),a&&0==+e&&(a=!1),i=(a?"("===d?d:"-":"-"===d||"("===d?"":d)+i,o=("s"===m?O[8+S/3]:"")+o+(a&&"("===d?")":""),w)for(t=-1,n=e.length;++t<n;)if((r=e.charCodeAt(t))<48||57<r){o=(46===r?_+e.slice(t+1):e.slice(t))+o,e=e.slice(0,t);break}}p&&!h&&(e=x(e,1/0));var s=i.length+e.length+o.length,l=s<f?new Array(f-s+1).join(u):"";switch(p&&h&&(e=x(l+e,l.length?f-o.length:1/0),l=""),c){case"<":e=i+e+o+l;break;case"=":e=i+l+e+o;break;case"^":e=l.slice(0,s=l.length>>1)+i+e+o+l.slice(s);break;default:e=l+i+e+o}return k(e)}return v=null==v?m?6:12:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),n.toString=function(){return e+""},n}return{format:a,formatPrefix:function(e,t){var n=a(((e=C(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(u(t)/3))),i=Math.pow(10,-r),o=O[8+r/3];return function(e){return n(i*e)+o}}}};function f(e){return o=h(e),a=o.format,l=o.formatPrefix,o}f({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var p=function(e){return Math.max(0,-u(Math.abs(e)))},v=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(u(t)/3)))-u(Math.abs(e)))},m=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,u(t)-u(e))+1};n.d(t,"formatDefaultLocale",function(){return f}),n.d(t,"format",function(){return a}),n.d(t,"formatPrefix",function(){return l}),n.d(t,"formatLocale",function(){return h}),n.d(t,"formatSpecifier",function(){return C}),n.d(t,"precisionFixed",function(){return p}),n.d(t,"precisionPrefix",function(){return v}),n.d(t,"precisionRound",function(){return m})},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(195),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},function(e,t,n){var o=n(61);e.exports=function(r,i,e){if(o(r),void 0===i)return r;switch(e){case 1:return function(e){return r.call(i,e)};case 2:return function(e,t){return r.call(i,e,t)};case 3:return function(e,t,n){return r.call(i,e,t,n)}}return function(){return r.apply(i,arguments)}}},function(e,t){e.exports={}},function(e,t,n){e.exports={default:n(362),__esModule:!0}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var h=m(n(11)),o=m(n(46)),a=m(n(3)),s=m(n(1)),r=m(n(2)),l=m(n(4)),u=m(n(10)),c=m(n(5)),f=n(36),d=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),p=m(n(21)),i=m(n(109)),v=n(6);function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){var n,r,i,o=e.map(function(e){return+e}).sort(function(e,t){return t-e}),a=o[t],s=o[o.length-1];return n=a,r=s,i=(0,f.precisionPrefix)(r,n),(0,f.formatPrefix)("."+String(i),n)(n)}var y=function(e){function i(e,t){(0,s.default)(this,i);var n=(0,l.default)(this,(i.__proto__||(0,a.default)(i)).call(this));n.scene=e,n.delayDrawing=!1,n.pBase=new d.Graphics,n.pMasked=new d.Graphics,n.pMask=new d.Graphics,n.pMain=new d.Graphics,n.pBorder=new d.Graphics,n.pBackground=new d.Graphics,n.pLabel=new d.Graphics,n.pMobile=new d.Graphics,n.pAxis=new d.Graphics,n.pMouseOver=new d.Graphics,n.scene.addChild(n.pBase),n.pBase.addChild(n.pMasked),n.pMasked.addChild(n.pBackground),n.pMasked.addChild(n.pMain),n.pMasked.addChild(n.pMask),n.pMasked.addChild(n.pMobile),n.pMasked.addChild(n.pBorder),n.pMasked.addChild(n.pLabel),n.pMasked.addChild(n.pMouseOver),n.pBase.addChild(n.pAxis),n.pMasked.mask=n.pMask,n.prevOptions="",n.options=(0,o.default)(n.options,t);var r=n.options.name?n.options.name:n.tilesetInfo?n.tilesetInfo.name:"";return n.options.labelPosition&&"hidden"!==n.options.labelPosition||(r=""),n.labelTextFontFamily="Arial",n.labelTextFontSize=12,n.labelText=new d.Text(r,{fontSize:String(n.labelTextFontSize)+"px",fontFamily:n.labelTextFontFamily,fill:"black"}),n.errorText=new d.Text("",{fontSize:"12px",fontFamily:"Arial",fill:"red"}),n.errorText.anchor.x=.5,n.errorText.anchor.y=.5,n.pLabel.addChild(n.errorText),n.pLabel.addChild(n.labelText),n}return(0,c.default)(i,e),(0,r.default)(i,[{key:"setLabelText",value:function(){}},{key:"setPosition",value:function(e){this.position=e,this.drawBorder(),this.drawLabel(),this.drawBackground(),this.setMask(this.position,this.dimensions)}},{key:"setDimensions",value:function(e){(0,u.default)(i.prototype.__proto__||(0,a.default)(i.prototype),"setDimensions",this).call(this,e),this.drawBorder(),this.drawLabel(),this.drawBackground(),this.setMask(this.position,this.dimensions)}},{key:"setMask",value:function(e,t){this.pMask.clear(),this.pMask.beginFill(),this.pMask.drawRect(e[0],e[1],t[0],t[1]),this.pMask.endFill()}},{key:"remove",value:function(){this.pBase.clear(),this.scene.removeChild(this.pBase)}},{key:"drawBorder",value:function(){var e=this.pBorder;if(e.clear(),this.options&&this.options.trackBorderWidth){var t=(0,v.colorToHex)(this.options.trackBorderColor?this.options.trackBorderColor:"white");e.lineStyle(this.options.trackBorderWidth,t),e.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}}},{key:"drawError",value:function(){if(this.errorText.x=this.position[0]+this.dimensions[0]/2,this.errorText.y=this.position[1]+this.dimensions[1]/2,this.errorText.text=this.errorTextText,this.errorTextText&&this.errorTextText.length){var e=this.pBorder;e.clear(),e.lineStyle(1,(0,v.colorToHex)("red")),e.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}}},{key:"drawBackground",value:function(){var e=this.pBackground;if(e.clear(),this.options&&this.options.backgroundColor){var t=1,n=this.options.backgroundColor;"transparent"==this.options.backgroundColor&&(t=0,n="white");var r=(0,v.colorToHex)(n);e.beginFill(r,t),e.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}}},{key:"drawLabel",value:function(){if(this.labelText){var e=this.pLabel;if(e.clear(),this.options&&this.options.labelPosition){e.beginFill((0,v.colorToHex)(this.options.labelBackgroundColor||"white"),+this.options.labelBackgroundOpacity||.5);var t=(0,v.colorToHex)(this.options.labelColor||"black");if(!(this.dimensions[0]<0)){var n=this.tilesetInfo&&this.tilesetInfo.coordSystem?String(this.tilesetInfo.coordSystem)+" | ":"";if(n+=this.options.name?this.options.name:this.tilesetInfo?this.tilesetInfo.name:"",this.tilesetInfo&&this.tilesetInfo.max_width&&this.tilesetInfo.bins_per_dimension){var r=function(e,t,n,r){var i=t/(Math.pow(2,e)*n);if(!isNaN(i)){var o=t/(Math.pow(2,r)*n),a=(0,f.precisionPrefix)(o,i);return(0,f.formatPrefix)("."+String(a),i)(i)}return console.warn("NaN resolution, screen is probably too small. Dimensions:",this.dimensions),""}(this.calculateZoomLevel(),this.tilesetInfo.max_width,this.tilesetInfo.bins_per_dimension,this.tilesetInfo.max_zoom);n+="\n[Current data resolution: "+String(r)+"]"}else if(this.tilesetInfo&&this.tilesetInfo.resolutions){var i=g(this.tilesetInfo.resolutions,this.calculateZoomLevel());n+="\n[Current data resolution: "+String(i)+"]"}if(this.options&&this.options.dataTransform){var o=null;if(this.tilesetInfo&&this.tilesetInfo.transforms){var a=!0,s=!1,l=void 0;try{for(var u,c=(0,h.default)(this.tilesetInfo.transforms);!(a=(u=c.next()).done);a=!0){var d=u.value;d.value===this.options.dataTransform&&(o=d)}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}}o?n+="\n[Transform: "+String(o.name)+"]":"None"===this.options.dataTransform?n+="\n[Transform: None ]":n+="\n[Transform: Default ]"}this.labelText.text=n,this.labelText.style={fontSize:String(this.labelTextFontSize)+"px",fontFamily:this.labelTextFontFamily,fill:t},this.labelText.alpha=void 0!==this.options.labelTextOpacity?this.options.labelTextOpacity:1,this.labelText.visible=!0,this.flipText&&(this.labelText.scale.x=-1),"topLeft"===this.options.labelPosition?(this.labelText.x=this.position[0],this.labelText.y=this.position[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=0,this.labelText.x+=this.labelText.width/2,e.drawRect(this.position[0],this.position[1],this.labelText.width+2,this.labelText.height+2)):"bottomLeft"===this.options.labelPosition&&!this.flipText||"topRight"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0],this.labelText.y=this.position[1]+this.dimensions[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=1,this.labelText.x+=this.labelText.width/2,e.drawRect(this.position[0],this.position[1]+this.dimensions[1]-this.labelText.height-2,this.labelText.width+2,this.labelText.height+2)):"topRight"===this.options.labelPosition&&!this.flipText||"bottomLeft"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0],this.labelText.y=this.position[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=0,this.labelText.x-=this.labelText.width/2,e.drawRect(this.position[0]+this.dimensions[0]-this.labelText.width-2,this.position[1],this.labelText.width+2,this.labelText.height+2)):"bottomRight"===this.options.labelPosition?(this.labelText.x=this.position[0]+this.dimensions[0],this.labelText.y=this.position[1]+this.dimensions[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=1,this.labelText.x-=this.labelText.width/2,e.drawRect(this.position[0]+this.dimensions[0]-this.labelText.width-2,this.position[1]+this.dimensions[1]-this.labelText.height-2,this.labelText.width+2,this.labelText.height+2)):"outerLeft"===this.options.labelPosition&&!this.flipText||"outerTop"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0],this.labelText.y=this.position[1]+this.dimensions[1]/2,this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.x-=this.labelText.width/2+3):"outerTop"===this.options.labelPosition&&!this.flipText||"outerLeft"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]/2,this.labelText.y=this.position[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.y-=this.labelText.height/2+3):"outerBottom"===this.options.labelPosition&&!this.flipText||"outerRight"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]/2,this.labelText.y=this.position[1]+this.dimensions[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.y+=this.labelText.height/2+3):"outerRight"==this.options.labelPosition&&!this.flipText||"outerBottom"==this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0],this.labelText.y=this.position[1]+this.dimensions[1]/2,this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.x+=this.labelText.width/2+3):this.labelText.visible=!1,"outerLeft"==this.options.labelPosition||"outerRight"==this.options.labelPosition||"outerTop"==this.options.labelPosition||"outerBottom"==this.options.labelPosition?this.pLabel.setParent(this.pBase):this.pLabel.setParent(this.pMasked)}}else this.labelText.opacity=0}}},{key:"rerender",value:function(e){this.options=e,this.draw(),this.drawBackground(),this.drawLabel(),this.drawBorder()}},{key:"draw",value:function(){}},{key:"exportSVG",value:function(){var e=document.createElement("g"),t=document.createElement("g");t.setAttribute("class","g-clipped"),e.appendChild(t);var n=document.createElement("g");t.setAttribute("class","g-track"),t.appendChild(n);var r=document.createElement("g");t.setAttribute("class","g-labels"),t.appendChild(r);var i=document.createElementNS("http://www.w3.org/2000/svg","clipPath");e.appendChild(i);var o=document.createElementNS("http://www.w3.org/2000/svg","polygon");i.appendChild(o),o.setAttribute("points",String(this.position[0])+","+String(this.position[1])+" "+String(this.position[0]+this.dimensions[0])+","+String(this.position[1])+" "+String(this.position[0]+this.dimensions[0])+","+String(this.position[1]+this.dimensions[1])+" "+String(this.position[0])+","+String(this.position[1]+this.dimensions[1])+" ");var a=p.default.nice();i.setAttribute("id",a),t.setAttribute("style","clip-path:url(#"+String(a)+");");var s=this.labelText.text.split("\n"),l=0,u=(this.labelTextFontSize+2)*s.length+3;.5==this.labelText.anchor.y?l=u/2:1==this.labelText.anchor.y&&(l=-u);for(var c=0;c<s.length;c++){var d=document.createElement("text");if(d.setAttribute("font-family",this.labelTextFontFamily),d.setAttribute("font-size",String(this.labelTextFontSize)+"px"),d.innerText=s[c],"topLeft"===this.options.labelPosition||"topRight"===this.options.labelPosition){var h=l+(c+1)*(this.labelTextFontSize+2);d.setAttribute("dy",h)}else"bottomLeft"!==this.options.labelPosition&&"bottomRight"!==this.options.labelPosition||d.setAttribute("dy",l+c*(this.labelTextFontSize+2));d.setAttribute("fill",this.options.labelColor),.5==this.labelText.anchor.x?d.setAttribute("text-anchor","middle"):1==this.labelText.anchor.x&&d.setAttribute("text-anchor","end"),r.appendChild(d)}return r.setAttribute("transform","translate("+String(this.labelText.x)+","+String(this.labelText.y)+")scale("+String(this.labelText.scale.x)+",1)"),[e,n]}}]),i}(i.default);t.default=y},function(e,t,n){var r=n(216),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.red=void 0;var i=r(n(593)),s=r(n(595));function r(e){return e&&e.__esModule?e:{default:e}}t.default={simpleCheckForValidColor:function(t){var n=0,r=0;return(0,i.default)(["r","g","b","a","h","s","l","v"],function(e){if(t[e]&&(n+=1,isNaN(t[e])||(r+=1),"s"===e||"l"===e)){/^\d+%$/.test(t[e])&&(r+=1)}}),n===r&&t},toState:function(e,t){var n=e.hex?(0,s.default)(e.hex):(0,s.default)(e),r=n.toHsl(),i=n.toHsv(),o=n.toRgb(),a=n.toHex();return 0===r.s&&(r.h=t||0,i.h=t||0),{hsl:r,hex:"000000"===a&&0===o.a?"transparent":"#"+a,rgb:o,hsv:i,oldHue:e.h||t||r.h,source:e.source}},isValidHex:function(e){var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&(0,s.default)(e).isValid()},getContrastingColor:function(e){if(!e)return"#fff";var t=this.toState(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":128<=(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3?"#000":"#fff"}};t.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseChromsizesRows=s;var o=n(100),a=n(9);function s(e){for(var t=[],n={},r={},i=0,o=0;o<e.length;o++){var a=Number(e[o][1]);i+=a;var s={id:o,chr:e[o][0],pos:i-a};t.push(s),r[s.chr]=s,n[e[o][0]]=a}return{cumPositions:t,chrPositions:r,totalLength:i,chromLengths:n}}t.default=function(r,i){a.tileProxy.text(r,function(e,t){e&&(console.warn("Chromosome info not found at:",r),i(null));var n=s((0,o.tsvParseRows)(t));i(n)})}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){e.exports={default:n(363),__esModule:!0}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(8)),i=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}n(49);var a=function(t){return i.default.createElement("div",{"data-menu-item-for":"string"==typeof t.children?t.children:null,onClick:function(e){return t.onClick(e)},onMouseEnter:function(e){return t.onMouseEnter(e)},onMouseLeave:function(e){return t.onMouseLeave(e)},role:"button",className:"ContextMenu-module_context-menu-item-1HeVv",tabIndex:0},i.default.createElement("span",{className:"ContextMenu-module_context-menu-span-8EUfZ"},t.children))};a.defaultProps={onMouseEnter:function(){},onMouseLeave:function(){}},a.propTypes={children:r.default.node.isRequired,onClick:r.default.func.isRequired,onMouseEnter:r.default.func,onMouseLeave:r.default.func},t.default=a},function(e,t){e.exports={"context-menu":"ContextMenu-module_context-menu-2OwvL","context-menu-dark":"ContextMenu-module_context-menu-dark-2PO31","context-menu-icon":"ContextMenu-module_context-menu-icon-I4kiw","context-menu-item":"ContextMenu-module_context-menu-item-1HeVv","context-menu-hr":"ContextMenu-module_context-menu-hr-3yapb","play-icon":"ContextMenu-module_play-icon-R4pIO","context-menu-span":"ContextMenu-module_context-menu-span-8EUfZ","context-menu-thumbnail":"ContextMenu-module_context-menu-thumbnail-2vHLD","context-menu-thumbnail-inline":"ContextMenu-module_context-menu-thumbnail-inline-1iOcg"}},function(e,t,n){"use strict";var r=n(127)(!0);n(70)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(103),i=n(76);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(25).f,i=n(33),o=n(16)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(60);e.exports=function(e){return Object(r(e))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getValueScale=void 0;var r=C(n(80)),i=C(n(81)),o=C(n(195)),a=C(n(40)),f=C(n(37)),l=C(n(24)),p=C(n(22)),u=C(n(3)),c=C(n(1)),d=C(n(2)),h=C(n(4)),v=C(n(10)),m=C(n(5)),g=n(20),y=n(!function(){var e=new Error('Cannot find module "d3-array"');throw e.code="MODULE_NOT_FOUND",e}()),b=C(n(21)),w=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),x=n(44),_=C(n(198)),s=C(n(41)),k=n(9),S=n(6),T=n(12);function C(e){return e&&e.__esModule?e:{default:e}}t.getValueScale=function(e,t,n,r,i){var o=e||i;return"log"==o&&0<t?["log",(0,g.scaleLog)().range([254,0]).domain([t+0,r+0])]:["linear",(0,g.scaleLinear)().range([254,0]).domain([t,r])]};var O=function(e){function s(e,t,n,r,i,o){(0,c.default)(this,s);var a=(0,h.default)(this,(s.__proto__||(0,u.default)(s)).call(this,e,r));return a.renderVersion=1,a.visibleTiles=new p.default,a.visibleTileIds=new p.default,a.renderingTiles=new p.default,a.fetching=new p.default,a.scale={},a.fetchedTiles={},a.tileGraphics={},a.maxZoom=0,a.medianVisibleValue=null,a.animate=i,a.onValueScaleChanged=o,a.prevValueScale=null,a.dataFetcher=new _.default(t),a.dataFetcher.tilesetInfo(function(e){if(a.tilesetInfo=e,a.tilesetInfo.chromsizes&&(a.chromInfo=(0,x.parseChromsizesRows)(a.tilesetInfo.chromsizes)),"error"in a.tilesetInfo)return console.warn("Error retrieving tilesetInfo:",t,a.tilesetInfo.error),a.trackNotFoundText="",a.errorTextText=a.tilesetInfo.error,a.tilesetInfo=null,a.draw(),void a.animate();a.tilesetInfo.resolutions?a.maxZoom=a.tilesetInfo.resolutions.length:a.maxZoom=+a.tilesetInfo.max_zoom,a.options&&a.options.maxZoom&&(0<=a.options.maxZoom?a.maxZoom=Math.min(a.options.maxZoom,a.maxZoom):console.error("Invalid maxZoom on track:",a)),a.refreshTiles(),n&&n(e),a.options||(a.options={}),a.options.name=a.options.name?a.options.name:e.name,a.draw(),a.drawLabel(),a.animate()}),a.uuid=b.default.nice(),a.refreshTilesDebounced=(0,S.debounce)(a.refreshTiles.bind(a),T.ZOOM_DEBOUNCE),a.trackNotFoundText=new w.Text("",{fontSize:"12px",fontFamily:"Arial",fill:"black"}),a.pLabel.addChild(a.trackNotFoundText),a}return(0,m.default)(s,e),(0,d.default)(s,[{key:"rerender",value:function(e){(0,v.default)(s.prototype.__proto__||(0,u.default)(s.prototype),"rerender",this).call(this,e),this.renderVersion+=1,this.tilesetInfo&&(this.tilesetInfo.resolutions?this.maxZoom=this.tilesetInfo.resolutions.length:this.maxZoom=+this.tilesetInfo.max_zoom,this.options&&this.options.maxZoom&&(0<=this.options.maxZoom?this.maxZoom=Math.min(this.options.maxZoom,this.maxZoom):console.error("Invalid maxZoom on track:",this)))}},{key:"visibleAndFetchedIds",value:function(){var t=this;return(0,l.default)(this.fetchedTiles).filter(function(e){return t.visibleTileIds.has(e)})}},{key:"visibleAndFetchedTiles",value:function(){var t=this;return this.visibleAndFetchedIds().map(function(e){return t.fetchedTiles[e]})}},{key:"setVisibleTiles",value:function(e){var t=this;this.visibleTiles=e.map(function(e){return{tileId:t.tileToLocalId(e),remoteId:t.tileToRemoteId(e),mirrored:e.mirrored}}),this.visibleTileIds=new p.default(this.visibleTiles.map(function(e){return e.tileId}))}},{key:"removeOldTiles",value:function(){var t=this;this.calculateVisibleTiles();var e=new p.default((0,l.default)(this.fetchedTiles)),n=[].concat((0,f.default)(e)).filter(function(e){return!t.visibleTileIds.has(e)});this.removeTiles(n)}},{key:"refreshTiles",value:function(){var t=this;if(this.tilesetInfo){this.calculateVisibleTiles();for(var n=new p.default((0,l.default)(this.fetchedTiles)),e=[].concat((0,f.default)(this.visibleTiles)).filter(function(e){return!t.fetching.has(e.remoteId)&&!n.has(e.tileId)}),r=0;r<e.length;r++)this.fetching.add(e[r].remoteId);this.removeOldTiles(),this.fetchNewTiles(e)}}},{key:"parentInFetched",value:function(e){for(var t=e.tileData.tilesetUid,n=e.tileData.zoomLevel,r=e.tileData.tilePos;0<n;)if(n-=1,r=r.map(function(e){return Math.floor(e/2)}),String(t)+"."+String(n)+"."+String(r.join("."))in this.fetchedTiles)return!0;return!1}},{key:"parentTileId",value:function(e){var t=e.tileData.zoomLevel-1,n=e.tileData.tilePos.map(function(e){return Math.floor(e/2)}),r=e.tileData.tilesetUid;return String(r)+"."+t+"."+String(n.join("."))}},{key:"removeTiles",value:function(e){var n=this;e.length&&this.areAllVisibleTilesLoaded()&&!this.renderingTiles.size&&(e.forEach(function(e){var t=e;n.destroyTile(n.fetchedTiles[t]),t in n.tileGraphics&&(n.pMain.removeChild(n.tileGraphics[t]),delete n.tileGraphics[t]),delete n.fetchedTiles[t]}),this.synchronizeTilesAndGraphics(),this.draw())}},{key:"zoomed",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;4<arguments.length&&void 0!==arguments[4]&&arguments[4],this.xScale(e),this.yScale(t),this.refreshTilesDebounced(),this.pMobile.position.x=r,this.pMobile.position.y=this.position[1],this.pMobile.scale.x=n,this.pMobile.scale.y=1}},{key:"setPosition",value:function(e){(0,v.default)(s.prototype.__proto__||(0,u.default)(s.prototype),"setPosition",this).call(this,e)}},{key:"setDimensions",value:function(e){(0,v.default)(s.prototype.__proto__||(0,u.default)(s.prototype),"setDimensions",this).call(this,e)}},{key:"areAllVisibleTilesLoaded",value:function(){for(var e=new p.default((0,l.default)(this.fetchedTiles)),t=[].concat((0,f.default)(this.visibleTileIds)),n=0;n<t.length;n++)if(!e.has(t[n]))return!1;return!0}},{key:"allTilesLoaded",value:function(){}},{key:"minValue",value:function(e){if(!e)return this.scale.minValue;this.scale.minValue=e}},{key:"maxValue",value:function(e){if(!e)return this.scale.maxValue;this.scale.maxValue=e}},{key:"minRawValue",value:function(){return this.scale.minRawValue}},{key:"maxRawValue",value:function(){return this.scale.maxRawValue}},{key:"initTile",value:function(e){this.scale.minRawValue=this.minVisibleValue(),this.scale.maxRawValue=this.maxVisibleValue(),this.scale.minValue=this.scale.minRawValue,this.scale.maxValue=this.scale.maxRawValue}},{key:"updateTile",value:function(e){}},{key:"destroyTile",value:function(e){}},{key:"addMissingGraphics",value:function(){var e=(0,l.default)(this.fetchedTiles);this.renderVersion+=1;for(var t=0;t<e.length;t++)if(!(e[t]in this.tileGraphics)){var n=new w.Graphics;this.pMain.addChild(n),this.fetchedTiles[e[t]].graphics=n,this.initTile(this.fetchedTiles[e[t]]),this.tileGraphics[e[t]]=n}}},{key:"updateExistingGraphics",value:function(){for(var e=(0,l.default)(this.fetchedTiles),t=0;t<e.length;t++)this.updateTile(this.fetchedTiles[e[t]])}},{key:"synchronizeTilesAndGraphics",value:function(){this.addMissingGraphics(),this.updateExistingGraphics(),this.removeOldTiles()}},{key:"loadTileData",value:function(e,t){var n=this.lruCache.get(e.tileId);return n||(n=t(e.data,e.type),this.lruCache.put(e.tileId,n)),n}},{key:"fetchNewTiles",value:function(e){if(0<e.length){var t=[].concat((0,f.default)(new p.default(e.map(function(e){return e.remoteId}))));this.dataFetcher.fetchTilesDebounced(this.receivedTiles.bind(this),t)}}},{key:"receivedTiles",value:function(e){for(var t=0;t<this.visibleTiles.length;t++){var n=this.visibleTiles[t].tileId;e[this.visibleTiles[t].remoteId]&&this.visibleTiles[t].remoteId in e&&(n in this.fetchedTiles||(this.fetchedTiles[n]=this.visibleTiles[t]),this.fetchedTiles[n].tileData=e[this.visibleTiles[t].remoteId],this.fetchedTiles[n].tileData.error&&console.warn("Error in loaded tile",n,this.fetchedTiles[n].tileData))}for(var r in new p.default((0,l.default)(this.fetchedTiles)),e)if(e[r]){var i=e[r].tilePositionId;this.fetching.has(i)&&this.fetching.delete(i)}this.synchronizeTilesAndGraphics(),this.draw(),this.drawLabel(),this.valueScale&&(this.prevValueScale&&(0,a.default)(this.valueScale.domain())==(0,a.default)(this.prevValueScale.domain())||(this.prevValueScale=this.valueScale.copy(),this.onValueScaleChanged&&this.onValueScaleChanged())),this.animate(),this.areAllVisibleTilesLoaded()&&k.pubSub.publish("TiledPixiTrack.tilesLoaded",{uuid:this.uuid})}},{key:"draw",value:function(){var t=this;this.delayDrawing||(this.tilesetInfo?this.trackNotFoundText.visible=!1:(this.dataFetcher.tilesetInfoLoading?this.trackNotFoundText.text="Loading...":this.trackNotFoundText.text="Tileset info not found. Server: ["+String(this.server)+"] tilesetUid: ["+String(this.tilesetUid)+"]",this.trackNotFoundText.x=this.position[0],this.trackNotFoundText.y=this.position[1],this.trackNotFoundText.visible=!0),k.pubSub.publish("TiledPixiTrack.tilesDrawnStart",{uuid:this.uuid}),(0,v.default)(s.prototype.__proto__||(0,u.default)(s.prototype),"draw",this).call(this),(0,l.default)(this.fetchedTiles).forEach(function(e){return t.drawTile(t.fetchedTiles[e])}),k.pubSub.publish("TiledPixiTrack.tilesDrawnEnd",{uuid:this.uuid}))}},{key:"drawTile",value:function(e,t){}},{key:"calculateMedianVisibleValue",value:function(){var t=this;this.areAllVisibleTilesLoaded()&&this.allTilesLoaded();var e=this.visibleAndFetchedIds();0===e.length&&(e=(0,l.default)(this.fetchedTiles));var n=[].concat.apply([],e.filter(function(e){return t.fetchedTiles[e].tileData.dense}).map(function(e){return(0,o.default)(t.fetchedTiles[e].tileData.dense)})).filter(function(e){return 0<e});return this.medianVisibleValue=(0,y.median)(n),this.medianVisibleValue}},{key:"allVisibleValues",value:function(){var t=this;return[].concat.apply([],this.visibleAndFetchedIds().map(function(e){return(0,o.default)(t.fetchedTiles[e].tileData.dense)}))}},{key:"minVisibleValue",value:function(){var t=this,e=this.visibleAndFetchedIds();0==e.length&&(e=(0,l.default)(this.fetchedTiles));var n=Math.min.apply(null,e.map(function(e){return t.fetchedTiles[e].tileData.minNonZero}).filter(function(e){return e}));return n===i.default&&(n=null),n}},{key:"maxVisibleValue",value:function(){var t=this,e=this.visibleAndFetchedIds();0===e.length&&(e=(0,l.default)(this.fetchedTiles));var n=Math.max.apply(null,e.map(function(e){return t.fetchedTiles[e].tileData.maxNonZero}).filter(function(e){return e}));return n===r.default&&(n=null),n}},{key:"makeValueScale",value:function(e,t,n,r){var i=null,o=0;if(null!=r&&void 0!==r||(r=6),"log"===this.options.valueScaling)(o=t)||(o=e),i=(0,g.scaleLog)().domain([o,n+o]).range([this.dimensions[1]-r,r]),pseudocount=o;else{if("quantile"===this.options.valueScaling){var a=this.dimensions[1]-r,s=r,l=(0,g.scaleQuantile)().domain(this.allVisibleValues()).range((0,y.range)(a,s,(s-a)/256));return l.ticks=function(e){return(0,y.ticks)(a,s,e)},[l,0]}if("setquantile"===this.options.valueScaling){var u=this.dimensions[1]-r,c=r,d=new p.default(this.allVisibleValues()),h=(0,g.scaleQuantile)().domain([].concat((0,f.default)(d))).range((0,y.range)(u,c,(c-u)/256));return h.ticks=function(e){return(0,y.ticks)(u,c,e)},[h,0]}i=(0,g.scaleLinear)().domain([e,n]).range([this.dimensions[1]-r,r])}return[i,o]}}]),s}(s.default);t.default=O},function(e,t,n){var r,i,o;i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i="__mixwith_appliedMixin",o=e.apply=function(e,t){var n=t(e);return n.prototype[i]=c(t),n},a=e.isApplicationOf=function(e,t){return e.hasOwnProperty(i)&&e[i]===c(t)},s=e.hasMixin=function(e,t){for(;null!=e;){if(a(e,t))return!0;e=Object.getPrototypeOf(e)}return!1},l="__mixwith_wrappedMixin",u=e.wrap=function(e,t){return Object.setPrototypeOf(t,e),e[l]||(e[l]=e),t},c=e.unwrap=function(e){return e[l]||e},d="__mixwith_cachedApplications",t=e.Cached=function(r){return u(r,function(e){var t=e[d];t||(t=e[d]=new Map);var n=t.get(r);return n||(n=r(e),t.set(r,n)),n})},h=e.DeDupe=function(t){return u(t,function(e){return s(e.prototype,t)?e:t(e)})},f=(e.HasInstance=function(t){return Symbol&&Symbol.hasInstance&&!t[Symbol.hasInstance]&&Object.defineProperty(t,Symbol.hasInstance,{value:function(e){return s(e,t)}}),t},e.BareMixin=function(t){return u(t,function(e){return o(e,t)})}),p=(e.Mixin=function(e){return h(t(f(e)))},e.mix=function(e){return new p(e)},function(){function t(e){n(this,t),this.superclass=e||function e(){n(this,e)}}return r(t,[{key:"with",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return t(e)},this.superclass)}}]),t}())})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r=n(169),i=n(113),o=n(236),a=n(32);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?r:n)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(75)("keys"),i=n(63);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){n(132);for(var r=n(17),i=n(30),o=n(39),a=n(16)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=r[u],d=c&&c.prototype;d&&!d[a]&&i(d,a,u),o[u]=o.Array}},function(dV,eV){var fV;fV=function(){return this}();try{fV=fV||Function("return this")()||eval("this")}catch(e){"object"==typeof window&&(fV=window)}dV.exports=fV},function(e,t,n){var r=n(400),i=n(405);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(83),i=n(401),o=n(402),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=p(n(46)),r=p(n(3)),i=p(n(1)),a=p(n(2)),s=p(n(4)),l=p(n(5)),u=p(n(31)),c=p(n(8)),d=p(n(0)),h=p(n(29)),f=n(9);function p(e){return e&&e.__esModule?e:{default:e}}n(49);var v={"../styles/ContextMenu.module.scss":{"context-menu":"ContextMenu-module_context-menu-2OwvL","context-menu-dark":"ContextMenu-module_context-menu-dark-2PO31","context-menu-icon":"ContextMenu-module_context-menu-icon-I4kiw","context-menu-item":"ContextMenu-module_context-menu-item-1HeVv","context-menu-hr":"ContextMenu-module_context-menu-hr-3yapb","play-icon":"ContextMenu-module_play-icon-R4pIO","context-menu-span":"ContextMenu-module_context-menu-span-8EUfZ","context-menu-thumbnail":"ContextMenu-module_context-menu-thumbnail-2vHLD","context-menu-thumbnail-inline":"ContextMenu-module_context-menu-thumbnail-inline-1iOcg"}},m=function(e){function n(e){(0,i.default)(this,n);var t=(0,s.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.adjusted=!1,t.state={orientation:t.props.orientation?t.props.orientation:"right",left:t.props.position.left,top:t.props.position.top,submenuShown:null},t}return(0,l.default)(n,e),(0,a.default)(n,[{key:"componentDidMount",value:function(){this.updateOrientation()}},{key:"componentWillReceiveProps",value:function(e){this.adjusted=!1,this.setState({left:e.position.left,top:e.position.top})}},{key:"componentDidUpdate",value:function(){this.updateOrientation()}},{key:"handleItemMouseEnterWithRect",value:function(e,t){this.setState({submenuShown:t,submenuSourceBbox:e})}},{key:"handleItemMouseEnter",value:function(e,t){this.handleItemMouseEnterWithRect(e.currentTarget.getBoundingClientRect(),t)}},{key:"handleMouseLeave",value:function(){}},{key:"handleOtherMouseEnter",value:function(){this.setState({submenuShown:null})}},{key:"updateOrientation",value:function(){if(!this.adjusted){this.adjusted=!0,this.divDom=h.default.findDOMNode(this.div);var e=this.divDom.getBoundingClientRect(),t=this.props.parentBbox?this.props.parentBbox:{top:this.props.position.top,left:this.props.position.left,width:0,height:0},n=this.state.orientation,r=t.top;if(t.top+e.height>window.innerHeight&&(0<t.top-e.height?r=t.top-e.height+20:(r=t.top-e.height+20,r-=r+e.height-window.innerHeight)),"left"===this.state.orientation){var i=t.left-e.width;i<0&&(t.left+t.width+e.width>window.innerWidth?i=0:(i=t.left+t.width,n="right")),this.setState({left:i,top:r,orientation:n})}else{var o=t.left+t.width;t.left+t.width+e.width>window.innerWidth&&(t.left-e.width<0?(o=0,n="right"):(o=t.left-e.width,n="left")),this.setState({left:o,top:r,orientation:n})}}}},{key:"render",value:function(){var t=this,e=this.state.left?{left:this.state.left}:{right:this.state.right},n={top:this.state.top},r=(0,o.default)(e,n),i="context-menu";return(0,f.getDarkTheme)()&&(i+=" context-menu-dark"),d.default.createElement("div",{ref:function(e){return t.div=e},style:r,className:"context-menu-item "+(0,u.default)(i,v)},this.props.children)}}]),n}(d.default.Component);m.propTypes={children:c.default.node,orientation:c.default.string,parentBbox:c.default.object,position:c.default.object},t.default=m},function(e,t,n){"use strict";var b=n(71),w=n(15),x=n(102),_=n(30),k=n(33),S=n(39),T=n(128),C=n(54),O=n(105),E=n(16)("iterator"),M=!([].keys&&"next"in[].keys()),P="values",A=function(){return this};e.exports=function(e,t,n,r,i,o,a){T(n,t,r);var s,l,u,c=function(e){if(!M&&e in p)return p[e];switch(e){case"keys":case P:return function(){return new n(this,e)}}return function(){return new n(this,e)}},d=t+" Iterator",h=i==P,f=!1,p=e.prototype,v=p[E]||p["@@iterator"]||i&&p[i],m=v||c(i),g=i?h?c("entries"):m:void 0,y="Array"==t&&p.entries||v;if(y&&(u=O(y.call(new e)))!==Object.prototype&&u.next&&(C(u,d,!0),b||k(u,E)||_(u,E,A)),h&&v&&v.name!==P&&(f=!0,m=function(){return v.call(this)}),b&&!a||!M&&!f&&p[E]||_(p,E,m),S[t]=m,S[d]=A,i)if(s={values:h?m:c(P),keys:o?m:c("keys"),entries:g},a)for(l in s)l in p||x(p,l,s[l]);else w(w.P+w.F*(M||f),t,s);return s}},function(e,t){e.exports=!0},function(e,t,n){var r=n(27),i=n(17).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,r){var i=r(26),o=r(129),a=r(76),s=r(62)("IE_PROTO"),l=function(){},u="prototype",c=function(){var e,t=r(72)("iframe"),n=a.length;for(t.style.display="none",r(104).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;n--;)delete c[u][a[n]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(l[u]=i(e),n=new l,l[u]=null,n[s]=e):n=c(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(59),i=Math.min;e.exports=function(e){return 0<e?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(17),i="__core-js_shared__",o=r[i]||(r[i]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(53),o=n(16)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;var r,i=n(79),o=(r=i)&&r.__esModule?r:{default:r};var a={__times:{}},s=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a;return function(e,t){if(r[e]){"object"===(void 0===e?"undefined":(0,o.default)(e))&&(t=(e=e.event).callback);var n=r[e].indexOf(t);r[e]&&(-1===n||n>=r[e].length||(r[e].splice(n,1),r.__times[e].splice(n,1)))}}},l=t.create=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a;return e.__times||(e.__times={}),{publish:function(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a;return function(n,r){if(o[n]){var i=s(a);o[n].forEach(function(e,t){e(r),(o.__times[n][t]-=1)||i(n,e)})}}}(e),subscribe:function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a;return function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1/0;return r[e]||(r[e]=[],r.__times[e]=[]),r[e].push(t),r.__times[e].push(parseInt(n,10)||1/0),{event:e,callback:t}}}(e),unsubscribe:s(e)}};t.default=l()},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(293)),i=a(n(295)),o="function"==typeof i.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===o(r.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t,n){e.exports={default:n(145),__esModule:!0}},function(e,t,n){e.exports={default:n(147),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayMove=t.sortableHandle=t.sortableElement=t.sortableContainer=t.SortableHandle=t.SortableElement=t.SortableContainer=void 0;var r=n(112);Object.defineProperty(t,"arrayMove",{enumerable:!0,get:function(){return r.arrayMove}});var i=s(n(384)),o=s(n(474)),a=s(n(475));function s(e){return e&&e.__esModule?e:{default:e}}t.SortableContainer=i.default,t.SortableElement=o.default,t.SortableHandle=a.default,t.sortableContainer=i.default,t.sortableElement=o.default,t.sortableHandle=a.default},function(e,t,n){var r=n(42).Symbol;e.exports=r},function(e,t,n){var r=n(226),i=n(432),o=n(85);e.exports=function(e){return o(e)?r(e):i(e)}},function(e,t,n){var r=n(215),i=n(166);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(3)),i=c(n(1)),o=c(n(2)),a=c(n(4)),s=c(n(5)),l=n(!function(){var e=new Error('Cannot find module "d3-selection"');throw e.code="MODULE_NOT_FOUND",e}()),u=c(n(21));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this));return t.gMain=(0,l.select)(e).append("g"),t.clipUid=u.default.nice(),t.clipRect=t.gMain.append("clipPath").attr("id","track-bounds-"+String(t.clipUid)).append("rect"),t.gMain.attr("clip-path","url(#track-bounds-"+String(t.clipUid)+")"),t}return(0,s.default)(n,e),(0,o.default)(n,[{key:"setPosition",value:function(e){this.position=e,this.gMain.attr("transform","translate("+String(this.position[0])+","+String(this.position[1])+")"),this.draw()}},{key:"setDimensions",value:function(e){this.dimensions=e,this._xScale.range([0,this.dimensions[0]]),this._yScale.range([0,this.dimensions[1]]),0<=e[0]&&0<=e[1]?(this.clipRect.attr("width",e[0]),this.clipRect.attr("height",e[1])):(this.clipRect.attr("width",0),this.clipRect.attr("height",0)),this.draw()}},{key:"remove",value:function(){this.gMain.remove(),this.gMain=null}},{key:"draw",value:function(){return this}}]),n}(c(n(109)).default);t.default=d},function(e,t,n){e.exports={default:n(286),__esModule:!0}},function(e,t,n){var i=n(27);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(53);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var h=n(38),f=n(179),p=n(180),v=n(26),m=n(74),g=n(91),y={},b={};(t=e.exports=function(e,t,n,r,i){var o,a,s,l,u=i?function(){return e}:g(e),c=h(n,r,t?2:1),d=0;if("function"!=typeof u)throw TypeError(e+" is not iterable!");if(p(u)){for(o=m(e.length);d<o;d++)if((l=t?c(v(a=e[d])[0],a[1]):c(e[d]))===y||l===b)return l}else for(s=u.call(e);!(a=s.next()).done;)if((l=f(s,c,a.value,t))===y||l===b)return l}).BREAK=y,t.RETURN=b},function(e,t,n){var r=n(77),i=n(16)("iterator"),o=n(39);e.exports=n(13).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var b=a(n(23)),w=a(n(11)),x=a(n(3)),s=a(n(1)),r=a(n(2)),l=a(n(4)),_=a(n(10)),i=a(n(5)),f=n(36),g=n(20),o=a(n(94)),k=n(6),p=n(9);function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function y(e,t,n,r,i,o){var a;return(0,s.default)(this,y),a=(0,l.default)(this,(y.__proto__||(0,x.default)(y)).call(this,e,t,n,r,i,function(){a.drawAxis(a.valueScale),o()}))}return(0,i.default)(y,e),(0,r.default)(y,[{key:"stopHover",value:function(){this.pMouseOver.clear(),this.animate()}},{key:"getMouseOverHtml",value:function(e,t){if(this.tilesetInfo){var n=this.calculateZoomLevel(),r=p.tileProxy.calculateTileWidth(this.tilesetInfo,n,this.tilesetInfo.tile_size),i=this._xScale.invert(e)/r,o=this.tileToLocalId([n,Math.floor(i)]),a=this.fetchedTiles[o];if(!a)return"";var s=a.tileData.dense.length*(i-Math.floor(i)),l="",u="";if(!a)return"";var c=Math.floor(s);l=a.tileData.dense[c],u=(0,f.format)(".3f")(l);var d=this.pMouseOver,h=this.valueScale(l);return d.clear(),d.beginFill(0,.5),d.lineStyle(1,0,1),d.drawRect(e-2,h-2,4,4),this.animate(),""+String(u)}}},{key:"initTile",value:function(e){(0,_.default)(y.prototype.__proto__||(0,x.default)(y.prototype),"initTile",this).call(this,e),e.tileData&&e.tileData.dense?(e.lineXValues=new Array(e.tileData.dense.length),e.lineYValues=new Array(e.tileData.dense.length),this.drawTile(e)):console.warn("emptyTile:",e)}},{key:"rerender",value:function(e){this.options=e,(0,_.default)(y.prototype.__proto__||(0,x.default)(y.prototype),"draw",this).call(this);var t=!0,n=!1,r=void 0;try{for(var i,o=(0,w.default)(this.visibleAndFetchedTiles());!(t=(i=o.next()).done);t=!0){var a=i.value;this.renderTile(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"renderTile",value:function(e){this.drawTile(e),this.drawAxis(this.valueScale)}},{key:"drawTile",value:function(e){if((0,_.default)(y.prototype.__proto__||(0,x.default)(y.prototype),"drawTile",this).call(this,e),e.graphics&&e.tileData&&e.tileData.dense){var t=e.graphics,n=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),r=n.tileX,i=n.tileWidth,o=e.tileData.dense;if(0!==o.length){var a=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue()),s=(0,b.default)(a,2),l=s[0],u=s[1];if(this.valueScale=l,t.clear(),"log"===this.options.valueScaling&&this.valueScale.domain()[1]<0)console.warn("Negative values present when using a log scale",this.valueScale.domain());else{var c=(0,k.colorToHex)(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),d=(0,g.scaleLinear)().domain([0,this.tilesetInfo.tile_size]).range([r,r+i]),h=this.options.lineStrokeWidth?this.options.lineStrokeWidth:1;t.lineStyle(h,c,1);for(var f="log"===this.options.valueScaling,p=0;p<o.length;p++){var v=this._xScale(d(p)),m=this.valueScale(o[p]+u);if(e.lineXValues[p]=v,e.lineYValues[p]=m,0!==p){if(d(p)>this.tilesetInfo.max_pos[0])break;f&&0===o[p]?t.moveTo(v,m):t.lineTo(v,m)}else t.moveTo(v,m)}}}}}},{key:"setPosition",value:function(e){(0,_.default)(y.prototype.__proto__||(0,x.default)(y.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0],this.pMouseOver.position.y=this.position[1],this.pMouseOver.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw()}},{key:"superSVG",value:function(){return(0,_.default)(y.prototype.__proto__||(0,x.default)(y.prototype),"exportSVG",this).call(this)}},{key:"exportSVG",value:function(){var e=null,t=null;if((0,_.default)(y.prototype.__proto__||(0,x.default)(y.prototype),"exportSVG",this)){var n=(0,_.default)(y.prototype.__proto__||(0,x.default)(y.prototype),"exportSVG",this).call(this),r=(0,b.default)(n,2);t=r[0],e=r[1]}else e=t=document.createElement("g");t.setAttribute("class","exported-line-track");var i=document.createElement("g");e.appendChild(i),i.setAttribute("transform","translate("+String(this.position[0])+","+String(this.position[1])+")");var o=this.options.lineStrokeColor?this.options.lineStrokeColor:"blue",a=!0,s=!1,l=void 0;try{for(var u,c=(0,w.default)(this.visibleAndFetchedTiles());!(a=(u=c.next()).done);a=!0){var d=u.value,h=document.createElement("path");h.setAttribute("fill","transparent"),h.setAttribute("stroke",o);for(var f="M"+String(d.lineXValues[0])+" "+String(d.lineYValues[0]),p=0;p<d.lineXValues.length;p++)f+="L"+String(d.lineXValues[p])+" "+String(d.lineYValues[p]);h.setAttribute("d",f),i.appendChild(h)}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}var v=document.createElement("g");if(v.setAttribute("id","axis"),t.appendChild(v),v.setAttribute("transform","translate("+String(this.axis.pAxis.position.x)+", "+String(this.axis.pAxis.position.y)+")"),"left"===this.options.axisPositionHorizontal||"top"===this.options.axisPositionVertical){var m=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);v.appendChild(m)}else if("right"===this.options.axisPositionHorizontal||"bottom"===this.options.axisPositionVertical){var g=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);v.appendChild(g)}return[t,e]}}]),y}(o.default);t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(40)),l=p(n(3)),u=p(n(1)),i=p(n(2)),c=p(n(4)),o=p(n(10)),a=p(n(5)),s=p(n(151)),d=p(n(152)),h=n(9),f=n(6);function p(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function s(e,t,n,r,i,o){(0,u.default)(this,s);var a=(0,c.default)(this,(s.__proto__||(0,l.default)(s)).call(this,e,t,n,r,i,o));return a.axis=new d.default(a),a.pBase.addChild(a.axis.pAxis),a.animate=i,a.options=r,a.pubSubs=[],a.options.showMousePosition&&!a.hideMousePosition&&(a.hideMousePosition=(0,f.showMousePosition)(a,a.is2d)),a}return(0,a.default)(s,e),(0,i.default)(s,[{key:"rerender",value:function(e,t){var n=(0,r.default)(e);(t||n!==this.prevOptions)&&((0,o.default)(s.prototype.__proto__||(0,l.default)(s.prototype),"rerender",this).call(this,e,t),this.prevOptions=n,this.options=e,this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=(0,f.showMousePosition)(this)),!this.options.showMousePosition&&this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0))}},{key:"calculateZoomLevel",value:function(){if(this.tilesetInfo.resolutions)return h.tileProxy.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]-2);var e=h.tileProxy.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),t=Math.min(e,this.maxZoom);return t=Math.max(t,0)}},{key:"relevantScale",value:function(){return this._xScale}},{key:"drawAxis",value:function(e){this.options.axisPositionVertical||this.options.axisPositionHorizontal?this.options.axisPositionVertical&&"hidden"===this.options.axisPositionVertical?this.axis.clearAxis():this.options.axisPositionHorizontal&&"hidden"===this.options.axisPositionHorizontal?this.axis.clearAxis():"left"===this.options.axisPositionHorizontal||"top"===this.options.axisPositionVertical?(this.axis.pAxis.position.x=this.position[0],this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisRight(e,this.dimensions[1])):"outsideLeft"===this.options.axisPositionHorizontal||"outsideTop"===this.options.axisPositionVertical?(this.axis.pAxis.position.x=this.position[0],this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisLeft(e,this.dimensions[1])):"right"===this.options.axisPositionHorizontal||"bottom"===this.options.axisPositionVertical?(this.axis.pAxis.position.x=this.position[0]+this.dimensions[0],this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisLeft(e,this.dimensions[1])):"outsideRight"!==this.options.axisPositionHorizontal&&"outsideBottom"!==this.options.axisPositionVertical||(this.axis.pAxis.position.x=this.position[0]+this.dimensions[0],this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisRight(e,this.dimensions[1])):this.axis.clearAxis()}}]),s}(s.default);t.default=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var m=a(n(11)),g=a(n(23)),c=a(n(40)),y=a(n(3)),d=a(n(1)),r=a(n(2)),h=a(n(4)),b=a(n(10)),i=a(n(5)),u=n(!function(){var e=new Error('Cannot find module "d3-brush"');throw e.code="MODULE_NOT_FOUND",e}()),w=n(!function(){var e=new Error('Cannot find module "d3-array"');throw e.code="MODULE_NOT_FOUND",e}()),f=n(36),p=n(20),x=n(!function(){var e=new Error('Cannot find module "d3-selection"');throw e.code="MODULE_NOT_FOUND",e}()),_=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),l=n(56),o=a(l),k=a(n(152)),S=n(9),T=n(6),C=n(12);function a(e){return e&&e.__esModule?e:{default:e}}var O=256,s=function(e){function v(e,t,n,r,i,o,a,s,l){(0,d.default)(this,v);var u=(0,h.default)(this,(v.__proto__||(0,y.default)(v)).call(this,e,t,n,r,i,function(){u.drawColorbar(),a()}));return u.is2d=!0,u.animate=i,u.mirrorTiles=!0,u.onTrackOptionsChanged=s,u.pColorbarArea=new _.Graphics,u.pMasked.addChild(u.pColorbarArea),u.pColorbar=new _.Graphics,u.pColorbarArea.addChild(u.pColorbar),u.axis=new k.default(u),u.pColorbarArea.addChild(u.axis.pAxis),u.colorScale=C.HEATED_OBJECT_MAP,r&&r.colorRange&&(u.colorScale=(0,T.colorDomainToRgbaArray)(r.colorRange)),u.gBase=(0,x.select)(o).append("g"),u.gMain=u.gBase.append("g"),u.gColorscaleBrush=u.gMain.append("g"),u.brushing=!1,u.prevOptions="",u.onMouseMoveZoom=l,u.setDataLensSize(11),u.dataLens=new Float32Array(Math.pow(u.dataLensSize,2)),u.onMouseMoveZoom&&u.pubSubs.push(S.pubSub.subscribe("app.mouseMove",u.mouseMoveHandler.bind(u))),u.options.showMousePosition&&!u.hideMousePosition&&(u.hideMousePosition=(0,T.showMousePosition)(u,u.is2d)),u.prevOptions=(0,c.default)(r),u}return(0,i.default)(v,e),(0,r.default)(v,[{key:"mouseMoveHandler",value:function(e){this.isWithin(e.x,e.y)&&(this.mouseX=e.x,this.mouseY=e.y,this.mouseMoveZoomHandler())}},{key:"mouseMoveZoomHandler",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.mouseX,t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.mouseY;if(2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.zoomLevel,void 0!==e&&void 0!==n&&this.areAllVisibleTilesLoaded()&&this.tilesetInfo){var r=e-this.position[0],i=n-this.position[1],o=this.getVisibleData(r,i),a=this.dataLensSize,s=void 0;try{s=(0,T.valueToColor)(this.limitedValueScale,this.colorScale,this.valueScale.domain()[0])}catch(e){}if(o.length&&s){var l=[Math.round(this._xScale.invert(r)),Math.round(this._yScale.invert(i))],u=[Math.round(this._xScale.invert(r-this.dataLensLPad)),Math.round(this._xScale.invert(r+this.dataLensRPad))],c=[Math.round(this._yScale.invert(i-this.dataLensLPad)),Math.round(this._yScale.invert(i+this.dataLensRPad))];this.chromInfo&&(l=l.map(function(e){return(0,T.absToChr)(e,t.chromInfo).slice(0,2)}),u=u.map(function(e){return(0,T.absToChr)(e,t.chromInfo).slice(0,2)}),c=c.map(function(e){return(0,T.absToChr)(e,t.chromInfo).slice(0,2)})),this.onMouseMoveZoom({data:o,dim:a,toRgb:s,center:l,xRange:u,yRange:c,rel:!!this.chromInfo})}}}},{key:"getAbsTileDim",value:function(e,t,n){var r=this.getTilePosAndDimensions(e,t),i=r.tileX,o=r.tileY,a=r.tileWidth,s=r.tileHeight,l={};return l.width=this._refXScale(i+a)-this._refXScale(i),l.height=this._refYScale(o+s)-this._refYScale(o),n?(l.x=this._refXScale(o),l.y=this._refYScale(i)):(l.x=this._refXScale(i),l.y=this._refYScale(o)),l}},{key:"setPosition",value:function(e){(0,b.default)(v.prototype.__proto__||(0,y.default)(v.prototype),"setPosition",this).call(this,e)}},{key:"rerender",value:function(e,t){var n=this;(0,b.default)(v.prototype.__proto__||(0,y.default)(v.prototype),"rerender",this).call(this,e,t);var r=(0,c.default)(e);this.drawColorbar(),(t||r!==this.prevOptions)&&(this.prevOptions=r,this.options=e,(0,b.default)(v.prototype.__proto__||(0,y.default)(v.prototype),"rerender",this).call(this,e,t),this.calculateVisibleTiles(),e&&e.colorRange&&(this.colorScale=(0,T.colorDomainToRgbaArray)(e.colorRange)),this.visibleAndFetchedTiles().forEach(function(e){return n.renderTile(e,synchronous=!0)}),this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=(0,T.showMousePosition)(this,this.is2d)),!this.options.showMousePosition&&this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0))}},{key:"tileDataToCanvas",value:function(e){var t=document.createElement("canvas");t.width=256,t.height=256;var n=t.getContext("2d");n.fillStyle="transparent",n.fillRect(0,0,t.width,t.height);var r=new ImageData(e,t.width,t.height);return n.putImageData(r,0,0),t}},{key:"exportData",value:function(){}},{key:"setSpriteProperties",value:function(e,t,n,r){var i=this.getAbsTileDim(t,n,r);e.width=i.width,e.height=i.height,e.x=i.x,e.y=i.y,r&&n[0]!=n[1]&&(e.rotation=-Math.PI/2,e.scale.x=-1*Math.abs(e.scale.x))}},{key:"refXScale",value:function(e){(0,b.default)(v.prototype.__proto__||(0,y.default)(v.prototype),"refXScale",this).call(this,e),this.draw()}},{key:"refYScale",value:function(e){(0,b.default)(v.prototype.__proto__||(0,y.default)(v.prototype),"refYScale",this).call(this,e),this.draw()}},{key:"draw",value:function(){(0,b.default)(v.prototype.__proto__||(0,y.default)(v.prototype),"draw",this).call(this)}},{key:"newBrushOptions",value:function(e){var t=JSON.parse((0,c.default)(this.options)),n=this.valueScale.copy().range([this.colorbarHeight,0]),r=n.invert(e[0]),i=(n.invert(e[1])-n.domain()[0])/(n.domain()[1]-n.domain()[0]),o=(r-n.domain()[0])/(n.domain()[1]-n.domain()[0]);return t.scaleStartPercent=i.toFixed(5),t.scaleEndPercent=o.toFixed(5),t}},{key:"brushStart",value:function(){this.brushing=!0}},{key:"brushMoved",value:function(){if(x.event.selection){var e=this.newBrushOptions(x.event.selection),t=(0,c.default)(e);this.gColorscaleBrush.selectAll(".handle--custom").attr("y",function(e){return"n"===e.type?x.event.selection[0]:x.event.selection[1]-2}),t!==this.prevOptions&&(this.prevOptions=t,this.rerender(e,!0),this.onTrackOptionsChanged(e),this.onValueScaleChanged())}}},{key:"brushEnd",value:function(){this.brushing=!1}},{key:"drawColorbar",value:function(){if(this.pColorbar.clear(),!this.options.colorbarPosition||"hidden"===this.options.colorbarPosition)return this.pColorbarArea.visible=!1,this.scaleBrush&&this.gColorscaleBrush.call(this.scaleBrush.move,null),this.gColorscaleBrush.on(".brush",null),void this.gColorscaleBrush.selectAll("rect").remove();if(this.pColorbarArea.visible=!0,this.valueScale&&!isNaN(this.valueScale.domain()[0])&&!isNaN(this.valueScale.domain()[1])){var e=Math.min(this.dimensions[1]/2,200);if(this.colorbarHeight=e-20,!(this.colorbarHeight<0)){var t=this.valueScale.copy().range([this.colorbarHeight,0]);this.scaleBrush=(0,u.brushY)(),"topLeft"===this.options.colorbarPosition||"bottomLeft"===this.options.colorbarPosition?this.scaleBrush.extent([[4,0],[10,this.colorbarHeight]]):this.scaleBrush.extent([[0,0],[6,this.colorbarHeight]]),"topLeft"===this.options.colorbarPosition&&(this.pColorbarArea.x=this.position[0],this.pColorbarArea.y=this.position[1],this.pColorbar.y=10,this.axis.pAxis.y=10,this.axis.pAxis.x=25,this.pColorbar.x=15,this.gColorscaleBrush.attr("transform","translate("+String(this.pColorbarArea.x+4)+","+(this.pColorbarArea.y+this.pColorbar.y-1)+")")),"topRight"===this.options.colorbarPosition&&(this.pColorbarArea.x=this.position[0]+this.dimensions[0]-75,this.pColorbarArea.y=this.position[1],this.pColorbar.y=10,this.axis.pAxis.y=10,this.axis.pAxis.x=50,this.pColorbar.x=50,this.gColorscaleBrush.attr("transform","translate("+String(this.pColorbarArea.x+this.pColorbar.x+10+2)+","+(this.pColorbarArea.y+this.pColorbar.y-1)+")")),"bottomRight"===this.options.colorbarPosition&&(this.pColorbarArea.x=this.position[0]+this.dimensions[0]-75,this.pColorbarArea.y=this.position[1]+this.dimensions[1]-e,this.pColorbar.y=10,this.axis.pAxis.y=10,this.axis.pAxis.x=50,this.pColorbar.x=50,this.gColorscaleBrush.attr("transform","translate("+String(this.pColorbarArea.x+this.pColorbar.x+10+1)+","+(this.pColorbarArea.y+this.pColorbar.y-1)+")")),"bottomLeft"===this.options.colorbarPosition&&(this.pColorbarArea.x=this.position[0],this.pColorbarArea.y=this.position[1]+this.dimensions[1]-e,this.pColorbar.y=10,this.axis.pAxis.y=10,this.axis.pAxis.x=25,this.pColorbar.x=15,this.gColorscaleBrush.attr("transform","translate("+String(this.pColorbarArea.x+2)+","+(this.pColorbarArea.y+this.pColorbar.y-1)+")")),this.pColorbarArea.clear(),this.pColorbarArea.beginFill((0,T.colorToHex)(this.options.colorbarBackgroundColor||"white"),+this.options.colorbarBackgroundOpacity||.6),this.pColorbarArea.drawRect(0,0,75,e),this.options||(this.options={}),this.options.scaleStartPercent||(this.options.scaleStartPercent=0),this.options.scaleEndPercent||(this.options.scaleEndPercent=1);var n=t.domain()[1]-t.domain()[0],r=t(this.options.scaleStartPercent*n+t.domain()[0]),i=t(this.options.scaleEndPercent*n+t.domain()[0]);this.brushing||(this.scaleBrush.on("start",this.brushStart.bind(this)).on("brush",this.brushMoved.bind(this)).on("end",this.brushEnd.bind(this)).handleSize(0),this.gColorscaleBrush.on(".brush",null),this.gColorscaleBrush.call(this.scaleBrush),this.northHandle=this.gColorscaleBrush.selectAll(".handle--custom").data([{type:"n"},{type:"s"}]).enter().append("rect").classed("handle--custom",!0).attr("cursor","ns-resize").attr("width",10).attr("height",4).style("fill","#666").style("stroke","white"),this.flipText&&this.northHandle.attr("cursor","ew-resize"),this.gColorscaleBrush.call(this.scaleBrush.move,[i,r]));for(var o=(0,p.scaleLinear)().domain([0,255]).range([0,this.colorbarHeight]),a=0;a<this.colorbarHeight;a++){var s=this.limitedValueScale(t.invert(a)),l=Math.max(0,Math.min(254,Math.floor(s)));this.pColorbar.beginFill((0,T.colorToHex)("rgb("+String(this.colorScale[l][0])+","+String(this.colorScale[l][1])+","+String(this.colorScale[l][2])+")")),this.pColorbar.drawRect(0,a,10,1)}this.pAxis.position.x=10,this.pAxis.position.y=o(0),"topLeft"===this.options.colorbarPosition||"bottomLeft"===this.options.colorbarPosition?this.axis.drawAxisRight(t,this.colorbarHeight):"topRight"!==this.options.colorbarPosition&&"bottomRight"!==this.options.colorbarPosition||this.axis.drawAxisLeft(t,this.colorbarHeight)}}}},{key:"exportColorBarSVG",value:function(){var e=document.createElement("g");if(!this.options.colorbarPosition||"hidden"===this.options.colorbarPosition)return e;if(!this.valueScale)return e;e.setAttribute("transform","translate("+String(this.pColorbarArea.x)+", "+String(this.pColorbarArea.y)+")"),e.setAttribute("transform","translate("+String(this.pColorbarArea.x)+", "+String(this.pColorbarArea.y)+")");var t=document.createElement("rect");e.appendChild(t);var n=document.createElement("g");e.appendChild(n),n.setAttribute("transform","translate("+String(this.pColorbar.x)+", "+String(this.pColorbar.y)+")");var r=Math.min(this.dimensions[1],200);this.colorbarHeight=r-20,t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("width",70),t.setAttribute("height",r),t.setAttribute("style","fill: white; stroke-width: 0; opacity: 0.7");for(var i=(0,p.scaleLinear)().domain([0,255]).range([0,this.colorbarHeight]),o=this.colorbarHeight/256,a=0;a<256;a++){var s=document.createElement("rect");n.appendChild(s),s.setAttribute("x",0),s.setAttribute("y",i(a)),s.setAttribute("width",10),s.setAttribute("height",o),s.setAttribute("class","color-rect"),s.setAttribute("style","fill: rgb("+String(this.colorScale[a][0])+", "+String(this.colorScale[a][1])+", "+String(this.colorScale[a][2])+")")}var l=document.createElement("g");e.appendChild(l),l.setAttribute("transform","translate("+String(this.axis.pAxis.position.x)+","+String(this.axis.pAxis.position.y)+")");var u=null,c=this.valueScale.copy().range([this.colorbarHeight,0]);return"topLeft"===this.options.colorbarPosition||"bottomLeft"===this.options.colorbarPosition?u=this.axis.exportAxisRightSVG(c,this.colorbarHeight):"topRight"!==this.options.colorbarPosition&&"bottomRight"!==this.options.colorbarPosition||(u=this.axis.exportAxisLeftSVG(c,this.colorbarHeight)),l.appendChild(u),e}},{key:"setDataLensSize",value:function(e){e%2==1&&(this.dataLensSize=e,this.dataLensLPad=Math.floor(this.dataLensSize/2),this.dataLensRPad=Math.ceil(this.dataLensSize/2))}},{key:"getVisibleData",value:function(e,t){var d=this,h=new this.dataLens.constructor(Math.pow(this.dataLensSize,2));if(!this.tilesetInfo)return console.warn("Tileset info not available yet"),h;var f=this.dataLensLPad,p=this.dataLensRPad,n=this.calculateZoomLevel();n=this.tilesetInfo.max_zoom?Math.min(this.tilesetInfo.max_zoom,n):n;var r=S.tileProxy.calculateTileWidth(this.tilesetInfo,n,O)/O,i=Math.floor(this._xScale.invert(e)/r),o=Math.floor(this._yScale.invert(t)/r),v=i%O,m=o%O,g=Math.floor(i/O),y=Math.floor(o/O),a=(0,w.range)(Math.floor((i-f)/O),Math.floor((i+p)/O)+1),s=(0,w.range)(Math.floor((o-f)/O),Math.floor((o+p)/O)+1),l=this.tilesToId(a,s,this.zoomLevel,!0).map(function(e){return d.tileToLocalId(e)}),u=[];try{u=l.map(function(e){return{data:d.fetchedTiles[e].tileData,mirrored:d.fetchedTiles[e].mirrored}})}catch(e){}return 1===u.length||2===u.length&&u[0].data.tilePositionId===u[1].data.tilePositionId?u.forEach(function(e){h=(0,T.rangeQuery2d)(e.data.dense,O,d.dataLensSize,[v-f,v+p],[m-f,m+p],e.mirrored,0,0,h)}):u.length<=6&&u.forEach(function(e){var t=e.mirrored?g===e.data.tilePos[1]:g===e.data.tilePos[0],n=e.mirrored?y===e.data.tilePos[0]:y===e.data.tilePos[1],r=Math.round(v/O),i=Math.round(m/O),o=Math.max(0,v-f),a=Math.min(O,v+p),s=Math.max(0,m-f),l=Math.min(O,m+p),u=t?0===r?Math.max(0,d.dataLensSize-a):0:0===r?0:Math.max(0,a-o),c=n?0===i?Math.max(0,d.dataLensSize-l):0:0===i?0:Math.max(0,l-s);t||(o=0===r?(0,T.mod)(v-f,O):0,a=0===r?O:(0,T.mod)(v+p,O)),n||(s=0===i?(0,T.mod)(m-f,O):0,l=0===i?O:(0,T.mod)(m+p,O)),h=(0,T.rangeQuery2d)(e.data.dense,O,d.dataLensSize,[o,a],[s,l],e.mirrored,u,c,h)}),h}},{key:"initTile",value:function(e){(0,b.default)(v.prototype.__proto__||(0,y.default)(v.prototype),"initTile",this).call(this,e),null!=this.scale.minValue&&null!=this.scale.maxValue&&this.renderTile(e)}},{key:"updateTile",value:function(e){e.scale&&this.scale&&this.scale.minValue==e.scale.minValue&&this.scale.maxValue==e.scale.maxValue||this.renderTile(e)}},{key:"renderTile",value:function(i){var o=this,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t=(0,l.getValueScale)(this.options.heatmapValueScaling,this.scale.minValue,this.medianVisibleValue,this.scale.maxValue,"log"),n=(0,g.default)(t,2),r=n[0],a=n[1];this.valueScale=a;var s=0;i.scale={minValue:this.scale.minValue,maxValue:this.scale.maxValue},"log"==r&&(s=0),this.limitedValueScale=this.valueScale.copy(),this.options&&void 0!==this.options.scaleStartPercent&&void 0!==this.options.scaleEndPercent&&this.limitedValueScale.domain([this.valueScale.domain()[0]+(this.valueScale.domain()[1]-this.valueScale.domain()[0])*this.options.scaleStartPercent,this.valueScale.domain()[0]+(this.valueScale.domain()[1]-this.valueScale.domain()[0])*this.options.scaleEndPercent]),this.renderingTiles.add(i.tileId),S.tileProxy.tileDataToPixData(i,r,this.limitedValueScale.domain(),s,this.colorScale,function(e){if(e){var t,n=i.graphics,r=o.tileDataToCanvas(e.pixData);t=new _.Sprite(_.Texture.fromCanvas(r,_.SCALE_MODES.NEAREST)),i.sprite=t,i.canvas=r,o.setSpriteProperties(i.sprite,i.tileData.zoomLevel,i.tileData.tilePos,i.mirrored),n.removeChildren(),n.addChild(i.sprite)}o.renderingTiles.delete(i.tileId)},e,this.mirrorTiles&&!i.mirrored&&i.tileData.tilePos[0]==i.tileData.tilePos[1])}},{key:"remove",value:function(){this.gMain.remove(),this.gMain=null,(0,b.default)(v.prototype.__proto__||(0,y.default)(v.prototype),"remove",this).call(this)}},{key:"refScalesChanged",value:function(e,t){var n=this;(0,b.default)(v.prototype.__proto__||(0,y.default)(v.prototype),"refScalesChanged",this).call(this,e,t),(0,T.objVals)(this.fetchedTiles).filter(function(e){return e.sprite}).forEach(function(e){return n.setSpriteProperties(e.sprite,e.tileData.zoomLevel,e.tileData.tilePos,e.mirrored)})}},{key:"superSVG",value:function(){return(0,b.default)(v.prototype.__proto__||(0,y.default)(v.prototype),"exportSVG",this).call(this)}},{key:"exportSVG",value:function(){var e=null,t=null;if((0,b.default)(v.prototype.__proto__||(0,y.default)(v.prototype),"exportSVG",this)){var n=(0,b.default)(v.prototype.__proto__||(0,y.default)(v.prototype),"exportSVG",this).call(this),r=(0,g.default)(n,2);t=r[0],e=r[1]}else e=t=document.createElement("g");var i=document.createElement("g");e.appendChild(i),i.setAttribute("transform","translate("+String(this.pMain.position.x)+","+String(this.pMain.position.y)+") scale("+String(this.pMain.scale.x)+","+String(this.pMain.scale.y)+")");var o=!0,a=!1,s=void 0;try{for(var l,u=(0,m.default)(this.visibleAndFetchedTiles());!(o=(l=u.next()).done);o=!0){var c=l.value,d=180*c.sprite.rotation/Math.PI,h=document.createElement("g");h.setAttribute("transform","translate("+String(c.sprite.x)+","+String(c.sprite.y)+") rotate("+d+") scale("+String(c.sprite.scale.x)+","+String(c.sprite.scale.y)+")");var f=document.createElement("image");f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c.canvas.toDataURL()),f.setAttribute("width",256),f.setAttribute("height",256),h.appendChild(f),i.appendChild(h)}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}var p=this.exportColorBarSVG();return e.appendChild(p),[t,t]}},{key:"zoomed",value:function(e,t,n,r,i){(0,b.default)(v.prototype.__proto__||(0,y.default)(v.prototype),"zoomed",this).call(this,e,t),this.pMain.position.x=r,this.pMain.position.y=i,this.pMain.scale.x=n,this.pMain.scale.y=n,this.mouseMoveZoomHandler()}},{key:"addTileId",value:function(e,t,n,r,i){var o=5<arguments.length&&void 0!==arguments[5]&&arguments[5],a=[t,n,r];a.mirrored=o,a.dataTransform=i,e.push(a)}},{key:"tilesToId",value:function(e,t,n){for(var r=e,i=t,o=this.options.dataTransform||"default",a=[],s=0;s<r.length;s++)for(var l=0;l<i.length;l++)this.mirrorTiles?(r[s]>=i[l]?this.addTileId(a,n,i[l],r[s],o,!0):this.addTileId(a,n,r[s],i[l],o),r[s]===i[l]&&this.addTileId(a,n,r[s],i[l],o)):this.addTileId(a,n,r[s],i[l],o);return a}},{key:"calculateVisibleTiles",value:function(){if(this.tilesetInfo){if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){var e=this.tilesetInfo.resolutions.map(function(e){return+e}).sort(function(e,t){return t-e});this.xTiles=S.tileProxy.calculateTilesFromResolution(e[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),this.yTiles=S.tileProxy.calculateTilesFromResolution(e[this.zoomLevel],this._yScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0])}else this.xTiles=S.tileProxy.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=S.tileProxy.calculateTiles(this.zoomLevel,this._yScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);this.setVisibleTiles(this.tilesToId(this.xTiles,this.yTiles,this.zoomLevel,this.mirrorTiles))}}},{key:"getMouseOverHtml",value:function(e,t){if(!this.options.showTooltip)return"";if(!this.tilesetInfo)return"";var n=S.tileProxy.calculateResolution(this.tilesetInfo,this.zoomLevel),r=Math.max(this.tilesetInfo.max_pos[1]-this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[0]-this.tilesetInfo.min_pos[0]),i=Math.ceil(Math.log(r/n)/Math.log(10));this.setDataLensSize(1);var o=this._xScale.invert(e),a=this._yScale.invert(t),s="<b>Position:</b> ";if(this.chromInfo){var l=(0,T.absToChr)(o,this.chromInfo),u=(0,T.absToChr)(a,this.chromInfo),c=function(e){return(0,f.format)("."+String(i)+"s")(e)};s+=String(l[0])+":"+String(c(l[1]))+" & "+String(u[0])+":"+String(c(u[1])),s+="<br/>"}var d=this.getVisibleData(e,t);return"log"==this.options.heatmapValueScaling?0<d[0]?s+"<b>Value:</b> 1e"+(0,f.format)(".3f")(Math.log(d[0])):s+"<b>Value:</b> N/A":s+"<b>Value:</b> "+(0,f.format)(".3f")(d[0])}},{key:"getTilePosAndDimensions",value:function(e,t,n){var r=n||O;if(this.tilesetInfo.resolutions){var i=this.tilesetInfo.resolutions.map(function(e){return+e}).sort(function(e,t){return t-e})[e],o=i*r,a=o;return{tileX:i*r*t[0],tileY:i*r*t[1],tileWidth:o,tileHeight:a}}var s=t[0],l=t[1],u=this.tilesetInfo.max_width/Math.pow(2,e),c=this.tilesetInfo.max_width/Math.pow(2,e);return{tileX:0+s*u,tileY:0+l*c,tileWidth:u,tileHeight:c}}},{key:"calculateZoomLevel",value:function(){var e=this.tilesetInfo.min_pos[0],t=this.tilesetInfo.max_pos[0],n=this.tilesetInfo.min_pos[1],r=this.tilesetInfo.max_pos[1],i=null;if(this.tilesetInfo.resolutions){var o=S.tileProxy.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,e,t),a=S.tileProxy.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._yScale,n,r);i=Math.min(o,a)}else{var s=S.tileProxy.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),l=S.tileProxy.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);i=Math.max(s,l),i=Math.min(i,this.maxZoom)}return this.options&&this.options.maxZoom&&(0<=this.options.maxZoom?i=Math.min(this.options.maxZoom,i):console.error("Invalid maxZoom on track:",this)),i}},{key:"tileToLocalId",value:function(e){return e.dataTransform&&"default"!==e.dataTransform?String(e.join("."))+"."+String(e.mirrored)+"."+String(e.dataTransform):String(e.join("."))+"."+String(e.mirrored)}},{key:"tileToRemoteId",value:function(e){return e.dataTransform&&"default"!==e.dataTransform?String(e.join("."))+"."+String(e.dataTransform):""+String(e.join("."))}},{key:"localToRemoteId",value:function(e){var t=e.split(".");return t.slice(0,t.length-1).join(".")}}]),v}(o.default);t.default=s},function(e,t,n){var r=n(67),i=n(68);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},function(e,t){e.exports=function(e){return e}},function(e,t){e.exports=g},function(e,t,n){"use strict";t.__esModule=!0,t.noop=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.bottom=u,t.cloneLayout=function(e){for(var t=Array(e.length),n=0,r=e.length;n<r;n++)t[n]=c(e[n]);return t},t.cloneLayoutItem=c,t.childrenEqual=function(e,t){return(0,r.default)(s.default.Children.map(e,function(e){return e.key}),s.default.Children.map(t,function(e){return e.key}))},t.collides=d,t.compact=h,t.compactItem=v,t.correctBounds=m,t.getLayoutItem=g,t.getFirstCollision=y,t.getAllCollisions=b,t.getStatics=w,t.moveElement=x,t.moveElementAwayFromCollision=_,t.perc=function(e){return 100*e+"%"},t.setTransform=function(e){var t=e.top,n=e.left,r=e.width,i=e.height,o="translate("+n+"px,"+t+"px)";return{transform:o,WebkitTransform:o,MozTransform:o,msTransform:o,OTransform:o,width:r+"px",height:i+"px",position:"absolute"}},t.setTopLeft=function(e){var t=e.top,n=e.left,r=e.width,i=e.height;return{top:t+"px",left:n+"px",width:r+"px",height:i+"px",position:"absolute"}},t.sortLayoutItems=k,t.sortLayoutItemsByRowCol=S,t.sortLayoutItemsByColRow=T,t.synchronizeLayoutWithChildren=function(i,e,t,n){i=i||[];var o=[];return s.default.Children.forEach(e,function(e,t){var n=g(i,String(e.key));if(n)o[t]=c(n);else{!l&&e.props._grid&&console.warn("`_grid` properties on children have been deprecated as of React 15.2. Please use `data-grid` or add your properties directly to the `layout`.");var r=e.props["data-grid"]||e.props._grid;r?(l||C([r],"ReactGridLayout.children"),o[t]=c(a({},r,{i:e.key}))):o[t]=c({w:1,h:1,x:0,y:u(o),i:String(e.key)})}}),o=h(o=m(o,{cols:t}),n,t)},t.validateLayout=C,t.autoBindHandlers=function(t,e){e.forEach(function(e){return t[e]=t[e].bind(t)})};var r=i(n(173)),s=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}var l=!0,o=!1;function u(e){for(var t=0,n=void 0,r=0,i=e.length;r<i;r++)t<(n=e[r].y+e[r].h)&&(t=n);return t}function c(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:Boolean(e.moved),static:Boolean(e.static),isDraggable:e.isDraggable,isResizable:e.isResizable}}function d(e,t){return e!==t&&(!(e.x+e.w<=t.x)&&(!(e.x>=t.x+t.w)&&(!(e.y+e.h<=t.y)&&!(e.y>=t.y+t.h))))}function h(e,t,n){for(var r=w(e),i=k(e,t),o=Array(e.length),a=0,s=i.length;a<s;a++){var l=c(i[a]);l.static||(l=v(r,l,t,n,i),r.push(l)),(o[e.indexOf(i[a])]=l).moved=!1}return o}var f={x:"w",y:"h"};function p(e,t,n,r){var i=f[r];t[r]+=1;for(var o=e.indexOf(t)+1;o<e.length;o++){var a=e[o];if(!a.static){if(a.y>t.y+t.h)break;d(t,a)&&p(e,a,n+t[i],r)}}t[r]=n}function v(e,t,n,r,i){var o="horizontal"===n;if("vertical"===n)for(t.y=Math.min(u(e),t.y);0<t.y&&!y(e,t);)t.y--;else if(o)for(t.y=Math.min(u(e),t.y);0<t.x&&!y(e,t);)t.x--;for(var a=void 0;a=y(e,t);)o?p(i,t,a.x+a.w,"x"):p(i,t,a.y+a.h,"y"),o&&t.x+t.w>r&&(t.x=r-t.w,t.y++);return t}function m(e,t){for(var n=w(e),r=0,i=e.length;r<i;r++){var o=e[r];if(o.x+o.w>t.cols&&(o.x=t.cols-o.w),o.x<0&&(o.x=0,o.w=t.cols),o.static)for(;y(n,o);)o.y++;else n.push(o)}return e}function g(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n].i===t)return e[n]}function y(e,t){for(var n=0,r=e.length;n<r;n++)if(d(e[n],t))return e[n]}function b(e,t){return e.filter(function(e){return d(e,t)})}function w(e){return e.filter(function(e){return e.static})}function x(e,t,n,r,i,o,a,s){if(t.static)return e;if(t.y===r&&t.x===n)return e;O("Moving element "+t.i+" to ["+String(n)+","+String(r)+"] from ["+t.x+","+t.y+"]");var l=t.x,u=t.y;"number"==typeof n&&(t.x=n),"number"==typeof r&&(t.y=r),t.moved=!0;var c=k(e,a);("vertical"===a&&"number"==typeof r?r<=u:"horizontal"===a&&"number"==typeof n&&n<=l)&&(c=c.reverse());var d=b(c,t);if(o&&d.length)return O("Collision prevented on "+t.i+", reverting."),t.x=l,t.y=u,t.moved=!1,e;for(var h=0,f=d.length;h<f;h++){var p=d[h];O("Resolving collision between "+t.i+" at ["+t.x+","+t.y+"] and "+p.i+" at ["+p.x+","+p.y+"]"),p.moved||(e=p.static?_(e,p,t,i,a,s):_(e,t,p,i,a,s))}return e}function _(e,t,n,r,i,o){var a="horizontal"===i,s="vertical"===i;if(r){r=!1;var l={x:a?Math.max(t.x-n.w,0):n.x,y:s?Math.max(t.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"};if(!y(e,l))return O("Doing reverse collision on "+n.i+" up to ["+l.x+","+l.y+"]."),x(e,n,a?l.x:void 0,s?l.y:void 0,r,!1,i,o)}return x(e,n,a?n.x+1:void 0,s?n.y+1:void 0,r,!1,i,o)}function k(e,t){return"horizontal"===t?T(e):S(e)}function S(e){return[].concat(e).sort(function(e,t){return e.y>t.y||e.y===t.y&&e.x>t.x?1:e.y===t.y&&e.x===t.x?0:-1})}function T(e){return[].concat(e).sort(function(e,t){return e.x>t.x||e.x===t.x&&e.y>t.y?1:-1})}function C(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Layout",n=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(var r=0,i=e.length;r<i;r++){for(var o=e[r],a=0;a<n.length;a++)if("number"!=typeof o[n[a]])throw new Error("ReactGridLayout: "+t+"["+r+"]."+n[a]+" must be a number!");if(o.i&&"string"!=typeof o.i)throw new Error("ReactGridLayout: "+t+"["+r+"].i must be a string!");if(void 0!==o.static&&"boolean"!=typeof o.static)throw new Error("ReactGridLayout: "+t+"["+r+"].static must be a boolean!")}}function O(){var e;o&&(e=console).log.apply(e,arguments)}t.noop=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h={},f={};function l(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}var r=function(o){var t=new RegExp('["'+o+"\n\r]"),d=o.charCodeAt(0);function n(r,e){var t,n=[],i=r.length,o=0,a=0,s=i<=0,l=!1;function u(){if(s)return f;if(l)return l=!1,h;var e,t,n=o;if(34===r.charCodeAt(n)){for(;o++<i&&34!==r.charCodeAt(o)||34===r.charCodeAt(++o););return(e=o)>=i?s=!0:10===(t=r.charCodeAt(o++))?l=!0:13===t&&(l=!0,10===r.charCodeAt(o)&&++o),r.slice(n+1,e-1).replace(/""/g,'"')}for(;o<i;){if(10===(t=r.charCodeAt(e=o++)))l=!0;else if(13===t)l=!0,10===r.charCodeAt(o)&&++o;else if(t!==d)continue;return r.slice(n,e)}return s=!0,r.slice(n,i)}for(10===r.charCodeAt(i-1)&&--i,13===r.charCodeAt(i-1)&&--i;(t=u())!==f;){for(var c=[];t!==h&&t!==f;)c.push(t),t=u();e&&null==(c=e(c,a++))||n.push(c)}return n}function r(e){return e.map(a).join(o)}function a(e){return null==e?"":t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,o){var a,s,t=n(e,function(e,t){if(a)return a(e,t-1);var n,r,i;s=e,a=o?(r=o,i=l(n=e),function(e,t){return r(i(e),t,n)}):l(e)});return t.columns=s||[],t},parseRows:n,format:function(e,n){var t,r,i;return null==n&&(t=e,r=Object.create(null),i=[],t.forEach(function(e){for(var t in e)t in r||i.push(r[t]=t)}),n=i),[n.map(a).join(o)].concat(e.map(function(t){return n.map(function(e){return a(t[e])}).join(o)})).join("\n")},formatRows:function(e){return e.map(r).join("\n")}}},i=r(","),o=i.parse,a=i.parseRows,s=i.format,u=i.formatRows,c=r("\t"),d=c.parse,p=c.parseRows,v=c.format,m=c.formatRows;n.d(t,"dsvFormat",function(){return r}),n.d(t,"csvParse",function(){return o}),n.d(t,"csvParseRows",function(){return a}),n.d(t,"csvFormat",function(){return s}),n.d(t,"csvFormatRows",function(){return u}),n.d(t,"tsvParse",function(){return d}),n.d(t,"tsvParseRows",function(){return p}),n.d(t,"tsvFormat",function(){return v}),n.d(t,"tsvFormatRows",function(){return m})},function(e,t,n){e.exports=!n(28)&&!n(45)(function(){return 7!=Object.defineProperty(n(72)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=n(30)},function(e,t,n){var a=n(33),s=n(34),l=n(130)(!1),u=n(62)("IE_PROTO");e.exports=function(e,t){var n,r=s(e),i=0,o=[];for(n in r)n!=u&&a(r,n)&&o.push(n);for(;t.length>i;)a(r,n=t[i++])&&(~l(o,n)||o.push(n));return o}},function(e,t,n){var r=n(17).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(33),i=n(55),o=n(62)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";function s(){}function r(e,t){var n=new s;if(e instanceof s)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,i=-1,o=e.length;if(null==t)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t(r=e[i],i,e),r)}else if(e)for(var a in e)n.set(a,e[a]);return n}s.prototype=r.prototype={constructor:s,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var m=r,i=function(){var h,f,t,p=[],a=[];function v(e,n,r,i){if(n>=p.length)return null!=h&&e.sort(h),null!=f?f(e):e;for(var t,o,a,s=-1,l=e.length,u=p[n++],c=m(),d=r();++s<l;)(a=c.get(t=u(o=e[s])+""))?a.push(o):c.set(t,[o]);return c.each(function(e,t){i(d,t,v(e,n,r,i))}),d}return t={object:function(e){return v(e,0,o,l)},map:function(e){return v(e,0,u,c)},entries:function(e){return function n(e,r){if(++r>p.length)return e;var i,o=a[r-1];return null!=f&&r>=p.length?i=e.entries():(i=[],e.each(function(e,t){i.push({key:t,values:n(e,r)})})),null!=o?i.sort(function(e,t){return o(e.key,t.key)}):i}(v(e,0,u,c),0)},key:function(e){return p.push(e),t},sortKeys:function(e){return a[p.length-1]=e,t},sortValues:function(e){return h=e,t},rollup:function(e){return f=e,t}}};function o(){return{}}function l(e,t,n){e[t]=n}function u(){return m()}function c(e,t,n){e.set(t,n)}function a(){}var d=m.prototype;function h(e,t){var n=new a;if(e instanceof a)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}a.prototype=h.prototype={constructor:a,has:d.has,add:function(e){return this["$"+(e+="")]=e,this},remove:d.remove,clear:d.clear,values:d.keys,size:d.size,empty:d.empty,each:d.each};var f=h,p=function(e){var t=[];for(var n in e)t.push(n);return t},v=function(e){var t=[];for(var n in e)t.push(e[n]);return t},g=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t};n.d(t,!1,function(){return i}),n.d(t,!1,function(){return f}),n.d(t,"a",function(){return m}),n.d(t,!1,function(){return p}),n.d(t,!1,function(){return v}),n.d(t,!1,function(){return g})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var f=r(n(11)),i=r(n(80)),o=r(n(81));t.minNonZero=p,t.maxNonZero=m,t.workerSetPix=function(e,t,n,r,i,o){var a=6<arguments.length&&void 0!==arguments[6]&&arguments[6],s=null;"log"==n?s=(0,v.scaleLog)().range([254,0]).domain(r):("linear"!=n&&console.warn("Unknown value scale type:",n," Defaulting to linear"),s=(0,v.scaleLinear)().range([254,0]).domain(r));var l=new Uint8ClampedArray(4*e),u=0,c=0,d=Math.sqrt(e);savedScaled={};try{for(var h=0;h<t.length;h++){var f=t[h];c=f,u=255,((u=a&&Math.floor(h/d)<h%d?255:isNaN(f)?255:Math.max(0,Math.min(254,Math.floor(s(f+i)))))<0||255<u)&&console.warn("out of bounds rgbIdx:",u," (should be 0 <= rgbIdx <= 255)");var p=o[u];l[4*h]=p[0],l[4*h+1]=p[1],l[4*h+2]=p[2],l[4*h+3]=p[3]}}catch(e){return console.warn("Odd datapoint"),console.warn("valueScale.domain():",s.domain()),console.warn("valueScale.range():",s.range()),console.warn("value:",s(c+i)),console.warn("pseudocount:",i),console.warn("rgbIdx:",u,"d:",c,"ct:",s(c)),console.error("ERROR:",e),l}return l},t.tileResponseToData=l,t.workerGetTiles=function(e,t,n,r,i){var o={"content-type":"application/json"};r&&(o.Authorization=r);fetch(e,{headers:o}).then(function(e){return e.json()}).then(function(e){e=l(e,t,n),i(e)}).catch(function(e){return console.log("err:",e)})};var v=n(20);function r(e){return e&&e.__esModule?e:{default:e}}var a=1e-7;function p(e){for(var t=o.default,n=0;n<e.length;n++){var r=e[n];r<a&&-a<r||r<t&&(t=r)}return t}function m(e){for(var t=i.default,n=0;n<e.length;n++){var r=e[n];r<a&&-a<r||t<r&&(t=r)}return t}function s(e){var t,n=void 0,r=void 0;switch(t=(32768&e)<<16,n=31744&e){case 0:if(0==(r=1023&e))return t;for(r<<=1;0==(1024&r);)r<<=1,n++;return t+(112-n<<23)+((1023&r)<<13);case 31744:return t+2139095040+((1023&e)<<13);default:return t+(114688+(32767&e)<<13)}}function g(e){for(var t=atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}function y(e){for(var t=new Uint32Array(e.length),n=0;n<e.length;n++)t[n]=s(e[n]);return new Float32Array(t.buffer)}function l(e,t,n){e||(e={});var r=!0,i=!1,o=void 0;try{for(var a,s=(0,f.default)(n);!(r=(a=s.next()).done);r=!0){var l=a.value;l in e||(e[l]={});var u=l,c=u.split(".");if(e[u].server=t,e[u].tileId=u,e[u].zoomLevel=+c[1],e[u].tilePos=c.slice(2,c.length).map(function(e){return+e}),e[u].tilesetUid=c[0],"dense"in e[u]){var d=g(e[u].dense),h=void 0;if("float16"==e[u].dtype)h=y(new Uint16Array(d));else h=new Float32Array(d);e[u].dense=h,e[u].minNonZero=p(h),e[u].maxNonZero=m(h)}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(1)),i=l(n(2)),o=n(20),a=n(9),s=n(6);function l(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){(0,r.default)(this,e),this._xScale=(0,o.scaleLinear)(),this._yScale=(0,o.scaleLinear)(),this._refXScale=(0,o.scaleLinear)(),this._refYScale=(0,o.scaleLinear)(),this.position=[0,0],this.dimensions=[1,1],this.options={},this.pubSubs=[],this.pubSubs.push(a.pubSub.subscribe("app.mouseMove",this.defaultMouseMoveHandler.bind(this)))}return(0,i.default)(e,[{key:"isWithin",value:function(e,t){return(0,s.isWithin)(e,t,this.position[0],this.dimensions[0]+this.position[0],this.position[1],this.dimensions[1]+this.position[1])}},{key:"getProp",value:function(e){var t=this;return function(){return t[e]}}},{key:"getData",value:function(){}},{key:"getDimensions",value:function(){return this.dimensions}},{key:"setDimensions",value:function(e){this.dimensions=e,this._xScale.range([0,this.dimensions[0]]),this._yScale.range([0,this.dimensions[1]])}},{key:"refXScale",value:function(e){return arguments.length?(this._refXScale=e,this):this._refXScale}},{key:"refYScale",value:function(e){return arguments.length?(this._refYScale=e,this):this._refYScale}},{key:"xScale",value:function(e){return arguments.length?(this._xScale=e,this):this._xScale}},{key:"yScale",value:function(e){return arguments.length?(this._yScale=e,this):this._yScale}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t)}},{key:"refScalesChanged",value:function(e,t){this._refXScale=e,this._refYScale=t}},{key:"draw",value:function(){}},{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(e){this.position=e}},{key:"defaultMouseMoveHandler",value:function(e){}},{key:"remove",value:function(){this.pubSubs.forEach(function(e){return a.pubSub.unsubscribe(e)}),this.pubSubs=[]}},{key:"rerender",value:function(){}},{key:"respondsToPosition",value:function(e,t){return this.isWithin(e,t)}}]),e}();t.default=u},function(e,t,n){"use strict";e.exports=function(e,t,n){switch(arguments.length){case 1:return i=[],o(r=e,r,a,!0),i;case 2:return"function"==typeof t?o(e,e,t,!0):(o(e,t,a,!(i=[])),i);case 3:return o(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}var r};var i,h=n(153),f=n(202),p=n(371);function c(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function v(e,t,n,r){for(var i=0,o=0,a=0,s=e.length;a<s;++a){var l=e[a];if(!c(t,l)){for(var u=0;u<2*t;++u)n[i++]=l[u];r[o++]=a}}return o}function o(e,t,n,r){var i=e.length,o=t.length;if(!(i<=0||o<=0)){var a=e[0].length>>>1;if(!(a<=0)){var s,l=h.mallocDouble(2*a*i),u=h.mallocInt32(i);if(0<(i=v(e,a,l,u))){if(1===a&&r)f.init(i),s=f.sweepComplete(a,n,0,i,l,u,0,i,l,u);else{var c=h.mallocDouble(2*a*o),d=h.mallocInt32(o);0<(o=v(t,a,c,d))&&(f.init(i+o),s=1===a?f.sweepBipartite(a,n,0,i,l,u,0,o,c,d):p(a,n,r,i,l,u,o,c,d),h.free(c),h.free(d))}h.free(l),h.free(u)}return s}}}function a(e,t){i.push([e,t])}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var k=a(n(23)),r=a(n(1)),i=a(n(2)),o=n(!function(){var e=new Error('Cannot find module "d3-array"');throw e.code="MODULE_NOT_FOUND",e}()),u=n(36),c=n(6);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function t(e){(0,r.default)(this,t),this.chromInfo=e,this.chromInfoBisector=(0,o.bisector)(function(e){return e.pos}).left}return(0,i.default)(t,[{key:"scalesToPositionText",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(null==this.chromInfo)return"";if(!e||!t)return"";var r=(0,c.absToChr)(e.domain()[0],this.chromInfo),i=(0,c.absToChr)(e.domain()[1],this.chromInfo),o=(0,c.absToChr)(t.domain()[0],this.chromInfo),a=(0,c.absToChr)(t.domain()[1],this.chromInfo),s=null,l=(0,u.format)(",d");return s=r[0]!=i[0]?String(r[0])+":"+String(l(Math.floor(r[1])))+"-"+String(i[0])+":"+String(l(Math.ceil(i[1]))):String(r[0])+":"+String(l(Math.floor(r[1])))+"-"+String(l(Math.ceil(i[1]))),n&&(o[0]!=a[0]?s+=" & "+String(o[0])+":"+String(l(Math.floor(o[1])))+"-"+String(a[0])+":"+String(l(Math.ceil(a[1]))):s+=" & "+String(o[0])+":"+String(l(Math.floor(o[1])))+"-"+String(l(Math.ceil(a[1])))),(r[2]<=0||0<i[2]||n&&(o[2]<=0||0<a[2]))&&(s+=" [offset "+String(r[2])+","+String(i[2]),n&&(s+=":"+String(o[2])+","+String(a[2])),s+="]"),s}},{key:"parsePosition",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=e.split(":"),r=null,i=0;return 1<n.length?(r=n[0],i=+n[1].replace(/,/g,"")):n[0]in this.chromInfo.chrPositions?(r=n[0],i=0,null!=t&&(i=+this.chromInfo.chromLengths[r])):(i=+n[0].replace(/,/g,""),r=null,t&&(r=t)),isNaN(i),null==r&&(r=t),[r,i,null==r?i:r in this.chromInfo.chrPositions?this.chromInfo.chrPositions[r].pos+i:null]}},{key:"matchRangesToLarger",value:function(e,t){if(e[1]-e[0]<t[1]-t[0]){var n=t[1]-t[0]-(e[1]-e[0]);return[[e[0]-n/2,e[1]+n/2],t]}var r=e[1]-e[0]-(t[1]-t[0]);return[e,[t[0]-r/2,t[1]+r/2]]}},{key:"getSearchRange",value:function(e){if(0==e.length)return null;var t=e.split("-"),n=null;if(0==(t=t.filter(function(e){return 0<e.length}))[0].indexOf("-")&&(t[0]=t[0].slice(3,t[0].length)),1<t.length){var r=this.parsePosition(t[0]),i=(0,k.default)(r,3),o=i[0],a=(i[1],i[2]),s=this.parsePosition(t[1],o),l=(0,k.default)(s,3),u=l[0],c=(l[1],l[2]),d=[a,c],h=this.parsePosition(t[1]),f=(0,k.default)(h,3);o=f[0],f[1],a=f[2];var p=this.parsePosition(t[0],o),v=(0,k.default)(p,3);if(u=v[0],v[1],c=v[2],null==o&&null!=u){var m=this.parsePosition(t[1],u),g=(0,k.default)(m,3);o=g[0],g[1],a=g[2]}var y=[a,c];return d[1]-d[0]<y[1]-y[0]?y:d}if(t[0]in this.chromInfo.chrPositions){var b=this.chromInfo.chrPositions[t[0]].pos;n=[+b,+b+ +this.chromInfo.chromLengths[t[0]]]}else{var w=this.parsePosition(t[0]),x=(0,k.default)(w,3),_=(x[0],x[1],x[2]);n=[_-8e6,_+8e6]}return n[0]>n[1]?[n[1],n[0]]:n}},{key:"parseOffset",value:function(e){var t=e.split(":");if(0==t.length)return[[0,0],[0,0]];if(1==t.length){var n=t[0].split(",");return[[+n[0],+n[1]],[0,0]]}var r=t[0].split(","),i=t[1].split(",");return[[+r[0],+r[1]],[+i[0],+i[1]]]}},{key:"searchPosition",value:function(e){var t=null,n=null;e=e.trim();var r=/\[offset\ (.+?)\]/.exec(e),i=[[0,0],[0,0]];r&&(e=e.replace(r[0],""),i=this.parseOffset(r[1]));var o=e.split(" & ");if(1<o.length?(t=this.getSearchRange(o[0].split(" ")[0]),n=this.getSearchRange(o[1].split(" ")[0])):t=this.getSearchRange(o[0]),null!=t&&null!=n){var a=this.matchRangesToLarger(t,n),s=(0,k.default)(a,2);t=s[0],n=s[1]}return t&&(t[0]+=i[0][0],t[1]+=i[0][1]),n&&(n[0]+=i[1][0],n[1]+=i[1][1]),[t,n]}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayMove=function(e,t,n){var r=e.slice(0);if(n>=r.length)for(var i=n-r.length;1+i--;)r.push(void 0);return r.splice(n,0,r.splice(t,1)[0]),r},t.omit=function(n){for(var e=arguments.length,r=Array(1<e?e-1:0),t=1;t<e;t++)r[t-1]=arguments[t];return Object.keys(n).reduce(function(e,t){return-1===r.indexOf(t)&&(e[t]=n[t]),e},{})},t.closest=function(e,t){for(;e;){if(t(e))return e;e=e.parentNode}},t.limit=function(e,t,n){if(n<e)return e;if(t<n)return t;return n},t.getElementMargin=function(e){var t=window.getComputedStyle(e);return{top:r(t.marginTop),right:r(t.marginRight),bottom:r(t.marginBottom),left:r(t.marginLeft)}},t.provideDisplayName=function(e,t){var n=t.displayName||t.name;return n?e+"("+n+")":e};t.events={start:["touchstart","mousedown"],move:["touchmove","mousemove"],end:["touchend","touchcancel","mouseup"]},t.vendorPrefix=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];switch(t){case"ms":return"ms";default:return t&&t.length?t[0].toUpperCase()+t.substr(1):""}}();function r(e){return"px"===e.substr(-2)?parseFloat(e):0}},function(e,t,n){var r=n(388),i=n(439),o=n(97),a=n(32),s=n(449);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},function(e,t,n){var r=n(390),i=n(391),o=n(392),a=n(393),s=n(394);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(116);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(66)(Object,"create");e.exports=r},function(e,t,n){var r=n(414);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(96);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(24)),i=u(n(31)),o=u(n(8)),a=u(n(0)),s=n(82),l=n(9);function u(e){return e&&e.__esModule?e:{default:e}}n(480);var c={"../styles/TrackControl.module.scss":{"track-control":"TrackControl-module_track-control-2zDf3","track-control-vertical":"TrackControl-module_track-control-vertical-2McB_","track-control-dark":"TrackControl-module_track-control-dark-fP2uZ","track-control-active":"TrackControl-module_track-control-active-2JD9i TrackControl-module_track-control-2zDf3","track-control-left":"TrackControl-module_track-control-left-zHd9W","track-control-vertical-active":"TrackControl-module_track-control-vertical-active-1QCKn","track-control-padding-right":"TrackControl-module_track-control-padding-right-2p6Lp","track-control-button":"TrackControl-module_track-control-button-2fdIb","track-control-button-vertical":"TrackControl-module_track-control-button-vertical-1s22z"}},d=function(e){var t="track-control-button";return t+=e.isVertical?" track-control-button-vertical":""},h=void 0,f=void 0,p=null,v=null,m=function(t){return t&&p&&!(0,r.default)(t).some(function(e){return p[e]!==t[e]})||(p=t,v=(0,s.SortableHandle)(function(){return a.default.createElement("svg",{style:t.imgStyleMove,className:"no-zoom "+(0,i.default)(d(t),c)},a.default.createElement("use",{xlinkHref:"#move"}))})),a.default.createElement("div",{className:(0,i.default)((e=t,n=e.isVisible?"track-control-active":"track-control",n+=e.isAlignLeft?" track-control-left":"",n+=e.isVertical?" track-control-vertical":"",n+=e.paddingRight?" track-control-padding-right":"",(0,l.getDarkTheme)()&&(n+=" track-control-dark"),n),c)},t.isMoveable&&a.default.createElement(v,null),a.default.createElement("svg",{ref:function(e){h=e},onClick:function(){t.onConfigTrackMenuOpened(t.uid,h.getBoundingClientRect())},style:t.imgStyleSettings,className:"no-zoom "+(0,i.default)(d(t),c)},a.default.createElement("use",{xlinkHref:"#cog"})),t.onAddSeries&&a.default.createElement("svg",{onClick:function(){return t.onAddSeries(t.uid)},style:t.imgStyleAdd,className:"no-zoom "+(0,i.default)(d(t),c)},a.default.createElement("use",{xlinkHref:"#plus"})),a.default.createElement("svg",{ref:function(e){f=e},onClick:function(){t.onCloseTrackMenuOpened(t.uid,f.getBoundingClientRect())},style:t.imgStyleClose,className:"no-zoom "+(0,i.default)(d(t),c)},a.default.createElement("use",{xlinkHref:"#cross"})));var e,n};m.propTypes={imgStyleAdd:o.default.object,imgStyleClose:o.default.object,imgStyleMove:o.default.object,imgStyleSettings:o.default.object,isAlignLeft:o.default.bool,isMoveable:o.default.bool,isVertical:o.default.bool,isVisible:o.default.bool,onConfigTrackMenuOpened:o.default.func,onCloseTrackMenuOpened:o.default.func,onAddSeries:o.default.func,paddingRight:o.default.bool,uid:o.default.string},t.default=m},function(e,t){e.exports={"tiled-plot":"TiledPlot-module_tiled-plot-uFHiB",horizontalList:"TiledPlot-module_horizontalList-1c1P8",list:"TiledPlot-module_list-24zgV",stylizedList:"TiledPlot-module_stylizedList-Mt4JL",stylizedItem:"TiledPlot-module_stylizedItem-2bQBK",stylizedHelper:"TiledPlot-module_stylizedHelper-3IVEu",horizontalItem:"TiledPlot-module_horizontalItem-2-ZjU","resizable-track":"TiledPlot-module_resizable-track-2oLT9",domain:"TiledPlot-module_domain-qYw6K"}},function(e,t){e.exports={"track-range-selection":"Track-module_track-range-selection-1yrDf","track-range-selection-active":"Track-module_track-range-selection-active-1oljJ Track-module_track-range-selection-1yrDf","track-range-selection-active-primary":"Track-module_track-range-selection-active-primary-29M73 Track-module_track-range-selection-active-1oljJ Track-module_track-range-selection-1yrDf","track-range-selection-active-secondary":"Track-module_track-range-selection-active-secondary-1s0t5 Track-module_track-range-selection-active-1oljJ Track-module_track-range-selection-1yrDf","track-range-selection-group-inactive":"Track-module_track-range-selection-group-inactive-YNRM4","track-range-selection-group-brush-selection":"Track-module_track-range-selection-group-brush-selection-2VYDl"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getSeriesItems=t.getAllTracksAndSubtracks=void 0;var a=r(n(24)),l=r(n(11)),s=r(n(0)),u=r(n(48)),c=n(12);function r(e){return e&&e.__esModule?e:{default:e}}n(49);var d=t.getAllTracksAndSubtracks=function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=(0,l.default)(e);!(n=(o=a.next()).done);n=!0){var s=o.value;s.contents?t=t.concat(s.contents):t.push(s)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t};t.getSeriesItems=function(e,r,i,o){return e?(window.higlassTracksByType&&(0,a.default)(window.higlassTracksByType).forEach(function(e){c.TRACKS_INFO_BY_TYPE[e]=window.higlassTracksByType[e].config}),d(e).map(function(t){var e=c.TRACKS_INFO_BY_TYPE[t.type]?c.TRACKS_INFO_BY_TYPE[t.type].thumbnail:null,n=e?s.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.outerHTML},className:"ContextMenu-module_context-menu-icon-I4kiw"}):s.default.createElement("div",{className:"ContextMenu-module_context-menu-icon-I4kiw"},s.default.createElement("svg",null));return s.default.createElement(u.default,{key:t.uid,onClick:function(){o&&o(t.uid)},onMouseEnter:function(e){r&&r(e,t)},onMouseLeave:function(e){i&&i(e)},className:"ContextMenu-module_context-menu-item-1HeVv"},n,s.default.createElement("span",{className:"ContextMenu-module_context-menu-span-8EUfZ"},t.name&&t.name.length?t.name:t.uid,r&&i?s.default.createElement("svg",{className:"ContextMenu-module_play-icon-R4pIO"},s.default.createElement("use",{xlinkHref:"#play"})):null))})):null}},function(e,t,n){var u=n(272),c=n(273);e.exports=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?c(n,s,l):u(n,s,l)}return n}},function(e,t){},function(e,t,n){var l=n(59),u=n(60);e.exports=function(s){return function(e,t){var n,r,i=String(u(e)),o=l(t),a=i.length;return o<0||a<=o?s?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?s?i.charAt(o):n:s?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(73),i=n(51),o=n(54),a={};n(30)(a,n(16)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var a=n(25),s=n(26),l=n(52);e.exports=n(28)?Object.defineProperties:function(e,t){s(e);for(var n,r=l(t),i=r.length,o=0;o<i;)a.f(e,n=r[o++],t[n]);return e}},function(e,t,n){var l=n(34),u=n(74),c=n(131);e.exports=function(s){return function(e,t,n){var r,i=l(e),o=u(i.length),a=c(n,o);if(s&&t!=t){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===t)return s||a||0;return!s&&-1}}},function(e,t,n){var r=n(59),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(133),i=n(106),o=n(39),a=n(34);e.exports=n(70)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";var i=n(61);function r(e){var n,r;this.promise=new e(function(e,t){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=e,r=t}),this.resolve=i(n),this.reject=i(r)}e.exports.f=function(e){return new r(e)}},function(e,t,n){var i=n(30);e.exports=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:i(e,r,t[r]);return e}},function(e,t,n){t.f=n(16)},function(e,t,n){var r=n(63)("meta"),i=n(27),o=n(33),a=n(25).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(45)(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[r].w},onFreeze:function(e){return u&&d.NEED&&l(e)&&!o(e,r)&&c(e),e}}},function(e,t,n){var r=n(17),i=n(13),o=n(71),a=n(137),s=n(25).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(92),i=n(51),o=n(34),a=n(88),s=n(33),l=n(101),u=Object.getOwnPropertyDescriptor;t.f=n(28)?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){n(64),n(50),e.exports=n(143)},function(e,t,n){var r=n(26),i=n(91);e.exports=n(13).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){var i=n(15),o=n(13),a=n(45);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],r={};r[e]=t(n),i(i.S+i.F*a(function(){n(1)}),"Object",r)}},function(e,t,n){n(146),e.exports=-9007199254740991},function(e,t,n){var r=n(15);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){n(148),e.exports=9007199254740991},function(e,t,n){var r=n(15);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){if("http://www.w3.org/2000/svg"===e.namespaceURI){var n=e.getAttribute("class");return n&&!!n.match(new RegExp("(\\s|^)"+String(t)+"(\\s|$)"))}return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+String(t)+"(\\s|$)"))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var y=l(n(11)),w=l(n(23)),b=l(n(3)),r=l(n(1)),i=l(n(2)),o=l(n(4)),x=l(n(10)),a=l(n(5)),_=n(20),s=l(n(93)),k=n(6);function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function g(){return(0,r.default)(this,g),(0,o.default)(this,(g.__proto__||(0,b.default)(g)).apply(this,arguments))}return(0,a.default)(g,e),(0,i.default)(g,[{key:"initTile",value:function(e){(0,x.default)(g.prototype.__proto__||(0,b.default)(g.prototype),"initTile",this).call(this,e),e.barXValues=new Array(e.tileData.dense.length),e.barYValues=new Array(e.tileData.dense.length),e.barWidths=new Array(e.tileData.dense.length),e.barHeights=new Array(e.tileData.dense.length),e.barColors=new Array(e.tileData.dense.length),this.renderTile(e)}},{key:"drawTile",value:function(e){}},{key:"updateTile",value:function(e){e.valueScale&&this.scale&&this.scale.minValue==e.scale.minValue&&this.scale.maxValue==e.scale.maxValue||this.renderTile(e)}},{key:"renderTile",value:function(e){if(e.graphics){var t=e.graphics,n=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),r=n.tileX,i=n.tileWidth,o=e.tileData.dense;if(0!=o.length){var a=this.makeValueScale(this.minVisibleValue(),this.medianVisibleValue,this.maxValue(),0),s=(0,w.default)(a,2),l=s[0],u=s[1];if(this.valueScale=l,t.clear(),this.drawAxis(this.valueScale),"log"==this.options.valueScaling&&this.valueScale.domain()[1]<0)console.warn("Negative values present when using a log scale",this.valueScale.domain());else{var c=(0,k.colorToHex)(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),d=(0,_.scaleLinear)().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([r,r+i]);t.lineStyle(0,c,1);var h=this.options.barFillColor?this.options.barFillColor:"grey",f=(0,k.colorToHex)(h),p="barOpacity"in this.options?this.options.barOpacity:1;t.beginFill(f,p),e.drawnAtScale=this._xScale.copy();for(var v=0;v<o.length;v++){var m=this._xScale(d(v)),g=this.valueScale(o[v]+u),y=this._xScale(d(v+1))-m,b=this.dimensions[1]-g;if(e.barColors[v]=h,e.barXValues[v]=m,e.barYValues[v]=g,e.barWidths[v]=y,e.barHeights[v]=b,d(v)>this.tilesetInfo.max_pos[0])break;t.drawRect(m,g,y,b)}}}}}},{key:"draw",value:function(){(0,x.default)(g.prototype.__proto__||(0,b.default)(g.prototype),"draw",this).call(this);var e=!0,t=!1,n=void 0;try{for(var r,i=(0,y.default)((0,k.dictValues)(this.fetchedTiles));!(e=(r=i.next()).done);e=!0){var o=r.value,a=(o.drawnAtScale.domain()[1]-o.drawnAtScale.domain()[0])/(this._xScale.domain()[1]-this._xScale.domain()[0]),s=this._xScale.domain().map(o.drawnAtScale)[0];o.graphics.scale.x=a,o.graphics.position.x=-s*a}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"zoomed",value:function(e,t,n,r,i){(0,x.default)(g.prototype.__proto__||(0,b.default)(g.prototype),"zoomed",this).call(this,e,t)}},{key:"exportSVG",value:function(){var e=null,t=null,n=(0,x.default)(g.prototype.__proto__||(0,b.default)(g.prototype),"superSVG",this).call(this),r=(0,w.default)(n,2);t=r[0],e=r[1],t.setAttribute("class","exported-line-track");var i=document.createElement("g");e.appendChild(i),i.setAttribute("transform","translate("+String(this.position[0])+","+String(this.position[1])+")"),this.options.lineStrokeColor&&this.options.lineStrokeColor;var o=!0,a=!1,s=void 0;try{for(var l,u=(0,y.default)(this.visibleAndFetchedTiles());!(o=(l=u.next()).done);o=!0){var c=l.value,d=c;if(d&&d.barXValues)for(var h=0;h<d.barXValues.length;h++){var f=document.createElement("rect");f.setAttribute("fill",d.barColors[h]),f.setAttribute("stroke",d.barColors[h]),f.setAttribute("x",d.barXValues[h]),f.setAttribute("y",d.barYValues[h]),f.setAttribute("height",d.barHeights[h]),f.setAttribute("width",d.barWidths[h]),c.barBorders&&(f.setAttribute("stroke-width","0.1"),f.setAttribute("stroke","black")),i.appendChild(f)}}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}var p=document.createElement("g");if(p.setAttribute("id","axis"),t.appendChild(p),p.setAttribute("transform","translate("+String(this.axis.pAxis.position.x)+", "+String(this.axis.pAxis.position.y)+")"),"left"===this.options.axisPositionHorizontal||"top"===this.options.axisPositionVertical){var v=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);p.appendChild(v)}else if("right"===this.options.axisPositionHorizontal||"bottom"===this.options.axisPositionVertical){var m=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);p.appendChild(m)}return[t,e]}}]),g}(s.default);t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(22)),i=h(n(3)),o=h(n(1)),a=h(n(2)),s=h(n(4)),l=h(n(10)),u=h(n(5)),c=h(n(56)),d=n(9);function h(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,a.default)(t,[{key:"initTile",value:function(e){(0,l.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"initTile",this).call(this,e)}},{key:"tileToLocalId",value:function(e){return""+String(e.join("."))}},{key:"tileToRemoteId",value:function(e){return""+String(e.join("."))}},{key:"relevantScale",value:function(){return null}},{key:"setVisibleTiles",value:function(e){var t=this;this.visibleTiles=e.map(function(e){return{tileId:t.tileToLocalId(e),remoteId:t.tileToRemoteId(e)}}),this.visibleTileIds=new r.default(this.visibleTiles.map(function(e){return e.tileId}))}},{key:"calculateVisibleTiles",value:function(){var t=this;if(this.tilesetInfo)if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){var e=this.tilesetInfo.resolutions.map(function(e){return+e}).sort(function(e,t){return t-e}),n=d.tileProxy.calculateTilesFromResolution(e[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]).map(function(e){return[t.zoomLevel,e]});this.setVisibleTiles(n)}else{var r=d.tileProxy.calculateTiles(this.zoomLevel,this.relevantScale(),this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width).map(function(e){return[t.zoomLevel,e]});this.setVisibleTiles(r)}}},{key:"getTilePosAndDimensions",value:function(e,t,n){var r=t[0],i=t[0];if(this.tilesetInfo.resolutions){var o=n||1024,a=this.tilesetInfo.resolutions.map(function(e){return+e}).sort(function(e,t){return t-e})[e],s=a*o,l=s;return{tileX:a*o*t[0],tileY:a*o*t[1],tileWidth:s,tileHeight:l}}var u=this.tilesetInfo.max_width,c=this.tilesetInfo.max_width,d=this.tilesetInfo.min_pos[0],h=this.tilesetInfo.min_pos[1],f=u/Math.pow(2,e),p=c/Math.pow(2,e);return{tileX:d+r*f,tileY:h+i*p,tileWidth:f,tileHeight:p}}},{key:"updateTile",value:function(e){}}]),t}(c.default);t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(1)),i=u(n(2)),o=n(36),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),l=n(9),a=n(6);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function t(e){(0,r.default)(this,t),this.pAxis=new s.Graphics,this.track=e,this.axisTexts=[],this.axisTextFontFamily="Arial",this.axisTextFontSize=10,this.tickFormat=(0,o.format)(".2")}return(0,i.default)(t,[{key:"startAxis",value:function(e){var t=this.pAxis;t.clear(),t.lineStyle(1,0,1),t.moveTo(0,0),t.lineTo(0,e)}},{key:"createAxisTexts",value:function(e,t){this.tickValues=this.calculateAxisTickValues(e,t);for(var n=0,r=(0,l.getDarkTheme)()?"#cccccc":"black";n<this.tickValues.length;){for(var i=this.tickValues[n];this.axisTexts.length<=n;){var o=new s.Text(i,{fontSize:String(this.axisTextFontSize)+"px",fontFamily:this.axisTextFontFamily,fill:r});this.axisTexts.push(o),this.pAxis.addChild(o)}this.axisTexts[n].text=this.tickFormat(i),this.axisTexts[n].anchor.y=.5,this.axisTexts[n].anchor.x=.5,n++}for(;this.axisTexts.length>this.tickValues.length;){var a=this.axisTexts.pop();this.pAxis.removeChild(a)}}},{key:"calculateAxisTickValues",value:function(e,t){var n=Math.max(Math.ceil(t/40),1),r=e.ticks(n);return r.length<1&&1<(r=e.ticks(n+1)).length&&(r=[r[0]]),r}},{key:"drawAxisLeft",value:function(e,t){this.startAxis(this.pAxis,t),this.createAxisTexts(e,t);var n=this.pAxis;(0,l.getDarkTheme)()&&n.lineStyle(n.lineWidth,(0,a.colorToHex)("#ffffff"),.33),n.moveTo(0,t),n.lineTo(-5,t);for(var r=0;r<this.axisTexts.length;r++){var i=this.tickValues[r];this.axisTexts[r].x=-(9+this.axisTexts[r].width/2),this.axisTexts[r].y=e(i),n.moveTo(-0,e(i)),n.lineTo(-5,e(i)),this.track&&this.track.flipText&&(this.axisTexts[r].scale.x=-1)}this.hideOverlappingAxisLabels()}},{key:"drawAxisRight",value:function(e,t){this.startAxis(t),this.createAxisTexts(e,t);var n=this.pAxis;n.moveTo(0,0),n.lineTo(5,0),n.moveTo(0,t),n.lineTo(5,t);for(var r=0;r<this.axisTexts.length;r++){var i=this.tickValues[r];this.axisTexts[r].x=9+this.axisTexts[r].width/2,this.axisTexts[r].y=e(i),n.moveTo(0,e(i)),n.lineTo(5,e(i)),this.track&&this.track.flipText&&(this.axisTexts[r].scale.x=-1)}this.hideOverlappingAxisLabels()}},{key:"hideOverlappingAxisLabels",value:function(){for(var e=this.axisTexts.length-1;0<=e;e--)this.axisTexts[e].visible=!0;for(var t=this.axisTexts.length-1;0<=t;t--)if(this.axisTexts[t].visible)for(var n=t-1;0<=n&&this.axisTexts[t].y+this.axisTexts[t].height/2>this.axisTexts[n].y-this.axisTexts[n].height/2;)this.axisTexts[n].visible=!1,n-=1}},{key:"exportVerticalAxis",value:function(e){var t=document.createElement("g");t.setAttribute("class","axis-vertical");var n="black";this.track&&(n=this.track.options.lineStrokeColor?this.track.options.lineStrokeColor:"blue"),(0,l.getDarkTheme)()&&(n="#cccccc");var r=document.createElement("path");return r.setAttribute("fill","transparent"),r.setAttribute("stroke",n),r.setAttribute("id","axis-line"),r.setAttribute("d","M0,0 L0,"+String(e)),t.appendChild(r),t}},{key:"createAxisSVGLine",value:function(){var e="black";this.track&&(e=this.track.options.lineStrokeColor?this.track.options.lineStrokeColor:"blue"),(0,l.getDarkTheme)()&&(e="#cccccc");var t=document.createElement("path");return t.setAttribute("id","tick-mark"),t.setAttribute("fill","transparent"),t.setAttribute("stroke",e),t}},{key:"createAxisSVGText",value:function(e){var t=document.createElement("text");return t.innerHTML=e,t.setAttribute("id","axis-text"),t.setAttribute("text-anchor","middle"),t.setAttribute("font-family",this.axisTextFontFamily),t.setAttribute("font-size",this.axisTextFontSize),t.setAttribute("dy",this.axisTextFontSize/2-2),t}},{key:"exportAxisLeftSVG",value:function(e,t){var n=this.exportVerticalAxis(t),r=this.createAxisSVGLine();n.appendChild(r),r.setAttribute("d","M0,0 L-5,0");for(var i=0;i<this.axisTexts.length;i++){var o=this.tickValues[i],a=this.axisTexts[i],s=this.createAxisSVGLine();n.appendChild(s),s.setAttribute("d","M0,"+String(e(o))+" L"+-5+","+String(e(o)));var l=document.createElement("g");if(n.appendChild(l),a.visible){var u=this.createAxisSVGText(a.text);l.appendChild(u)}l.setAttribute("transform","translate("+String(a.position.x)+","+String(a.position.y)+")\n             scale("+String(a.scale.x)+","+String(a.scale.y)+")")}return n}},{key:"exportAxisRightSVG",value:function(e,t){var n=this.exportVerticalAxis(t),r=this.createAxisSVGLine();n.appendChild(r),r.setAttribute("d","M0,0 L5,0");for(var i=0;i<this.axisTexts.length;i++){var o=this.tickValues[i],a=this.axisTexts[i],s=this.createAxisSVGLine();n.appendChild(s),s.setAttribute("d","M0,"+String(e(o))+" L5,"+String(e(o)));var l=document.createElement("g");if(n.appendChild(l),a.visible){var u=this.createAxisSVGText(a.text);l.appendChild(u)}l.setAttribute("transform","translate("+String(a.position.x)+","+String(a.position.y)+")\n             scale("+String(a.scale.x)+","+String(a.scale.y)+")")}return n}},{key:"clearAxis",value:function(){for(var e=this.pAxis;this.axisTexts.length;){var t=this.axisTexts.pop();e.removeChild(t)}e.clear()}}]),t}();t.default=c},function(e,x,_){"use strict";(function(e,r){var i=_(154),t=_(369);e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var n="undefined"!=typeof Uint8ClampedArray,o=e.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=t([32,0])),o.BUFFER||(o.BUFFER=t([32,0]));var a=o.DATA,s=o.BUFFER;function l(e){if(e){var t=e.length||e.byteLength,n=i.log2(t);a[n].push(e)}}function u(e){e=i.nextPow2(e);var t=i.log2(e),n=a[t];return 0<n.length?n.pop():new ArrayBuffer(e)}function c(e){return new Uint8Array(u(e),0,e)}function d(e){return new Uint16Array(u(2*e),0,e)}function h(e){return new Uint32Array(u(4*e),0,e)}function f(e){return new Int8Array(u(e),0,e)}function p(e){return new Int16Array(u(2*e),0,e)}function v(e){return new Int32Array(u(4*e),0,e)}function m(e){return new Float32Array(u(4*e),0,e)}function g(e){return new Float64Array(u(8*e),0,e)}function y(e){return n?new Uint8ClampedArray(u(e),0,e):c(e)}function b(e){return new DataView(u(e),0,e)}function w(e){e=i.nextPow2(e);var t=i.log2(e),n=s[t];return 0<n.length?n.pop():new r(e)}x.free=function(e){if(r.isBuffer(e))s[i.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|i.log2(t);a[n].push(e)}},x.freeUint8=x.freeUint16=x.freeUint32=x.freeInt8=x.freeInt16=x.freeInt32=x.freeFloat32=x.freeFloat=x.freeFloat64=x.freeDouble=x.freeUint8Clamped=x.freeDataView=function(e){l(e.buffer)},x.freeArrayBuffer=l,x.freeBuffer=function(e){s[i.log2(e.length)].push(e)},x.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return u(e);switch(t){case"uint8":return c(e);case"uint16":return d(e);case"uint32":return h(e);case"int8":return f(e);case"int16":return p(e);case"int32":return v(e);case"float":case"float32":return m(e);case"double":case"float64":return g(e);case"uint8_clamped":return y(e);case"buffer":return w(e);case"data":case"dataview":return b(e);default:return null}return null},x.mallocArrayBuffer=u,x.mallocUint8=c,x.mallocUint16=d,x.mallocUint32=h,x.mallocInt8=f,x.mallocInt16=p,x.mallocInt32=v,x.mallocFloat32=x.mallocFloat=m,x.mallocFloat64=x.mallocDouble=g,x.mallocUint8Clamped=y,x.mallocDataView=b,x.mallocBuffer=w,x.clearCache=function(){for(var e=0;e<32;++e)o.UINT8[e].length=0,o.UINT16[e].length=0,o.UINT32[e].length=0,o.INT8[e].length=0,o.INT16[e].length=0,o.INT32[e].length=0,o.FLOAT[e].length=0,o.DOUBLE[e].length=0,o.UINT8C[e].length=0,a[e].length=0,s[e].length=0}}).call(x,_(65),_(191).Buffer)},function(e,t,n){"use strict";"use restrict";function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(0<e)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,n;return t=(65535<e)<<4,t|=n=(255<(e>>>=t))<<3,t|=n=(15<(e>>>=n))<<2,(t|=n=(3<(e>>>=n))<<1)|(e>>>=n)>>1},t.log10=function(e){return 1e9<=e?9:1e8<=e?8:1e7<=e?7:1e6<=e?6:1e5<=e?5:1e4<=e?4:1e3<=e?3:100<=e?2:10<=e?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=r,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(i),t.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(11)),l=i(n(37)),s=i(n(24)),u=i(n(22)),o=i(n(1)),r=i(n(2)),a=i(n(21));function i(e){return e&&e.__esModule?e:{default:e}}var d=function(){function i(n,e){var r=this;(0,o.default)(this,i),this.childTracks=n.map(e),this.createdTracks={},this.uid=a.default.nice(),this.childTracks.forEach(function(e,t){r.createdTracks[n[t].uid]=e});for(var t=0;t<this.childTracks.length;t++)this.childTracks[t]||console.error("Empty child track in CombinedTrack:",this)}return(0,r.default)(i,[{key:"updateContents",value:function(e,n){var r=this,i=[],o=new u.default;e.forEach(function(e){if(o.add(e.uid),e.uid in r.createdTracks)i.push(r.createdTracks[e.uid]);else{var t=n(e);t.setPosition(r.position),t.setDimensions(r.dimensions),i.push(t),t.zoomed(r._xScale,r._yScale),r.createdTracks[e.uid]=t}}),this.childTracks=i;var t=new u.default((0,s.default)(this.createdTracks)),a=new u.default([].concat((0,l.default)(t)).filter(function(e){return!o.has(e)}));return[].concat((0,l.default)(a)).forEach(function(e){r.createdTracks[e].remove(),delete r.createdTracks[e]}),this}},{key:"setPosition",value:function(e){this.position=e;for(var t=0;t<this.childTracks.length;t++)this.childTracks[t].setPosition(e)}},{key:"setDimensions",value:function(e){this.dimensions=e;for(var t=0;t<this.childTracks.length;t++)this.childTracks[t].setDimensions(e)}},{key:"zoomed",value:function(e,t,n,r,i,o,a){this._xScale=e,this._yScale=t;for(var s=0;s<this.childTracks.length;s++)this.childTracks[s].zoomed(e,t,n,r,i,o,a)}},{key:"draw",value:function(){}},{key:"refScalesChanged",value:function(e,t){for(var n=0;n<this.childTracks.length;n++)this.childTracks[n].refScalesChanged(e,t)}},{key:"remove",value:function(){for(var e=0;e<this.childTracks.length;e++)this.childTracks[e].remove()}},{key:"exportSVG",value:function(){var e=document.createElement("g"),t=!0,n=!1,r=void 0;try{for(var i,o=(0,c.default)(this.childTracks);!(t=(i=o.next()).done);t=!0){var a=i.value;a.exportSVG&&e.appendChild(a.exportSVG()[0])}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return[e,e]}},{key:"rerender",value:function(e){}},{key:"minValue",value:function(){if(0==arguments.length){var e=this.childTracks.filter(function(e){return e.minValue}).map(function(e){return e.minValue()}).filter(function(e){return e});return Math.min.apply(Math,(0,l.default)(e))}var t=!0,n=!1,r=void 0;try{for(var i,o=(0,c.default)(this.childTracks);!(t=(i=o.next()).done);t=!0){var a=i.value;a.minValue&&a.minValue(_)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"maxValue",value:function(e){if(0==arguments.length){var t=this.childTracks.filter(function(e){return e.maxValue}).map(function(e){return e.maxValue()}).filter(function(e){return e});return Math.max.apply(Math,(0,l.default)(t))}var n=!0,r=!1,i=void 0;try{for(var o,a=(0,c.default)(this.childTracks);!(n=(o=a.next()).done);n=!0){var s=o.value;s.maxValue&&s.maxValue(e)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"respondsToPosition",value:function(e,t){return e>=this.position[0]&&e<=this.dimensions[0]+this.position[0]&&t>=this.position[1]&&t<=this.dimensions[1]+this.position[1]}},{key:"stopHover",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=(0,c.default)(this.childTracks);!(e=(r=i.next()).done);e=!0){var o=r.value;o.stopHover&&o.stopHover()}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"getMouseOverHtml",value:function(e,t){var n="",r=!0,i=!1,o=void 0;try{for(var a,s=(0,c.default)(this.childTracks);!(r=(a=s.next()).done);r=!0){var l=a.value;if(l.getMouseOverHtml){var u=l.getMouseOverHtml(e,t);u&&u.length&&(n+=u,n+="<br/>")}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}}]),i}();t.default=d},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(46),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,n){var r=n(114),i=n(395),o=n(396),a=n(397),s=n(398),l=n(399);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,e.exports=u},function(e,t,n){var r=n(66)(n(42),"Map");e.exports=r},function(e,t,n){var r=n(406),i=n(413),o=n(415),a=n(416),s=n(417);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(426),i=n(225),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return o.call(t,e)}))}:i;e.exports=s},function(e,t,n){var r=n(428),i=n(68),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,s,l){(function(e){var t=l(42),n=l(429),r="object"==typeof s&&s&&!s.nodeType&&s,i=r&&"object"==typeof e&&e&&!e.nodeType&&e,o=i&&i.exports===r?t.Buffer:void 0,a=(o?o.isBuffer:void 0)||n;e.exports=a}).call(s,l(119)(e))},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||n.test(e))&&-1<e&&e%1==0&&e<t}},function(e,t){e.exports=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(32),i=n(96),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(22)),i=p(n(3)),o=p(n(1)),a=p(n(2)),s=p(n(4)),l=p(n(5)),u=p(n(8)),c=p(n(0)),d=p(n(477)),h=p(n(479)),f=n(6);function p(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function n(e){(0,o.default)(this,n);var t=(0,s.default)(this,(n.__proto__||(0,i.default)(n)).call(this,e));return t.moveable=!0,t}return(0,l.default)(n,e),(0,a.default)(n,[{key:"render",value:function(){var o=this;return c.default.createElement("div",{ref:function(e){o.el=e},className:this.props.className,onMouseEnter:this.handleMouseEnter.bind(this),onMouseLeave:function(e){var t,n,r,i;t=e.nativeEvent.clientX,n=e.nativeEvent.clientY,r=o.el,i=r.getBoundingClientRect(),(0,f.isWithin)(t,n,i.left,i.left+i.width,i.top,i.top+i.height)||o.handleMouseLeave()},style:{height:this.props.height,width:this.props.width}},c.default.createElement(d.default,{height:this.props.height,key:this.props.uid,resizeHandles:this.props.editable?this.props.resizeHandles:new r.default,sizeChanged:function(e){return o.props.handleResizeTrack(o.props.uid,e.width,e.height)},style:{background:"transparent"},uid:this.props.uid,width:this.props.width}),this.props.editable&&this.getControls(this.state.controlsVisible||this.props.item.configMenuVisible))}}]),n}(h.default);v.propTypes={className:u.default.string,uid:u.default.string,item:u.default.object,height:u.default.number,width:u.default.number},t.default=v},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=!1;t.getDarkTheme=function(){return n},t.setDarkTheme=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];n=!e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var u=b(n(11)),c=b(n(37)),a=b(n(24)),d=b(n(22)),s=b(n(3)),i=b(n(1)),r=b(n(2)),l=b(n(4)),h=b(n(10)),f=b(n(5)),p=b(n(21)),v=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),o=b(n(41)),m=n(9),g=n(6),y=n(12);function b(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function o(e,t,n){(0,i.default)(this,o),t.name="© OpenStreetMap"+(t.name?"\n"+String(t.name):"");var r=(0,l.default)(this,(o.__proto__||(0,s.default)(o)).call(this,e,t));return r.visibleTiles=new d.default,r.visibleTileIds=new d.default,r.fetching=new d.default,r.fetchedTiles={},r.tileGraphics={},r.minX=+r.options.minPos||-180,r.maxX=+r.options.maxPos||180,r.minY=r.minX,r.maxY=r.maxX,r.maxZoom=19,r.maxWidth=r.maxX-r.minX,r.animate=n,r.uuid=p.default.nice(),r.refreshTilesDebounced=(0,g.debounce)(r.refreshTiles.bind(r),y.ZOOM_DEBOUNCE),r}return(0,f.default)(o,e),(0,r.default)(o,[{key:"visibleAndFetchedIds",value:function(){var t=this;return(0,a.default)(this.fetchedTiles).filter(function(e){return t.visibleTileIds.has(e)})}},{key:"visibleAndFetchedTiles",value:function(){var t=this;return this.visibleAndFetchedIds().map(function(e){return t.fetchedTiles[e]})}},{key:"setVisibleTiles",value:function(e){var t=this;this.visibleTiles=e.map(function(e){return{tileId:t.tileToLocalId(e),remoteId:t.tileToRemoteId(e),mirrored:e.mirrored}}),this.visibleTileIds=new d.default(this.visibleTiles.map(function(e){return e.tileId}))}},{key:"removeAllTiles",value:function(){var e=new d.default((0,a.default)(this.fetchedTiles));this.removeTiles([].concat((0,c.default)(e)))}},{key:"refreshTiles",value:function(){var t=this;this.calculateVisibleTiles();for(var n=new d.default((0,a.default)(this.fetchedTiles)),e=[].concat((0,c.default)(this.visibleTiles)).filter(function(e){return!t.fetching.has(e.remoteId)&&!n.has(e.tileId)}),r=0;r<e.length;r++)this.fetching.add(e[r].remoteId);var i=[].concat((0,c.default)(n)).filter(function(e){return!t.visibleTileIds.has(e)});this.removeTiles(i),this.fetchNewTiles(e)}},{key:"removeTiles",value:function(e){var n=this;e.length&&this.areAllVisibleTilesLoaded()&&(e.forEach(function(e){var t=e;n.destroyTile(n.fetchedTiles[t]),t in n.tileGraphics&&(n.pMain.removeChild(n.tileGraphics[t]),delete n.tileGraphics[t]),delete n.fetchedTiles[t]}),this.synchronizeTilesAndGraphics(),this.draw())}},{key:"tileToLocalId",value:function(e){return e.join(".")}},{key:"tileToRemoteId",value:function(e){return e.join(".")}},{key:"localToRemoteId",value:function(e){var t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){var e=m.tileProxy.calculateZoomLevel(this._xScale,this.minX,this.maxX),t=m.tileProxy.calculateZoomLevel(this._xScale,this.minY,this.maxY),n=Math.min(Math.max(e,t),this.maxZoom);return this.options.maxZoom&&(0<=this.options.maxZoom?n=Math.min(this.options.maxZoom,n):console.error("Invalid maxZoom on track:",this)),n}},{key:"calculateVisibleTiles",value:function(){this.zoomLevel=this.calculateZoomLevel(),this.xTiles=m.tileProxy.calculateTiles(this.zoomLevel,this._xScale,this.minX,this.maxX,this.maxZoom,this.maxWidth),this.yTiles=m.tileProxy.calculateTiles(this.zoomLevel,this._yScale,this.minX,this.maxX,this.maxZoom,this.maxWidth);for(var e=this.xTiles,t=this.yTiles,n=this.zoomLevel,r=[],i=0;i<e.length;i++)for(var o=0;o<t.length;o++){var a=[n,e[i],t[o]];r.push(a)}this.setVisibleTiles(r)}},{key:"zoomed",value:function(e,t,n,r,i){(0,h.default)(o.prototype.__proto__||(0,s.default)(o.prototype),"zoomed",this).call(this,e,t),this.xScale(e),this.yScale(t),this.pMain.position.x=r,this.pMain.position.y=i,this.pMain.scale.x=n,this.pMain.scale.y=n,this.refreshTilesDebounced()}},{key:"setPosition",value:function(e){(0,h.default)(o.prototype.__proto__||(0,s.default)(o.prototype),"setPosition",this).call(this,e)}},{key:"setDimensions",value:function(e){(0,h.default)(o.prototype.__proto__||(0,s.default)(o.prototype),"setDimensions",this).call(this,e)}},{key:"areAllVisibleTilesLoaded",value:function(){for(var e=new d.default((0,a.default)(this.fetchedTiles)),t=[].concat((0,c.default)(this.visibleTileIds)),n=0;n<t.length;n++)if(!e.has(t[n]))return!1;return!0}},{key:"allTilesLoaded",value:function(){}},{key:"minValue",value:function(e){return e&&(this.scale.minValue=e),this.scale.minValue}},{key:"maxValue",value:function(e){return e&&(this.scale.maxValue=e),this.scale.maxValue}},{key:"minRawValue",value:function(){return this.scale.minRawValue}},{key:"maxRawValue",value:function(){return this.scale.maxRawValue}},{key:"getTilePosAndDimensions",value:function(e,t){var n=this.maxWidth/Math.pow(2,e),r=n;return{tileX:this.minX+t[0]*n,tileY:this.minY+t[1]*r,tileWidth:n,tileHeight:r}}},{key:"setSpriteProperties",value:function(e,t,n){var r=this.getTilePosAndDimensions(t,n),i=r.tileX,o=r.tileY,a=r.tileWidth,s=r.tileHeight;e.x=this._refXScale(i),e.y=this._refYScale(o);var l=i+a,u=o+s;e.width=this._refXScale(l)-this._refXScale(i),e.height=this._refYScale(u)-this._refYScale(o)}},{key:"initTile",value:function(e){var t=new v.Texture(new v.BaseTexture(e.tileData.img)),n=new v.Sprite(t),r=e.graphics;e.sprite=n,this.setSpriteProperties(e.sprite,e.tileData.zoomLevel,e.tileData.tilePos),r.removeChildren(),r.addChild(e.sprite)}},{key:"updateTile",value:function(e){}},{key:"destroyTile",value:function(e){}},{key:"addMissingGraphics",value:function(){for(var e=(0,a.default)(this.fetchedTiles),t=0;t<e.length;t++)if(!(e[t]in this.tileGraphics)){var n=new v.Graphics;this.pMain.addChild(n),this.fetchedTiles[e[t]].graphics=n,this.initTile(this.fetchedTiles[e[t]]),this.tileGraphics[e[t]]=n}}},{key:"updateExistingGraphics",value:function(){for(var e=(0,a.default)(this.fetchedTiles),t=0;t<e.length;t++)this.updateTile(this.fetchedTiles[e[t]])}},{key:"synchronizeTilesAndGraphics",value:function(){this.addMissingGraphics(),this.updateExistingGraphics()}},{key:"loadTileData",value:function(e,t){var n=this.lruCache.get(e.tileId);return n||(n=t(e.data,e.type),this.lruCache.put(e.tileId,n)),n}},{key:"getTileUrl",value:function(e){var t=["a","b","c"],n=Math.floor(Math.random()*t.length);return"http://"+String(t[n])+".tile.openstreetmap.org/"+String(e[0])+"/"+String(e[1])+"/"+String(e[2])+".png"}},{key:"fetchNewTiles",value:function(e){var o=this;if(0<e.length){var t=[].concat((0,c.default)(new d.default(e.map(function(e){return e.remoteId})))),n=function(t){var n=t.split("."),r=o.getTileUrl(n),i=new Image;i.crossOrigin="Anonymous",i.src=r,i.onload=function(){var e={};e[t]={tileId:t,img:i,zoomLevel:+n[0],tilePos:[+n[1],+n[2]],tileSrc:r},o.receivedTiles(e)}},r=!0,i=!1,a=void 0;try{for(var s,l=(0,u.default)(t);!(r=(s=l.next()).done);r=!0)n(s.value)}catch(e){i=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw a}}}}},{key:"receivedTiles",value:function(e){for(var t=0;t<this.visibleTiles.length;t++){var n=this.visibleTiles[t].tileId;e[this.visibleTiles[t].remoteId]&&this.visibleTiles[t].remoteId in e&&(n in this.fetchedTiles||(this.fetchedTiles[n]=this.visibleTiles[t]),this.fetchedTiles[n].tileData=e[this.visibleTiles[t].remoteId])}for(var r in e)e[r]&&this.fetching.has(r)&&this.fetching.delete(r);this.synchronizeTilesAndGraphics(),this.refreshTiles(),this.draw(),this.animate()}},{key:"draw",value:function(){this.delayDrawing||(0,h.default)(o.prototype.__proto__||(0,s.default)(o.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(){}},{key:"refScalesChanged",value:function(e,t){for(var n in(0,h.default)(o.prototype.__proto__||(0,s.default)(o.prototype),"refScalesChanged",this).call(this,e,t),this.fetchedTiles){var r=this.fetchedTiles[n];r.sprite&&this.setSpriteProperties(r.sprite,r.tileData.zoomLevel,r.tileData.tilePos)}}}]),o}(o.default);t.default=w},function(e,et,t){(function(e,t){var r="__lodash_hash_undefined__",w=1,g=2,n=9007199254740991,y="[object Arguments]",b="[object Array]",i="[object AsyncFunction]",x="[object Boolean]",_="[object Date]",k="[object Error]",o="[object Function]",a="[object GeneratorFunction]",S="[object Map]",T="[object Number]",s="[object Null]",C="[object Object]",l="[object Promise]",u="[object Proxy]",O="[object RegExp]",E="[object Set]",M="[object String]",P="[object Symbol]",c="[object Undefined]",d="[object WeakMap]",A="[object ArrayBuffer]",R="[object DataView]",h=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p[y]=p[b]=p[A]=p[x]=p[R]=p[_]=p[k]=p[o]=p[S]=p[T]=p[C]=p[O]=p[E]=p[M]=p[d]=!1;var v="object"==typeof e&&e&&e.Object===Object&&e,m="object"==typeof self&&self&&self.Object===Object&&self,j=v||m||Function("return this")(),I="object"==typeof et&&et&&!et.nodeType&&et,L=I&&"object"==typeof t&&t&&!t.nodeType&&t,D=L&&L.exports===I,N=D&&v.process,B=function(){try{return N&&N.binding&&N.binding("util")}catch(e){}}(),F=B&&B.isTypedArray;function V(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function z(e){var n=-1,r=Array(e.size);return e.forEach(function(e,t){r[++n]=[t,e]}),r}function H(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var U,q,W,G=Array.prototype,Y=Function.prototype,X=Object.prototype,Z=j["__core-js_shared__"],K=Y.toString,$=X.hasOwnProperty,Q=(U=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+U:"",J=X.toString,ee=RegExp("^"+K.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=D?j.Buffer:void 0,ne=j.Symbol,re=j.Uint8Array,ie=X.propertyIsEnumerable,oe=G.splice,ae=ne?ne.toStringTag:void 0,se=Object.getOwnPropertySymbols,le=te?te.isBuffer:void 0,ue=(q=Object.keys,W=Object,function(e){return q(W(e))}),ce=Be(j,"DataView"),de=Be(j,"Map"),he=Be(j,"Promise"),fe=Be(j,"Set"),pe=Be(j,"WeakMap"),ve=Be(Object,"create"),me=He(ce),ge=He(de),ye=He(he),be=He(fe),we=He(pe),xe=ne?ne.prototype:void 0,_e=xe?xe.valueOf:void 0;function ke(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ce(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Te;++t<n;)this.add(e[t])}function Oe(e){var t=this.__data__=new Se(e);this.size=t.size}function Ee(e,t){var n=We(e),r=!n&&qe(e),i=!n&&!r&&Ge(e),o=!n&&!r&&!i&&Qe(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var u in e)!t&&!$.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ze(u,l))||s.push(u);return s}function Me(e,t){for(var n=e.length;n--;)if(Ue(e[n][0],t))return n;return-1}function Pe(e){return null==e?void 0===e?c:s:ae&&ae in Object(e)?function(e){var t=$.call(e,ae),n=e[ae];try{var r=!(e[ae]=void 0)}catch(e){}var i=J.call(e);r&&(t?e[ae]=n:delete e[ae]);return i}(e):(t=e,J.call(t));var t}function Ae(e){return Ke(e)&&Pe(e)==y}function Re(e,t,n,r,i){return e===t||(null==e||null==t||!Ke(e)&&!Ke(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var a=We(e),s=We(t),l=a?b:Ve(e),u=s?b:Ve(t),c=(l=l==y?C:l)==C,d=(u=u==y?C:u)==C,h=l==u;if(h&&Ge(e)){if(!Ge(t))return!1;c=!(a=!0)}if(h&&!c)return o||(o=new Oe),a||Qe(e)?Le(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case A:return!(e.byteLength!=t.byteLength||!o(new re(e),new re(t)));case x:case _:case T:return Ue(+e,+t);case k:return e.name==t.name&&e.message==t.message;case O:case M:return e==t+"";case S:var s=z;case E:var l=r&w;if(s||(s=H),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=g,a.set(e,t);var c=Le(s(e),s(t),r,i,o,a);return a.delete(e),c;case P:if(_e)return _e.call(e)==_e.call(t)}return!1}(e,t,l,n,r,i,o);if(!(n&w)){var f=c&&$.call(e,"__wrapped__"),p=d&&$.call(t,"__wrapped__");if(f||p){var v=f?e.value():e,m=p?t.value():t;return o||(o=new Oe),i(v,m,n,r,o)}}if(!h)return!1;return o||(o=new Oe),function(e,t,n,r,i,o){var a=n&w,s=De(e),l=s.length,u=De(t).length;if(l!=u&&!a)return!1;for(var c=l;c--;){var d=s[c];if(!(a?d in t:$.call(t,d)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<l;){d=s[c];var v=e[d],m=t[d];if(r)var g=a?r(m,v,d,t,e,o):r(v,m,d,e,t,o);if(!(void 0===g?v===m||i(v,m,n,r,o):g)){f=!1;break}p||(p="constructor"==d)}if(f&&!p){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,r,i,o)}(e,t,n,r,Re,i))}function je(e){return!(!Ze(e)||(t=e,Q&&Q in t))&&(Ye(e)?ee:h).test(He(e));var t}function Ie(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||X,t!==r)return ue(e);var t,n,r,i=[];for(var o in Object(e))$.call(e,o)&&"constructor"!=o&&i.push(o);return i}function Le(e,t,r,i,o,a){var n=r&w,s=e.length,l=t.length;if(s!=l&&!(n&&s<l))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var c=-1,d=!0,h=r&g?new Ce:void 0;for(a.set(e,t),a.set(t,e);++c<s;){var f=e[c],p=t[c];if(i)var v=n?i(p,f,c,t,e,a):i(f,p,c,e,t,a);if(void 0!==v){if(v)continue;d=!1;break}if(h){if(!V(t,function(e,t){if(n=t,!h.has(n)&&(f===e||o(f,e,r,i,a)))return h.push(t);var n})){d=!1;break}}else if(f!==p&&!o(f,p,r,i,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function De(e){return n=Fe,r=Je(t=e),We(t)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(t));var t,n,r}function Ne(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Be(e,t){var n,r,i=(r=t,null==(n=e)?void 0:n[r]);return je(i)?i:void 0}ke.prototype.clear=function(){this.__data__=ve?ve(null):{},this.size=0},ke.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ke.prototype.get=function(e){var t=this.__data__;if(ve){var n=t[e];return n===r?void 0:n}return $.call(t,e)?t[e]:void 0},ke.prototype.has=function(e){var t=this.__data__;return ve?void 0!==t[e]:$.call(t,e)},ke.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ve&&void 0===t?r:t,this},Se.prototype.clear=function(){this.__data__=[],this.size=0},Se.prototype.delete=function(e){var t=this.__data__,n=Me(t,e);return!(n<0||(n==t.length-1?t.pop():oe.call(t,n,1),--this.size,0))},Se.prototype.get=function(e){var t=this.__data__,n=Me(t,e);return n<0?void 0:t[n][1]},Se.prototype.has=function(e){return-1<Me(this.__data__,e)},Se.prototype.set=function(e,t){var n=this.__data__,r=Me(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Te.prototype.clear=function(){this.size=0,this.__data__={hash:new ke,map:new(de||Se),string:new ke}},Te.prototype.delete=function(e){var t=Ne(this,e).delete(e);return this.size-=t?1:0,t},Te.prototype.get=function(e){return Ne(this,e).get(e)},Te.prototype.has=function(e){return Ne(this,e).has(e)},Te.prototype.set=function(e,t){var n=Ne(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ce.prototype.add=Ce.prototype.push=function(e){return this.__data__.set(e,r),this},Ce.prototype.has=function(e){return this.__data__.has(e)},Oe.prototype.clear=function(){this.__data__=new Se,this.size=0},Oe.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Oe.prototype.get=function(e){return this.__data__.get(e)},Oe.prototype.has=function(e){return this.__data__.has(e)},Oe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Se){var r=n.__data__;if(!de||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Te(r)}return n.set(e,t),this.size=n.size,this};var Fe=se?function(t){return null==t?[]:(t=Object(t),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(se(t),function(e){return ie.call(t,e)}))}:function(){return[]},Ve=Pe;function ze(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||f.test(e))&&-1<e&&e%1==0&&e<t}function He(e){if(null!=e){try{return K.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ue(e,t){return e===t||e!=e&&t!=t}(ce&&Ve(new ce(new ArrayBuffer(1)))!=R||de&&Ve(new de)!=S||he&&Ve(he.resolve())!=l||fe&&Ve(new fe)!=E||pe&&Ve(new pe)!=d)&&(Ve=function(e){var t=Pe(e),n=t==C?e.constructor:void 0,r=n?He(n):"";if(r)switch(r){case me:return R;case ge:return S;case ye:return l;case be:return E;case we:return d}return t});var qe=Ae(function(){return arguments}())?Ae:function(e){return Ke(e)&&$.call(e,"callee")&&!ie.call(e,"callee")},We=Array.isArray;var Ge=le||function(){return!1};function Ye(e){if(!Ze(e))return!1;var t=Pe(e);return t==o||t==a||t==i||t==u}function Xe(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=n}function Ze(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ke(e){return null!=e&&"object"==typeof e}var $e,Qe=F?($e=F,function(e){return $e(e)}):function(e){return Ke(e)&&Xe(e.length)&&!!p[Pe(e)]};function Je(e){return null!=(t=e)&&Xe(t.length)&&!Ye(t)?Ee(e):Ie(e);var t}t.exports=function(e,t){return Re(e,t)}}).call(et,t(65),t(119)(e))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=d(n(3)),a=d(n(1)),r=d(n(2)),s=d(n(4)),l=d(n(10)),u=d(n(5)),i=n(57),c=n(9);function d(e){return e&&e.__esModule?e:{default:e}}var h=(0,i.Mixin)(function(e){return function(e){function i(e,t,n){(0,a.default)(this,i);var r=(0,s.default)(this,(i.__proto__||(0,o.default)(i)).call(this,e,t));return r.pubSubs.push(c.pubSub.subscribe("app.mouseMove",r.mouseMoveHandler.bind(r))),r.highlighted=!1,r.animate=n,r.MOUSEOVER_RADIUS=4,r}return(0,u.default)(i,e),(0,r.default)(i,[{key:"setPosition",value:function(e){(0,l.default)(i.prototype.__proto__||(0,o.default)(i.prototype),"setPosition",this).call(this,e),this.pMain.position.x=this.position[0],this.pMain.position.y=this.position[1]}},{key:"zoomed",value:function(e,t){(0,l.default)(i.prototype.__proto__||(0,o.default)(i.prototype),"zoomed",this).call(this,e,t),this.draw()}},{key:"respondsToPosition",value:function(){return this.highlighted}}]),i}(e)});t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(3)),i=h(n(1)),o=h(n(2)),a=h(n(4)),s=h(n(5)),l=h(n(8)),u=h(n(0)),c=h(n(29)),d=h(n(6));function h(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.clickHandlerBound=t.clickHandler.bind(t),t.contextMenuHandlerBound=t.contextMenuHandler.bind(t),t.resizeHandlerBound=t.resizeHandler.bind(t),t}return(0,s.default)(n,e),(0,o.default)(n,[{key:"componentDidMount",value:function(){this.popup=document.createElement("div"),document.body.appendChild(this.popup),this.popup.style.zIndex=99,this.popup.style.position="absolute",this.popup.className="hg-popup",document.addEventListener("click",this.clickHandlerBound,!0),document.addEventListener("contextmenu",this.contextMenuHandlerBound,!0),window.addEventListener("resize",this.resizeHandlerBound,!0),this._renderLayer()}},{key:"componentDidUpdate",value:function(){this._renderLayer()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.clickHandlerBound,!0),document.removeEventListener("contextmenu",this.contextMenuHandlerBound,!0),window.removeEventListener("resize",this.resizeHandlerBound,!0),c.default.unmountComponentAtNode(this.popup),document.body.removeChild(this.popup)}},{key:"_renderLayer",value:function(){c.default.render(this.props.children,this.popup)}},{key:"clickHandler",value:function(e){this.popup.contains(e.target)||this.props.onMenuClosed&&this.props.onMenuClosed(e)}},{key:"contextMenuHandler",value:function(e){e.altKey||(e.preventDefault(),this.clickHandler(e))}},{key:"resizeHandler",value:function(){this.props.onMenuClosed(null)}},{key:"render",value:function(){return u.default.createElement("div",null)}}]),n}(u.default.Component);f.defaultProps={onMenuClosed:d.default},f.propTypes={children:l.default.node.isRequired,onMenuClosed:l.default.func},t.default=f},function(e,t,n){var r=n(238),i=n(270);e.exports=function(e,t){return e&&r(e,i(t))}},function(e,t,n){var r=n(229)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(220);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){var o=n(26);e.exports=function(t,e,n,r){try{return r?e(o(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&o(i.call(t)),e}}},function(e,t,n){var r=n(39),i=n(16)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var i=n(26),o=n(61),a=n(16)("species");e.exports=function(e,t){var n,r=i(e).constructor;return void 0===r||null==(n=i(r)[a])?t:o(n)}},function(e,t,n){var r,i,o,a=n(38),s=n(288),l=n(104),u=n(72),c=n(17),d=c.process,h=c.setImmediate,f=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,m=0,g={},y="onreadystatechange",b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},w=function(e){b.call(e.data)};h&&f||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},f=function(e){delete g[e]},"process"==n(53)(d)?r=function(e){d.nextTick(a(b,e,1))}:v&&v.now?r=function(e){v.now(a(b,e,1))}:p?(o=(i=new p).port2,i.port1.onmessage=w,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",w,!1)):r=y in u("script")?function(e){l.appendChild(u("script"))[y]=function(){l.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:h,clear:f}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(26),i=n(27),o=n(135);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(17),i=n(13),o=n(25),a=n(28),s=n(16)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var o=n(16)("iterator"),a=!1;try{var r=[7][o]();r.return=function(){a=!0},Array.from(r,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var r=[7],i=r[o]();i.next=function(){return{done:n=!0}},r[o]=function(){return i},e(r)}catch(e){}return n}},function(e,t,n){var r=n(53);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(103),i=n(76).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(107),v=n(190),a=function(i,e){var o,a,s,l,u=Object(v.a)("beforesend","progress","load","error"),c=Object(r.a)(),d=new XMLHttpRequest,h=null,f=null,p=0;function t(e){var t,n,r,i=d.status;if(!i&&((r=(n=d).responseType)&&"text"!==r?n.response:n.responseText)||200<=i&&i<300||304===i){if(s)try{t=s.call(o,d)}catch(e){return void u.call("error",o,e)}else t=d;u.call("load",o,t)}else u.call("error",o,e)}if("undefined"==typeof XDomainRequest||"withCredentials"in d||!/^(http(s)?:)?\/\//.test(i)||(d=new XDomainRequest),"onload"in d?d.onload=d.onerror=d.ontimeout=t:d.onreadystatechange=function(e){3<d.readyState&&t(e)},d.onprogress=function(e){u.call("progress",o,e)},o={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?c.get(e):(null==t?c.remove(e):c.set(e,t+""),o)},mimeType:function(e){return arguments.length?(a=null==e?null:e+"",o):a},responseType:function(e){return arguments.length?(l=e,o):l},timeout:function(e){return arguments.length?(p=+e,o):p},user:function(e){return arguments.length<1?h:(h=null==e?null:e+"",o)},password:function(e){return arguments.length<1?f:(f=null==e?null:e+"",o)},response:function(e){return s=e,o},get:function(e,t){return o.send("GET",e,t)},post:function(e,t){return o.send("POST",e,t)},send:function(e,t,n){var r;return d.open(e,i,!0,h,f),null==a||c.has("accept")||c.set("accept",a+",*/*"),d.setRequestHeader&&c.each(function(e,t){d.setRequestHeader(t,e)}),null!=a&&d.overrideMimeType&&d.overrideMimeType(a),null!=l&&(d.responseType=l),0<p&&(d.timeout=p),null==n&&"function"==typeof t&&(n=t,t=null),null!=n&&1===n.length&&(r=n,n=function(e,t){r(null==e?t:null)}),null!=n&&o.on("error",n).on("load",function(e){n(null,e)}),u.call("beforesend",o,d),d.send(null==t?null:t),o},abort:function(){return d.abort(),o},on:function(){var e=u.on.apply(u,arguments);return e===u?o:e}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return o.get(e)}return o};var i=function(r,i){return function(e,t){var n=a(e).mimeType(r).response(i);if(null!=t){if("function"!=typeof t)throw new Error("invalid callback: "+t);return n.get(t)}return n}},o=i("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)}),s=i("application/json",function(e){return JSON.parse(e.responseText)}),l=i("text/plain",function(e){return e.responseText}),u=i("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t}),c=n(100),d=function(n,o){return function(e,r,t){arguments.length<3&&(t=r,r=null);var i=a(e).mimeType(n);return i.row=function(e){return arguments.length?i.response((t=o,n=r=e,function(e){return t(e.responseText,n)})):r;var t,n},i.row(r),t?i.get(t):i}};var h=d("text/csv",c.csvParse),f=d("text/tab-separated-values",c.tsvParse);n.d(t,"request",function(){return a}),n.d(t,"html",function(){return o}),n.d(t,"json",function(){return s}),n.d(t,"text",function(){return l}),n.d(t,"xml",function(){return u}),n.d(t,"csv",function(){return h}),n.d(t,"tsv",function(){return f})},function(e,t,n){"use strict";var o={value:function(){}};function r(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new i(r)}function i(e){this._=e}function l(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function u(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=o,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}i.prototype=r.prototype={constructor:i,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=o[a]).type)i[n]=u(i[n],e.name,t);else if(null==t)for(n in i)i[n]=u(i[n],e.name,null);return this}for(;++a<s;)if((n=(e=o[a]).type)&&(n=l(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new i(e)},call:function(e,t){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var a=r;n.d(t,"a",function(){return a})},function(e,B,t){"use strict";(function(e){var r=t(306),o=t(307),a=t(308);function n(){return d.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return d.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=d.prototype:(null===e&&(e=new d(t)),e.length=t),e}function d(e,t,n){if(!(d.TYPED_ARRAY_SUPPORT||this instanceof d))return new d(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return i(this,e,t,n)}function i(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);d.TYPED_ARRAY_SUPPORT?(e=t).__proto__=d.prototype:e=c(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!d.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(d.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):c(e,t);if("Buffer"===t.type&&a(t.data))return c(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(l(t),e=s(e,t<0?0:0|h(t)),!d.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function c(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function f(e,t){if(d.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return D(e).length;default:if(r)return L(e).length;t=(""+t).toLowerCase(),r=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,d.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=a=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(s<n+l&&(n=s-l),o=n;0<=o;o--){for(var d=!0,h=0;h<l;h++)if(u(e,o+h)!==u(t,h)){d=!1;break}if(d)return o}return-1}function g(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?i<(r=Number(r))&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<r&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function y(e,t,n,r){return N(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function w(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,u=e[i],c=null,d=239<u?4:223<u?3:191<u?2:1;if(i+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&127<(l=(31&u)<<6|63&o)&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,d=1):65535<c&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(e){var t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=x));return n}(r)}B.Buffer=d,B.SlowBuffer=function(e){+e!=e&&(e=0);return d.alloc(+e)},B.INSPECT_MAX_BYTES=50,d.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),B.kMaxLength=n(),d.poolSize=8192,d._augment=function(e){return e.__proto__=d.prototype,e},d.from=function(e,t,n){return i(null,e,t,n)},d.TYPED_ARRAY_SUPPORT&&(d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0})),d.alloc=function(e,t,n){return r=null,o=t,a=n,l(i=e),i<=0?s(r,i):void 0!==o?"string"==typeof a?s(r,i).fill(o,a):s(r,i).fill(o):s(r,i);var r,i,o,a},d.allocUnsafe=function(e){return u(null,e)},d.allocUnsafeSlow=function(e){return u(null,e)},d.isBuffer=function(e){return!(null==e||!e._isBuffer)},d.compare=function(e,t){if(!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);var n;if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;var r=d.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!d.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},d.byteLength=f,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},d.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?w(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return S(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return _(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return b(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){var e="",t=B.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},d.prototype.compare=function(e,t,n,r,i){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(r,i),u=e.slice(t,n),c=0;c<s;++c)if(l[c]!==u[c]){o=l[c],a=u[c];break}return o<a?-1:a<o?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},d.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o,a,s,l,u,c,d,h,f,p=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return h=t,f=n,N(L(e,(d=this).length-h),d,h,f);case"ascii":return y(this,e,t,n);case"latin1":case"binary":return y(this,e,t,n);case"base64":return l=this,u=t,c=n,N(D(e),l,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=t,s=n,N(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,(o=this).length-a),o,a,s);default:if(p)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function _(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function S(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=I(e[o]);return i}function T(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,i,o){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function E(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function P(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function A(e,t,n,r,i){return i||P(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function R(e,t,n,r,i){return i||P(e,0,n,8),o.write(e,t,n,r,52,8),n+8}d.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),d.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=d.prototype;else{var i=t-e;n=new d(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},d.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},d.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},d.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},d.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},d.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!1,52,8)},d.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},d.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},d.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),d.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):E(this,e,t,!0),t+2},d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):E(this,e,t,!1),t+2},d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},d.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},d.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),d.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):E(this,e,t,!0),t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):E(this,e,t,!1),t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),d.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),d.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},d.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;0<=i;--i)e[i+t]=this[i+n];else if(o<1e3||!d.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},d.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=d.isBuffer(e)?e:L(new d(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function I(e){return e<16?"0"+e.toString(16):e.toString(16)}function L(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function D(e){return r.toByteArray(function(e){var t;if((e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function N(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(B,t(65))},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return new e.constructor(e.type,e)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(6);t.default=function(e,t,n){var r=(0,o.absToChr)(e,n),i=(0,o.absToChr)(t,n);return[r[0],Math.round(r[1]),i[0],Math.round(i[1])]}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var l=c(n(37)),r=c(n(22)),h=c(n(23)),d=c(n(3)),f=c(n(1)),i=c(n(2)),p=c(n(4)),o=c(n(10)),a=c(n(5)),v=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),s=c(n(56)),m=n(9),g=n(78),u=n(6);function c(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function c(e,t,n,r,i){(0,f.default)(this,c);var o=(0,p.default)(this,(c.__proto__||(0,d.default)(c)).call(this,e,t,n,r,i));o.drawnAnnotations={},o.drawnAnnoGfx={},o.selectedAnno=null,o.options.minSquareSize=+o.options.minSquareSize;var a=(0,g.create)({}),s=a.publish,l=a.subscribe,u=a.unsubscribe;return o.publish=s,o.subscribe=l,o.unsubscribe=u,o.sT=0,o.annoSelectedBound=o.annoSelected.bind(o),o.pubSubs.push(m.pubSub.subscribe("annoSelected",o.annoSelectedBound)),o}return(0,a.default)(c,e),(0,i.default)(c,[{key:"projection",value:function(e){var t=(0,h.default)(e,2),n=t[0],r=t[1];return[this._xScale(n),this._yScale(r)]}},{key:"tileToLocalId",value:function(e){return""+String(e.join("."))}},{key:"tileToRemoteId",value:function(e){return""+String(e.join("."))}},{key:"localToRemoteId",value:function(e){var t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){var e=m.tileProxy.calculateZoomLevel(this._xScale,this.minX,this.maxX),t=m.tileProxy.calculateZoomLevel(this._yScale,this.minY,this.maxY);return(0,u.min)((0,u.max)(e,t),this.maxZoom)}},{key:"setVisibleTiles",value:function(e){var t=this;this.visibleTiles=e.map(function(e){return{tileId:t.tileToLocalId(e),remoteId:t.tileToRemoteId(e)}}),this.visibleTileIds=new r.default(this.visibleTiles.map(function(e){return e.tileId}))}},{key:"calculateVisibleTiles",value:function(){if(this.tilesetInfo){this.zoomLevel=this.calculateZoomLevel(),this.xTiles=m.tileProxy.calculateTiles(this.zoomLevel,this._xScale,this.minX,this.maxX,this.tilesetInfo.max_zoom,this.maxSize),this.yTiles=m.tileProxy.calculateTiles(this.zoomLevel,this._yScale,this.minY,this.maxY,this.tilesetInfo.max_zoom,this.maxSize);for(var e=this.zoomLevel,t=[],n=0;n<this.xTiles.length;n++)for(var r=0;r<this.yTiles.length;r++)t.push([e,this.xTiles[n],this.yTiles[r]]);this.setVisibleTiles(t)}}},{key:"draw",value:function(){this.drawnAnnotations={},(0,o.default)(c.prototype.__proto__||(0,d.default)(c.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(e){var u=this,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],c=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(e.graphics){var d=(e.graphics.__tile__=e).graphics;d.clear(),this.setBorderStyle(d),this.setFill(d),d.alpha=+this.options.rectangleDomainOpacity,e.tileData.length&&e.tileData.filter(function(e){return!(e.uid in u.drawnAnnotations)||t}).forEach(function(e){var t=u.projection([e.xStart,e.yStart]),n=(0,h.default)(t,2),r=n[0],i=n[1],o=u.projection([e.xEnd,e.yEnd]),a=(0,h.default)(o,2),s=a[0],l=a[1];u.options.exclude&&0<=u.options.exclude.indexOf(e.uid)||u.drawAnnotation(u.prepAnnotation(d,e.uid,r,i,s-r,l-i,e),c)})}}},{key:"prepAnnotation",value:function(e,t,n,r,i,o,a){var s=void 0;try{s=JSON.parse(a.fields)}catch(e){}return{graphics:e,uid:t,annotation:{x:n,y:r,width:i,height:o},dataPos:[a.xStart,a.xEnd,a.yStart,a.yEnd],importance:a.importance,info:s}}},{key:"drawAnnotation",value:function(e,t){var n=this,r=e.graphics,i=e.uid,o=e.annotation,a=e.dataPos,s=e.importance,l=e.info;this.options.minSquareSize&&(o.width<this.options.minSquareSize||o.height<this.options.minSquareSize)&&(o.x=(o.x+o.width)/2,o.y=(o.y+o.height)/2,o.width=this.options.minSquareSize,o.height=this.options.minSquareSize);var u=[(this.drawnAnnotations[i]=o).x,o.y,o.width,o.height];if(this.options.isClickable){var c=this.drawnAnnoGfx[i];c||(c=new v.Graphics,this.drawnAnnoGfx[i]=c),-1===r.children.indexOf(c)&&r.addChild(c),this._drawRect(c,u,i),r.interactive=!0,c.interactive=!0,c.buttonMode=!0,c.mouseover=function(){return n.hover(c,u,i)},c.mouseout=function(){return n.blur(c,u,i)},c.mousedown=function(){return n.mouseDown()},c.mouseup=function(){return n.mouseUp(c,u,i)}}else r.drawRect.apply(r,u);t||this.publish("annotationDrawn",{trackUuids:this.uuid,annotationUuid:i,viewPos:u,dataPos:a,importance:s,info:l})}},{key:"_drawRect",value:function(e,t,n){var r=this.options.rectangleDomainStrokeColor,i=this.options.rectangleDomainStrokeWidth,o=this.options.rectangleDomainStrokeOpacity,a=this.options.rectangleDomainFillColor,s=this.options.rectangleDomainFillOpacity;this.hoveredAnno===n&&(r=this.options.hoverColor,i=this.options.rectangleDomainStrokeWidth+1||2,o=1,a=this.options.hoverColor,s=this.options.rectangleDomainFillOpacity),this.selectedAnno&&this.selectedAnno.uid===n&&(r=this.options.selectColor,i=this.options.rectangleDomainStrokeWidth+1||2,o=1,a=this.options.selectColor,s=(0,u.max)(.33,this.options.rectangleDomainFillOpacity)),e.clear(),this.options.trackBorderBgWidth&&(this.setBorderStyle(e,this.options.trackBorderBgColor,this.options.trackBorderBgWidth,this.options.trackBorderBgAlpha),this.setFill(e,a,0),e.drawRect.apply(e,(0,l.default)(t))),this.setBorderStyle(e,r,i,o),this.setFill(e,a,s),e.drawRect.apply(e,(0,l.default)(t)),e.__viewPos__=t}},{key:"context",value:function(t,n,r){return function(e){return e(t,n,r)}}},{key:"click",value:function(e,t,n){this.select(e,t,n)}},{key:"mouseDown",value:function(){this.sT=performance.now()}},{key:"mouseUp",value:function(e,t,n){performance.now()-this.sT<=250&&this.click(e,t,n)}},{key:"hover",value:function(e,t,n){this.hoveredAnno=n,this._drawRect(e,t,n),this.animate()}},{key:"focus",value:function(e,t,n){this._drawRect(e,t,n),this.animate()}},{key:"blur",value:function(e,t,n){this.hoveredAnno=null,this._drawRect(e,t,n),this.animate()}},{key:"select",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=null,o=null;this.selectedAnno&&(i=this.selectedAnno.graphics,o=this.selectedAnno.uid),this.selectedAnno={graphics:e,uid:n},this.focus(e,t,n),this.options.onSelect&&!r&&(window[this.options.onSelect](n),m.pubSub.publish("annoSelected",n)),i&&o&&this.blur(i,i.__viewPos__,o)}},{key:"unselect",value:function(){var e=this.selectedAnno.graphics,t=this.selectedAnno.uid;this.selectedAnno=null,this.blur(e,e.__viewPos__,t)}},{key:"annoSelected",value:function(e){if(!this.selectedAnno||this.selectedAnno.uid!==e){this.selectedAnno&&this.unselect();var t=this.drawnAnnoGfx[e];t&&this.select(t,t.__viewPos__,e,!0)}}},{key:"exportSVG",value:function(){var a=this,e=null,t=null;if((0,o.default)(c.prototype.__proto__||(0,d.default)(c.prototype),"exportSVG",this)){var n=(0,o.default)(c.prototype.__proto__||(0,d.default)(c.prototype),"exportSVG",this).call(this),r=(0,h.default)(n,2);t=r[0],e=r[1]}else e=t=document.createElement("g");var s=document.createElement("g");return s.setAttribute("transform","translate("+String(this.position[0])+","+String(this.position[1])+")"),e.appendChild(s),this.visibleAndFetchedTiles().filter(function(e){return e.tileData&&e.tileData.length}).map(function(e){return{graphics:e.graphics,td:e.tileData}}).forEach(function(e){var t=e.td,n=e.graphics,r=document.createElement("g");if(r.setAttribute("transform","translate("+String(n.position.x)+","+String(n.position.y)+")scale("+String(n.scale.x)+","+String(n.scale.y)+")"),s.appendChild(r),t.uid in a.drawnAnnotations){var i=a.drawnAnnotations[t.uid],o=document.createElement("rect");o.setAttribute("x",i.x),o.setAttribute("y",i.y),o.setAttribute("width",i.width),o.setAttribute("height",i.height),o.setAttribute("fill",a.options.fillColor||"grey"),o.setAttribute("opacity",.3),o.style.stroke=a.options.fillColor||"grey",o.style.strokeWidth="1px",r.appendChild(o)}}),[t,t]}},{key:"setBorderStyle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.options.rectangleDomainStrokeColor,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.options.rectangleDomainStrokeWidth,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this.options.rectangleDomainStrokeOpacity;e.lineStyle(void 0!==n?n:1,(0,u.colorToHex)(t||"black"),void 0!==r?r:1)}},{key:"setFill",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.options.rectangleDomainFillColor,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.options.rectangleDomainFillOpacity;e.beginFill((0,u.colorToHex)(t||"grey"),void 0!==n?n:.4)}},{key:"setPosition",value:function(e){(0,o.default)(c.prototype.__proto__||(0,d.default)(c.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw()}},{key:"minX",get:function(){return this.tilesetInfo&&this.tilesetInfo.min_pos?this.tilesetInfo.min_pos[0]:0}},{key:"maxX",get:function(){return this.tilesetInfo&&this.tilesetInfo.max_pos?this.tilesetInfo.max_pos[0]:this.tilesetInfo.max_width||this.tilesetInfo.max_size}},{key:"minY",get:function(){return this.minX}},{key:"maxY",get:function(){return this.maxX}},{key:"maxSize",get:function(){var e=this.tilesetInfo.max_pos&&Math.max(this.tilesetInfo.max_pos[0]-this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[1]-this.tilesetInfo.min_pos[1]);return e||(this.tilesetInfo.max_size?this.tilesetInfo.max_size:0)}}]),c}(s.default);t.default=y},function(e,t,n){e.exports={default:n(328),__esModule:!0}},function(e,t,n){var r=n(27);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){e.exports={default:n(350),__esModule:!0}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var p=a(n(11)),x=a(n(23)),v=a(n(87)),r=a(n(40)),i=a(n(1)),o=a(n(2)),_=a(n(21)),k=n(20),S=n(6),T=n(9),C=n(108);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function t(e){(0,i.default)(this,t),this.tilesetInfoLoading=!0,this.dataConfig=JSON.parse((0,r.default)(e)),this.uuid=_.default.nice(),this.dataConfig.children&&(this.dataConfig.children=e.children.map(function(e){return new t(e)}))}return(0,o.default)(t,[{key:"tilesetInfo",value:function(t,e){var n=this;if(this.dataConfig.children){var r=this.dataConfig.children.map(function(t){return new v.default(function(e){t.tilesetInfo(e)})});v.default.all(r).then(function(e){t(e[0])})}else this.dataConfig.server||this.dataConfig.tilesetUid?T.tileProxy.trackInfo(this.dataConfig.server,this.dataConfig.tilesetUid,function(e){n.dataConfig.tilesetInfo=e[n.dataConfig.tilesetUid],t(e[n.dataConfig.tilesetUid])},function(e){t({error:e})}):(console.warn("No dataConfig children, server or tilesetUid:",this.dataConfig),t(null))}},{key:"fullTileId",value:function(e,t){return String(e)+"."+String(t)}},{key:"fetchTilesDebounced",value:function(o,a){var s=this;if("horizontal-section"==this.dataConfig.type)this.fetchHorizontalSection(o,a);else if("vertical-section"==this.dataConfig.type)this.fetchHorizontalSection(o,a,vertical=!0);else if(this.dataConfig.children){var e=this.dataConfig.children.map(function(t){return new v.default(function(e){t.fetchTilesDebounced(e,a)})});v.default.all(e).then(function(e){if("divided"===s.dataConfig.type){var t=s.makeDivided(e,a);o(t)}else console.warn("Unimplemented dataConfig type. Returning first data source.",s.dataConfig),o(e[0])})}else new v.default(function(e){return T.tileProxy.fetchTilesDebounced({id:_.default.nice(),server:s.dataConfig.server,done:e,ids:a.map(function(e){return String(s.dataConfig.tilesetUid)+"."+String(e)})})}).then(function(e){for(var t=(0,S.dictValues)(e)[0].tilesetUid,n={},r=0;r<a.length;r++){var i=s.fullTileId(t,a[r]);e[i].tilePositionId=a[r],n[a[r]]=e[i]}o(n)})}},{key:"divideData",value:function(e,t){for(var n=new Float32Array(e.length),r=0;r<n.length;r++)0===t[r]?n[r]=NaN:n[r]=e[r]/t[r];return n}},{key:"horizontalSlice",value:function(e,t){return null}},{key:"extractDataSlice",value:function(e,t,n,r){if(r){for(var i=new Array(t[1]),o=n;o<e.length;o+=t[0])i[Math.floor(o/t[0])]=e[o];return i}return e.slice(t[1]*n,t[1]*(n+1))}},{key:"fetchHorizontalSection",value:function(m,g){var y=this,e=2<arguments.length&&void 0!==arguments[2]&&arguments[2],b=[],w=[],t=!0,n=!1,r=void 0;try{for(var i,o=(0,p.default)(g);!(t=(i=o.next()).done);t=!0){var a=i.value.split("."),s=+a[0],l=+a[1],u=(0,k.scaleLinear)().domain([this.dataConfig.slicePos,this.dataConfig.slicePos]),c=[];if(this.dataConfig.tilesetInfo&&this.dataConfig.tilesetInfo.resolutions){var d=this.dataConfig.tilesetInfo.resolutions.map(function(e){return+e}).sort(function(e,t){return t-e});c=T.tileProxy.calculateTilesFromResolution(d[s],u,this.dataConfig.tilesetInfo.min_pos[e?1:0],this.dataConfig.tilesetInfo.max_pos[e?1:0])}else c=T.tileProxy.calculateTiles(s,u,this.dataConfig.tilesetInfo.min_pos[e?1:0],this.dataConfig.tilesetInfo.max_pos[e?1:0],this.dataConfig.tilesetInfo.max_zoom,this.dataConfig.tilesetInfo.max_width);var h=[l,c[0]].sort(function(e,t){return e-t});h[0]==l?w.push(!1):w.push(!0);var f=s+"."+String(h[0])+"."+String(h[1]);b.push(f)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}new v.default(function(e){return T.tileProxy.fetchTilesDebounced({id:_.default.nice(),server:y.dataConfig.server,done:e,ids:b.map(function(e){return String(y.dataConfig.tilesetUid)+"."+String(e)})})}).then(function(e){for(var t=(0,S.dictValues)(e)[0].tilesetUid,n={},r=0;r<b.length;r++){var i=b[r].split("."),o=+i[0],a=+i[1],s=+i[2],l=T.tileProxy.calculateTileAndPosInTile(y.dataConfig.tilesetInfo,y.dataConfig.tilesetInfo.max_width,y.dataConfig.tilesetInfo.min_pos[1],o,+y.dataConfig.slicePos),u=(0,x.default)(l,2),c=(u[0],u[1]),d=e[y.fullTileId(t,b[r])],h=null;if(a==s){h=y.extractDataSlice(d.dense,[256,256],c);for(var f=y.extractDataSlice(d.dense,[256,256],c,1),p=0;p<h.length;p++)h[p]+=f[p]}else h=w[r]?y.extractDataSlice(d.dense,[256,256],c,1):y.extractDataSlice(d.dense,[256,256],c);Math.min.apply(null,h),Math.max.apply(null,h);var v={min_value:Math.min.apply(null,h),max_value:Math.max.apply(null,h),minNonZero:(0,C.minNonZero)(h),maxNonZero:(0,C.maxNonZero)(h),dense:h,dtype:d.dtype,server:d.server,tilePos:w[r]?[s]:[a],tilePositionId:g[r],tilesetUid:t,zoomLevel:d.zoomLevel};n[g[r]]=v}m(n)})}},{key:"makeDivided",value:function(e,t){e.length<2&&console.warn("Only one tileset specified for a divided datafetcher:",this.dataConfig);for(var n={},r=0;r<t.length;r++){var i=e[0][t[r]].zoomLevel,o=e[0][t[r]].tilePos,a={zoomLevel:i,tilePos:o,tilePositionId:t[r]};if(e[0][t[r]].dense&&e[1][t[r]].dense){var s=this.divideData(e[0][t[r]].dense,e[1][t[r]].dense);a={dense:s,minNonZero:(0,C.minNonZero)(s),maxNonZero:(0,C.maxNonZero)(s),zoomLevel:i,tilePos:o,tilePositionId:t[r]}}n[t[r]]=a}return n}}]),t}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var f=u(n(11)),p=u(n(23)),r=u(n(22)),v=u(n(3)),c=u(n(1)),i=u(n(2)),d=u(n(4)),m=u(n(10)),o=u(n(5)),a=u(n(56)),s=n(9),g=n(78),l=n(6);function u(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function h(e,t,n,r,i){(0,c.default)(this,h);var o=(0,d.default)(this,(h.__proto__||(0,v.default)(h)).call(this,e,t,n,r,i));o.drawnRects={};var a=(0,g.create)({}),s=a.publish,l=a.subscribe,u=a.unsubscribe;return o.publish=s,o.subscribe=l,o.unsubscribe=u,o}return(0,o.default)(h,e),(0,i.default)(h,[{key:"tileToLocalId",value:function(e){return""+String(e.join("."))}},{key:"tileToRemoteId",value:function(e){return""+String(e.join("."))}},{key:"localToRemoteId",value:function(e){var t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){var e=s.tileProxy.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),t=s.tileProxy.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]),n=Math.max(e,t);return n=Math.min(n,this.maxZoom)}},{key:"setVisibleTiles",value:function(e){var t=this;this.visibleTiles=e.map(function(e){return{tileId:t.tileToLocalId(e),remoteId:t.tileToRemoteId(e)}}),this.visibleTileIds=new r.default(this.visibleTiles.map(function(e){return e.remoteId}))}},{key:"calculateVisibleTiles",value:function(){if(this.tilesetInfo){this.zoomLevel=this.calculateZoomLevel(),this.xTiles=s.tileProxy.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=s.tileProxy.calculateTiles(this.zoomLevel,this._yScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);for(var e=this.xTiles,t=this.yTiles,n=this.zoomLevel,r=[],i=0;i<e.length;i++)for(var o=0;o<t.length;o++){var a=[n,e[i],t[o]];r.push(a)}this.setVisibleTiles(r)}}},{key:"initTile",value:function(){}},{key:"destroyTile",value:function(){}},{key:"draw",value:function(){this.drawnRects={},(0,m.default)(h.prototype.__proto__||(0,v.default)(h.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(e){var d=this,h=e.graphics;if(h){h.clear();var t=(0,l.colorToHex)(this.options.rectangleDomainStrokeColor||"black"),n=(0,l.colorToHex)(this.options.rectangleDomainFillColor||"grey");h.lineStyle(void 0!==this.options.rectangleDomainStrokeWidth?this.options.rectangleDomainStrokeWidth:1,t,void 0!==this.options.rectangleDomainStrokeOpacity?this.options.rectangleDomainStrokeOpacity:1),h.beginFill(n,void 0!==this.options.rectangleDomainFillOpacity?this.options.rectangleDomainFillOpacity:.4),h.alpha=this.options.rectangleDomainOpacity||.5;var f=this.options.minSquareSize&&"none"!==this.options.minSquareSize?+this.options.minSquareSize:0,p=this.options.rectangleMinSize?+this.options.rectangleMinSize:0,v=this._xScale.range()[0],m=this._xScale.range()[1],g=this._yScale.range()[0],y=this._yScale.range()[1];e.tileData.length&&e.tileData.filter(function(e){return!(e.uid in d.drawnRects)}).forEach(function(e){var t=d._xScale(e.xStart),n=d._xScale(e.xEnd),r=d._yScale(e.yStart),i=d._yScale(e.yEnd),o=e.uid,a=n-t,s=i-r,l={x:t,y:r,width:a,height:s};f&&(a<f||s<f)&&(l={x:t-f/2,y:r-f/2,width:f,height:f});var u=(d.drawnRects[o]=l).x+l.width,c=l.y+l.height;(l.x>v&&l.x<m||v<u&&u<m||l.y>g&&l.y<y||g<c&&c<y)&&(l.width>p||l.height>p)&&(h.drawRect(l.x,l.y,l.width,l.height),d.publish("annotationDrawn",{trackUuid:d.uuid,annotationUuid:o,viewPos:[l.x,l.y,l.width,l.height],dataPos:[e.xStart,e.xEnd,e.yStart,e.yEnd],importance:e.importance,info:{patternType:d.options.patternType}}))})}}},{key:"exportSVG",value:function(){var o=this,e=null,t=null;if((0,m.default)(h.prototype.__proto__||(0,v.default)(h.prototype),"exportSVG",this)){var n=(0,m.default)(h.prototype.__proto__||(0,v.default)(h.prototype),"exportSVG",this).call(this),r=(0,p.default)(n,2);t=r[0],e=r[1]}else e=t=document.createElement("g");var a=document.createElement("g");a.setAttribute("transform","translate("+String(this.position[0])+","+String(this.position[1])+")"),e.appendChild(a);var i=function(i){if(!i.tileData||!i.tileData.length)return"continue";i.tileData.forEach(function(e){var t=document.createElement("g");if(t.setAttribute("transform","translate("+String(i.graphics.position.x)+","+String(i.graphics.position.y)+")scale("+String(i.graphics.scale.x)+","+String(i.graphics.scale.y)+")"),a.appendChild(t),e.uid in o.drawnRects){var n=o.drawnRects[e.uid],r=document.createElement("rect");r.setAttribute("x",n.x),r.setAttribute("y",n.y),r.setAttribute("width",n.width),r.setAttribute("height",n.height),r.setAttribute("fill",o.options.fillColor?o.options.fillColor:"grey"),r.setAttribute("opacity",.3),r.style.stroke=o.options.fillColor?o.options.fillColor:"grey",r.style.strokeWidth="1px",t.appendChild(r)}})},s=!0,l=!1,u=void 0;try{for(var c,d=(0,f.default)(this.visibleAndFetchedTiles());!(s=(c=d.next()).done);s=!0)i(c.value)}catch(e){l=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw u}}return[t,t]}},{key:"setPosition",value:function(e){(0,m.default)(h.prototype.__proto__||(0,v.default)(h.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale().domain()[0]===e.domain()[0]&&this.xScale().domain()[1]===e.domain()[1]&&this.yScale().domain()[0]===t.domain()[0]&&this.yScale().domain()[1]===t.domain()[1]||(this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw())}}]),h}(a.default);t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var d=w(n(201)),f=w(n(23)),r=w(n(79)),i=w(n(80)),o=w(n(81)),a=w(n(24)),M=w(n(11)),p=w(n(3)),s=w(n(1)),l=w(n(2)),u=w(n(4)),v=w(n(10)),c=w(n(5)),m=w(n(110)),P=n(!function(){var e=new Error('Cannot find module "d3-array"');throw e.code="MODULE_NOT_FOUND",e}()),A=n(20),g=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),y=w(n(374)),h=w(n(94)),b=n(9),R=n(6);function w(e){return e&&e.__esModule?e:{default:e}}var x=function(e){function h(e,t,n,r,i){(0,s.default)(this,h);var o=(0,u.default)(this,(h.__proto__||(0,p.default)(h)).call(this,e,t,n,r,i));return o.textFontSize="10px",o.textFontFamily="Arial",o.drawnRects={},o}return(0,c.default)(h,e),(0,l.default)(h,[{key:"initTile",value:function(o){var a=this;if(o.texts={},o.rectGraphics=new g.Graphics,o.textGraphics=new g.Graphics,o.graphics.addChild(o.rectGraphics),o.graphics.addChild(o.textGraphics),o.tileData&&o.tileData.length){o.tileData.sort(function(e,t){return t.importance-e.importance}),o.tileData=o.tileData.slice(0,1e3);var e=[];this.options&&this.options.valueColumn?e=o.tileData.map(function(e){return{value:e}}):(segments=o.tileData.map(function(e){var t=+e.chrOffset;return{from:+e.fields[1]+t,to:+e.fields[2]+t,value:e}}),e=(0,R.segmentsToRows)(segments)),o.rows=e,o.tileData.forEach(function(e,t){var n=e.fields,r=a.options.fillColor?a.options.fillColor:"blue";if(o.textWidths={},!(1e3<=t)){var i=new g.Text(n[3],{fontSize:a.textFontSize,fontFamily:a.textFontFamily,fill:(0,R.colorToHex)(r)});a.flipText&&(i.scale.x=-1),i.anchor.x=.5,i.anchor.y=1,o.texts[n[3]]=i,o.textGraphics.addChild(i)}})}o.initialized=!0}},{key:"destroyTile",value:function(e){var n=this,r=+e.tileId.split(".")[0];e.rectGraphics.clear(),e.rendered=!1,e.tileData&&e.tileData.length&&e.tileData.forEach(function(e,t){n.drawnRects[r]&&n.drawnRects[r][e.uid]&&delete n.drawnRects[r][e.uid]})}},{key:"removeTiles",value:function(e){(0,v.default)(h.prototype.__proto__||(0,p.default)(h.prototype),"removeTiles",this).call(this,e)}},{key:"drawTile",value:function(e){this.options&&this.options.valueColumn&&this.valueScale&&this.drawAxis(this.valueScale)}},{key:"rerender",value:function(e,t){(0,v.default)(h.prototype.__proto__||(0,p.default)(h.prototype),"rerender",this).call(this,e,t);var n=!0,r=(this.drawnRects={},!1),i=void 0;try{for(var o,a=(0,M.default)(this.visibleAndFetchedTiles());!(n=(o=a.next()).done);n=!0){var s=o.value;this.destroyTile(s),this.renderTile(s)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"updateTile",value:function(e){this.renderTile(e)}},{key:"renderTile",value:function(e){var t=1,n=!0,r=!1,i=void 0;try{for(var o,a=(0,M.default)(this.visibleAndFetchedTiles());!(n=(o=a.next()).done);n=!0){var s=o.value;if(!s.initialized)return;s.rows&&(t=Math.max(s.rows.length,t))}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}var l=+e.tileId.split(".")[0];if(!e.rendered){e.drawnAtScale=this._xScale.copy();var u=(0,R.colorToHex)(this.options.fillColor?this.options.fillColor:"blue");if(e.rendered=!0,this.options&&this.options.valueColumn&&(this.valueScale=this.makeValueScale(this.minVisibleValue(),this.calculateMedianVisibleValue(),this.maxVisibleValue())),e.tileData&&e.tileData.length){for(var c=e.rows,d=(0,A.scaleBand)().domain((0,P.range)(t)).range([0,this.dimensions[1]]),h=0;h<c.length;h++)for(var f=0;f<c[h].length;f++){var p=c[h][f].value;if(l in this.drawnRects&&p.uid in this.drawnRects[l])return;var v=p.fields,m=+p.chrOffset,g=+v[1]+m,y=+v[2]+m,b=(v[12],v[13],(g+y)/2),w=d(h)+d.step()/2,x=(d(h),d.step(),v[3]),_=10;this.options&&this.options.valueColumn&&(w=this.valueScale(+v[+this.options.valueColumn-1]),_/=2),e.rectGraphics.lineStyle(1,u,.3),e.rectGraphics.beginFill(u,.3),this._xScale(b);var k=w-_/2,S=this._xScale(g),T=this._xScale(y),C=null;if(5<v.length&&("+"==v[5]||"-"==v[5])&&T-S<5?(C=[S,k,S+5,k+_/2,S,k+_],"+"==v[5]||(C=[S,k,S-5,k+_/2,S,k+_])):C=[S,k,S+T-S,k,S+T-S,k+_,S,k+_],e.rectGraphics.drawPolygon(C),this.drawnRects[l]||(this.drawnRects[l]={}),this.drawnRects[l][p.uid]=[C,{start:g,end:y,value:p}],!e.texts)return;if(1e3<=f)return;if(e.texts[x]){var O=e.texts[x];if(O.position.x=this._xScale(b),O.style={fontSize:this.textFontSize,fontFamily:this.textFontFamily,fill:u},!(v[3]in e.textWidths)){O.updateTransform();var E=O.getBounds().width;e.textWidths[v[3]]=E}}}e.tileData.forEach(function(e,t){})}}}},{key:"calculateZoomLevel",value:function(){var e=b.tileProxy.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),t=Math.min(e,this.maxZoom);return t=Math.max(t,0)}},{key:"minVisibleValue",value:function(){var t=this,e=this.visibleAndFetchedIds();0==e.length&&(e=(0,a.default)(this.fetchedTiles));var n=Math.min.apply(null,e.map(function(e){return t.fetchedTiles[e]}).filter(function(e){return e.tileData&&e.tileData.length}).map(function(e){return e}).map(function(e){return Math.min.apply(null,e.tileData.sort(function(e,t){return t.importance-e.importance}).slice(0,1e3).map(function(e){return+e.fields[+t.options.valueColumn-1]}))}));return n===o.default&&(n=null),n}},{key:"maxVisibleValue",value:function(){var t=this,e=this.visibleAndFetchedIds();0===e.length&&(e=(0,a.default)(this.fetchedTiles));var n=Math.max.apply(null,e.map(function(e){return t.fetchedTiles[e]}).filter(function(e){return e.tileData&&e.tileData.length}).map(function(e){return Math.max.apply(null,e.tileData.sort(function(e,t){return t.importance-e.importance}).slice(0,1e3).map(function(e){return+e.fields[+t.options.valueColumn-1]}))}));return n===i.default&&(n=null),n}},{key:"calculateMedianVisibleValue",value:function(){var t=this;this.areAllVisibleTilesLoaded()&&this.allTilesLoaded();var e=this.visibleAndFetchedIds();0===e.length&&(e=(0,a.default)(this.fetchedTiles));var n=[].concat.apply([],e.map(function(e){return t.fetchedTiles[e]}).filter(function(e){return e.tileData&&e.tileData.length}).map(function(e){return e.tileData.sort(function(e,t){return t.importance-e.importance}).slice(0,1e3).map(function(e){return+e.fields[+t.options.valueColumn-1]})})).filter(function(e){return 0<e});this.medianVisibleValue=(0,P.median)(n)}},{key:"draw",value:function(){var c=this;(0,v.default)(h.prototype.__proto__||(0,p.default)(h.prototype),"draw",this).call(this),this.allTexts=[],this.allBoxes=[];var e=function(e){var l=c.fetchedTiles[e];if(!l.drawnAtScale)return console.log("not rendered"),{v:void 0};var t=(l.drawnAtScale.domain()[1]-l.drawnAtScale.domain()[0])/(c._xScale.domain()[1]-c._xScale.domain()[0]),n=c._xScale.domain().map(l.drawnAtScale)[0];l.rectGraphics.scale.x=t,l.rectGraphics.position.x=-n*t;var u=c.parentInFetched(l);if(!l.initialized)return"continue";l.tileData&&l.tileData.length&&l.tileData.forEach(function(e,t){if(l.texts){var n=e.fields,r=n[3],i=l.texts[r];if(i){var o=+e.chrOffset,a=(+n[1]+o+(+n[2]+o))/2,s=c.dimensions[1]/2;s+=10,i.position.x=c._xScale(a),i.position.y=s,u?i.visible=!1:(i.visible=!1,c.allBoxes.push([i.position.x-3,s-1,i.position.x+l.textWidths[n[3]]+3,s+1]),c.allTexts.push({importance:+n[5],text:i,caption:r,strand:n[5]}))}}})};for(var t in this.fetchedTiles){var n=e(t);switch(n){case"continue":continue;default:if("object"===(void 0===n?"undefined":(0,r.default)(n)))return n.v}}this.hideOverlaps(this.allBoxes,this.allTexts)}},{key:"hideOverlaps",value:function(e,n){(0,m.default)(e,function(e,t){n[e].importance>n[t].importance?n[t].text.visible=!1:n[e].text.visible=!1})}},{key:"setPosition",value:function(e){(0,v.default)(h.prototype.__proto__||(0,p.default)(h.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"setDimensions",value:function(e){(0,v.default)(h.prototype.__proto__||(0,p.default)(h.prototype),"setDimensions",this).call(this,e)}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw()}},{key:"exportSVG",value:function(){var u=this,e=null,t=null;if((0,v.default)(h.prototype.__proto__||(0,p.default)(h.prototype),"exportSVG",this)){var n=(0,v.default)(h.prototype.__proto__||(0,p.default)(h.prototype),"exportSVG",this).call(this),r=(0,f.default)(n,2);t=r[0],e=r[1]}else e=t=document.createElement("g");var c=document.createElement("g");c.setAttribute("transform","translate("+String(this.position[0])+","+String(this.position[1])+")"),e.appendChild(c);var i=function(l){l.tileData.forEach(function(e,t){var n=+l.tileId.split(".")[0],r=document.createElement("g");if(r.setAttribute("transform","translate("+String(l.rectGraphics.position.x)+","+String(l.rectGraphics.position.y)+")scale("+String(l.rectGraphics.scale.x)+","+String(l.rectGraphics.scale.y)+")"),c.appendChild(r),u.drawnRects[n]&&e.uid in u.drawnRects[n]){for(var i=u.drawnRects[n][e.uid][0],o=document.createElement("path"),a="M "+String(i[0])+" "+String(i[1]),s=2;s<i.length;s+=2)a+=" L "+String(i[s])+" "+String(i[s+1]);o.setAttribute("d",a),o.setAttribute("fill",u.options.fillColor?u.options.fillColor:"blue"),o.setAttribute("opacity",.3),o.style.stroke=u.options.fillColor?u.options.fillColor:"blue",o.style.strokeWidth="1px",r.appendChild(o)}})},o=!0,a=!1,s=void 0;try{for(var l,d=(0,M.default)(this.visibleAndFetchedTiles());!(o=(l=d.next()).done);o=!0)i(l.value)}catch(e){a=!0,s=e}finally{try{!o&&d.return&&d.return()}finally{if(a)throw s}}return[t,t]}},{key:"getMouseOverHtml",value:function(e,t){if(this.tilesetInfo){var n=this.calculateZoomLevel(),r=b.tileProxy.calculateTileWidth(this.tilesetInfo,n,this.tilesetInfo.tile_size),i=this._xScale.invert(e)/r,o=(this.tilesetInfo.tile_size,Math.floor(i),this.tileToLocalId([n,Math.floor(i)]));if(this.fetchedTiles[o],this._xScale.invert(e),this.drawnRects[n])for(var a=(0,d.default)(this.drawnRects[n]),s=0;s<a.length;s++){for(var l=[e,t],u=a[s][0].slice(0),c=[];u.length;)c.push(u.splice(0,2));if(-1==(0,y.default)(c,l))return parts=a[s][1].value.fields.slice(3),parts.join(" ")}return""}}}]),h}(h.default);t.default=x},function(e,t,n){e.exports={default:n(366),__esModule:!0}},function(e,t,n){"use strict";e.exports={init:function(e){var t=i.nextPow2(e);B.length<t&&(r.free(B),B=r.mallocInt32(t));F.length<t&&(r.free(F),F=r.mallocInt32(t));O.length<t&&(r.free(O),O=r.mallocInt32(t));E.length<t&&(r.free(E),E=r.mallocInt32(t));M.length<t&&(r.free(M),M=r.mallocInt32(t));P.length<t&&(r.free(P),P=r.mallocInt32(t));var n=8*t;V.length<n&&(r.free(V),V=r.mallocDouble(n))},sweepBipartite:function(e,t,n,r,i,o,a,s,l,u){for(var c=0,d=2*e,h=e-1,f=d-1,p=n;p<r;++p){var v=o[p],m=d*p;V[c++]=i[m+h],V[c++]=-(v+1),V[c++]=i[m+f],V[c++]=v}for(var p=a;p<s;++p){var v=u[p]+N,g=d*p;V[c++]=l[g+h],V[c++]=-v,V[c++]=l[g+f],V[c++]=v}var y=c>>>1;D(V,y);for(var b=0,w=0,p=0;p<y;++p){var x=0|V[2*p+1];if(N<=x)z(O,E,w--,x=x-N|0);else if(0<=x)z(B,F,b--,x);else if(x<=-N){x=-x-N|0;for(var _=0;_<b;++_){var k=t(B[_],x);if(void 0!==k)return k}H(O,E,w++,x)}else{x=-x-1|0;for(var _=0;_<w;++_){var k=t(x,O[_]);if(void 0!==k)return k}H(B,F,b++,x)}}},sweepComplete:function(e,t,n,r,i,o,a,s,l,u){for(var c=0,d=2*e,h=e-1,f=d-1,p=n;p<r;++p){var v=o[p]+1<<1,m=d*p;V[c++]=i[m+h],V[c++]=-v,V[c++]=i[m+f],V[c++]=v}for(var p=a;p<s;++p){var v=u[p]+1<<1,g=d*p;V[c++]=l[g+h],V[c++]=1|-v,V[c++]=l[g+f],V[c++]=1|v}var y=c>>>1;D(V,y);for(var b=0,w=0,x=0,p=0;p<y;++p){var _=0|V[2*p+1],k=1&_;if(p<y-1&&_>>1==V[2*p+3]>>1&&(k=2,p+=1),_<0){for(var S=-(_>>1)-1,T=0;T<x;++T){var C=t(M[T],S);if(void 0!==C)return C}if(0!==k)for(var T=0;T<b;++T){var C=t(B[T],S);if(void 0!==C)return C}if(1!==k)for(var T=0;T<w;++T){var C=t(O[T],S);if(void 0!==C)return C}0===k?H(B,F,b++,S):1===k?H(O,E,w++,S):2===k&&H(M,P,x++,S)}else{var S=(_>>1)-1;0===k?z(B,F,b--,S):1===k?z(O,E,w--,S):2===k&&z(M,P,x--,S)}}},scanBipartite:function(e,t,n,r,i,o,a,s,l,u,c,d){var h=0,f=2*e,p=t,v=t+e,m=1,g=1;r?g=N:m=N;for(var y=i;y<o;++y){var b=y+m,w=f*y;V[h++]=a[w+p],V[h++]=-b,V[h++]=a[w+v],V[h++]=b}for(var y=l;y<u;++y){var b=y+g,x=f*y;V[h++]=c[x+p],V[h++]=-b}var _=h>>>1;D(V,_);for(var k=0,y=0;y<_;++y){var S=0|V[2*y+1];if(S<0){var b=-S,T=!1;if(N<=b?(T=!r,b-=N):(T=!!r,b-=1),T)H(B,F,k++,b);else{var C=d[b],O=f*b,E=c[O+t+1],M=c[O+t+1+e];e:for(var P=0;P<k;++P){var A=B[P],R=f*A;if(!(M<a[R+t+1]||a[R+t+1+e]<E)){for(var j=t+2;j<e;++j)if(c[O+j+e]<a[R+j]||a[R+j+e]<c[O+j])continue e;var I,L=s[A];if(void 0!==(I=r?n(C,L):n(L,C)))return I}}}}else z(B,F,k--,S-m)}},scanComplete:function(e,t,n,r,i,o,a,s,l,u,c){for(var d=0,h=2*e,f=t,p=t+e,v=r;v<i;++v){var m=v+N,g=h*v;V[d++]=o[g+f],V[d++]=-m,V[d++]=o[g+p],V[d++]=m}for(var v=s;v<l;++v){var m=v+1,y=h*v;V[d++]=u[y+f],V[d++]=-m}var b=d>>>1;D(V,b);for(var w=0,v=0;v<b;++v){var x=0|V[2*v+1];if(x<0){var m=-x;if(N<=m)B[w++]=m-N;else{var _=c[m-=1],k=h*m,S=u[k+t+1],T=u[k+t+1+e];e:for(var C=0;C<w;++C){var O=B[C],E=a[O];if(E===_)break;var M=h*O;if(!(T<o[M+t+1]||o[M+t+1+e]<S)){for(var P=t+2;P<e;++P)if(u[k+P+e]<o[M+P]||o[M+P+e]<u[k+P])continue e;var A=n(E,_);if(void 0!==A)return A}}}}else{for(var m=x-N,C=w-1;0<=C;--C)if(B[C]===m){for(var P=C+1;P<w;++P)B[P-1]=B[P];break}--w}}}};var r=n(153),i=n(154),D=n(370),N=1<<28,B=r.mallocInt32(1024),F=r.mallocInt32(1024),O=r.mallocInt32(1024),E=r.mallocInt32(1024),M=r.mallocInt32(1024),P=r.mallocInt32(1024),V=r.mallocDouble(8192);function z(e,t,n,r){var i=t[r],o=e[n-1];t[e[i]=o]=i}function H(e,t,n,r){t[e[n]=r]=n}},function(e,t,n){"use strict";e.exports=function(e,t){var n="abcdef".split("").concat(t),r=[];0<=e.indexOf("lo")&&r.push("lo=e[k+n]");0<=e.indexOf("hi")&&r.push("hi=e[k+o]");return n.push(i.replace("_",r.join()).replace("$",e)),Function.apply(void 0,n)};var i="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=e*t,i=d*e,o=i-(i-e),a=e-o,s=d*t,l=s-(s-t),u=t-l,c=a*u-(r-o*l-a*l-o*u);if(n)return n[0]=c,n[1]=r,n;return[c,r]};var d=+(Math.pow(2,27)+1)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(22)),u=a(n(3)),c=a(n(1)),r=a(n(2)),d=a(n(4)),i=a(n(5)),h=n(20),f=n(!function(){var e=new Error('Cannot find module "d3-array"');throw e.code="MODULE_NOT_FOUND",e}()),o=n(6);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function s(e,t,n,r,i,o){(0,c.default)(this,s);var a=(0,d.default)(this,(s.__proto__||(0,u.default)(s)).call(this,e,t,n,r,i,o));return a.seen=new l.default,a.pMain=a.pMobile,a.rows=[],a}return(0,i.default)(s,e),(0,r.default)(s,[{key:"uid",value:function(e){return e[e.length-2]}},{key:"segmentOverlap",value:function(e,t){}},{key:"drawAll",value:function(e){var t=this;this.pMain.clear();var n=new l.default,r=e.map(function(e){return n.has(t.uid(e))?null:(n.add(t.uid(e)),{from:+e[1],to:+e[2],type:e[4],uid:t.uid(e)})}).filter(function(e){return e}),i=(0,o.segmentsToRows)(r);this.rows=i,this.draw()}},{key:"draw",value:function(){var e=this.rows;if(e){var t=(0,h.scaleBand)().range([0,this.dimensions[1]]).padding(.1).domain((0,f.range)(0,this.maxRows())),n=this.pMain;n.clear(),n.lineStyle(1,255,0),n.beginFill(16740363,.8);for(var r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++){var o=e[r][i],a=this._refXScale(o.from),s=this._refXScale(o.to),l=t(r),u=s-a,c=l+t.bandwidth()-l;n.drawRect(a,l,u,c)}}}},{key:"allTilesLoaded",value:function(){var t=this,e=this.visibleAndFetchedIds().map(function(e){return t.fetchedTiles[e].tileData.discrete}),n=[].concat.apply([],e);this.drawAll(n)}},{key:"initTile",value:function(e){}},{key:"maxRows",value:function(){return this.rows.length}},{key:"updateTile",value:function(e){}},{key:"destroyTile",value:function(e){var n=this;e.tileData.discrete.map(function(e){var t=e[e.length-2];n.seen.has(t)&&n.seen.delete(t)})}},{key:"drawTile",value:function(e){}}]),s}(a(n(94)).default);t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(3)),i=u(n(1)),o=u(n(2)),a=u(n(4)),s=u(n(5)),w=n(20),l=u(n(150)),x=n(6);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"renderTile",value:function(e){if(e.graphics){var t=e.graphics,n=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension),r=n.tileX,i=n.tileWidth,o=e.tileData.dense;if(0!=o.length){var a=0;if(this.valueScale=null,"log"==this.options.valueScaling){var s=this.medianVisibleValue;this.medianVisibleValue||(s=this.minVisibleValue()),this.valueScale=(0,w.scaleLog)().domain([s,this.maxValue()+s]).range([this.dimensions[1],0]),a=s}else this.valueScale=(0,w.scaleLinear)().domain([this.minValue(),this.maxValue()]).range([this.dimensions[1],0]);if(t.clear(),this.drawAxis(this.valueScale),"log"==this.options.valueScaling&&this.valueScale.domain()[1]<0)console.warn("Negative values present when using a log scale",this.valueScale.domain());else{var l=(0,x.colorToHex)(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),u=(0,w.scaleLinear)().domain([0,this.tilesetInfo.tile_size]).range([r,r+i]);t.lineStyle(0,l,1);var c=this.options.barFillColorTop?this.options.barFillColorTop:"green",d=this.options.barFillColorBottom?this.options.barFillColorBottom:"red",h=(0,x.colorToHex)(c),f=(0,x.colorToHex)(d),p="barOpacity"in this.options?this.options.barOpacity:1;e.drawnAtScale=this._xScale.copy();var v=0;v="log"==this.options.valueScaling?this.valueScale(1):this.valueScale(0),delete e.svgData;for(var m=0;m<o.length;m++){var g=this._xScale(u(m)),y=this.valueScale(o[m]+a),b=this._xScale(u(m+1))-g;if(v<y?(t.beginFill(f,p),this.addSVGInfo(e,g,v,b,y-v,d)):(t.beginFill(h,p),this.addSVGInfo(e,g,y,b,v-y,c)),u(m)>this.tilesetInfo.max_pos[0])break;t.drawRect(g,e.svgData.barYValues[m],b,e.svgData.barHeights[m])}}}}}},{key:"addSVGInfo",value:function(e,t,n,r,i,o){e.hasOwnProperty("svgData")?(e.svgData.barXValues.push(t),e.svgData.barYValues.push(n),e.svgData.barWidths.push(r),e.svgData.barHeights.push(i),e.svgData.barColors.push(o)):e.svgData={barXValues:[t],barYValues:[n],barWidths:[r],barHeights:[i],barColors:[o]}}}]),t}(l.default);t.default=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var v=h(n(11)),s=h(n(22)),l=h(n(3)),u=h(n(1)),r=h(n(2)),c=h(n(4)),o=h(n(10)),i=h(n(5)),a=h(n(56)),d=n(9),m=n(6);function h(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function a(e,t,n,r,i){(0,u.default)(this,a);var o=(0,c.default)(this,(a.__proto__||(0,l.default)(a)).call(this,e,t,n,r,i));return o.drawnRects=new s.default,o.pMain=o.pMobile,o}return(0,i.default)(a,e),(0,r.default)(a,[{key:"tileToLocalId",value:function(e){return""+String(e.join("."))}},{key:"tileToRemoteId",value:function(e){return""+String(e.join("."))}},{key:"localToRemoteId",value:function(e){var t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){var e=d.tileProxy.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),t=d.tileProxy.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]),n=Math.max(e,t);return n=Math.min(n,this.maxZoom),this.options&&this.options.maxZoom&&(0<=this.options.maxZoom?n=Math.min(this.options.maxZoom,n):console.error("Invalid maxZoom on track:",this)),n}},{key:"setVisibleTiles",value:function(e){var t=this;this.visibleTiles=e.map(function(e){return{tileId:t.tileToLocalId(e),remoteId:t.tileToRemoteId(e)}}),this.visibleTileIds=new s.default(this.visibleTiles.map(function(e){return e.tileId}))}},{key:"calculateVisibleTiles",value:function(){if(this.tilesetInfo){this.zoomLevel=this.calculateZoomLevel();var e=this._xScale.copy();this._xScale.domain()[1],this._xScale.domain()[0],this._xScale.range()[1],this._xScale.range()[0],e.domain([this._xScale.invert(this._xScale.range()[0]-this.dimensions[1]*Math.sqrt(2)),this._xScale.invert(this._xScale.range()[1]+this.dimensions[1]*Math.sqrt(2))]),this.xTiles=d.tileProxy.calculateTiles(this.zoomLevel,e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=d.tileProxy.calculateTiles(this.zoomLevel,e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);for(var t=this.xTiles,n=this.yTiles,r=this.zoomLevel,i=this.tilesetInfo.max_width/Math.pow(2,r),o=[],a=0;a<t.length;a++)for(var s=a;s<n.length;s++)if(!((s-a-2)*(this._xScale(i)-this._xScale(0))*Math.sqrt(2)/2>this.dimensions[1])){var l=[r,t[a],n[s]];l.mirrored=!1,o.push(l)}this.setVisibleTiles(o)}}},{key:"initTile",value:function(e){(0,o.default)(a.prototype.__proto__||(0,l.default)(a.prototype),"initTile",this).call(this,e),this.drawTile(e)}},{key:"destroyTile",value:function(e,t){}},{key:"draw",value:function(){this.delayDrawing||this.drawnRects.clear(),(0,o.default)(a.prototype.__proto__||(0,l.default)(a.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(e){if(e.graphics){var t=e.graphics;t.clear();var n=(0,m.colorToHex)(this.options.rectangleDomainStrokeColor?this.options.rectangleDomainStrokeColor:"black"),r=(0,m.colorToHex)(this.options.rectangleDomainFillColor?this.options.rectangleDomainFillColor:"grey");if(t.lineStyle(1/this.pMain.scale.x,n,1),t.beginFill(r,.4),t.alpha=this.options.rectangleDomainOpacity?this.options.rectangleDomainOpacity:.5,e.tileData.sort){var i=!0,o=!1,a=void 0;try{for(var s,l=(0,v.default)(e.tileData);!(i=(s=l.next()).done);i=!0){var u=s.value,c=(u.fields,this._refXScale(u.xStart)),d=this._refXScale(u.xEnd),h=this._refYScale(u.yStart),f=this._refYScale(u.yEnd),p=u.uid;this.drawnRects.has(p)||(this.drawnRects.add(p),t.drawRect(c,h,d-c,f-h),t.pivot.x=this._refXScale(0),t.pivot.y=this._refYScale(0),t.scale.x=-1/Math.sqrt(2),t.rotation=-3*Math.PI/4,t.scale.y=1/Math.sqrt(2),t.position.x=this._refXScale(0),t.position.y=0)}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}}}}},{key:"setPosition",value:function(e){(0,o.default)(a.prototype.__proto__||(0,l.default)(a.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"refScalesChanged",value:function(e,t){for(var n in(0,o.default)(a.prototype.__proto__||(0,l.default)(a.prototype),"refScalesChanged",this).call(this,e,t),this.fetchedTiles){var r=this.fetchedTiles[n];if(r.sprite){var i=r.graphics;i.pivot.x=this._refXScale(0),i.pivot.y=this._refYScale(0),i.scale.x=-1/Math.sqrt(2),i.rotation=-3*Math.PI/4,i.scale.y=1/Math.sqrt(2),i.position.x=this._refXScale(0),i.position.y=0}}}},{key:"zoomed",value:function(e,t,n,r,i){(0,o.default)(a.prototype.__proto__||(0,l.default)(a.prototype),"zoomed",this).call(this,e,t,n,r,i),this.pMain.position.x=r,this.pMain.position.y=this.position[1]+this.dimensions[1],this.pMain.scale.x=n,this.pMain.scale.y=n,this.options.oneDHeatmapFlipped&&(this.pMain.scale.y=-n,this.pMain.position.y=this.position[1]),this.draw()}}]),a}(a.default);t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var w=p(n(11)),x=p(n(23)),r=p(n(40)),_=p(n(3)),l=p(n(1)),i=p(n(2)),u=p(n(4)),k=p(n(10)),o=p(n(5)),a=p(n(110)),h=n(20),f=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),s=p(n(41)),c=p(n(44)),d=p(n(111)),S=n(6);function p(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function b(e,t,n,r,i,o){(0,l.default)(this,b);var a=(0,u.default)(this,(b.__proto__||(0,_.default)(b)).call(this,e,r));a.searchField=null,a.chromInfo=null,a.dataConfig=t,a.gTicks={},a.tickTexts={},a.textFontSize="12px",a.textFontFamily="Arial",a.textFontColor="#777777",a.pixiTextConfig={fontSize:a.textFontSize,fontFamily:a.textFontFamily,fill:a.textFontColor},a.animate=i,a.pubSubs=[],a.options=r,a.options.showMousePosition&&!a.hideMousePosition&&(a.hideMousePosition=(0,S.showMousePosition)(a,a.is2d));var s=o;return s||(s=String(t.server)+"/chrom-sizes/?id="+String(t.tilesetUid)),(0,c.default)(s,function(e){a.chromInfo=e,a.searchField=new d.default(a.chromInfo),a.texts=[];for(var t=0;t<a.chromInfo.cumPositions.length;t++){var n=a.chromInfo.cumPositions[t].chr;a.gTicks[n]=new f.Graphics,a.tickTexts[n]||(a.tickTexts[n]=[]);var r=new f.Text(n,a.pixiTextConfig);r.anchor.x=.5,r.anchor.y=.5,r.visible=!1,r.hashValue=Math.random(),a.pMain.addChild(r),a.pMain.addChild(a.gTicks[n]),a.texts.push(r)}a.draw(),a.animate()}),a}return(0,o.default)(b,e),(0,i.default)(b,[{key:"rerender",value:function(e,t){var n=(0,r.default)(e);(t||n!==this.prevOptions)&&(this.prevOptions=n,this.options=e,(0,k.default)(b.prototype.__proto__||(0,_.default)(b.prototype),"rerender",this).call(this,e,t),this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=(0,S.showMousePosition)(this,this.is2d)),!this.options.showMousePosition&&this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0))}},{key:"drawTicks",value:function(e){var t=this.gTicks[e.chr];this.gTicks[e.chr].visible=!0,this.gTicks[e.chr].clear();for(var n=+this.chromInfo.chromLengths[e.chr],r=Math.max(this._xScale(e.pos),0),i=Math.min(this._xScale(e.pos+n),this.dimensions[0]),o=(i-r)/200,a=(0,h.scaleLinear)().domain([Math.max(1,this._xScale.invert(0)-e.pos),Math.min(n,this._xScale.invert(this.dimensions[0])-e.pos)]).range(r,i),s=a.ticks(o),l=a.tickFormat(o),u=this.tickTexts[e.chr];u.length<=s.length;){var c=new f.Text("",this.pixiTextConfig);u.push(c),this.gTicks[e.chr].addChild(c)}for(var d=0;d<s.length;)u[d].visible=!0,u[d].anchor.x=.5,u[d].anchor.y=1,this.flipText&&(u[d].scale.x=-1),u[d].x=this._xScale(e.pos+s[d]),u[d].y=this.dimensions[1]-8,u[d].text=0===s[d]?String(e.chr)+":1":String(e.chr)+":"+String(l(s[d])),t.lineStyle(1,7829367),t.moveTo(this._xScale(e.pos+s[d]),this.dimensions[1]),t.lineTo(this._xScale(e.pos+s[d]),this.dimensions[1]-6),d+=1;for(;d<u.length;)u[d].visible=!1,d+=1;return s.length}},{key:"draw",value:function(){if(this.allTexts=[],this.texts&&this.searchField){var e=(0,S.absToChr)(this._xScale.domain()[0],this.chromInfo),t=(0,S.absToChr)(this._xScale.domain()[1],this.chromInfo);if(e&&t){for(var n=0;n<this.texts.length;n++)this.texts[n].visible=!1,this.gTicks[this.chromInfo.cumPositions[n].chr].visible=!1;for(var r=e[3];r<=t[3];r++){var i=this.chromInfo.cumPositions[r],o=i.pos+this.chromInfo.chromLengths[i.chr]/2,a=this._xScale(o),s=this.texts[r];s.anchor.y=1,s.x=a,s.y=this.dimensions[1]-2-6,s.updateTransform(),this.flipText&&(s.scale.x=-1);var l=this.drawTicks(i);s.visible=l<=0,this.allTexts.push({importance:this.texts[r].hashValue,text:this.texts[r],caption:null})}this.hideOverlaps(this.allTexts)}else console.warn("Empty chromInfo:",this.dataConfig,this.chromInfo)}}},{key:"hideOverlaps",value:function(n){var e;e=n.map(function(e){var t=e.text;t.updateTransform();var n=t.getBounds();return[n.x,n.y,n.x+n.width,n.y+n.height]}),(0,a.default)(e,function(e,t){n[e].importance>n[t].importance?n[t].text.visible=0:n[e].text.visible=0})}},{key:"setPosition",value:function(e){(0,k.default)(b.prototype.__proto__||(0,_.default)(b.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"refreshTiles",value:function(){}},{key:"exportSVG",value:function(){var e=null,t=null;if((0,k.default)(b.prototype.__proto__||(0,_.default)(b.prototype),"exportSVG",this)){var n=(0,k.default)(b.prototype.__proto__||(0,_.default)(b.prototype),"exportSVG",this).call(this),r=(0,x.default)(n,2);t=r[0],e=r[1]}else e=t=document.createElement("g");t.setAttribute("class","chromosome-labels");var i=document.createElement("g");e.appendChild(i),i.setAttribute("transform","translate("+String(this.position[0])+","+String(this.position[1])+")");var o=!0,a=!1,s=void 0;try{for(var l,u=(0,w.default)(this.allTexts);!(o=(l=u.next()).done);o=!0){var c=l.value;if(c.text.visible){var d=(0,S.pixiTextToSvg)(c.text);i.appendChild(d)}}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}for(var h in this.tickTexts){var f=!0,p=!1,v=void 0;try{for(var m,g=(0,w.default)(this.tickTexts[h]);!(f=(m=g.next()).done);f=!0){var y=m.value;y.visible&&(d=(0,S.pixiTextToSvg)(y),i.appendChild(d),d=(0,S.svgLine)(y.x,this.dimensions[1],y.x,this.dimensions[1]-6,1,7829367),i.appendChild(d))}}catch(e){p=!0,v=e}finally{try{!f&&g.return&&g.return()}finally{if(p)throw v}}}return[t,e]}}]),b}(s.default);t.default=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var A=f(n(23)),R=f(n(11)),u=f(n(40)),j=f(n(3)),a=f(n(1)),r=f(n(2)),s=f(n(4)),I=f(n(10)),i=f(n(5)),o=f(n(110)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),c=f(n(94)),d=n(9),h=n(6);function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function P(e,t,n,r,i){(0,a.default)(this,P);var o=(0,s.default)(this,(P.__proto__||(0,j.default)(P)).call(this,e,t,n,r,i));return o.textFontSize="11px",o.textFontFamily="Arial",o.animate=i,o.options=r,o}return(0,i.default)(P,e),(0,r.default)(P,[{key:"initTile",value:function(o){var a=this;o.texts={},o.rectGraphics=new l.Graphics,o.textGraphics=new l.Graphics,o.graphics.addChild(o.rectGraphics),o.graphics.addChild(o.textGraphics),o.tileData.sort&&(o.tileData.sort(function(e,t){return t.importance-e.importance}),o.tileData=o.tileData.slice(0,50),o.tileData.forEach(function(e,t){var n=e.fields,r=a.options.plusStrandColor?a.options.plusStrandColor:"blue";if("-"==n[5]&&(r=a.options.minusStrandColor?a.options.minusStrandColor:"red"),o.textWidths={},o.textHeights={},!(20<=t)){var i=new l.Text(n[3],{fontSize:a.textFontSize,fontFamily:a.textFontFamily,fill:(0,h.colorToHex)(r)});i.interactive=!0,i.click=function(e){console.log("click")},a.flipText&&(i.scale.x=-1),i.anchor.x=.5,i.anchor.y=1,o.texts[n[3]]=i,o.textGraphics.addChild(i)}}),o.initialized=!0,this.renderTile(o))}},{key:"destroyTile",value:function(e){}},{key:"rerender",value:function(e,t){var n=(0,u.default)(e);if(t||n!==this.prevOptions){(0,I.default)(P.prototype.__proto__||(0,j.default)(P.prototype),"rerender",this).call(this,e,t),this.prevOptions=n;var r=!0,i=!1,o=void 0;try{for(var a,s=(0,R.default)(this.visibleAndFetchedTiles());!(r=(a=s.next()).done);r=!0){var l=a.value;this.renderTile(l)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}}},{key:"drawTile",value:function(e){}},{key:"renderTile",value:function(b){var w=this;if(b.initialized){b.allRects=[],b.drawnAtScale=this._xScale.copy();var x={};x["+"]=(0,h.colorToHex)(this.options.plusStrandColor?this.options.plusStrandColor:"blue"),x["-"]=(0,h.colorToHex)(this.options.minusStrandColor?this.options.minusStrandColor:"red"),b.tileData.forEach(function(e,t){var n=e.fields,r=+e.chrOffset,i=+n[1]+r,o=+n[2]+r,a=n[12],s=n[13],l=(i+o)/2,u=w.dimensions[1]/2,c=w.dimensions[1]/2,d=n[3];"+"==n[5]?(u-=8,c-=15.5,b.rectGraphics.lineStyle(1,x["+"],.3),b.rectGraphics.beginFill(x["+"],.3)):(u+=8,c+=23,b.rectGraphics.lineStyle(1,x["-"],.3),b.rectGraphics.beginFill(x["-"],.3));var h=w._xScale(l)-.5,f=u-5,p=w._xScale(i);if(10<w._xScale(o)-p)n.length<14?console.warn("Gene annotations have less than 14 columns (chrName, chrStart, chrEnd, symbol, importance, transcript_name, geneId, transcript_type, '-', txStart, txEnd, exonStarts, exonEnds:",n):b.allRects=b.allRects.concat(w.drawExons(b.rectGraphics,i,o,a,s,r,u,n[5]).map(function(e){return[e,n[5]]}));else{var v=[];v="+"==n[5]?[h,f,h+5,f+5,h,f+10]:[h,f,h-5,f+5,h,f+10],b.rectGraphics.drawPolygon(v),b.allRects.push([v,n[5]])}if(b.texts&&!(20<=t)){var m=b.texts[d];if(m.position.x=w._xScale(l),m.position.y=c,m.style={fontSize:w.textFontSize,fontFamily:w.textFontFamily,fill:x[n[5]]},!(n[3]in b.textWidths)){m.updateTransform();var g=m.getBounds().width,y=m.getBounds().height;b.textWidths[n[3]]=g,b.textHeights[n[3]]=y}}})}}},{key:"calculateZoomLevel",value:function(){var e=d.tileProxy.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),t=Math.min(e,this.maxZoom);return t=Math.max(t,0)}},{key:"drawExons",value:function(e,t,n,r,i,o,a,s){r=r.split(",").map(function(e){return+e+o}),i=i.split(",").map(function(e){return+e+o});var l=this._xScale(t),u=a-.75,c=this._xScale(n)-l,d=a-5,h=[],f=[l,u,l+c,u,l+c,u+1.5,l,u+1.5];e.drawPolygon(f),h.push([l,u,l+c,u,l+c,u+1.5,l,u+1.5]);for(var p=Math.max(this.position[0],l);p<Math.min(this.position[0]+this.dimensions[0],l+c);p+=20)f="+"===s?[p,d+2,p+3,d+5,p,d+8]:[p,d+2,p-3,d+5,p,d+8],h.push(f),e.drawPolygon(f);for(var v=0;v<r.length;v++){var m=r[v],g=i[v],y=this._xScale(m),b=d,w=this._xScale(g)-this._xScale(m),x=[y,b,y+w,b,y+w,b+10,y,b+10];h.push(x),e.drawPolygon(x)}return h}},{key:"draw",value:function(){var c=this;for(var e in(0,I.default)(P.prototype.__proto__||(0,j.default)(P.prototype),"draw",this).call(this),this.allTexts=[],this.allBoxes=[],this.fetchedTiles){var t=this.fetchedTiles[e];t.drawnAtScale&&3<(t.drawnAtScale.domain()[1]-t.drawnAtScale.domain()[0])/(this._xScale.domain()[1]-this._xScale.domain()[0])&&this.renderTile(t)}var n=function(e){var l=c.fetchedTiles[e];if(!l.drawnAtScale)return"continue";var t=(l.drawnAtScale.domain()[1]-l.drawnAtScale.domain()[0])/(c._xScale.domain()[1]-c._xScale.domain()[0]),n=c._xScale.domain().map(l.drawnAtScale)[0];l.rectGraphics.scale.x=t,l.rectGraphics.position.x=-n*t;var u=c.parentInFetched(l);if(!l.initialized)return"continue";l.tileData.forEach(function(e,t){if(l.texts){var n=e.fields,r=n[3],i=l.texts[r];if(i){var o=+e.chrOffset,a=(+n[1]+o+(+n[2]+o))/2,s=c.dimensions[1]/2;"+"==n[5]?s-=13.5:s+=28.5,i.position.x=c._xScale(a),i.position.y=s,u?i.visible=!1:(i.visible=!0,c.flipText?c.allBoxes.push([i.position.x,s-1,i.position.x+l.textHeights[n[3]]+3,s+1]):c.allBoxes.push([i.position.x,s-1,i.position.x+l.textWidths[n[3]]+3,s+1]),c.allTexts.push({importance:+n[4],text:i,caption:r,strand:n[5]}))}}})};for(var r in this.fetchedTiles)n(r);this.hideOverlaps(this.allBoxes,this.allTexts)}},{key:"hideOverlaps",value:function(e,n){(0,o.default)(e,function(e,t){n[e].importance>n[t].importance?n[t].text.visible=!1:n[e].text.visible=!1})}},{key:"setPosition",value:function(e){(0,I.default)(P.prototype.__proto__||(0,j.default)(P.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"setDimensions",value:function(e){(0,I.default)(P.prototype.__proto__||(0,j.default)(P.prototype),"setDimensions",this).call(this,e);var t=!0,n=!1,r=void 0;try{for(var i,o=(0,R.default)(this.visibleAndFetchedTiles());!(t=(i=o.next()).done);t=!0){var a=i.value;a.rectGraphics.clear(),this.renderTile(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw()}},{key:"exportSVG",value:function(){var e=null,t=null;if((0,I.default)(P.prototype.__proto__||(0,j.default)(P.prototype),"exportSVG",this)){var n=(0,I.default)(P.prototype.__proto__||(0,j.default)(P.prototype),"exportSVG",this).call(this),r=(0,A.default)(n,2);t=r[0],e=r[1]}else e=t=document.createElement("g");var i=document.createElement("g");i.setAttribute("transform","translate("+String(this.position[0])+","+String(this.position[1])+")"),e.appendChild(i);var o=!0,a=!1,s=void 0;try{for(var l,u=(0,R.default)(this.visibleAndFetchedTiles());!(o=(l=u.next()).done);o=!0){var c=l.value,d=document.createElement("g");d.setAttribute("transform","translate("+String(c.rectGraphics.position.x)+",\n        "+String(c.rectGraphics.position.y)+")\n        scale("+String(c.rectGraphics.scale.x)+",\n        "+String(c.rectGraphics.scale.y)+")");var h=!0,f=!1,p=void 0;try{for(var v,m=(0,R.default)(c.allRects);!(h=(v=m.next()).done);h=!0){for(var g=v.value,y=document.createElement("path"),b=g[0],w="M "+String(b[0])+" "+String(b[1]),x=2;x<b.length;x+=2)w+=" L "+String(b[x])+" "+String(b[x+1]);y.setAttribute("d",w),"+"==g[1]?y.setAttribute("fill",this.options.plusStrandColor):y.setAttribute("fill",this.options.minusStrandColor),d.appendChild(y)}}catch(e){f=!0,p=e}finally{try{!h&&m.return&&m.return()}finally{if(f)throw p}}i.appendChild(d)}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}var _=!0,k=!1,S=void 0;try{for(var T,C=(0,R.default)(this.allTexts);!(_=(T=C.next()).done);_=!0){var O=T.value;if(O.text.visible){var E=document.createElement("g"),M=document.createElement("text");M.setAttribute("text-anchor","middle"),M.setAttribute("font-family",this.textFontFamily),M.setAttribute("font-size",this.textFontSize),M.setAttribute("dy","-.2em"),E.setAttribute("transform","scale("+String(O.text.scale.x)+",1)"),"+"===O.strand?M.setAttribute("fill",this.options.plusStrandColor):M.setAttribute("fill",this.options.minusStrandColor),M.innerHTML=O.text.text,E.appendChild(M),E.setAttribute("transform","translate("+String(O.text.x)+","+String(O.text.y)+")scale("+String(O.text.scale.x)+",1)"),i.appendChild(E)}}}catch(e){k=!0,S=e}finally{try{!_&&C.return&&C.return()}finally{if(k)throw S}}return[t,t]}}]),P}(c.default);t.default=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var w=a(n(11)),x=a(n(23)),_=a(n(3)),u=a(n(1)),r=a(n(2)),c=a(n(4)),k=a(n(10)),i=a(n(5)),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),l=n(56),o=a(n(95)),d=n(9),h=n(6),f=n(12);function a(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function b(e,t,n,r,i,o,a,s){(0,u.default)(this,b);var l=(0,c.default)(this,(b.__proto__||(0,_.default)(b)).call(this,e,t,n,r,i,o,a,s));return l.pMain=l.pMobile,l.colorScale=f.HEATED_OBJECT_MAP,r&&r.colorRange&&(l.colorScale=(0,h.colorDomainToRgbaArray)(r.colorRange)),l.animate=i,l.options=r,l.pubSubs=[],l}return(0,i.default)(b,e),(0,r.default)(b,[{key:"rerender",value:function(e,t){(0,k.default)(b.prototype.__proto__||(0,_.default)(b.prototype),"rerender",this).call(this,e,t),this.zoomed(this.xScale(),this.yScale(),this.pMain.scale.x,this.pMain.position.x,this.pMain.position.y)}},{key:"calculateZoomLevel",value:function(){if(this.tilesetInfo.resolutions){var e=d.tileProxy.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),t=d.tileProxy.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);return Math.min(e,t)}var n=d.tileProxy.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),r=d.tileProxy.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]),i=Math.max(n,r);return i=Math.min(i,this.maxZoom),this.options&&this.options.maxZoom&&(0<=this.options.maxZoom?i=Math.min(this.options.maxZoom,i):console.error("Invalid maxZoom on track:",this)),i}},{key:"calculateVisibleTiles",value:function(){if(this.tilesetInfo){this.zoomLevel=this.calculateZoomLevel();var e=this._xScale.copy();if(this._xScale.domain()[1],this._xScale.domain()[0],this._xScale.range()[1],this._xScale.range()[0],e.domain([this._xScale.invert(this._xScale.range()[0]-this.dimensions[1]*Math.sqrt(2)),this._xScale.invert(this._xScale.range()[1]+this.dimensions[1]*Math.sqrt(2))]),this.tilesetInfo.resolutions){var t=this.tilesetInfo.resolutions.map(function(e){return+e}).sort(function(e,t){return t-e});this.xTiles=d.tileProxy.calculateTilesFromResolution(t[this.zoomLevel],e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),this.yTiles=d.tileProxy.calculateTilesFromResolution(t[this.zoomLevel],e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0])}else this.xTiles=d.tileProxy.calculateTiles(this.zoomLevel,e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=d.tileProxy.calculateTiles(this.zoomLevel,e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);for(var n=this.xTiles,r=this.yTiles,i=this.zoomLevel,o=this.tilesetInfo.max_width/Math.pow(2,i),a=[],s=0;s<n.length;s++)for(var l=s;l<r.length;l++)if(!((l-s-2)*(this._xScale(o)-this._xScale(0))*Math.sqrt(2)/2>this.dimensions[1])){var u=[i,n[s],r[l]];u.mirrored=!1,u.dataTransform=this.options.dataTransform?this.options.dataTransform:"default",a.push(u)}this.setVisibleTiles(a)}}},{key:"tileDataToCanvas",value:function(e){var t=document.createElement("canvas");t.width=256,t.height=256;var n=t.getContext("2d");n.fillStyle="transparent",n.fillRect(0,0,t.width,t.height);var r=new ImageData(e,t.width,t.height);return n.putImageData(r,0,0),t}},{key:"setSpriteProperties",value:function(e,t,n,r){var i=this.getTilePosAndDimensions(t,n),o=i.tileX,a=i.tileY,s=o+i.tileWidth,l=a+i.tileHeight;this._refXScale(s),this._refXScale(o),this._refYScale(l),this._refYScale(a),e.width=this._refXScale(s)-this._refXScale(o),e.height=this._refYScale(l)-this._refYScale(a),e.x=this._refXScale(o),e.y=this._refYScale(a)}},{key:"renderTile",value:function(i){var o=this,e=(0,l.getValueScale)(this.options.heatmapValueScaling,this.scale.minValue,this.medianVisibleValue,this.scale.maxValue,"log"),t=(0,x.default)(e,2),n=t[0],r=t[1];this.valueScale=r;var a=0;"log"==n&&(a=this.valueScale.domain()[0]),this.limitedValueScale=this.valueScale.copy(),this.options&&void 0!==this.options.scaleStartPercent&&void 0!==this.options.scaleEndPercent&&this.limitedValueScale.domain([this.valueScale.domain()[0]+(this.valueScale.domain()[1]-this.valueScale.domain()[0])*this.options.scaleStartPercent,this.valueScale.domain()[0]+(this.valueScale.domain()[1]-this.valueScale.domain()[0])*this.options.scaleEndPercent]),this.renderingTiles.add(i.tileId),d.tileProxy.tileDataToPixData(i,n,this.limitedValueScale.domain(),a,this.colorScale,function(e){if(e){var t=i.graphics,n=o.tileDataToCanvas(e.pixData),r=null;r=i.tileData.zoomLevel===o.maxZoom?new s.Sprite(s.Texture.fromCanvas(n,s.SCALE_MODES.NEAREST)):new s.Sprite(s.Texture.fromCanvas(n)),i.sprite=r,i.canvas=n,o.setSpriteProperties(i.sprite,i.tileData.zoomLevel,i.tileData.tilePos,i.mirrored),t.pivot.x=o._refXScale(0),t.pivot.y=o._refYScale(0),t.scale.x=-1/Math.sqrt(2),t.rotation=-3*Math.PI/4,t.scale.y=1/Math.sqrt(2),t.position.x=o._refXScale(0),t.position.y=0,t.removeChildren(),t.addChild(i.sprite)}o.renderingTiles.delete(i.tileId),o.animate(),o.refreshTiles()})}},{key:"refScalesChanged",value:function(e,t){for(var n in(0,k.default)(b.prototype.__proto__||(0,_.default)(b.prototype),"refScalesChanged",this).call(this,e,t),this.fetchedTiles){var r=this.fetchedTiles[n];if(r.sprite){this.setSpriteProperties(r.sprite,r.tileData.zoomLevel,r.tileData.tilePos,r.mirrored);var i=r.graphics;i.pivot.x=this._refXScale(0),i.pivot.y=this._refYScale(0),i.scale.x=-1/Math.sqrt(2),i.rotation=-3*Math.PI/4,i.scale.y=1/Math.sqrt(2),i.position.x=this._refXScale(0),i.position.y=0}}}},{key:"zoomed",value:function(e,t,n,r,i){(0,k.default)(b.prototype.__proto__||(0,_.default)(b.prototype),"zoomed",this).call(this,e,t,n,r,i),(0,k.default)(b.prototype.__proto__||(0,_.default)(b.prototype),"draw",this).call(this),this.pMain.position.x=r,this.pMain.position.y=this.position[1]+this.dimensions[1],this.pMain.scale.x=n,this.pMain.scale.y=n,this.options.oneDHeatmapFlipped&&(this.pMain.scale.y=-n,this.pMain.position.y=this.position[1])}},{key:"exportSVG",value:function(){var e,t=null,n=(0,k.default)(b.prototype.__proto__||(0,_.default)(b.prototype),"superSVG",this).call(this),r=(0,x.default)(n,2);e=r[0],t=r[1];var i=document.createElement("g");t.appendChild(i),i.setAttribute("transform","translate("+String(this.pMain.position.x)+","+String(this.pMain.position.y)+") scale("+String(this.pMain.scale.x)+","+String(this.pMain.scale.y)+")");var o=!0,a=!1,s=void 0;try{for(var l,u=(0,w.default)(this.visibleAndFetchedTiles());!(o=(l=u.next()).done);o=!0){var c=l.value,d=document.createElement("g"),h=c.graphics,f=180*h.rotation/Math.PI,p="translate("+String(h.position.x)+","+String(h.position.y)+") rotate("+f+") scale("+String(h.scale.x)+","+String(h.scale.y)+") translate("+-h.pivot.x+","+-h.pivot.y+")";d.setAttribute("transform",p);var v=180*c.sprite.rotation/Math.PI,m=document.createElement("g");m.setAttribute("transform","translate("+String(c.sprite.x)+","+String(c.sprite.y)+") rotate("+v+") scale("+String(c.sprite.scale.x)+","+String(c.sprite.scale.y)+")");var g=document.createElement("image");g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c.canvas.toDataURL()),g.setAttribute("width",256),g.setAttribute("height",256),m.appendChild(g),d.appendChild(m),i.appendChild(d)}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}var y=this.exportColorBarSVG();return t.appendChild(y),[e,e]}}]),b}(o.default);t.default=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=c(n(3)),r=c(n(1)),a=c(n(2)),s=c(n(4)),l=c(n(10)),u=c(n(5)),d=n(36),i=c(n(95)),h=n(9);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function i(){return(0,r.default)(this,i),(0,s.default)(this,(i.__proto__||(0,o.default)(i)).apply(this,arguments))}return(0,u.default)(i,e),(0,a.default)(i,[{key:"tileDataToCanvas",value:function(e){var t=document.createElement("canvas");t.width=this.tilesetInfo.shape[0],t.height=this.tilesetInfo.shape[1];var n=t.getContext("2d");n.fillStyle="transparent",n.fillRect(0,0,t.width,t.height);var r=new ImageData(e,t.width,t.height);return n.putImageData(r,0,0),t}},{key:"setSpriteProperties",value:function(e,t,n){var r=this.getTilePosAndDimensions(t,n,this.tilesetInfo.tile_size),i=r.tileX,o=i+r.tileWidth;e.width=this._refXScale(o)-this._refXScale(i),e.height=this.dimensions[1],e.x=this._refXScale(i),e.y=0}},{key:"zoomed",value:function(e,t,n,r){(0,l.default)(i.prototype.__proto__||(0,o.default)(i.prototype),"zoomed",this).call(this,e,t),this.pMain.position.x=r,this.pMain.position.y=this.position[1],this.pMain.scale.x=n,this.pMain.scale.y=1,this.drawColorbar()}},{key:"calculateVisibleTiles",value:function(){var t=this;if(this.tilesetInfo){this.zoomLevel=this.calculateZoomLevel();var e=this.tilesetInfo.resolutions.map(function(e){return+e}).sort(function(e,t){return t-e});this.xTiles=h.tileProxy.calculateTilesFromResolution(e[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],null,this.tilesetInfo.tile_size);var n=this.xTiles.map(function(e){return[t.zoomLevel,e]});this.setVisibleTiles(n)}}},{key:"calculateZoomLevel",value:function(){if(this.tilesetInfo){var e=this.tilesetInfo.min_pos[0];return h.tileProxy.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,e)}}},{key:"tileToLocalId",value:function(e){return e.dataTransform&&"default"!==e.dataTransform?String(e.join("."))+"."+String(e.mirrored)+"."+String(e.dataTransform):String(e.join("."))+"."+String(e.mirrored)}},{key:"tileToLocalId",value:function(e){return""+String(e.join("."))}},{key:"tileToRemoteId",value:function(e){return""+String(e.join("."))}},{key:"getTilePosAtPosition",value:function(e,t){if(this.tilesetInfo){var n=this.calculateZoomLevel(),r=h.tileProxy.calculateTileWidth(this.tilesetInfo,n,this.tilesetInfo.tile_size),i=this._xScale.invert(e)/r;return[n,Math.floor(i)]}}},{key:"getVisibleData",value:function(e,t){var n=this.calculateZoomLevel(),r=h.tileProxy.calculateTileWidth(this.tilesetInfo,n,this.tilesetInfo.tile_size),i=this._xScale.invert(e)/r,o=this.tilesetInfo.tile_size*(i-Math.floor(i)),a=t/this.dimensions[1]*this.tilesetInfo.shape[1],s=this.tileToLocalId([n,Math.floor(i)]),l=this.fetchedTiles[s],u="";if(l){var c=this.tilesetInfo.shape[0]*Math.floor(a)+Math.floor(o);u=(0,d.format)(".3f")(l.tileData.dense[c])}return this.tilesetInfo.row_infos&&(u+="<br/>",u+=this.tilesetInfo.row_infos[Math.floor(a)]),""+String(u)}},{key:"getMouseOverHtml",value:function(e,t){if(!this.tilesetInfo)return"";var n=this.getTilePosAtPosition(e,t),r="Data value: "+this.getVisibleData(e,t)+"</br>";return r+="Zoom level: "+String(n[0])+" tile position: "+String(n[1])}}]),i}(i.default);t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var b=l(n(23)),w=l(n(11)),x=l(n(3)),r=l(n(1)),i=l(n(2)),o=l(n(4)),_=l(n(10)),a=l(n(5)),v=n(20),s=l(n(93)),m=n(6);function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function y(){return(0,r.default)(this,y),(0,o.default)(this,(y.__proto__||(0,x.default)(y)).apply(this,arguments))}return(0,a.default)(y,e),(0,i.default)(y,[{key:"initTile",value:function(e){(0,_.default)(y.prototype.__proto__||(0,x.default)(y.prototype),"initTile",this).call(this,e),e.barXValues=new Array(e.tileData.dense.length),e.barYValues=new Array(e.tileData.dense.length),e.barWidths=new Array(e.tileData.dense.length),e.barHeights=new Array(e.tileData.dense.length),this.renderTile(e)}},{key:"drawTile",value:function(){}},{key:"renderTile",value:function(e){if((0,_.default)(y.prototype.__proto__||(0,x.default)(y.prototype),"drawTile",this).call(this,e),e.graphics){var t=e.graphics,n=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),r=n.tileX,i=n.tileWidth,o=e.tileData.dense;if(0!=o.length){var a=0;if(this.valueScale=null,"log"==this.options.valueScaling){var s=this.medianVisibleValue;this.medianVisibleValue||(s=this.minVisibleValue()),this.valueScale=(0,v.scaleLog)().domain([s,this.maxValue()+s]).range([this.dimensions[1],0]),a=s}else this.valueScale=(0,v.scaleLinear)().domain([this.minValue(),this.maxValue()]).range([this.dimensions[1],0]);if(t.clear(),this.drawAxis(this.valueScale),"log"==this.options.valueScaling&&this.valueScale.domain()[1]<0)console.warn("Negative values present when using a log scale",this.valueScale.domain());else{var l=(0,m.colorToHex)(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),u=(0,v.scaleLinear)().domain([0,this.tilesetInfo.tile_size]).range([r,r+i]);t.lineStyle(0,l,1);var c=this.options.pointSize?this.options.pointSize:3,d=(0,m.colorToHex)(this.options.pointColor?this.options.pointColor:"red");t.beginFill(d,1),e.drawnAtScale=this._xScale.copy();for(var h=0;h<o.length;h++){var f=this._xScale(u(h)),p=this.valueScale(o[h]+a);if(e.barXValues[h]=f-c/2/this.pMain.scale.x,e.barYValues[h]=p-c/2/this.pMain.scale.y,e.barWidths[h]=c/this.pMain.scale.x,e.barHeights[h]=c/this.pMain.scale.y,u(h)>this.tilesetInfo.max_pos[0])break;t.drawRect(f-c/2/this.pMain.scale.x,p-c/2/this.pMain.scale.y,c/this.pMain.scale.x,c/this.pMain.scale.y)}}}}}},{key:"draw",value:function(){(0,_.default)(y.prototype.__proto__||(0,x.default)(y.prototype),"draw",this).call(this);var e=!0,t=!1,n=void 0;try{for(var r,i=(0,w.default)((0,m.dictValues)(this.fetchedTiles));!(e=(r=i.next()).done);e=!0){var o=r.value,a=(o.drawnAtScale.domain()[1]-o.drawnAtScale.domain()[0])/(this._xScale.domain()[1]-this._xScale.domain()[0]),s=this._xScale.domain().map(o.drawnAtScale)[0];o.graphics.scale.x=a,o.graphics.position.x=-s*a}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"zoomed",value:function(e,t,n,r,i){(0,_.default)(y.prototype.__proto__||(0,x.default)(y.prototype),"zoomed",this).call(this,e,t)}},{key:"exportSVG",value:function(){var e=null,t=null,n=(0,_.default)(y.prototype.__proto__||(0,x.default)(y.prototype),"superSVG",this).call(this),r=(0,b.default)(n,2);t=r[0],e=r[1],t.setAttribute("class","exported-line-track");var i=document.createElement("g");e.appendChild(i),i.setAttribute("transform","translate("+String(this.position[0])+","+String(this.position[1])+")"),this.options.lineStrokeColor&&this.options.lineStrokeColor;var o=!0,a=!1,s=void 0;try{for(var l,u=(0,w.default)(this.visibleAndFetchedTiles());!(o=(l=u.next()).done);o=!0)for(var c=l.value,d=0;d<c.barXValues.length;d++){var h=document.createElement("rect"),f=this.options.lineStrokeColor||"blue",p=this.options.pointColor||"red";h.setAttribute("fill",p),h.setAttribute("stroke",f),h.setAttribute("stroke-width",0),h.setAttribute("x",c.barXValues[d]),h.setAttribute("y",c.barYValues[d]),h.setAttribute("height",c.barHeights[d]),h.setAttribute("width",c.barWidths[d]),i.appendChild(h)}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}var v=document.createElement("g");if(v.setAttribute("id","axis"),t.appendChild(v),v.setAttribute("transform","translate("+String(this.axis.pAxis.position.x)+", "+String(this.axis.pAxis.position.y)+")"),"left"===this.options.axisPositionHorizontal||"top"===this.options.axisPositionVertical){var m=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);v.appendChild(m)}else if("right"===this.options.axisPositionHorizontal||"bottom"===this.options.axisPositionVertical){var g=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);v.appendChild(g)}return[t,e]}}]),y}(s.default);t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=x(n(3)),i=x(n(1)),o=x(n(2)),a=x(n(4)),s=x(n(5)),l=x(n(31)),u=x(n(8)),c=x(n(0)),d=n(!function(){var e=new Error('Cannot find module "d3-brush"');throw e.code="MODULE_NOT_FOUND",e}()),h=n(!function(){var e=new Error('Cannot find module "d3-selection"');throw e.code="MODULE_NOT_FOUND",e}()),f=x(n(21)),p=x(n(214)),v=x(n(476)),m=x(n(241)),g=n(6),y=n(12),b=(x(n(481)),x(n(122))),w=x(n(123));function x(e){return e&&e.__esModule?e:{default:e}}var _={styles:{"horizontal-tiled-plot":"HorizontalTiledPlot-module_horizontal-tiled-plot-3EK65"},stylesPlot:{"tiled-plot":"TiledPlot-module_tiled-plot-uFHiB",horizontalList:"TiledPlot-module_horizontalList-1c1P8",list:"TiledPlot-module_list-24zgV",stylizedList:"TiledPlot-module_stylizedList-Mt4JL",stylizedItem:"TiledPlot-module_stylizedItem-2bQBK",stylizedHelper:"TiledPlot-module_stylizedHelper-3IVEu",horizontalItem:"TiledPlot-module_horizontalItem-2-ZjU","resizable-track":"TiledPlot-module_resizable-track-2oLT9",domain:"TiledPlot-module_domain-qYw6K"},stylesTrack:{"track-range-selection":"Track-module_track-range-selection-1yrDf","track-range-selection-active":"Track-module_track-range-selection-active-1oljJ Track-module_track-range-selection-1yrDf","track-range-selection-active-primary":"Track-module_track-range-selection-active-primary-29M73 Track-module_track-range-selection-active-1oljJ Track-module_track-range-selection-1yrDf","track-range-selection-active-secondary":"Track-module_track-range-selection-active-secondary-1s0t5 Track-module_track-range-selection-active-1oljJ Track-module_track-range-selection-1yrDf","track-range-selection-group-inactive":"Track-module_track-range-selection-group-inactive-YNRM4","track-range-selection-group-brush-selection":"Track-module_track-range-selection-group-brush-selection-2VYDl"}},k=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.brushBehavior=(0,d.brushX)(!0).on("start",t.brushStarted.bind(t)).on("brush",t.brushed.bind(t)).on("end",t.brushedEnded.bind(t)),t}return(0,s.default)(n,e),(0,o.default)(n,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush()}},{key:"shouldComponentUpdate",value:function(e,t){return this.rangeSelectionTriggered?(this.rangeSelectionTriggered=!1,this.state!==t):this.props.rangeSelection===e.rangeSelection||(this.moveBrush(e.rangeSelection[0]?e.rangeSelection[0]:null),this.state!==t)}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush():this.removeBrush()}},{key:"addBrush",value:function(){this.brushEl&&this.brushElAddedBefore!==this.brushEl&&(this.brushElAddedBefore&&this.brushElAddedBefore.on(".brush",null),this.brushEl.call(this.brushBehavior),this.brushElAddedBefore=this.brushEl,(0,g.resetD3BrushStyle)(this.brushEl,w.default["track-range-selection-group-brush-selection"]))}},{key:"brushed",value:function(){var e=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,this.sourceEvent&&this.props.onRangeSelection&&!e&&(this.rangeSelectionTriggered=!0,this.props.onRangeSelection(h.event.selection))}},{key:"brushStarted",value:function(){this.sourceEvent&&h.event.selection&&this.props.onRangeSelectionStart()}},{key:"brushedEnded",value:function(){!h.event.selection&&this.props.is1dRangeSelection&&(this.rangeSelectionTriggered=!0,this.props.onRangeSelectionEnd())}},{key:"moveBrush",value:function(e){if(this.brushEl){var t=e?[this.props.scale(e[0]),this.props.scale(e[1])]:null;this.rangeSelectionMoved=!0,this.brushEl.call(this.brushBehavior.move,t)}}},{key:"removeBrush",value:function(){this.brushElAddedBefore&&(this.brushElAddedBefore.call(this.brushBehavior.move,null),this.brushElAddedBefore.on(".brush",null),this.brushElAddedBefore=void 0,this.props.onRangeSelectionEnd())}},{key:"render",value:function(){var t=this,e=this.props.tracks.map(function(e){return e.height}).reduce(g.sum,0),n=this.props.tracks.map(function(e){return(0,y.IS_TRACK_RANGE_SELECTABLE)(e)}).reduce(g.or,!1),r=this.props.isRangeSelectionActive?"stylesTrack.track-range-selection-active":"stylesTrack.track-range-selection";return c.default.createElement("div",{className:"HorizontalTiledPlot-module_horizontal-tiled-plot-3EK65"},n&&c.default.createElement("svg",{ref:function(e){t.brushEl=(0,h.select)(e)},style:{height:e,width:this.props.width},xmlns:"http://www.w3.org/2000/svg",className:(0,l.default)(r,_)}),c.default.createElement(p.default,{className:String(b.default.list)+" "+String(b.default.stylizedList),component:m.default,editable:this.props.editable,handleConfigTrack:this.props.handleConfigTrack,handleResizeTrack:this.props.handleResizeTrack,height:e,helperClass:b.default.stylizedHelper,itemClass:b.default.stylizedItem,itemReactClass:v.default,items:this.props.tracks.map(function(e){return{configMenuVisible:e.uid===t.props.configTrackMenuId,uid:e.uid||f.default.nice(),width:t.props.width,height:e.height,value:e.value}}),onAddSeries:this.props.onAddSeries,onCloseTrack:this.props.onCloseTrack,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,onSortEnd:this.props.handleSortEnd,referenceAncestor:this.props.referenceAncestor,resizeHandles:this.props.resizeHandles,useDragHandle:!0,width:this.props.width}))}},{key:"sourceEvent",get:function(){return h.event&&h.event.sourceEvent}}]),n}(c.default.Component);k.propTypes={configTrackMenuId:u.default.string,editable:u.default.bool,handleConfigTrack:u.default.func,handleResizeTrack:u.default.func,handleSortEnd:u.default.func,is1dRangeSelection:u.default.bool,isRangeSelectionActive:u.default.bool,onAddSeries:u.default.func,onCloseTrack:u.default.func,onCloseTrackMenuOpened:u.default.func,onConfigTrackMenuOpened:u.default.func,onRangeSelection:u.default.func,onRangeSelectionEnd:u.default.func,onRangeSelectionStart:u.default.func,rangeSelection:u.default.array,referenceAncestor:u.default.func,resizeHandles:u.default.object,scale:u.default.func,tracks:u.default.array,width:u.default.number},t.default=k},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=h(n(156)),i=h(n(3)),a=h(n(1)),s=h(n(2)),l=h(n(4)),u=h(n(5)),r=h(n(8)),c=h(n(0)),d=n(82);function h(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function r(e){var t=e.items;(0,a.default)(this,r);var n=(0,l.default)(this,(r.__proto__||(0,i.default)(r)).call(this));return n.state={items:t,isSorting:!1},n}return(0,u.default)(r,e),(0,s.default)(r,[{key:"componentWillReceiveProps",value:function(e){this.setState({items:e.items})}},{key:"onSortStart",value:function(e,t){e.node;var n=e.index;e.collection,t.stopImmediatePropagation();var r=this.props.onSortStart;this.setState({isSorting:!0}),r&&r(this.ref),this.sortingIndex=n,this.sortStartTop=t.offsetTop,this.sortStartLeft=t.offsetLeft}},{key:"onSortMove",value:function(){}},{key:"onSortEnd",value:function(e){var t=e.oldIndex,n=e.newIndex,r=this.props.onSortEnd,i=this.state.items;this.setState({items:(0,d.arrayMove)(i,t,n),isSorting:!1}),r&&r(this.state.items),this.sortingIndex=null}},{key:"render",value:function(){var t=this,e=this.props.component,n=this.state,r=n.items,i={isSorting:n.isSorting,items:r,onSortEnd:this.onSortEnd.bind(this),onSortStart:this.onSortStart.bind(this),onSortMove:this.onSortMove.bind(this)};return c.default.createElement(e,(0,o.default)({},this.props,i,{ref:function(e){return t.ref=e}}))}}]),r}(c.default.Component);f.propTypes={axis:r.default.string,className:r.default.string,component:r.default.func,editable:r.default.bool,handleConfigTrack:r.default.func,handleResizeTrack:r.default.func,height:r.default.number,helperClass:r.default.string,itemClass:r.default.string,itemControlAlignLeft:r.default.bool,itemReactClass:r.default.func,items:r.default.array,onAddSeries:r.default.func,onCloseTrack:r.default.func,onCloseTrackMenuOpened:r.default.func,onConfigTrackMenuOpened:r.default.func,onSortEnd:r.default.func,onSortStart:r.default.func,referenceAncestor:r.default.string,resizeHandles:r.default.object,useDragHandle:r.default.bool,width:r.default.number},f.defaultProps={className:"list stylizedList",itemClass:"item stylizedItem",width:400,height:600},t.default=f},function(e,t,n){var r=n(67),i=n(47);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(n,e,t){(function(e){var t="object"==typeof e&&e&&e.Object===Object&&e;n.exports=t}).call(e,t(65))},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var a=n(418),s=n(68);e.exports=function e(t,n,r,i,o){return t===n||(null==t||null==n||!s(t)&&!s(n)?t!=t&&n!=n:a(t,n,r,i,e,o))}},function(e,t,n){var m=n(419),g=n(422),y=n(423);e.exports=function(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&s<l))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var c=-1,d=!0,h=2&n?new m:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var f=e[c],p=t[c];if(r)var v=a?r(p,f,c,t,e,o):r(f,p,c,e,t,o);if(void 0!==v){if(v)continue;d=!1;break}if(h){if(!g(t,function(e,t){if(!y(h,t)&&(f===e||i(f,e,n,r,o)))return h.push(t)})){d=!1;break}}else if(f!==p&&!i(f,p,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}},function(e,t,n){var r=n(42).Uint8Array;e.exports=r},function(e,t){e.exports=function(e){var n=-1,r=Array(e.size);return e.forEach(function(e,t){r[++n]=[t,e]}),r}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},function(e,t,n){var r=n(224),i=n(162),o=n(84);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var i=n(161),o=n(32);e.exports=function(e,t,n){var r=t(e);return o(e)?r:i(r,n(e))}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var c=n(427),d=n(163),h=n(32),f=n(164),p=n(165),v=n(227),m=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=h(e),r=!n&&d(e),i=!n&&!r&&f(e),o=!n&&!r&&!i&&v(e),a=n||r||i||o,s=a?c(e.length,String):[],l=s.length;for(var u in e)!t&&!m.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||p(u,l))||s.push(u);return s}},function(e,t,n){var r=n(430),i=n(228),o=n(431),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},function(e,t){e.exports=function(t){return function(e){return t(e)}}},function(e,t){e.exports=function(t,n){return function(e){return t(n(e))}}},function(e,t,n){var r=n(434),i=n(159),o=n(435),a=n(436),s=n(437),l=n(67),u=n(217),c="[object Map]",d="[object Promise]",h="[object Set]",f="[object WeakMap]",p="[object DataView]",v=u(r),m=u(i),g=u(o),y=u(a),b=u(s),w=l;(r&&w(new r(new ArrayBuffer(1)))!=p||i&&w(new i)!=c||o&&w(o.resolve())!=d||a&&w(new a)!=h||s&&w(new s)!=f)&&(w=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case v:return p;case m:return c;case g:return d;case y:return h;case b:return f}return t}),e.exports=w},function(e,t,n){var r=n(47);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(t,n){return function(e){return null!=e&&e[t]===n&&(void 0!==n||t in Object(e))}}},function(e,t,n){var i=n(234),o=n(120);e.exports=function(e,t){for(var n=0,r=(t=i(t,e)).length;null!=e&&n<r;)e=e[o(t[n++])];return n&&n==r?e:void 0}},function(e,t,n){var r=n(32),i=n(168),o=n(441),a=n(444);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},function(e,t,n){var r=n(47),i=n(96),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):a.test(e)?NaN:+e}},function(e,t,n){var a=n(237),s=n(85);e.exports=function(e,r){var i=-1,o=s(e)?Array(e.length):[];return a(e,function(e,t,n){o[++i]=r(e,t,n)}),o}},function(e,t,n){var r=n(238),i=n(462)(r);e.exports=i},function(e,t,n){var r=n(460),i=n(84);e.exports=function(e,t){return e&&r(e,t,i)}},function(e,t,n){var r=n(66),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(3)),i=d(n(1)),o=d(n(2)),a=d(n(4)),s=d(n(5)),l=d(n(0)),u=d(n(170)),c=d(n(121));function d(e){return e&&e.__esModule?e:{default:e}}var h={pointerEvents:"all"},f=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"getControls",value:function(e){return l.default.createElement(c.default,{configMenuVisible:this.props.item.configMenuVisible,imgStyleAdd:h,imgStyleClose:h,imgStyleMove:h,imgStyleSettings:h,isMoveable:this.moveable,isVisible:e,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:this.props.uid})}}]),t}(u.default);t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var w=r(n(156)),x=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var i=(0,n(82).SortableContainer)(function(e){var t=e.className,n=e.items,r=e.itemClass,i=e.itemControlAlignLeft,o=e.sortingIndex,a=e.useDragHandle,s=e.sortableHandlers,l=e.height,u=e.width,c=e.onCloseTrack,d=e.onCloseTrackMenuOpened,h=e.onConfigTrackMenuOpened,f=e.onAddSeries,p=e.handleConfigTrack,v=e.editable,m=e.itemReactClass,g=e.handleResizeTrack,y=e.resizeHandles,b=n.map(function(e,t){return x.default.createElement(m,{key:"sci-"+String(e.uid),className:r,controlAlignLeft:i,sortingIndex:o,index:t,uid:e.uid,height:e.height,width:e.width,item:e,useDragHandle:a,onCloseTrack:c,onCloseTrackMenuOpened:d,onConfigTrackMenuOpened:h,onAddSeries:f,handleConfigTrack:p,editable:v,handleResizeTrack:g,resizeHandles:y})});return x.default.createElement("div",(0,w.default)({className:t,style:{height:l,width:u,background:"transparent"}},s),b)});t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(3)),i=u(n(1)),o=u(n(2)),a=u(n(4)),s=u(n(5)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(e){var t=e.graphics;e.textGraphics=new l.Graphics,e.mirrored?e.text=new l.Text(String(e.tileData.zoomLevel)+"/"+String([e.tileData.tilePos[1],e.tileData.tilePos[0]].join("/")),{fontFamily:"Arial",fontSize:48,fill:16715792,align:"center"}):e.text=new l.Text(String(e.tileData.zoomLevel)+"/"+String(e.tileData.tilePos.join("/")),{fontFamily:"Arial",fontSize:48,fill:16715792,align:"center"}),e.textGraphics.addChild(e.text),e.text.anchor.x=.5,e.text.anchor.y=.5,t.addChild(e.textGraphics),this.drawTile(e,t)}},{key:"destroyTile",value:function(e,t){}},{key:"drawTile",value:function(e){if(e.graphics){var t=e.graphics,n=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),r=n.tileX,i=n.tileY,o=n.tileWidth,a=(n.tileHeight,1/((this._xScale(1)-this._xScale(0))/(this._refXScale(1)-this._refXScale(0)))),s=1/((this._yScale(1)-this._yScale(0))/(this._refYScale(1)-this._refYScale(0)));if(e.text.scale.x=a,e.text.scale.y=s,t.clear(),t.lineStyle(4*a,255,1),t.beginFill(16740363,.4),t.alpha=.5,e.mirrored){var l=this._refXScale(i+o)-this._refXScale(i),u=this._refYScale(r+o)-this._refYScale(r);e.textGraphics.position.x=this._refXScale(i)+l/2,e.textGraphics.position.y=this._refYScale(r)+u/2,t.drawRect(this._refXScale(i),this._refYScale(r),l,u)}else{var c=this._refXScale(r+o)-this._refXScale(r),d=this._refYScale(i+o)-this._refYScale(i);e.textGraphics.position.x=this._refXScale(r)+c/2,e.textGraphics.position.y=this._refYScale(i)+d/2,this._refXScale(r),this._refYScale(i),t.drawRect(this._refXScale(r),this._refYScale(i),c,d)}}}},{key:"fetchNewTiles",value:function(e){var r=this;e.map(function(e){var t=e.remoteId.split("."),n={zoomLevel:t[0],tilePos:t.slice(1,t.length).map(function(e){return+e})};r.fetchedTiles[e.tileId]=e,r.fetchedTiles[e.tileId].tileData=n,r.fetching.has(e.remoteId)&&r.fetching.delete(e.remoteId)}),this.synchronizeTilesAndGraphics()}}]),t}(u(n(95)).default);t.default=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var c=o(n(3)),a=o(n(1)),r=o(n(2)),s=o(n(4)),d=o(n(10)),i=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function u(e,t,n,r,i){(0,a.default)(this,u);var o=(0,s.default)(this,(u.__proto__||(0,c.default)(u)).call(this,e,t,n,r,i));return o.pMain=o.pMobile,o}return(0,i.default)(u,e),(0,r.default)(u,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(e){var t=e.graphics;e.textGraphics=new PIXI.Graphics,e.text=new PIXI.Text(String(e.tileData.zoomLevel)+"/"+String(e.tileData.tilePos.join("/")),{fontFamily:"Arial",fontSize:32,fill:16715792,align:"center"}),e.textGraphics.addChild(e.text),e.text.anchor.x=.5,e.text.anchor.y=.5,t.addChild(e.textGraphics),this.drawTile(e)}},{key:"destroyTile",value:function(e){}},{key:"drawTile",value:function(e){if((0,d.default)(u.prototype.__proto__||(0,c.default)(u.prototype),"drawTile",this).call(this,e),e.graphics){var t=e.graphics,n=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),r=n.tileX,i=(n.tileY,n.tileWidth),o=(n.tileHeight,1/((this._xScale(1)-this._xScale(0))/(this._refXScale(1)-this._refXScale(0))));e.text.scale.x=o,t.clear();var a=this.dimensions[1],s=this._refXScale(r+i)-this._refXScale(r);e.textGraphics.position.x=this._refXScale(r)+s/2,e.textGraphics.position.y=a/2;var l=this._refXScale(r);t.lineStyle(4*o,255,1),t.beginFill(16740363,.4),t.alpha=.5,t.moveTo(l,0),t.lineTo(l,a),t.moveTo(l+s,0),t.lineTo(l+s,a),t.lineStyle(0,255,1),t.drawRect(l,0,s,a)}}}]),u}(o(n(94)).default);t.default=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(3)),r=l(n(1)),i=l(n(2)),o=l(n(4)),c=l(n(10)),a=l(n(5)),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19));function l(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function l(){return(0,r.default)(this,l),(0,o.default)(this,(l.__proto__||(0,u.default)(l)).apply(this,arguments))}return(0,a.default)(l,e),(0,i.default)(l,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(e){var t=e.graphics;e.textGraphics=new s.Graphics,e.text=new s.Text(String(e.tileData.zoomLevel)+"/"+String(e.tileData.tilePos.join("/")),{fontFamily:"Arial",fontSize:32,fill:16715792,align:"center"}),e.textGraphics.addChild(e.text),e.text.anchor.x=.5,e.text.anchor.y=.5,e.text.rotation=-Math.PI/2,t.addChild(e.textGraphics),this.drawTile(e,t)}},{key:"destroyTile",value:function(e,t){}},{key:"drawTile",value:function(e){if((0,c.default)(l.prototype.__proto__||(0,u.default)(l.prototype),"drawTile",this).call(this,e),e.graphics){var t=e.graphics,n=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),r=n.tileY,i=n.tileHeight,o=1/((this._yScale(1)-this._yScale(0))/(this._refYScale(1)-this._refYScale(0)));e.text.scale.x=o,t.clear(),t.lineStyle(4*o,255,1),t.beginFill(16740363,.4),t.alpha=.5;var a=this.dimensions[0],s=this._refYScale(r+i)-this._refYScale(r);e.textGraphics.position.x=a/2,e.textGraphics.position.y=this._refYScale(r)+s/2,t.drawRect(0,this._refYScale(r),a,s)}}},{key:"fetchNewTiles",value:function(e){var r=this;e.map(function(e){var t=e.remoteId.split("."),n={zoomLevel:t[1],tilePos:t.slice(2,t.length).map(function(e){return+e})};r.fetchedTiles[e.tileId]=e,r.fetchedTiles[e.tileId].tileData=n,r.fetching.has(e.remoteId)&&r.fetching.delete(e.remoteId)}),this.synchronizeTilesAndGraphics()}}]),l}(l(n(245)).default);t.default=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=d(n(3)),r=d(n(1)),i=d(n(2)),s=d(n(4)),l=d(n(10)),u=d(n(5)),o=d(n(151)),c=n(9);function d(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function o(){return(0,r.default)(this,o),(0,s.default)(this,(o.__proto__||(0,a.default)(o)).apply(this,arguments))}return(0,u.default)(o,e),(0,i.default)(o,[{key:"calculateZoomLevel",value:function(){var e=c.tileProxy.calculateZoomLevel(this._yScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);return Math.min(e,this.maxZoom)}},{key:"relevantScale",value:function(){return this._yScale}},{key:"zoomed",value:function(e,t){(0,l.default)(o.prototype.__proto__||(0,a.default)(o.prototype),"zoomed",this).call(this,e,t);var n=(t(1)-t(0))/(this._refYScale(1)-this._refYScale(0)),r=this.position[0],i=t(0)+this.position[1]-this._refYScale(1)*n;this.pMain.position.x=r,this.pMain.position.y=i,this.pMain.scale.x=1,this.pMain.scale.y=n}}]),o}(o.default);t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(3)),i=c(n(1)),o=c(n(2)),a=c(n(4)),s=c(n(10)),l=c(n(5)),u=n(247);function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.axis=(0,u.axisLeft)(t._yScale),t.gAxis=t.gMain.append("g"),t.tilesetInfo=!0,t}return(0,l.default)(n,e),(0,o.default)(n,[{key:"setDimensions",value:function(e){(0,s.default)(n.prototype.__proto__||(0,r.default)(n.prototype),"setDimensions",this).call(this,e),this.axis.ticks(Math.ceil(this.dimensions[1]/150)),this.gAxis.attr("transform","translate("+String(e[0])+",0)")}},{key:"draw",value:function(){return this.axis.scale(this._yScale),this.gAxis.call(this.axis),this}},{key:"zoomed",value:function(e,t){(0,s.default)(n.prototype.__proto__||(0,r.default)(n.prototype),"zoomed",this).call(this,e,t),this.draw()}}]),n}(c(n(86)).default);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Array.prototype.slice,C=function(e){return e},O=1,E=2,M=3,P=4,A=1e-6;function i(e){return"translate("+(e+.5)+",0)"}function o(e){return"translate(0,"+(e+.5)+")"}function R(){return!this.__axis}function a(v,m){var g=[],y=null,b=null,w=6,x=6,_=3,k=v===O||v===P?-1:1,S=v===P||v===E?"x":"y",T=v===O||v===M?i:o;function t(e){var t=null==y?m.ticks?m.ticks.apply(m,g):m.domain():y,n=null==b?m.tickFormat?m.tickFormat.apply(m,g):C:b,r=Math.max(w,0)+_,i=m.range(),o=+i[0]+.5,a=+i[i.length-1]+.5,s=(m.bandwidth?function(t){var n=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(n=Math.round(n)),function(e){return+t(e)+n}}:function(t){return function(e){return+t(e)}})(m.copy()),l=e.selection?e.selection():e,u=l.selectAll(".domain").data([null]),c=l.selectAll(".tick").data(t,m).order(),d=c.exit(),h=c.enter().append("g").attr("class","tick"),f=c.select("line"),p=c.select("text");u=u.merge(u.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),c=c.merge(h),f=f.merge(h.append("line").attr("stroke","#000").attr(S+"2",k*w)),p=p.merge(h.append("text").attr("fill","#000").attr(S,k*r).attr("dy",v===O?"0em":v===M?"0.71em":"0.32em")),e!==l&&(u=u.transition(e),c=c.transition(e),f=f.transition(e),p=p.transition(e),d=d.transition(e).attr("opacity",A).attr("transform",function(e){return isFinite(e=s(e))?T(e):this.getAttribute("transform")}),h.attr("opacity",A).attr("transform",function(e){var t=this.parentNode.__axis;return T(t&&isFinite(t=t(e))?t:s(e))})),d.remove(),u.attr("d",v===P||v==E?"M"+k*x+","+o+"H0.5V"+a+"H"+k*x:"M"+o+","+k*x+"V0.5H"+a+"V"+k*x),c.attr("opacity",1).attr("transform",function(e){return T(s(e))}),f.attr(S+"2",k*w),p.attr(S,k*r).text(n),l.filter(R).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",v===E?"start":v===P?"end":"middle"),l.each(function(){this.__axis=s})}return t.scale=function(e){return arguments.length?(m=e,t):m},t.ticks=function(){return g=r.call(arguments),t},t.tickArguments=function(e){return arguments.length?(g=null==e?[]:r.call(e),t):g.slice()},t.tickValues=function(e){return arguments.length?(y=null==e?null:r.call(e),t):y&&y.slice()},t.tickFormat=function(e){return arguments.length?(b=e,t):b},t.tickSize=function(e){return arguments.length?(w=x=+e,t):w},t.tickSizeInner=function(e){return arguments.length?(w=+e,t):w},t.tickSizeOuter=function(e){return arguments.length?(x=+e,t):x},t.tickPadding=function(e){return arguments.length?(_=+e,t):_},t}function s(e){return a(O,e)}function l(e){return a(E,e)}function u(e){return a(M,e)}function c(e){return a(P,e)}n.d(t,"axisTop",function(){return s}),n.d(t,"axisRight",function(){return l}),n.d(t,"axisBottom",function(){return u}),n.d(t,"axisLeft",function(){return c})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(3)),s=o(n(1)),r=o(n(2)),l=o(n(4)),i=o(n(10)),u=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function o(e,t,n,r){(0,s.default)(this,o),t.name="© Mapbox © OpenStreetMap"+(t.name?"\n"+String(t.name):"");var i=(0,l.default)(this,(o.__proto__||(0,a.default)(o)).call(this,e,t,n));return i.style=t.style,i.accessToken=r,i}return(0,u.default)(o,e),(0,r.default)(o,[{key:"rerender",value:function(e){(0,i.default)(o.prototype.__proto__||(0,a.default)(o.prototype),"rerender",this).call(this,e),e.style!==this.style&&(this.style=e.style,this.removeAllTiles(),this.refreshTiles())}},{key:"getTileUrl",value:function(e){var t="mapbox.streets";return this.options&&this.options.style&&(t=this.options.style),"http://api.tiles.mapbox.com/v4/"+String(t)+"/"+String(e[0])+"/"+String(e[1])+"/"+String(e[2])+".png?access_token="+String(this.accessToken)}}]),o}(o(n(172)).default);t.default=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var y=s(n(11)),l=s(n(22)),u=s(n(3)),c=s(n(1)),r=s(n(2)),d=s(n(4)),i=s(n(10)),o=s(n(5)),a=s(n(56)),h=n(9),b=n(6);function s(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function s(e,t,n,r,i,o){(0,c.default)(this,s);var a=(0,d.default)(this,(s.__proto__||(0,u.default)(s)).call(this,e,t,n,r,i,o));return a.drawnRects=new l.default,a}return(0,o.default)(s,e),(0,r.default)(s,[{key:"tileToLocalId",value:function(e){return""+String(e.join("."))}},{key:"tileToRemoteId",value:function(e){return""+String(e.join("."))}},{key:"localToRemoteId",value:function(e){var t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){var e=h.tileProxy.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),t=h.tileProxy.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]),n=Math.max(e,t);return n=Math.min(n,this.maxZoom)}},{key:"setVisibleTiles",value:function(e){var t=this;this.visibleTiles=e.map(function(e){return{tileId:t.tileToLocalId(e),remoteId:t.tileToRemoteId(e)}}),this.visibleTileIds=new l.default(this.visibleTiles.map(function(e){return e.tileId}))}},{key:"calculateVisibleTiles",value:function(){if(!(0<arguments.length&&void 0!==arguments[0])||arguments[0],this.tilesetInfo){this.zoomLevel=this.calculateZoomLevel(),this.xTiles=h.tileProxy.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=h.tileProxy.calculateTiles(this.zoomLevel,this._yScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);for(var e=this.xTiles,t=this.yTiles,n=this.zoomLevel,r=[],i=0;i<e.length;i++)for(var o=0;o<t.length;o++){var a=[n,e[i],t[o]];r.push(a)}this.setVisibleTiles(r)}}},{key:"initTile",value:function(e){}},{key:"destroyTile",value:function(e,t){}},{key:"draw",value:function(){this.drawnRects.clear(),(0,i.default)(s.prototype.__proto__||(0,u.default)(s.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(e){if(e.graphics){var t=e.graphics;t.clear();var n=(0,b.colorToHex)("green");t.lineStyle(1,255,1),t.beginFill(n,.8);var r=!0,i=!(t.alpha=.5),o=void 0;try{for(var a,s=(0,y.default)(e.tileData);!(r=(a=s.next()).done);r=!0){var l=a.value,u=(l.fields,this._xScale(l.xStart)),c=this._xScale(l.xEnd),d=this._yScale(l.yStart),h=this._yScale(l.yEnd),f=l.uid;if(!this.drawnRects.has(f)){this.drawnRects.add(f);var p=h-d,v=c-u,m=(u+c)/2,g=(d+h)/2;p<6&&(p=6),v<6&&(v=6),t.drawRect(m-p/2,g-v/2,p,v)}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}}},{key:"setPosition",value:function(e){(0,i.default)(s.prototype.__proto__||(0,u.default)(s.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw()}}]),s}(a.default);t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(3)),i=c(n(1)),o=c(n(2)),a=c(n(4)),s=c(n(10)),l=c(n(5)),u=n(247);function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.axis=(0,u.axisTop)(t._xScale),t.gAxis=t.gMain.append("g"),t.tilesetInfo=!0,t}return(0,l.default)(n,e),(0,o.default)(n,[{key:"setDimensions",value:function(e){(0,s.default)(n.prototype.__proto__||(0,r.default)(n.prototype),"setDimensions",this).call(this,e),this.axis.ticks(Math.ceil(this.dimensions[0]/150)),this.gAxis.attr("transform","translate(0,"+String(e[1])+")")}},{key:"draw",value:function(){return this.axis.scale(this._xScale),this.gAxis.call(this.axis),this}},{key:"zoomed",value:function(e,t){(0,s.default)(n.prototype.__proto__||(0,r.default)(n.prototype),"zoomed",this).call(this,e,t),this.draw()}}]),n}(c(n(86)).default);t.default=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(37)),i=h(n(24)),l=h(n(3)),u=h(n(1)),o=h(n(2)),c=h(n(4)),a=h(n(5)),f=n(20),s=h(n(93)),d=h(n(152)),p=n(6);function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function s(e,t,n,r,i,o){(0,u.default)(this,s);var a=(0,c.default)(this,(s.__proto__||(0,l.default)(s)).call(this,e,t,n,r,i,o));return a.axis=new d.default(a),a.pBase.addChild(a.axis.pAxis),a}return(0,a.default)(s,e),(0,o.default)(s,[{key:"initTile",value:function(e){this.scale.minRawValue=this.minVisibleValue(),this.scale.maxRawValue=this.maxVisibleValue(),this.scale.minValue=this.scale.minRawValue,this.scale.maxValue=this.scale.maxRawValue,this.drawTile(e)}},{key:"drawTile",value:function(e){var d=this;if(e.graphics){var h=e.graphics;h.clear(),this.valueScale=(0,f.scaleLog)().domain([this.minValue()+.01,this.maxValue()]).range([this.dimensions[1]-3,3]);var t=(0,p.colorToHex)("black");h.lineStyle(1,t,.3),h.beginFill(t,.3),this.drawAxis(this.valueScale),e.tileData.forEach(function(e){var t=e.fields,n=+e.chrOffset,r=+t[1]+n,i=+t[2]+n,o=+t[3],a=d._xScale(r),s=d._xScale(i),l=Math.max(s-a,4),u=d.valueScale(o),c=(s+a)/2;h.drawRect(c-l/2,u-3,l,6)})}}},{key:"minVisibleValue",value:function(){var t=this,e=this.visibleAndFetchedIds();return 0==e.length&&(e=(0,i.default)(this.fetchedTiles)),Math.min.apply(null,e.map(function(e){return+Math.min.apply(Math,(0,r.default)(t.fetchedTiles[e].tileData.filter(function(e){return!isNaN(e.fields[3])}).map(function(e){return+e.fields[3]})))}))}},{key:"maxVisibleValue",value:function(){var t=this,e=this.visibleAndFetchedIds();return 0==e.length&&(e=(0,i.default)(this.fetchedTiles)),Math.max.apply(null,e.map(function(e){return+Math.max.apply(Math,(0,r.default)(t.fetchedTiles[e].tileData.filter(function(e){return!isNaN(e.fields[3])}).map(function(e){return+e.fields[3]})))}))}}]),s}(s.default);t.default=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(3)),i=d(n(1)),o=d(n(2)),a=d(n(4)),s=d(n(5)),l=d(n(0)),u=d(n(170)),c=d(n(121));function d(e){return e&&e.__esModule?e:{default:e}}var h={pointerEvents:"all"},f=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"getControls",value:function(e){return l.default.createElement(c.default,{imgStyleAdd:h,imgStyleClose:h,imgStyleMove:h,imgStyleSettings:h,isAlignLeft:this.props.controlAlignLeft,isMoveable:this.moveable,isVertical:!0,isVisible:e,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:this.props.uid})}}]),t}(u.default);t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=U(n(24)),h=U(n(22)),o=U(n(46)),_=U(n(23)),m=U(n(37)),A=U(n(11)),l=U(n(201)),p=U(n(40)),u=U(n(3)),c=U(n(1)),r=U(n(2)),d=U(n(4)),i=U(n(5)),f=U(n(31)),v=U(n(0)),a=U(n(8)),g=n(!function(){var e=new Error('Cannot find module "d3-selection"');throw e.code="MODULE_NOT_FOUND",e}()),y=n(20),b=n(189),w=U(n(21)),x=U(n(29)),k=U(n(491)),S=n(259),T=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),C=U(n(499)),O=U(n(500)),E=U(n(503)),M=U(n(532)),P=U(n(539)),R=U(n(540)),j=U(n(44)),I=n(544),L=n(269),D=n(545),N=U(D),B=n(9),F=n(6),V=n(12),z=U(n(546)),H=U(n(268));U(n(547));function U(e){return e&&e.__esModule?e:{default:e}}var q={styles:{higlass:"HiGlass-module_higlass-1NHR2","higlass-dark-theme":"HiGlass-module_higlass-dark-theme-2visd","higlass-canvas":"HiGlass-module_higlass-canvas-_mP9r","higlass-drawing-surface":"HiGlass-module_higlass-drawing-surface-3aQQo","higlass-svg":"HiGlass-module_higlass-svg-JJZbf","tiled-area":"HiGlass-module_tiled-area-22H1L","track-mouseover-menu":"HiGlass-module_track-mouseover-menu-1AoaP"},stylesMTHeader:{"multitrack-header":"ViewHeader-module_multitrack-header-3XnZx","multitrack-header-focus":"ViewHeader-module_multitrack-header-focus-3akkN","multitrack-header-squeazed":"ViewHeader-module_multitrack-header-squeazed-GHIVd","multitrack-header-dark":"ViewHeader-module_multitrack-header-dark-97tZt","multitrack-header-id":"ViewHeader-module_multitrack-header-id-3YURk","multitrack-header-left":"ViewHeader-module_multitrack-header-left-Qj9Sm","multitrack-header-grabber":"ViewHeader-module_multitrack-header-grabber-3jrIz","multitrack-header-grabber-squeazed":"ViewHeader-module_multitrack-header-grabber-squeazed-dU45Z","multitrack-header-search":"ViewHeader-module_multitrack-header-search-1X_3_","multitrack-header-nav-list":"ViewHeader-module_multitrack-header-nav-list-2nvcu","multitrack-header-icon":"ViewHeader-module_multitrack-header-icon-16QKZ","multitrack-header-icon-squeazed":"ViewHeader-module_multitrack-header-icon-squeazed-25lkF","mouse-tool-selection":"ViewHeader-module_mouse-tool-selection-1pg2m"},stylesGlobal:{higlass:"HiGlass_higlass-3aU-_","react-resizable-handle":"HiGlass_react-resizable-handle-3kCAE"}},W=function(e){function a(e){(0,c.default)(this,a);var i=(0,d.default)(this,(a.__proto__||(0,u.default)(a)).call(this,e));i.minHorizontalHeight=20,i.minVerticalWidth=20,i.resizeSensor=null,i.uid=w.default.nice(),i.rowHeight=40,i.tiledPlots={},i.genomePositionSearchBoxes={},i.xScales={},i.yScales={},i.topDiv=null,i.viewTrackUidsToCombinedUid={},i.combinedUidToViewTrack={},i.scalesChangedListeners={},i.draggingChangedListeners={},i.valueScalesChangedListeners={},i.zoomLocks={},i.locationLocks={},i.prevAuthToken=e.options.authToken,i.valueScaleLocks={},i.setCenters={},i.plusImg={},i.configImg={},i.horizontalMargin=5,i.verticalMargin=5,i.genomePositionSearchBox=null,i.viewHeaders={},i.boundRefreshView=function(){i.refreshView(V.LONG_DRAG_TIMEOUT)},i.unsetOnLocationChange=[],e.options.isDarkTheme&&(0,B.setDarkTheme)();var t={},n={};"string"==typeof i.props.viewConfig?(0,b.json)(i.props.viewConfig,function(e,t){i.setState({viewConfig:t,views:i.processViewConfig(JSON.parse((0,p.default)(t)))}),i.unsetOnLocationChange.forEach(function(e){var t=e.viewId,n=e.callback,r=e.callbackId;i.onLocationChange(t,n,r)})}):(t=i.props.viewConfig,n=i.processViewConfig(JSON.parse((0,p.default)(t)))),e.options.authToken&&(0,B.setTileProxyAuthHeader)(e.options.authToken),i.pixiStage=new T.Container,i.pixiStage.interactive=!0,i.element=null;var r=V.MOUSE_TOOL_MOVE;if(i.props.options)switch(i.props.options.mouseTool){case V.MOUSE_TOOL_SELECT:r=V.MOUSE_TOOL_SELECT}var o={};try{window.higlassTracks&&(0,l.default)(window.higlassTracks).forEach(function(e){o[e.config.type]=e})}catch(e){console.warn("Broken config of a plugin track",i.props.options.tracks)}return i.mounted=!1,i.state={bounded:i.props.options.bounded||!1,pluginTracks:o,currentBreakpoint:"lg",width:0,height:0,rowHeight:30,svgElement:null,canvasElement:null,views:n,viewConfig:t,addTrackPositionMenuPosition:null,mouseOverOverlayUid:null,exportLinkModalOpen:!1,exportLinkLocation:null,mouseTool:r,isDarkTheme:!1},(0,F.dictValues)(n).map(function(e){return i.adjustLayoutToTrackSizes(e)}),i.attachedToDOM=!1,i.api=(0,N.default)(i),i.viewChangeListener=[],i.triggerViewChangeDb=(0,F.debounce)(i.triggerViewChange.bind(i),250),i.pubSubs=[],i.rangeSelection=[null,null],i.prevMouseHoverTrack=null,i.zooming=!1,i}return(0,i.default)(a,e),(0,r.default)(a,[{key:"componentWillMount",value:function(){var e=this;B.domEvent.register("keydown",document),B.domEvent.register("keyup",document),B.domEvent.register("scroll",document),B.domEvent.register("resize",window),B.domEvent.register("orientationchange",window),B.domEvent.register("mousewheel",window),B.domEvent.register("mousedown",window,!0),B.domEvent.register("mouseup",window,!0),B.domEvent.register("click",window,!0),B.domEvent.register("mousemove",window),this.pubSubs=[],this.pubSubs.push(B.pubSub.subscribe("keydown",this.keyDownHandler.bind(this))),this.pubSubs.push(B.pubSub.subscribe("keyup",this.keyUpHandler.bind(this))),this.pubSubs.push(B.pubSub.subscribe("resize",this.resizeHandler.bind(this))),this.pubSubs.push(B.pubSub.subscribe("mousewheel",this.mousewheelHandler.bind(this))),this.pubSubs.push(B.pubSub.subscribe("orientationchange",this.resizeHandler.bind(this))),this.pubSubs.push(B.pubSub.subscribe("app.event",this.dispatchEvent.bind(this))),this.pubSubs.push(B.pubSub.subscribe("app.animateOnMouseMove",this.animateOnMouseMoveHandler.bind(this))),this.pubSubs.push(B.pubSub.subscribe("trackDropped",function(){e.setState({draggingHappening:null})}),B.pubSub.subscribe("app.zoomStart",this.zoomStartHandler.bind(this))),this.pubSubs.push(B.pubSub.subscribe("app.zoomEnd",this.zoomEndHandler.bind(this))),this.pubSubs.push(B.pubSub.subscribe("app.zoom",this.zoomHandler.bind(this))),this.props.getApi&&this.props.getApi(this.api)}},{key:"zoomStartHandler",value:function(){this.hideHoverMenu(),this.zooming=!0}},{key:"zoomEndHandler",value:function(){this.zooming=!1}},{key:"zoomHandler",value:function(e){e.sourceEvent&&this.mouseMoveHandler(e.sourceEvent)}},{key:"waitForDOMAttachment",value:function(e){var t=this;if(this.mounted){var n=x.default.findDOMNode(this);document.body.contains(n)?e():requestAnimationFrame(function(){return t.waitForDOMAttachment(e)})}}},{key:"componentDidMount",value:function(){var t=this;this.mounted=!0,this.element=x.default.findDOMNode(this),window.addEventListener("focus",this.boundRefreshView),window.addEventListener("mousewheel",this.mousewheelHandler.bind(this),!0),(0,F.dictValues)(this.state.views).forEach(function(e){e.layout?e.layout.i=e.uid:e.layout=t.generateViewLayout(e)}),this.pixiRenderer=T.autoDetectRenderer(this.state.width,this.state.height,{view:this.canvasElement,antialias:!0,transparent:!0,resolution:2,autoResize:!0}),this.fitPixiToParentContainer(),this.setState({svgElement:this.svgElement,canvasElement:this.canvasElement}),this.waitForDOMAttachment(function(){S.ElementQueries.listen(),t.resizeSensor=new S.ResizeSensor(t.element.parentNode,t.updateAfterResize.bind(t)),t.updateAfterResize()}),this.handleDragStart(),this.handleDragStop(),this.animate();var n=(0,g.select)(this.element).append("svg").style("display","none");L.all.forEach(function(e){return(0,I.createSymbolIcon)(n,e.id,e.paths,e.viewBox)})}},{key:"getTrackObject",value:function(e,t){return this.tiledPlots[e].trackRenderer.getTrackObject(t)}},{key:"getTrackRenderer",value:function(e){return this.tiledPlots[e].trackRenderer}},{key:"componentWillReceiveProps",value:function(e){var t=this.processViewConfig(e.viewConfig);if(e.options.authToken!=this.prevAuthToken){(0,B.setTileProxyAuthHeader)(e.options.authToken);var n=!0,r=!1,i=void 0;try{for(var o,a=(0,A.default)(this.iterateOverViews());!(n=(o=a.next()).done);n=!0){var s=o.value,l=this.getTrackRenderer(s),u=JSON.parse(l.prevTrackDefinitions);l.syncTrackObjects([]),l.syncTrackObjects(u)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}this.prevAuthToken=e.options.authToken}this.setState({views:t})}},{key:"componentWillUpdate",value:function(e,t){this.pixiRenderer.render(this.pixiStage)}},{key:"componentDidUpdate",value:function(){this.animate(),this.triggerViewChangeDb()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.pixiStage.destroy(!1),this.pixiStage=null,this.pixiRenderer.destroy(!0),this.pixiRenderer=null,window.removeEventListener("focus",this.boundRefreshView),this.resizeSensor&&this.resizeSensor.detach(),B.domEvent.unregister("keydown",document),B.domEvent.unregister("keyup",document),B.domEvent.unregister("scroll",document),B.domEvent.unregister("mousewheel",window),B.domEvent.unregister("mousedown",window),B.domEvent.unregister("mouseup",window),B.domEvent.unregister("click",window),B.domEvent.unregister("mousemove",window),this.pubSubs.forEach(function(e){return B.pubSub.unsubscribe(e)}),this.pubSubs=[],(0,D.destroy)()}},{key:"dispatchEvent",value:function(e){this.canvasElement&&(0,F.forwardEvent)(e,this.canvasElement)}},{key:"mousewheelHandler",value:function(e){(0,F.hasParent)(e.target,this.topDiv)&&e.preventDefault()}},{key:"animateOnMouseMoveHandler",value:function(e){e&&!this.animateOnMouseMove&&this.pubSubs.push(B.pubSub.subscribe("app.mouseMove",this.animate.bind(this))),this.animateOnMouseMove=e}},{key:"fitPixiToParentContainer",value:function(){if(this.element.parentNode){var e=this.element.parentNode.clientWidth,t=this.element.parentNode.clientHeight;this.pixiRenderer.resize(e,t),this.pixiRenderer.view.style.width=String(e)+"px",this.pixiRenderer.view.style.height=String(t)+"px",this.pixiRenderer.render(this.pixiStage)}else console.warn("No parentNode:",this.element)}},{key:"addDefaultOptions",value:function(e){var t=this.getTrackInfo(e.type);if(t){var n=e.options?e.options:{};if(t.defaultOptions)if(e.options)for(var r in t.defaultOptions)e.options[r]=void 0!==e.options[r]?e.options[r]:JSON.parse((0,p.default)(t.defaultOptions[r]));else e.options=JSON.parse((0,p.default)(t.defaultOptions));else e.options=n}}},{key:"keyDownHandler",value:function(e){this.props.options.rangeSelectionOnAlt&&"Alt"===e.key&&this.setState({mouseTool:V.MOUSE_TOOL_SELECT})}},{key:"keyUpHandler",value:function(e){this.props.options.rangeSelectionOnAlt&&"Alt"===e.key&&this.setState({mouseTool:V.MOUSE_TOOL_MOVE})}},{key:"animate",value:function(){var e=this;this.isRequestingAnimationFrame||(this.isRequestingAnimationFrame=!0,requestAnimationFrame(function(){e.pixiRenderer&&(e.pixiRenderer.render(e.pixiStage),e.isRequestingAnimationFrame=!1)}))}},{key:"measureSize",value:function(){var e=this.element.clientHeight-0,t=this.element.clientWidth;0<t&&0<e&&this.setState({sizeMeasured:!0,width:t,height:e})}},{key:"updateAfterResize",value:function(){this.measureSize(),this.updateRowHeight(),this.fitPixiToParentContainer(),this.refreshView(V.LONG_DRAG_TIMEOUT),this.resizeHandler()}},{key:"onBreakpointChange",value:function(e){this.setState({currentBreakpoint:e})}},{key:"handleOverlayMouseEnter",value:function(e){this.setState({mouseOverOverlayUid:e})}},{key:"handleOverlayMouseLeave",value:function(e){this.setState({mouseOverOverlayUid:null})}},{key:"handleLockLocation",value:function(t){var n=this;this.setState({chooseViewHandler:function(e){return n.handleLocationLockChosen(t,e)},mouseOverOverlayUid:t})}},{key:"updateLockedValueScales",value:function(e,t){this.valueScaleLocks[this.combineViewAndTrackUid(e,t)]}},{key:"iterateOverViews",value:function(){var e=[];for(var t in this.state.views)e.push(t);return e}},{key:"iterateOverTracksInView",value:function(e){var t=[],n=this.state.views[e].tracks;for(var r in n){var i=!0,o=!1,a=void 0;try{for(var s,l=(0,A.default)(n[r]);!(i=(s=l.next()).done);i=!0){var u=s.value;if("combined"===u.type&&u.contents){var c=!0,d=!1,h=void 0;try{for(var f,p=(0,A.default)(u.contents);!(c=(f=p.next()).done);c=!0){var v=f.value;t.push({viewId:e,trackId:v.uid,track:v})}}catch(e){d=!0,h=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw h}}}else t.push({viewId:e,trackId:u.uid,track:u})}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}}return t}},{key:"iterateOverTracks",value:function(){var e=[];for(var t in this.state.views){var n=this.state.views[t].tracks;for(var r in n){var i=!0,o=!1,a=void 0;try{for(var s,l=(0,A.default)(n[r]);!(i=(s=l.next()).done);i=!0){var u=s.value;if("combined"===u.type&&u.contents){var c=!0,d=!1,h=void 0;try{for(var f,p=(0,A.default)(u.contents);!(c=(f=p.next()).done);c=!0){var v=f.value;e.push({viewId:t,trackId:v.uid,track:v})}}catch(e){d=!0,h=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw h}}}else e.push({viewId:t,trackId:u.uid,track:u})}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}}}return e}},{key:"setMouseTool",value:function(e){this.setState({mouseTool:e})}},{key:"syncValueScales",value:function(e,t){var n=this,r=this.combineViewAndTrackUid(e,t);if(this.state.views[e]){var i=(0,F.getTrackByUid)(this.state.views[e].tracks,t);if(this.valueScaleLocks[r]){var o=(0,F.dictValues)(this.valueScaleLocks[r]).filter(function(e){return n.tiledPlots[e.view]}).map(function(e){return n.tiledPlots[e.view].trackRenderer.getTrackObject(e.track)}),a=o.filter(function(e){return e.minRawValue&&e.maxRawValue}).map(function(e){return e.minRawValue()}).filter(function(e){return e}),s=o.filter(function(e){return e.minRawValue&&e.maxRawValue}).map(function(e){return e.maxRawValue()}).filter(function(e){return e}),l=Math.min.apply(Math,(0,m.default)(a)),u=Math.max.apply(Math,(0,m.default)(s)),c=!0,d=!1,h=void 0;try{for(var f,p=(0,A.default)(o);!(c=(f=p.next()).done);c=!0){var v=f.value;v.minValue&&v.minValue(l),v.maxValue&&v.maxValue(u),v.valueScale&&(v.valueScale.domain([l,u]),i.options&&void 0!==i.options.scaleStartPercent&&void 0!==i.options.scaleEndPercent&&(v.options.scaleStartPercent=i.options.scaleStartPercent,v.options.scaleEndPercent=i.options.scaleEndPercent),v.rerender(v.options,!0))}}catch(e){d=!0,h=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw h}}}}}},{key:"handleNewTilesLoaded",value:function(e,t){this.animate()}},{key:"notifyDragChangedListeners",value:function(t){(0,F.dictValues)(this.draggingChangedListeners).forEach(function(e){(0,F.dictValues)(e).forEach(function(e){return e(t)})})}},{key:"addDraggingChangedListener",value:function(e,t,n){this.draggingChangedListeners.hasOwnProperty(e)||(this.draggingChangedListeners[e]={}),(this.draggingChangedListeners[e][t]=n)(!0),n(!1)}},{key:"removeDraggingChangedListener",value:function(e,t){if(this.draggingChangedListeners.hasOwnProperty(e)){var n=this.draggingChangedListeners[e];n.hasOwnProperty(t)&&(n[t](!1),delete n[t])}}},{key:"addScalesChangedListener",value:function(e,t,n){this.scalesChangedListeners[e]||(this.scalesChangedListeners[e]={}),this.scalesChangedListeners[e][t]=n,this.xScales[e]&&this.yScales[e]&&n(this.xScales[e],this.yScales[e])}},{key:"removeScalesChangedListener",value:function(e,t){if(this.scalesChangedListeners[e]){var n=this.scalesChangedListeners[e];n[t]&&delete n[t]}}},{key:"createSVG",value:function(){var e=document.createElement("svg");e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.setAttribute("xmlns","http://www.w3.org/2000/svg");var t=!0,n=!1,r=void 0;try{for(var i,o=(0,A.default)((0,F.dictValues)(this.tiledPlots));!(t=(i=o.next()).done);t=!0){var a=i.value;if(a){var s=!0,l=!1,u=void 0;try{for(var c,d=(0,A.default)((0,F.dictValues)(a.trackRenderer.trackDefObjects));!(s=(c=d.next()).done);s=!0){var h=c.value;if(h.trackObject.exportSVG){var f=h.trackObject.exportSVG()[0];e.appendChild(f)}}}catch(e){l=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw u}}}}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e}},{key:"createSVGString",value:function(){var e=C.default.xml((new XMLSerializer).serializeToString(this.createSVG()));return e=(e=e.replace("<a0:","<")).replace("</a0:","</")}},{key:"createDataURI",value:function(){return this.canvasElement.toDataURL()}},{key:"handleExportSVG",value:function(){(0,F.download)("export.svg",this.createSVGString())}},{key:"handleScalesChanged",value:function(p,t,n){var v=this,e=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];if(this.xScales[p]=t,this.yScales[p]=n,e&&this.scalesChangedListeners.hasOwnProperty(p)&&(0,F.dictValues)(this.scalesChangedListeners[p]).forEach(function(e){e(t,n)}),this.zoomLocks[p])for(var f=this.zoomLocks[p],m=(0,F.dictItems)(f),r=(0,F.scalesCenterAndK)(this.xScales[p],this.yScales[p]),i=(0,_.default)(r,3),g=(i[0],i[1],i[2]),o=function(e){var t=m[e][0],n=m[e][1];if(!v.xScales[t]||!v.yScales[t])return"continue";if(t==p)return"continue";var r=(0,F.scalesCenterAndK)(v.xScales[t],v.yScales[t]),i=(0,_.default)(r,3),o=i[0],a=i[1],s=(i[2],n[0],f[p][0],n[1],f[p][1],n[2]/f[p][2]),l=g*s;if(!v.setCenters[t])return"continue";var u=v.setCenters[t](o,a,l,!1),c=(0,_.default)(u,2),d=c[0],h=c[1];v.xScales[t]=d,v.yScales[t]=h,v.scalesChangedListeners.hasOwnProperty(t)&&(0,F.dictValues)(v.scalesChangedListeners[t]).forEach(function(e){e(d,h)})},a=0;a<m.length;a++)o(a);if(this.locationLocks[p]){var y=this.locationLocks[p],b=(0,F.dictItems)(y),s=(0,F.scalesCenterAndK)(this.xScales[p],this.yScales[p]),l=(0,_.default)(s,3),w=l[0],x=l[1],u=(l[2],function(e){var t=b[e][0],n=b[e][1];if(!v.xScales[t]||!v.yScales[t])return"continue";var r=(0,F.scalesCenterAndK)(v.xScales[t],v.yScales[t]),i=(0,_.default)(r,3),o=(i[0],i[1],i[2]);if(t==p)return"continue";var a=n[0]-y[p][0],s=n[1]-y[p][1],l=w+a,u=x+s;if(!v.setCenters[t])return"continue";var c=v.setCenters[t](l,u,o,!1),d=(0,_.default)(c,2),h=d[0],f=d[1];v.xScales[t]=h,v.yScales[t]=f,v.scalesChangedListeners.hasOwnProperty(t)&&(0,F.dictValues)(v.scalesChangedListeners[t]).forEach(function(e){e(h,f)})});for(a=0;a<b.length;a++)u(a)}this.animate(),this.triggerViewChangeDb()}},{key:"handleProjectViewport",value:function(n){var r=this;this.setState({chooseTrackHandler:function(e,t){return r.handleViewportProjected(n,e,t)}})}},{key:"handleZoomToData",value:function(e){if(!this.tiledPlots[e])throw"View uid "+String(e)+" does not exist in the current viewConfig";this.tiledPlots[e].handleZoomToData()}},{key:"handleYankFunction",value:function(t,n){this.setState({chooseViewHandler:function(e){return n(t,e)},mouseOverOverlayUid:t})}},{key:"handleUnlock",value:function(e,t){var n=t[e],r=(0,F.dictKeys)(n);if(2==r.length)return delete t[r[0]],void delete t[r[1]];t[e]&&t[e][e]&&delete t[e][e],t[e]&&delete t[e]}},{key:"viewScalesLockData",value:function(e){if(this.xScales[e]&&this.yScales[e])return(0,F.scalesCenterAndK)(this.xScales[e],this.yScales[e]);console.warn("View scale lock doesn't correspond to existing uid: ",e)}},{key:"addLock",value:function(e,t,n,r){var i=[],o=[];i=n[e]?(0,F.dictItems)(n[e]).filter(function(e){return r(e[0])}).map(function(e){return[e[0],r(e[0])]}):[[e,r.bind(this)(e)]],o=n[t]?(0,F.dictItems)(n[t]).filter(function(e){return r(e[0])}).map(function(e){return[e[0],r(e[0])]}):[[t,r.bind(this)(t)]];var a=i.concat(o),s=(0,F.dictFromTuples)(a);a.forEach(function(e){n[e[0]]=s})}},{key:"handleLocationLockChosen",value:function(e,t){e!=t&&this.addLock(e,t,this.locationLocks,this.viewScalesLockData.bind(this)),this.setState({chooseViewHandler:null})}},{key:"handleZoomLockChosen",value:function(e,t){e!=t&&this.addLock(e,t,this.zoomLocks,this.viewScalesLockData.bind(this)),this.setState({chooseViewHandler:null})}},{key:"handleViewportProjected",value:function(e,t,n){var r=null;if(e==t)alert("A view can not show its own viewport.");else{var i=(0,F.getTrackByUid)(this.state.views[t].tracks,n),o=(0,F.getTrackPositionByUid)(this.state.views[t].tracks,n),a={uid:r=w.default.nice(),type:"viewport-projection-"+String({top:"horizontal",bottom:"horizontal",center:"center",left:"vertical",right:"vertical"}[o]),fromViewUid:e};this.addCallbacks(t,a),this.handleTrackAdded(t,a,o,i)}return this.setState({chooseTrackHandler:null}),r}},{key:"handleLocationYanked",value:function(e,t){var n=this.xScales[t],r=this.yScales[t],i=this.xScales[e],o=this.yScales[e],a=(0,F.scalesCenterAndK)(i,o),s=(0,_.default)(a,3),l=(s[0],s[1],s[2]),u=(0,F.scalesCenterAndK)(n,r),c=(0,_.default)(u,3),d=c[0],h=c[1];c[2],this.setCenters[e](d,h,l,!0),this.setState({chooseViewHandler:null})}},{key:"handleZoomYanked",value:function(e,t){var n=this.xScales[t],r=this.yScales[t],i=this.xScales[e],o=this.yScales[e],a=(0,F.scalesCenterAndK)(i,o),s=(0,_.default)(a,3),l=s[0],u=s[1],c=(s[2],(0,F.scalesCenterAndK)(n,r)),d=(0,_.default)(c,3),h=(d[0],d[1],d[2]);this.setCenters[e](l,u,h,!0),this.setState({chooseViewHandler:null})}},{key:"handleTrackPositionChosen",value:function(e,t){this.setState({addTrackPosition:t,addTrackPositionView:e})}},{key:"updateRowHeight",value:function(){if(this.props.options&&this.props.options.bounded){var e=this.element.parentNode.clientHeight,t=0,n=!0,r=!1,i=void 0;try{for(var o,a=(0,A.default)((0,F.dictValues)(this.state.views));!(n=(o=a.next()).done);n=!0){var s=o.value;t=Math.max(t,s.layout.y+s.layout.h)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}this.handleDragStart(),this.handleDragStop();var l=(e-((this.state.viewConfig.editable?10:0)*t-1))/t,u=Math.floor(l);this.setState({rowHeight:u})}}},{key:"handleLayoutChange",value:function(e,t){if(this.element){var n=!0,r=!1,i=void 0;try{for(var o,a=(0,A.default)(e);!(n=(o=a.next()).done);n=!0){var s=o.value,l=this.state.views[s.i];l&&(l.layout=s)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}this.updateRowHeight(),this.refreshView(V.LONG_DRAG_TIMEOUT)}}},{key:"clearDragTimeout",value:function(){this.dragTimeout&&(clearTimeout(this.dragTimeout),this.dragTimeout=null)}},{key:"getTrackInfo",value:function(e){return V.TRACKS_INFO_BY_TYPE[e]?V.TRACKS_INFO_BY_TYPE[e]:window.higlassTracksByType&&window.higlassTracksByType[e]?window.higlassTracksByType[e].config:void console.warn("Track type not found:",e,"(check app/scripts/config/ for a list of defined track types)")}},{key:"forceRefreshView",value:function(){this.setState(this.state)}},{key:"refreshView",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:V.SHORT_DRAG_TIMEOUT;this.clearDragTimeout(),this.notifyDragChangedListeners(!0),this.clearDragTimeout(),this.dragTimeout=setTimeout(function(){e.notifyDragChangedListeners(!1)},t)}},{key:"handleDragStart",value:function(e,t,n,r,i,o){this.clearDragTimeout(),this.notifyDragChangedListeners(!0)}},{key:"handleDragStop",value:function(){var e=this;this.clearDragTimeout(),this.dragTimeout=setTimeout(function(){e.notifyDragChangedListeners(!1)},V.LONG_DRAG_TIMEOUT)}},{key:"resizeHandler",value:function(){(0,F.objVals)(this.viewHeaders).filter(function(e){return e}).forEach(function(e){return e.checkWidth()})}},{key:"fillInMinWidths",value:function(e){var t=["top","bottom"];"center"in e||(e.center=[]),"left"in e||(e.left=[]),"right"in e||(e.right=[]),"top"in e||(e.top=[]),"bottom"in e||(e.bottom=[]);for(var n=0;n<t.length;n++){var r=e[t[n]];if(r)for(var i=0;i<r.length;i++){var o=this.getTrackInfo(r[i].type);"height"in r[i]&&!(o&&r[i].height<o.minHeight)||(o&&o.minHeight?r[i].height=o.minHeight:r[i].height=this.minHorizontalHeight)}}for(var a=["left","right"],s=0;s<a.length;s++){var l=e[a[s]];if(l)for(var u=0;u<l.length;u++){var c=this.getTrackInfo(l[u].type);"width"in l[u]&&!(c&&l[u].width<c.minWidth)||(c&&c.minWidth?l[u].width=c.minWidth:l[u].width=this.minVerticalWidth)}}return e}},{key:"calculateViewDimensions",value:function(e){var t=2*this.horizontalMargin,n=2*this.verticalMargin,r=0;if(r+=10,e.tracks.top)for(var i=0;i<e.tracks.top.length;i++){var o=e.tracks.top[i];t+=o.height?o.height:20,r+=o.height?o.height:20}if(e.tracks.bottom)for(var a=0;a<e.tracks.bottom.length;a++){var s=e.tracks.bottom[a];t+=s.height?s.height:20,r+=s.height?s.height:20}(e.tracks.left&&0<e.tracks.left.length||e.tracks.right&&0<e.tracks.right.length||e.tracks.center&&0<e.tracks.center.length)&&(r+=20);var l=0;if(e.tracks.left)for(var u=0;u<e.tracks.left.length;u++){var c=e.tracks.left[u],d=c.height?c.height:100;n+=c.width?c.width:0,l=Math.max(l,d)}var h=0;if(e.tracks.right)for(var f=0;f<e.tracks.right.length;f++){var p=e.tracks.right[f],v=p.height?p.height:100;n+=p.width?p.width:0,h=Math.max(h,v)}var m=Math.max(l,h),g=0,y=0;if(e.tracks.center&&0<(0,F.dictValues)(e.tracks.center).length){if(!e.tracks.center[0].contents||0<e.tracks.center[0].contents.length){var b=null,w=null;if(e.tracks.center[0].contents){var x=!0,_=!1,k=void 0;try{for(var S,T=(0,A.default)(e.tracks.center[0].contents);!(x=(S=T.next()).done);x=!0){var C=S.value;b=Math.max(b,C.height?C.height:100),w=Math.max(w,C.width?C.width:100)}}catch(e){_=!0,k=e}finally{try{!x&&T.return&&T.return()}finally{if(_)throw k}}}else b=e.tracks.center[0].height?e.tracks.center[0].height:100,w=e.tracks.center[0].width?e.tracks.center[0].width:100;t+=b,n+=w}}else(e.tracks.top&&1<(0,F.dictValues)(e.tracks.top).length||e.tracks.bottom&&1<(0,F.dictValues)(e.tracks.bottom).length)&&(e.tracks.left&&(0,F.dictValues)(e.tracks.left).length||e.tracks.right&&(0,F.dictValues)(e.tracks.right).length)&&(g=y=100);t+=g<m?m:g;var O=0,E=0,M=0,P=0;return"top"in e.tracks&&(O=e.tracks.top.map(function(e){return e.height?e.height:20}).reduce(function(e,t){return e+t},0)),"bottom"in e.tracks&&(E=e.tracks.bottom.map(function(e){return e.height?e.height:20}).reduce(function(e,t){return e+t},0)),"left"in e.tracks&&(M=e.tracks.left.map(function(e){return e.width?e.width:0}).reduce(function(e,t){return e+t},0)),"right"in e.tracks&&(P=e.tracks.right.map(function(e){return e.width?e.width:0}).reduce(function(e,t){return e+t},0)),{totalWidth:n,totalHeight:t,topHeight:O,bottomHeight:E,leftWidth:M,rightWidth:P,centerWidth:y,centerHeight:g,minNecessaryHeight:r}}},{key:"generateViewLayout",value:function(e){var t=null;if("layout"in e)t=e.layout;else{this.element.clientWidth;var n=this.calculateViewDimensions(e),r=(n.totalWidth,n.totalHeight);n.topHeight,n.bottomHeight,n.leftWidth,n.rightWidth,n.centerWidth,n.centerHeight,e.searchBox&&(r+=30),Math.ceil(r/this.rowHeight),t={x:0,y:0,w:12,h:12}}return t}},{key:"handleClearView",value:function(e){var t=this.state.views;t[e].tracks.top=[],t[e].tracks.bottom=[],t[e].tracks.center=[],t[e].tracks.left=[],t[e].tracks.right=[],this.setState({views:t})}},{key:"handleCloseView",value:function(e){if(1!=(0,F.dictValues)(this.state.views).length){this.handleUnlock(e,this.zoomLocks),delete this.state.views[e];var t=this.removeInvalidTracks(this.state.views);this.setState({views:t})}}},{key:"handleSeriesAdded",value:function(e,t,n,r){var i=this.state.views[e].tracks;if("combined"==r.type)r.contents.push(t);else for(var o={type:"combined",uid:w.default.nice(),height:r.height,width:r.width,contents:[r,t]},a=i[n],s=0;s<a.length;s++)a[s].uid==r.uid&&(a[s]=o);this.setState({views:this.state.views})}},{key:"handleNoTrackAdded",value:function(){this.state.addTrackPosition&&this.setState({addTrackPosition:null})}},{key:"handleTracksAdded",value:function(e,t,n,r){this.storeTrackSizes(e);var i=!0,o=!1,a=void 0;try{for(var s,l=(0,A.default)(t);!(i=(s=l.next()).done);i=!0){var u=s.value;this.handleTrackAdded(e,u,n,r)}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}}},{key:"handleChangeTrackType",value:function(e,t,n){var r=this.state.views[e],i=(0,F.getTrackByUid)(r.tracks,t);i.uid=w.default.nice(),i.type=n,this.setState({views:this.state.views})}},{key:"handleChangeTrackData",value:function(e,t,n){var r=this.state.views[e],i=(0,F.getTrackByUid)(r.tracks,t);i.uid=w.default.nice(),i.data=n,this.setState({views:this.state.views})}},{key:"handleTrackAdded",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;if(this.addDefaultOptions(t),t.uid||(t.uid=w.default.nice()),t.contents){var i=!0,o=!1,a=void 0;try{for(var s,l=(0,A.default)(t.contents);!(i=(s=l.next()).done);i=!0){var u=s.value;this.addDefaultOptions(u)}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}}if(this.addNameToTrack(t),this.state.addTrackPosition&&this.setState({addTrackPosition:null}),!r){t.width=this.getTrackInfo(t.type).minWidth?this.getTrackInfo(t.type).minWidth:this.minVerticalWidth,t.height=this.getTrackInfo(t.type).minHeight?this.getTrackInfo(t.type).minHeight:this.minHorizontalHeight;var c=this.state.views[e].tracks;if("left"===n||"top"===n)c[n].unshift(t);else if("center"===n)if(0===c.center.length){var d={uid:w.default.nice(),type:"combined",contents:[t]};c.center=[d]}else if("combined"==c.center[0].type)c.center[0].contents.push(t);else{var h={uid:w.default.nice(),type:"combined",contents:[c.center[0],t]};c.center=[h]}else c[n]||(c[n]=[]),c[n].push(t);return this.adjustLayoutToTrackSizes(this.state.views[e]),t}this.handleSeriesAdded(e,t,n,r)}},{key:"storeTrackSizes",value:function(e){var t=(0,F.positionedTracksToAllTracks)(this.state.views[e].tracks),n=!0,r=!1,i=void 0;try{for(var o,a=(0,A.default)(t);!(n=(o=a.next()).done);n=!0){var s=o.value,l=this.tiledPlots[e].trackRenderer.getTrackObject(s.uid);l&&(s.width=l.dimensions[0],s.height=l.dimensions[1])}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"adjustLayoutToTrackSizes",value:function(e){if(e.layout){var t=0;this.state.viewConfig.editable&&(t+=20),t+=this.calculateViewDimensions(e).totalHeight;var n=this.state.viewConfig.editable?10:0;this.props.options.bounded||(e.layout.h=Math.ceil((t+n)/(this.state.rowHeight+n)))}}},{key:"handleCloseTrack",value:function(e,t){var n=this.state.views[e].tracks;for(var r in this.handleUnlockValueScale(e,t),n){var i=n[r],o=i.filter(function(e){return e.uid!=t});o.length==i.length?o.filter(function(e){return"combined"==e.type}).forEach(function(e){e.contents=e.contents.filter(function(e){return e.uid!=t})}):n[r]=o}return this.storeTrackSizes(e),this.adjustLayoutToTrackSizes(this.state.views[e]),this.setState({views:this.state.views}),this.state.views}},{key:"handleLockValueScale",value:function(n,r){var i=this;this.setState({chooseTrackHandler:function(e,t){return i.handleValueScaleLocked(n,r,e,t)}})}},{key:"combineViewAndTrackUid",value:function(e,t){var n=String(e)+"."+String(t);if(this.combinedUidToViewTrack[n]={view:e,track:t},this.viewTrackUidsToCombinedUid[e]){if(this.viewTrackUidsToCombinedUid[t])return this.viewTrackUidsToCombinedUid[e][t];this.viewTrackUidsToCombinedUid[e][t]=n}else this.viewTrackUidsToCombinedUid[e]={},this.viewTrackUidsToCombinedUid[e][t]=n;return n}},{key:"handleUnlockValueScale",value:function(e,t){if(this.tiledPlots[e].trackRenderer.getTrackObject(t).createdTracks){var n=(0,F.dictKeys)(this.tiledPlots[e].trackRenderer.getTrackObject(t).createdTracks),r=!0,i=!1,o=void 0;try{for(var a,s=(0,A.default)(n);!(r=(a=s.next()).done);r=!0){var l=a.value;this.handleUnlock(this.combineViewAndTrackUid(e,l),this.valueScaleLocks)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}else this.handleUnlock(this.combineViewAndTrackUid(e,t),this.valueScaleLocks)}},{key:"handleValueScaleLocked",value:function(e,t,n,r){var i=this;if(this.tiledPlots[e].trackRenderer.getTrackObject(t).createdTracks){var o=(0,F.dictKeys)(this.tiledPlots[e].trackRenderer.getTrackObject(t).createdTracks),a=!0,s=!1,l=void 0;try{for(var u,c=(0,A.default)(o);!(a=(u=c.next()).done);a=!0){var d=u.value;this.handleValueScaleLocked(e,d,n,r)}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}}else if(this.tiledPlots[n].trackRenderer.getTrackObject(r).createdTracks){var h=(0,F.dictKeys)(this.tiledPlots[n].trackRenderer.getTrackObject(r).createdTracks),f=!0,p=!1,v=void 0;try{for(var m,g=(0,A.default)(h);!(f=(m=g.next()).done);f=!0){var y=m.value;this.handleValueScaleLocked(e,t,n,y)}}catch(e){p=!0,v=e}finally{try{!f&&g.return&&g.return()}finally{if(p)throw v}}}else{var b=this.combineViewAndTrackUid(e,t),w=this.combineViewAndTrackUid(n,r);this.addLock(b,w,this.valueScaleLocks,function(e){return i.combinedUidToViewTrack[e]}),this.syncValueScales(e,t),this.setState({chooseTrackHandler:null})}}},{key:"addCallbacks",value:function(d,e){var h=this;if("viewport-projection-center"==e.type||"viewport-projection-horizontal"==e.type||"viewport-projection-vertical"==e.type){var f=e.fromViewUid;e.registerViewportChanged=function(e,t){return h.addScalesChangedListener(f,e,t)},e.removeViewportChanged=function(e){return h.removeScalesChangedListener(f,e)},e.setDomainsCallback=function(e,t){var n=(0,y.scaleLinear)().domain(e).range(h.xScales[f].range()),r=(0,y.scaleLinear)().domain(t).range(h.yScales[f].range()),i=(0,F.scalesCenterAndK)(n,r),o=(0,_.default)(i,3),a=o[0],s=o[1],l=o[2];h.setCenters[f](a,s,l,!1);var u=!1,c=!1;d in h.zoomLocks&&(u=f in h.zoomLocks[d]),u&&h.handleUnlock(d,h.zoomLocks),d in h.locationLocks&&(c=f in h.locationLocks[d]),c&&h.handleUnlock(d,h.locationLocks),h.handleScalesChanged(f,n,r,!0),u&&h.addLock(d,f,h.zoomLocks,h.viewScalesLockData),c&&h.addLock(d,f,h.locationLocks,h.viewScalesLockData)}}}},{key:"deserializeLocationLocks",value:function(e){if(this.locationLocks={},e.locationLocks){var t=!0,n=!1,r=void 0;try{for(var i,o=(0,A.default)((0,F.dictKeys)(e.locationLocks.locksByViewUid));!(t=(i=o.next()).done);t=!0){var a=i.value;this.locationLocks[a]=e.locationLocks.locksDict[e.locationLocks.locksByViewUid[a]]}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}}},{key:"deserializeZoomLocks",value:function(e){if(this.zoomLocks={},e.zoomLocks){var t=!0,n=!1,r=void 0;try{for(var i,o=(0,A.default)((0,F.dictKeys)(e.zoomLocks.locksByViewUid));!(t=(i=o.next()).done);t=!0){var a=i.value;this.zoomLocks[a]=e.zoomLocks.locksDict[e.zoomLocks.locksByViewUid[a]]}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}}},{key:"deserializeValueScaleLocks",value:function(e){if(e.valueScaleLocks){var t=!0,n=!1,r=void 0;try{for(var i,o=(0,A.default)((0,F.dictKeys)(e.valueScaleLocks.locksByViewUid));!(t=(i=o.next()).done);t=!0){var a=i.value;this.valueScaleLocks[a]=e.valueScaleLocks.locksDict[e.valueScaleLocks.locksByViewUid[a]]}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}}},{key:"serializeLocks",value:function(e){var t={},n={},r=!0,i=!1,o=void 0;try{for(var a,s=(0,A.default)((0,F.dictKeys)(e));!(r=(a=s.next()).done);r=!0){var l=a.value,u=e[l]&&e[l].uid;u||(u=w.default.nice()),t[e[l].uid=u]=e[l],n[l]=e[l].uid}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return{locksByViewUid:n,locksDict:t}}},{key:"getViewsAsString",value:function(){var f=this,e=JSON.parse((0,p.default)(this.state.viewConfig));return e.views=(0,F.dictItems)(this.state.views).map(function(e){var t=JSON.parse((0,p.default)(e[1])),n=e[0],r=!0,i=!1,o=void 0;try{for(var a,s=(0,A.default)((0,F.positionedTracksToAllTracks)(t.tracks));!(r=(a=s.next()).done);r=!0){var l=a.value;if(l.server){var u=(0,O.default)(l.server,{});if(!u.hostname.length){var c=window.location.host,d=window.location.protocol,h=String(d)+"//"+String(c)+String(u.pathname);l.server=h}}"serverUidKey"in l&&delete l.serverUidKey,"uuid"in l&&delete l.uuid,"private"in l&&delete l.private,"maxZoom"in l&&delete l.maxZoom,"coordSystem"in l&&delete l.coordSystem,"coordSystem2"in l&&delete l.coordSystem2,"datatype"in l&&delete l.datatype,"maxWidth"in l&&delete l.maxWidth,"datafile"in l&&delete l.datafile,"filetype"in l&&delete l.filetype,"binsPerDimension"in l&&delete l.binsPerDimension}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return t.uid=n,t.initialXDomain=f.xScales[n].domain(),t.initialYDomain=f.yScales[n].domain(),t}),e.zoomLocks=this.serializeLocks(this.zoomLocks),e.locationLocks=this.serializeLocks(this.locationLocks),e.valueScaleLocks=this.serializeLocks(this.valueScaleLocks),(0,p.default)(e,null,2)}},{key:"handleExportViewAsJSON",value:function(){var e=this.getViewsAsString();new Blob([e],{type:"text/json"}),(0,F.download)("viewconf.json",e)}},{key:"handleExportViewsAsLink",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.state.viewConfig.exportViewUrl,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.width=this.element.clientWidth,this.height=this.element.clientHeight,this.setState({exportLinkModalOpen:!n,exportLinkLocation:null});var r=""===window.location.port?"":":"+String(window.location.port),i=fetch(e,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:'{"viewconf":'+String(this.getViewsAsString())+"}"}).then(function(e){if(!e.ok)throw e;return e.json()}).catch(function(e){console.log("err:",e)}).then(function(e){return{id:e.uid,url:String(window.location.protocol)+"//"+String(window.location.hostname)+r+"/app/?config="+String(e.uid)}});return n||i.then(function(e){t.setState({exportLinkLocation:e.url})}).catch(function(e){return console.error("Exporting view config as link failed:",e)}),i}},{key:"handleDataDomainChanged",value:function(e,t,n){var r=this.state.views;r[e].initialXDomain=t,r[e].initialYDomain=n,this.setState({views:r})}},{key:"viewPositionAvailable",value:function(e,t,n,r){var i=e+n,o=t+r;if(12<e+n)return!1;for(var a=(0,F.dictValues)(this.state.views),s=0;s<a.length;s++){var l=a[s].layout.x,u=a[s].layout.y,c=l+a[s].layout.w,d=u+a[s].layout.h;if(e<c&&l<i&&t<d&&u<o)return!1}return!0}},{key:"handleAddView",value:function(e){for(var t=this,n=(0,F.dictValues)(this.state.views),r=e,i=[],o=0;o<n.length;o++){var a=n[o].layout.x+n[o].layout.w,s=n[o].layout.y;this.viewPositionAvailable(a,s,e.layout.w,e.layout.h)&&i.push([a,s]),a=n[o].layout.x,s=n[o].layout.y+n[o].layout.h,this.viewPositionAvailable(a,s,e.layout.w,e.layout.h)&&i.push([a,s])}i.sort(function(e,t){var n=e[1]-t[1];return 0==n?e[0]-t[0]:n});var l=(0,p.default)(r),u=JSON.parse(l);u.layout.x=i[0][0],u.layout.y=i[0][1],u.uid=w.default.nice(),u.layout.i=u.uid,(0,F.positionedTracksToAllTracks)(u.tracks).forEach(function(e){return t.addCallbacks(u.uid,e)}),this.state.views[u.uid]=u,this.setState({views:this.state.views})}},{key:"addNameToTrack",value:function(e){var t=this.getTrackInfo(e.type);return t&&t.name&&(e.name=t.name),e}},{key:"addUidsToTracks",value:function(e){return e.forEach(function(e){e.uid||(e.uid=w.default.nice())}),e}},{key:"addNamesToTracks",value:function(e){var t=this;return e.forEach(function(e){e.name||t.addNameToTrack(e)}),e}},{key:"handleSelectedAssemblyChanged",value:function(e,t,n,r){var i=this.state.views;i[e].genomePositionSearchBox.chromInfoId=t,i[e].genomePositionSearchBox.autocompleteId=n,i[e].genomePositionSearchBox.autocompleteServer=r}},{key:"createGenomePostionSearchBoxEntry",value:function(e,t){var n=e,r={autocompleteServer:V.DEFAULT_SERVER,chromInfoServer:V.DEFAULT_SERVER,visible:!1};return n||(n=JSON.parse((0,p.default)(r))),n.autocompleteServer||(n.autocompleteServer=r.autocompleteServer),n.chromInfoId||(n.chromInfoId=t),n.chromInfoServer||(n.chromInfoServer=r.chromInfoServer),n.visible||(n.visible=!1),n}},{key:"handleTogglePositionSearchBox",value:function(e){var t=this.state.views[e];t.genomePositionSearchBoxVisible=!t.genomePositionSearchBoxVisible;var n=(0,F.positionedTracksToAllTracks)(t.tracks),r={},i=!0,o=!1,a=void 0;try{for(var s,l=(0,A.default)(n);!(i=(s=l.next()).done);i=!0){var u=s.value;u.coordSystem&&(r[u.coordSystem]||(r[u.coordSystem]=0),r[u.coordSystem]+=1)}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}var c=(0,F.dictItems)(r).sort(function(e,t){return t[1]-e[1]}),d="hg19";c.length&&(d=c[0][0]),t.genomePositionSearchBox=this.createGenomePostionSearchBoxEntry(t.genomePositionSearchBox,d),t.genomePositionSearchBox.visible=!t.genomePositionSearchBox.visible,this.refreshView(),this.setState({views:this.state.views,configMenuUid:null})}},{key:"handleTrackOptionsChanged",value:function(e,t,n){var r=this.state.views[e],i=(0,F.getTrackByUid)(r.tracks,t);i&&(i.options=(0,o.default)(i.options,n),this.mounted&&this.setState({views:this.state.views}))}},{key:"handleViewOptionsChanged",value:function(e,t){var n=this.state.views[e];n&&(n.options=(0,o.default)(n.options||{},t),this.mounted&&this.setState({views:this.state.views}))}},{key:"isTrackValid",value:function(e,t){return!("viewport-projection-center"==e.type&&!t.has(e.fromViewUid))}},{key:"removeInvalidTracks",value:function(e){var t=this,n=new h.default((0,F.dictKeys)(e)),r=!0,i=!1,o=void 0;try{for(var a,s=(0,A.default)((0,F.dictValues)(e));!(r=(a=s.next()).done);r=!0)for(var l=a.value,u=["left","top","center","right","bottom"],c=0;c<u.length;c++){var d=u[c];l.tracks.hasOwnProperty(d)&&(l.tracks[d]=l.tracks[d].filter(function(e){return t.isTrackValid(e,n)}),l.tracks[d].forEach(function(e){"combined"==e.type&&(e.contents=e.contents.filter(function(e){return t.isTrackValid(e,n)}))}))}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return e}},{key:"processViewConfig",value:function(n){var s=this,e=n.views,r={};if(!n.views||0===n.views.length)throw"No views provided in viewConfig";return e.forEach(function(t){if((0,F.fillInMinWidths)(t.tracks),t.uid||(t.uid=w.default.nice()),!(r[t.uid]=t).initialXDomain)throw"No initialXDomain in provided viewconf";t.initialXDomain[0]=+t.initialXDomain[0],t.initialXDomain[1]=+t.initialXDomain[1],t.initialYDomain?(t.initialXDomain[0]=+t.initialXDomain[0],t.initialXDomain[1]=+t.initialXDomain[1]):t.initialYDomain=[t.initialXDomain[0],t.initialXDomain[1]],s.xScales[t.uid]||(s.xScales[t.uid]=(0,y.scaleLinear)().domain(t.initialXDomain)),s.yScales[t.uid]||(s.yScales[t.uid]=(0,y.scaleLinear)().domain(t.initialYDomain));var e=(0,F.positionedTracksToAllTracks)(t.tracks);s.deserializeZoomLocks(n),s.deserializeLocationLocks(n),s.deserializeValueScaleLocks(n),e=s.addUidsToTracks(e),(e=s.addNamesToTracks(e)).forEach(function(e){return s.addCallbacks(t.uid,e)}),t.layout&&(t.layout.i=t.uid),e.forEach(function(e){if(s.addDefaultOptions(e),e.contents){var t=!0,n=!1,r=void 0;try{for(var i,o=(0,A.default)(e.contents);!(t=(i=o.next()).done);t=!0){var a=i.value;s.addDefaultOptions(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}})}),r=this.removeInvalidTracks(r)}},{key:"handleWindowFocused",value:function(){}},{key:"rangeSelectionHandler",value:function(e){this.rangeSelection=e,(0,D.publish)("rangeSelection",e)}},{key:"offViewChange",value:function(e){this.viewChangeListener.splice(e,1)}},{key:"onViewChange",value:function(e){return this.viewChangeListener.push(e)-1}},{key:"triggerViewChange",value:function(){var t=this;this.viewChangeListener.forEach(function(e){return e(t.getViewsAsString())})}},{key:"getGenomeLocation",value:function(t){var n=this;return B.chromInfo.get(this.state.views[t].chromInfoPath).then(function(e){return(0,F.scalesToGenomeLoci)(n.xScales[t],n.yScales[t],e)})}},{key:"offLocationChange",value:function(e,t){this.removeScalesChangedListener(e,t)}},{key:"onLocationChange",value:function(e,n,t){var r=(0,s.default)(this.state.views);if(r.length){if(void 0!==e&&-1!==r.indexOf(e)){var i=this.state.views[e],o=function(e,t){n({xDomain:e.domain(),yDomain:t.domain(),xRange:e.range(),yRange:t.range()})},a=1;return this.scalesChangedListeners[i.uid]&&(a=(0,s.default)(this.scalesChangedListeners[i.uid]).filter(function(e){return 0===e.indexOf(V.LOCATION_LISTENER_PREFIX)}).map(function(e){return parseInt(e.slice(V.LOCATION_LISTENER_PREFIX.length+1),10)}).reduce(function(e,t){return Math.max(e,t)},0)+1),this.addScalesChangedListener(i.uid,String(V.LOCATION_LISTENER_PREFIX)+"."+String(a),o),t&&t(String(V.LOCATION_LISTENER_PREFIX)+"."+String(a)),a}console.error("🦄 listen to me: you forgot to give me a proper view ID. I can't do nothing without that. 💩")}else this.unsetOnLocationChange.push({viewId:e,callback:n,callbackId:t})}},{key:"getTiledPlotAtPosition",value:function(e,t){for(var n=void 0,r=(0,F.dictValues)(this.state.views),i=0;i<r.length;i++){var o=this.tiledPlots[r[i].uid],a=this.tiledAreasDivs[r[i].uid].getBoundingClientRect(),s=a.top,l=s+a.height,u=a.left,c=u+a.width;if(u<=e&&e<=c&&s<=t&&t<=l){n=o;break}}return n}},{key:"mouseMoveHandler",value:function(e){if(this.topDiv){var t=(0,g.clientPoint)(this.topDiv,e),n=this.getTiledPlotAtPosition(e.clientX,e.clientY),r=n?n.listTracksAtPosition(t[0],t[1],!0).map(function(e){return e.originalTrack||e}):[],i=r.find(function(e){return!e.isAugmentationTrack}),o=i?[t[0]-i.position[0],t[1]-i.position[1]]:t,a=-1,s=-1;i&&(a=i.flipText?i._xScale.invert(o[1]):i._xScale.invert(o[0]),s=i.is2d?i._yScale.invert(o[1]):a);var l={x:t[0],y:t[1],relTrackX:i&&i.flipText?o[1]:o[0],relTrackY:i&&i.flipText?o[0]:o[1],dataX:a,dataY:s,isFrom2dTrack:i&&i.is2d,isFromVerticalTrack:i&&i.flipText,track:i,origEvt:e,sourceUid:this.uid,hoveredTracks:r};B.pubSub.publish("app.mouseMove",l),this.showHoverMenu(l)}}},{key:"showHoverMenu",value:function(e){var t=e.track&&e.track.getMouseOverHtml?e.track.getMouseOverHtml(e.relTrackX,e.relTrackY):"";if(e.track!==this.prevMouseHoverTrack&&this.prevMouseHoverTrack&&this.prevMouseHoverTrack.stopHover&&this.prevMouseHoverTrack.stopHover(),this.prevMouseHoverTrack=e.track,!this.zooming){var n=t&&t.length?[1]:[],r=(0,g.select)("body").selectAll(".track-mouseover-menu").data(n);r.exit().remove(),r.enter().append("div").classed("track-mouseover-menu",!0).classed(z.default["track-mouseover-menu"],!0),r=(0,g.select)("body").selectAll(".track-mouseover-menu");var i=(0,g.clientPoint)((0,g.select)("body").node(),e.origEvt);if(r.style("position","fixed").style("left",String(i[0])+"px").style("top",String(i[1])+"px"),r.node()){var o=r.node().getBoundingClientRect();o.x+o.width>window.innerWidth&&r.style("left",i[0]-o.width+"px"),o.y+o.height>window.innerHeight&&r.style("top",i[1]-o.height+"px"),r.html(t)}}}},{key:"hideHoverMenu",value:function(){(0,g.select)("body").selectAll(".track-mouseover-menu").remove()}},{key:"mouseMoveZoomHandler",value:function(e){(0,D.publish)("mouseMoveZoom",e)}},{key:"mouseDownHandler",value:function(e){}},{key:"setChromInfo",value:function(e,t){var n=this;(0,j.default)(e,function(e){n.chromInfo=e,t()})}},{key:"render",value:function(){var l=this;this.tiledAreasDivs={},this.tiledAreas=v.default.createElement("div",{className:"HiGlass-module_tiled-area-22H1L"}),this.mounted&&(this.tiledAreas=(0,F.dictValues)(this.state.views).map(function(i){var e=void 0!==i.zoomFixed?i.zoomFixed:l.props.zoomFixed,t=i.uid===l.state.addTrackPositionMenuUid?l.state.addTrackPositionMenuPosition:null,n=null;if(l.state.chooseViewHandler){var r="transparent";l.state.mouseOverOverlayUid===i.uid&&(r="green"),n=v.default.createElement("div",{className:"tiled-plot-overlay",onClick:function(){return l.state.chooseViewHandler(i.uid)},onMouseEnter:function(){return l.handleOverlayMouseEnter(i.uid)},onMouseLeave:function(){return l.handleOverlayMouseLeave(i.uid)},onMouseMove:function(){return l.handleOverlayMouseEnter(i.uid)},style:{position:"absolute",width:"100%",height:"100%",background:r,opacity:.3,zIndex:1}})}var o=v.default.createElement(E.default,{key:"tp"+String(i.uid),ref:function(e){l.tiledPlots[i.uid]=e},addTrackPosition:l.state.addTrackPositionView===i.uid?l.state.addTrackPosition:null,addTrackPositionMenuPosition:t,canvasElement:l.state.canvasElement,chooseTrackHandler:l.state.chooseTrackHandler?function(e){return l.state.chooseTrackHandler(i.uid,e)}:null,chromInfoPath:i.chromInfoPath,draggingHappening:l.state.draggingHappening,editable:l.state.viewConfig.editable,horizontalMargin:l.horizontalMargin,initialXDomain:i.initialXDomain,initialYDomain:i.initialYDomain,xDomainLimits:i.xDomainLimits,yDomainLimits:i.yDomainLimits,zoomLimits:i.zoomLimits,mouseTool:l.state.mouseTool,onChangeTrackType:function(e,t){return l.handleChangeTrackType(i.uid,e,t)},onChangeTrackData:function(e,t){return l.handleChangeTrackData(i.uid,e,t)},onCloseTrack:function(e){return l.handleCloseTrack(i.uid,e)},onDataDomainChanged:function(e,t){return l.handleDataDomainChanged(i.uid,e,t)},onLockValueScale:function(e){return l.handleLockValueScale(i.uid,e)},onMouseMoveZoom:l.mouseMoveZoomHandler.bind(l),onNewTilesLoaded:function(e){return l.handleNewTilesLoaded(i.uid,e)},onNoTrackAdded:l.handleNoTrackAdded.bind(l),onRangeSelection:l.rangeSelectionHandler.bind(l),onScalesChanged:function(e,t){return l.handleScalesChanged(i.uid,e,t)},onTrackOptionsChanged:function(e,t){return l.handleTrackOptionsChanged(i.uid,e,t)},onTrackPositionChosen:l.handleTrackPositionChosen.bind(l),onTracksAdded:function(e,t,n){return l.handleTracksAdded(i.uid,e,t,n)},onUnlockValueScale:function(e){return l.handleUnlockValueScale(i.uid,e)},onValueScaleChanged:function(e){return l.syncValueScales(i.uid,e)},pixiStage:l.pixiStage,pluginTracks:l.state.pluginTracks,registerDraggingChangedListener:function(e){l.addDraggingChangedListener(i.uid,i.uid,e)},removeDraggingChangedListener:function(e){return l.removeDraggingChangedListener(i.uid,i.uid,e)},setCentersFunction:function(e){l.setCenters[i.uid]=e},svgElement:l.state.svgElement,trackSourceServers:l.state.viewConfig.trackSourceServers,tracks:i.tracks,viewOptions:i.options,metaTracks:i.metaTracks,uid:i.uid,verticalMargin:l.verticalMargin,zoomable:!e}),a=function(e,t){return i.genomePositionSearchBox?v.default.createElement(M.default,{key:"gpsb"+String(i.uid),ref:function(e){l.genomePositionSearchBoxes[i.uid]=e},autocompleteId:i.genomePositionSearchBox.autocompleteId,autocompleteServer:i.genomePositionSearchBox.autocompleteServer,chromInfoId:i.genomePositionSearchBox.chromInfoId,chromInfoServer:i.genomePositionSearchBox.chromInfoServer,isFocused:e,onFocus:t,onSelectedAssemblyChanged:function(e,t,n){return l.handleSelectedAssemblyChanged(i.uid,e,t,n)},registerViewportChangedListener:function(e){return l.addScalesChangedListener(i.uid,i.uid,e)},removeViewportChangedListener:function(){return l.removeScalesChangedListener(i.uid,i.uid)},setCenters:function(e,t,n,r){return l.setCenters[i.uid](e,t,n,!1,r)},trackSourceServers:l.state.viewConfig.trackSourceServers,twoD:!0}):null},s=l.state.viewConfig.editable&&!l.state.viewConfig.hideHeader?v.default.createElement(R.default,{ref:function(e){l.viewHeaders[i.uid]=e},getGenomePositionSearchBox:a,isGenomePositionSearchBoxVisible:i.genomePositionSearchBox&&i.genomePositionSearchBox.visible,mouseTool:l.state.mouseTool,onAddView:function(){return l.handleAddView(i)},onClearView:function(){return l.handleClearView(i.uid)},onCloseView:function(){return l.handleCloseView(i.uid)},onExportSVG:l.handleExportSVG.bind(l),onExportViewsAsJSON:l.handleExportViewAsJSON.bind(l),onExportViewsAsLink:l.handleExportViewsAsLink.bind(l),onLockLocation:function(e){return l.handleYankFunction(e,l.handleLocationLockChosen.bind(l))},onLockZoom:function(e){return l.handleYankFunction(e,l.handleZoomLockChosen.bind(l))},onLockZoomAndLocation:function(e){return l.handleYankFunction(e,function(e,t){l.handleZoomLockChosen(e,t),l.handleLocationLockChosen(e,t)})},onProjectViewport:l.handleProjectViewport.bind(l),onTakeAndLockZoomAndLocation:function(e){l.handleYankFunction(e,function(e,t){l.handleZoomYanked(e,t),l.handleLocationYanked(e,t),l.handleZoomLockChosen(e,t),l.handleLocationLockChosen(e,t)})},onTogglePositionSearchBox:l.handleTogglePositionSearchBox.bind(l),onTrackPositionChosen:function(e){return l.handleTrackPositionChosen(i.uid,e)},onViewOptionsChanged:function(e){return l.handleViewOptionsChanged(i.uid,e)},onUnlockLocation:function(e){return l.handleUnlock(e,l.locationLocks)},onUnlockZoom:function(e){return l.handleUnlock(e,l.zoomLocks)},onUnlockZoomAndLocation:function(e){l.handleUnlock(e,l.zoomLocks),l.handleUnlock(e,l.locationLocks)},onYankLocation:function(e){return l.handleYankFunction(e,l.handleLocationYanked.bind(l))},onYankZoom:function(e){return l.handleYankFunction(e,l.handleZoomYanked.bind(l))},onYankZoomAndLocation:function(e){return l.handleYankFunction(e,function(e,t){l.handleZoomYanked(e,t),l.handleLocationYanked(e,t)})},onZoomToData:function(e){return l.handleZoomToData(e)},viewUid:i.uid}):null;return v.default.createElement("div",{key:i.uid,ref:function(e){l.tiledAreasDivs[i.uid]=e},className:"HiGlass-module_tiled-area-22H1L"},s,o,n)}));var e=this.state.exportLinkModalOpen?v.default.createElement(P.default,{height:this.height,linkLocation:this.state.exportLinkLocation,onDone:function(){return l.setState({exportLinkModalOpen:!1})},width:this.width}):null,t=this.mounted?(0,F.dictValues)(this.state.views).filter(function(e){return e.layout}).map(function(e){return e.layout}):[];t=JSON.parse((0,p.default)(t));var n=v.default.createElement(k.default,{ref:function(e){l.gridLayout=e},cols:12,width:this.state.width,draggableHandle:"."+String(H.default["multitrack-header-grabber"]),isDraggable:this.state.viewConfig.editable,isResizable:this.state.viewConfig.editable,layout:t,margin:this.state.viewConfig.editable?[10,10]:[0,0],measureBeforeMount:!1,onBreakpointChange:this.onBreakpointChange.bind(this),onDragStart:this.handleDragStart.bind(this),onDragStop:this.handleDragStop.bind(this),onLayoutChange:this.handleLayoutChange.bind(this),onResize:this.resizeHandler.bind(this),rowHeight:this.state.rowHeight,useCSSTransforms:this.mounted},this.tiledAreas),r="styles.higlass";return(0,B.getDarkTheme)()&&(r+=" styles.higlass-dark-theme"),v.default.createElement("div",{key:this.uid,ref:function(e){l.topDiv=e},onMouseMove:this.mouseMoveHandler.bind(this),onMouseLeave:function(){l.hideHoverMenu()},className:"higlass "+(0,f.default)(r,q)},v.default.createElement("canvas",{key:this.uid,ref:function(e){l.canvasElement=e},className:"HiGlass-module_higlass-canvas-_mP9r"}),v.default.createElement("div",{ref:function(e){l.divDrawingSurface=e},className:"HiGlass-module_higlass-drawing-surface-3aQQo"},n),v.default.createElement("svg",{ref:function(e){l.svgElement=e},className:"HiGlass-module_higlass-svg-JJZbf"}),e)}}]),a}(v.default.Component);W.defaultProps={options:{},zoomFixed:!1},W.propTypes={options:a.default.object,viewConfig:a.default.oneOfType([a.default.string,a.default.object]).isRequired,zoomFixed:a.default.bool},t.default=W},function(e,t,n){"use strict";t.__esModule=!0;var y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=i(n(0)),r=i(n(8)),o=i(n(173)),a=i(n(255)),b=n(99),w=i(n(492));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(r){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,t));return l.call(n),(0,b.autoBindHandlers)(n,["onDragStart","onDrag","onDragStop","onResizeStart","onResize","onResizeStop"]),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,r),i.prototype.componentDidMount=function(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)},i.prototype.componentWillReceiveProps=function(e){var t=void 0;if((0,o.default)(e.layout,this.props.layout)&&e.compactType===this.props.compactType?(0,b.childrenEqual)(this.props.children,e.children)||(t=this.state.layout):t=e.layout,t){var n=(0,b.synchronizeLayoutWithChildren)(t,e.children,e.cols,this.compactType(e)),r=this.state.layout;this.setState({layout:n}),this.onLayoutMaybeChanged(n,r)}},i.prototype.containerHeight=function(){if(this.props.autoSize){var e=(0,b.bottom)(this.state.layout),t=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+2*t+"px"}},i.prototype.compactType=function(e){return e||(e=this.props),!1===e.verticalCompact?null:e.compactType},i.prototype.onDragStart=function(e,t,n,r){var i=r.e,o=r.node,a=this.state.layout,s=(0,b.getLayoutItem)(a,e);if(s)return this.setState({oldDragItem:(0,b.cloneLayoutItem)(s),oldLayout:this.state.layout}),this.props.onDragStart(a,s,s,null,i,o)},i.prototype.onDrag=function(e,t,n,r){var i=r.e,o=r.node,a=this.state.oldDragItem,s=this.state.layout,l=this.props.cols,u=(0,b.getLayoutItem)(s,e);if(u){var c={w:u.w,h:u.h,x:u.x,y:u.y,placeholder:!0,i:e};s=(0,b.moveElement)(s,u,t,n,!0,this.props.preventCollision,this.compactType(),l),this.props.onDrag(s,a,u,c,i,o),this.setState({layout:(0,b.compact)(s,this.compactType(),l),activeDrag:c})}},i.prototype.onDragStop=function(e,t,n,r){var i=r.e,o=r.node,a=this.state.oldDragItem,s=this.state.layout,l=this.props,u=l.cols,c=l.preventCollision,d=(0,b.getLayoutItem)(s,e);if(d){s=(0,b.moveElement)(s,d,t,n,!0,c,this.compactType(),u),this.props.onDragStop(s,a,d,null,i,o);var h=(0,b.compact)(s,this.compactType(),u),f=this.state.oldLayout;this.setState({activeDrag:null,layout:h,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(h,f)}},i.prototype.onLayoutMaybeChanged=function(e,t){t||(t=this.state.layout),(0,o.default)(t,e)||this.props.onLayoutChange(e)},i.prototype.onResizeStart=function(e,t,n,r){var i=r.e,o=r.node,a=this.state.layout,s=(0,b.getLayoutItem)(a,e);s&&(this.setState({oldResizeItem:(0,b.cloneLayoutItem)(s),oldLayout:this.state.layout}),this.props.onResizeStart(a,s,s,null,i,o))},i.prototype.onResize=function(e,t,n,r){var i=r.e,o=r.node,a=this.state,s=a.layout,l=a.oldResizeItem,u=this.props,c=u.cols,d=u.preventCollision,h=(0,b.getLayoutItem)(s,e);if(h){var f=void 0;if(d){var p=(0,b.getAllCollisions)(s,y({},h,{w:t,h:n})).filter(function(e){return e.i!==h.i});if(f=0<p.length){var v=1/0,m=1/0;p.forEach(function(e){e.x>h.x&&(v=Math.min(v,e.x)),e.y>h.y&&(m=Math.min(m,e.y))}),Number.isFinite(v)&&(h.w=v-h.x),Number.isFinite(m)&&(h.h=m-h.y)}}f||(h.w=t,h.h=n);var g={w:h.w,h:h.h,x:h.x,y:h.y,static:!0,i:e};this.props.onResize(s,l,h,g,i,o),this.setState({layout:(0,b.compact)(s,this.compactType(),c),activeDrag:g})}},i.prototype.onResizeStop=function(e,t,n,r){var i=r.e,o=r.node,a=this.state,s=a.layout,l=a.oldResizeItem,u=this.props.cols,c=(0,b.getLayoutItem)(s,e);this.props.onResizeStop(s,l,c,null,i,o);var d=(0,b.compact)(s,this.compactType(),u),h=this.state.oldLayout;this.setState({activeDrag:null,layout:d,oldResizeItem:null,oldLayout:null}),this.onLayoutMaybeChanged(d,h)},i.prototype.placeholder=function(){var e=this.state.activeDrag;if(!e)return null;var t=this.props,n=t.width,r=t.cols,i=t.margin,o=t.containerPadding,a=t.rowHeight,s=t.maxRows,l=t.useCSSTransforms;return g.default.createElement(w.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:"react-grid-placeholder",containerWidth:n,cols:r,margin:i,containerPadding:o||i,maxRows:s,rowHeight:a,isDraggable:!1,isResizable:!1,useCSSTransforms:l},g.default.createElement("div",null))},i.prototype.processGridItem=function(e){if(e&&e.key){var t=(0,b.getLayoutItem)(this.state.layout,String(e.key));if(!t)return null;var n=this.props,r=n.width,i=n.cols,o=n.margin,a=n.containerPadding,s=n.rowHeight,l=n.maxRows,u=n.isDraggable,c=n.isResizable,d=n.useCSSTransforms,h=n.draggableCancel,f=n.draggableHandle,p=this.state.mounted,v=Boolean(!t.static&&u&&(t.isDraggable||null==t.isDraggable)),m=Boolean(!t.static&&c&&(t.isResizable||null==t.isResizable));return g.default.createElement(w.default,{containerWidth:r,cols:i,margin:o,containerPadding:a||o,maxRows:l,rowHeight:s,cancel:h,handle:f,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:v,isResizable:m,useCSSTransforms:d&&p,usePercentages:!p,w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,minH:t.minH,minW:t.minW,maxH:t.maxH,maxW:t.maxW,static:t.static},e)}},i.prototype.render=function(){var t=this,e=this.props,n=e.className,r=e.style,i=(0,a.default)("react-grid-layout",n),o=y({height:this.containerHeight()},r);return g.default.createElement("div",{className:i,style:o},g.default.Children.map(this.props.children,function(e){return t.processGridItem(e)}),this.placeholder())},i}(g.default.Component);s.displayName="ReactGridLayout",s.propTypes={className:r.default.string,style:r.default.object,width:r.default.number,autoSize:r.default.bool,cols:r.default.number,draggableCancel:r.default.string,draggableHandle:r.default.string,verticalCompact:function(e){e.verticalCompact,0},compactType:r.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;void 0!==t&&(0,b.validateLayout)(t,"layout")},margin:r.default.arrayOf(r.default.number),containerPadding:r.default.arrayOf(r.default.number),rowHeight:r.default.number,maxRows:r.default.number,isDraggable:r.default.bool,isResizable:r.default.bool,preventCollision:r.default.bool,useCSSTransforms:r.default.bool,onLayoutChange:r.default.func,onDragStart:r.default.func,onDrag:r.default.func,onDragStop:r.default.func,onResizeStart:r.default.func,onResize:r.default.func,onResizeStop:r.default.func,children:function(e,t){var n=e[t],r={};g.default.Children.forEach(n,function(e){if(r[e.key])throw new Error('Duplicate child key "'+e.key+'" found! This will cause problems in ReactGridLayout.');r[e.key]=!0})}},s.defaultProps={autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isDraggable:!0,isResizable:!0,useCSSTransforms:!0,verticalCompact:!0,compactType:"vertical",preventCollision:!1,onLayoutChange:b.noop,onDragStart:b.noop,onDrag:b.noop,onDragStop:b.noop,onResizeStart:b.noop,onResize:b.noop,onResizeStop:b.noop};var l=function(){this.state={activeDrag:null,layout:(0,b.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,this.compactType()),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null}};t.default=s},function(e,t,n){var r;!function(){"use strict";var o={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n))e.push(a.apply(null,n));else if("object"===r)for(var i in n)o.call(n,i)&&n[i]&&e.push(i)}}return e.join(" ")}void 0!==e&&e.exports?e.exports=a:void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){var r;r=function(n,r){return function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=12)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findInArray=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)},t.int=function(e){return parseInt(e,10)},t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop "+t+" passed to "+n+" - do not set this, set it on the child.")}},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";var d=function(e){};"production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV&&(d=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),e.exports=function(e,t,n,r,i,o,a,s){if(d(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.matchesSelector=u,t.matchesSelectorAndParentsTo=function(e,t,n){var r=e;do{if(u(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},t.addEvent=function(e,t,n){if(!e)return;e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!0):e["on"+t]=n},t.removeEvent=function(e,t,n){if(!e)return;e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!0):e["on"+t]=null},t.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,o.int)(n.borderTopWidth),t+=(0,o.int)(n.borderBottomWidth)},t.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,o.int)(n.borderLeftWidth),t+=(0,o.int)(n.borderRightWidth)},t.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,o.int)(n.paddingTop),t-=(0,o.int)(n.paddingBottom)},t.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,o.int)(n.paddingLeft),t-=(0,o.int)(n.paddingRight)},t.offsetXYFromParent=function(e,t){var n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),r=e.clientX+t.scrollLeft-n.left,i=e.clientY+t.scrollTop-n.top;return{x:r,y:i}},t.createCSSTransform=function(e){var t=e.x,n=e.y;return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},(0,a.browserPrefixToKey)("transform",s.default),"translate("+t+"px,"+n+"px)")},t.createSVGTransform=function(e){var t=e.x,n=e.y;return"translate("+t+","+n+")"},t.getTouch=function(e,t){return e.targetTouches&&(0,o.findInArray)(e.targetTouches,function(e){return t===e.identifier})||e.changedTouches&&(0,o.findInArray)(e.changedTouches,function(e){return t===e.identifier})},t.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},t.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {background: transparent;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {background: transparent;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&c(e.body,"react-draggable-transparent-selection")},t.removeUserSelectStyles=function(e){try{e&&e.body&&d(e.body,"react-draggable-transparent-selection"),window.getSelection().removeAllRanges()}catch(e){}},t.styleHacks=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return r({touchAction:"none"},e)},t.addClassName=c,t.removeClassName=d;var i,o=n(0),a=n(19),s=(i=a)&&i.__esModule?i:{default:i};var l="";function u(t,e){return l||(l=(0,o.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(e){return(0,o.isFunction)(t[e])})),!!(0,o.isFunction)(t[l])&&t[l](e)}function c(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)"+t+"(?!\\S)"))||(e.className+=" "+t)}function d(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)"+t+"(?!\\S)","g"),"")}},function(e,t){e.exports=r},function(e,t,n){if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV){var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=n(14)(function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},!0)}else e.exports=n(17)()},function(e,t,n){"use strict";var r=n(1);if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV){r=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];(function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0,o="Warning: "+e.replace(/%s/g,function(){return n[i++]});"undefined"!=typeof console&&console.error(o);try{throw new Error(o)}catch(e){}}).apply(void 0,[t].concat(r))}}}e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r="string"==typeof r?r:(i=r,{left:i.left,top:i.top,right:i.right,bottom:i.bottom});var i;var o=f(e);if("string"==typeof r){var a=o.ownerDocument,s=a.defaultView,l=void 0;if(!((l="parent"===r?o.parentNode:a.querySelector(r))instanceof HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var u=s.getComputedStyle(o),c=s.getComputedStyle(l);r={left:-o.offsetLeft+(0,d.int)(c.paddingLeft)+(0,d.int)(u.marginLeft),top:-o.offsetTop+(0,d.int)(c.paddingTop)+(0,d.int)(u.marginTop),right:(0,h.innerWidth)(l)-(0,h.outerWidth)(o)-o.offsetLeft+(0,d.int)(c.paddingRight)-(0,d.int)(u.marginRight),bottom:(0,h.innerHeight)(l)-(0,h.outerHeight)(o)-o.offsetTop+(0,d.int)(c.paddingBottom)-(0,d.int)(u.marginBottom)}}(0,d.isNum)(r.right)&&(t=Math.min(t,r.right));(0,d.isNum)(r.bottom)&&(n=Math.min(n,r.bottom));(0,d.isNum)(r.left)&&(t=Math.max(t,r.left));(0,d.isNum)(r.top)&&(n=Math.max(n,r.top));return[t,n]},t.snapToGrid=function(e,t,n){var r=Math.round(t/e[0])*e[0],i=Math.round(n/e[1])*e[1];return[r,i]},t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.getControlPosition=function(e,t,n){var r="number"==typeof t?(0,h.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;var i=f(n),o=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,h.offsetXYFromParent)(r||e,o)},t.createCoreData=function(e,t,n){var r=e.state,i=!(0,d.isNum)(r.lastX),o=f(e);return i?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:o,deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}},t.createDraggableData=function(e,t){return{node:t.node,x:e.state.x+t.deltaX,y:e.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:e.state.x,lastY:e.state.y}};var r,d=n(0),i=n(4),o=(r=i)&&r.__esModule?r:{default:r},h=n(5);function f(e){var t=o.default.findDOMNode(e);if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},function(e,m,g){"use strict";(function(n){Object.defineProperty(m,"__esModule",{value:!0});var d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},t=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=o(g(6)),e=o(g(7)),l=o(g(4)),u=g(5),h=g(9),i=g(0),f=o(g(11));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s={start:"touchstart",move:"touchmove",stop:"touchend"},p={start:"mousedown",move:"mousemove",stop:"mouseup"},v=p,c=function(e){function o(){var e,t,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=c=a(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(r)))).state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},c.handleDragStart=function(e){if(c.props.onMouseDown(e),!c.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;var t=l.default.findDOMNode(c);if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var n=t.ownerDocument;if(!(c.props.disabled||!(e.target instanceof n.defaultView.Node)||c.props.handle&&!(0,u.matchesSelectorAndParentsTo)(e.target,c.props.handle,t)||c.props.cancel&&(0,u.matchesSelectorAndParentsTo)(e.target,c.props.cancel,t))){var r=(0,u.getTouchIdentifier)(e);c.setState({touchIdentifier:r});var i=(0,h.getControlPosition)(e,r,c);if(null!=i){var o=i.x,a=i.y,s=(0,h.createCoreData)(c,o,a);(0,f.default)("DraggableCore: handleDragStart: %j",s),(0,f.default)("calling",c.props.onStart),!1!==c.props.onStart(e,s)&&(c.props.enableUserSelectHack&&(0,u.addUserSelectStyles)(n),c.setState({dragging:!0,lastX:o,lastY:a}),(0,u.addEvent)(n,v.move,c.handleDrag),(0,u.addEvent)(n,v.stop,c.handleDragStop))}}},c.handleDrag=function(e){"touchmove"===e.type&&e.preventDefault();var t=(0,h.getControlPosition)(e,c.state.touchIdentifier,c);if(null!=t){var n=t.x,r=t.y;if(Array.isArray(c.props.grid)){var i=n-c.state.lastX,o=r-c.state.lastY,a=(0,h.snapToGrid)(c.props.grid,i,o),s=d(a,2);if(i=s[0],o=s[1],!i&&!o)return;n=c.state.lastX+i,r=c.state.lastY+o}var l=(0,h.createCoreData)(c,n,r);if((0,f.default)("DraggableCore: handleDrag: %j",l),!1!==c.props.onDrag(e,l))c.setState({lastX:n,lastY:r});else try{c.handleDragStop(new MouseEvent("mouseup"))}catch(e){var u=document.createEvent("MouseEvents");u.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),c.handleDragStop(u)}}},c.handleDragStop=function(e){if(c.state.dragging){var t=(0,h.getControlPosition)(e,c.state.touchIdentifier,c);if(null!=t){var n=t.x,r=t.y,i=(0,h.createCoreData)(c,n,r),o=l.default.findDOMNode(c);o&&c.props.enableUserSelectHack&&(0,u.removeUserSelectStyles)(o.ownerDocument),(0,f.default)("DraggableCore: handleDragStop: %j",i),c.setState({dragging:!1,lastX:NaN,lastY:NaN}),c.props.onStop(e,i),o&&((0,f.default)("DraggableCore: Removing handlers"),(0,u.removeEvent)(o.ownerDocument,v.move,c.handleDrag),(0,u.removeEvent)(o.ownerDocument,v.stop,c.handleDragStop))}}},c.onMouseDown=function(e){return v=p,c.handleDragStart(e)},c.onMouseUp=function(e){return v=p,c.handleDragStop(e)},c.onTouchStart=function(e){return v=s,c.handleDragStart(e)},c.onTouchEnd=function(e){return v=s,c.handleDragStop(e)},a(c,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,r.default.Component),t(o,[{key:"componentWillUnmount",value:function(){var e=l.default.findDOMNode(this);if(e){var t=e.ownerDocument;(0,u.removeEvent)(t,p.move,this.handleDrag),(0,u.removeEvent)(t,s.move,this.handleDrag),(0,u.removeEvent)(t,p.stop,this.handleDragStop),(0,u.removeEvent)(t,s.stop,this.handleDragStop),this.props.enableUserSelectHack&&(0,u.removeUserSelectStyles)(t)}}},{key:"render",value:function(){return r.default.cloneElement(r.default.Children.only(this.props.children),{style:(0,u.styleHacks)(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),o}();c.displayName="DraggableCore",c.propTypes={allowAnyClick:e.default.bool,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(e,t){if(!0===n.browser&&e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,className:i.dontSetMe,style:i.dontSetMe,transform:i.dontSetMe},c.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}},m.default=c}).call(m,g(20))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){void 0}},function(e,t,n){"use strict";var r=n(13).default;e.exports=r,e.exports.default=r,e.exports.DraggableCore=n(10).default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),f=s(n(6)),i=s(n(7)),o=s(n(4)),p=s(n(18)),v=n(5),m=n(9),a=n(0),g=s(n(10)),y=s(n(11));function s(e){return e&&e.__esModule?e:{default:e}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return c.onDragStart=function(e,t){if((0,y.default)("Draggable: onDragStart: %j",t),!1===c.props.onStart(e,(0,m.createDraggableData)(c,t)))return!1;c.setState({dragging:!0,dragged:!0})},c.onDrag=function(e,t){if(!c.state.dragging)return!1;(0,y.default)("Draggable: onDrag: %j",t);var n=(0,m.createDraggableData)(c,t),r={x:n.x,y:n.y};if(c.props.bounds){var i=r.x,o=r.y;r.x+=c.state.slackX,r.y+=c.state.slackY;var a=(0,m.getBoundPosition)(c,r.x,r.y),s=d(a,2),l=s[0],u=s[1];r.x=l,r.y=u,r.slackX=c.state.slackX+(i-r.x),r.slackY=c.state.slackY+(o-r.y),n.x=r.x,n.y=r.y,n.deltaX=r.x-c.state.x,n.deltaY=r.y-c.state.y}if(!1===c.props.onDrag(e,n))return!1;c.setState(r)},c.onDragStop=function(e,t){if(!c.state.dragging)return!1;if(!1===c.props.onStop(e,(0,m.createDraggableData)(c,t)))return!1;(0,y.default)("Draggable: onDragStop: %j",t);var n={dragging:!1,slackX:0,slackY:0};if(Boolean(c.props.position)){var r=c.props.position,i=r.x,o=r.y;n.x=i,n.y=o}c.setState(n)},c.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),r(t,[{key:"componentWillMount",value:function(){!this.props.position||this.props.onDrag||this.props.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}},{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&o.default.findDOMNode(this)instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillReceiveProps",value:function(e){!e.position||this.props.position&&e.position.x===this.props.position.x&&e.position.y===this.props.position.y||this.setState({x:e.position.x,y:e.position.y})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"render",value:function(){var e,t={},n=null,r=!Boolean(this.props.position)||this.state.dragging,i=this.props.position||this.props.defaultPosition,o={x:(0,m.canDragX)(this)&&r?this.state.x:i.x,y:(0,m.canDragY)(this)&&r?this.state.y:i.y};this.state.isElementSVG?n=(0,v.createSVGTransform)(o):t=(0,v.createCSSTransform)(o);var a=this.props,s=a.defaultClassName,l=a.defaultClassNameDragging,u=a.defaultClassNameDragged,c=f.default.Children.only(this.props.children),d=(0,p.default)(c.props.className||"",s,(b(e={},l,this.state.dragging),b(e,u,this.state.dragged),e));return f.default.createElement(g.default,h({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),f.default.cloneElement(c,{className:d,style:h({},c.props.style,t),transform:n}))}}]),t}();l.displayName="Draggable",l.propTypes=h({},g.default.propTypes,{axis:i.default.oneOf(["both","x","y","none"]),bounds:i.default.oneOfType([i.default.shape({left:i.default.number,right:i.default.number,top:i.default.number,bottom:i.default.number}),i.default.string,i.default.oneOf([!1])]),defaultClassName:i.default.string,defaultClassNameDragging:i.default.string,defaultClassNameDragged:i.default.string,defaultPosition:i.default.shape({x:i.default.number,y:i.default.number}),position:i.default.shape({x:i.default.number,y:i.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),l.defaultProps=h({},g.default.defaultProps,{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null}),t.default=l},function(e,t,n){"use strict";var i=n(1),v=n(2),m=n(8),g=n(15),y=n(3),b=n(16);e.exports=function(s,d){var o="function"==typeof Symbol&&Symbol.iterator,a="@@iterator";var h="<<anonymous>>",e={array:t("array"),bool:t("boolean"),func:t("function"),number:t("number"),object:t("object"),string:t("string"),symbol:t("symbol"),any:n(i.thatReturnsNull),arrayOf:function(u){return n(function(e,t,n,r,i){if("function"!=typeof u)return new f("Property `"+i+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var o=e[t];if(!Array.isArray(o)){var a=p(o);return new f("Invalid "+r+" `"+i+"` of type `"+a+"` supplied to `"+n+"`, expected an array.")}for(var s=0;s<o.length;s++){var l=u(o,s,n,r,i+"["+s+"]",y);if(l instanceof Error)return l}return null})},element:n(function(e,t,n,r,i){var o=e[t];if(!s(o)){var a=p(o);return new f("Invalid "+r+" `"+i+"` of type `"+a+"` supplied to `"+n+"`, expected a single ReactElement.")}return null}),instanceOf:function(s){return n(function(e,t,n,r,i){if(!(e[t]instanceof s)){var o=s.name||h,a=function(e){if(!e.constructor||!e.constructor.name)return h;return e.constructor.name}(e[t]);return new f("Invalid "+r+" `"+i+"` of type `"+a+"` supplied to `"+n+"`, expected instance of `"+o+"`.")}return null})},node:n(function(e,t,n,r,i){return l(e[t])?null:new f("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(u){return n(function(e,t,n,r,i){if("function"!=typeof u)return new f("Property `"+i+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var o=e[t],a=p(o);if("object"!==a)return new f("Invalid "+r+" `"+i+"` of type `"+a+"` supplied to `"+n+"`, expected an object.");for(var s in o)if(o.hasOwnProperty(s)){var l=u(o,s,n,r,i+"."+s,y);if(l instanceof Error)return l}return null})},oneOf:function(l){if(!Array.isArray(l))return"production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV&&m(!1,"Invalid argument supplied to oneOf, expected an instance of array."),i.thatReturnsNull;return n(function(e,t,n,r,i){for(var o=e[t],a=0;a<l.length;a++)if(u(o,l[a]))return null;var s=JSON.stringify(l);return new f("Invalid "+r+" `"+i+"` of value `"+o+"` supplied to `"+n+"`, expected one of "+s+".")})},oneOfType:function(s){if(!Array.isArray(s))return"production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV&&m(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),i.thatReturnsNull;for(var e=0;e<s.length;e++){var t=s[e];if("function"!=typeof t)return m(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",r(t),e),i.thatReturnsNull}return n(function(e,t,n,r,i){for(var o=0;o<s.length;o++){var a=s[o];if(null==a(e,t,n,r,i,y))return null}return new f("Invalid "+r+" `"+i+"` supplied to `"+n+"`.")})},shape:function(c){return n(function(e,t,n,r,i){var o=e[t],a=p(o);if("object"!==a)return new f("Invalid "+r+" `"+i+"` of type `"+a+"` supplied to `"+n+"`, expected `object`.");for(var s in c){var l=c[s];if(l){var u=l(o,s,n,r,i+"."+s,y);if(u)return u}}return null})},exact:function(d){return n(function(e,t,n,r,i){var o=e[t],a=p(o);if("object"!==a)return new f("Invalid "+r+" `"+i+"` of type `"+a+"` supplied to `"+n+"`, expected `object`.");var s=g({},e[t],d);for(var l in s){var u=d[l];if(!u)return new f("Invalid "+r+" `"+i+"` key `"+l+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(e[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(d),null,"  "));var c=u(o,l,n,r,i+"."+l,y);if(c)return c}return null})}};function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function f(e){this.message=e,this.stack=""}function n(l){if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV)var u={},c=0;function e(e,t,n,r,i,o,a){if(r=r||h,o=o||n,a!==y)if(d)v(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV&&"undefined"!=typeof console){var s=r+":"+n;!u[s]&&c<3&&(m(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",o,r),u[s]=!0,c++)}return null==t[n]?e?null===t[n]?new f("The "+i+" `"+o+"` is marked as required in `"+r+"`, but its value is `null`."):new f("The "+i+" `"+o+"` is marked as required in `"+r+"`, but its value is `undefined`."):null:l(t,n,r,i,o)}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}function t(s){return n(function(e,t,n,r,i,o){var a=e[t];return p(a)!==s?new f("Invalid "+r+" `"+i+"` of type `"+c(a)+"` supplied to `"+n+"`, expected `"+s+"`."):null})}function l(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(l);if(null===e||s(e))return!0;var t=function(e){var t=e&&(o&&e[o]||e[a]);if("function"==typeof t)return t}(e);if(!t)return!1;var n,r=t.call(e);if(t!==e.entries){for(;!(n=r.next()).done;)if(!l(n.value))return!1}else for(;!(n=r.next()).done;){var i=n.value;if(i&&!l(i[1]))return!1}return!0;default:return!1}}function p(e){var t,n=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":(t=e,"symbol"===n||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol?"symbol":n)}function c(e){if(null==e)return""+e;var t=p(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function r(e){var t=c(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return f.prototype=Error.prototype,e.checkPropTypes=b,e.PropTypes=e}},function(e,t,n){"use strict";var l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))u.call(n,a)&&(i[a]=n[a]);if(l){r=l(n);for(var s=0;s<r.length;s++)c.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i}},function(e,t,n){"use strict";if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV)var l=n(2),u=n(8),c=n(3),d={};e.exports=function(e,t,n,r,i){if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV)for(var o in e)if(e.hasOwnProperty(o)){var a;try{l("function"==typeof e[o],"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",r||"React class",n,o,typeof e[o]),a=e[o](t,o,r,n,null,c)}catch(e){a=e}if(u(!a||a instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,o,typeof a),a instanceof Error&&!(a.message in d)){d[a.message]=!0;var s=i?i():"";u(!1,"Failed %s type: %s%s",n,a.message,null!=s?s:"")}}}},function(e,t,n){"use strict";var r=n(1),a=n(2),s=n(3);e.exports=function(){function e(e,t,n,r,i,o){o!==s&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n}},function(e,t,n){var r;!function(){"use strict";var o={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n))e.push(a.apply(null,n));else if("object"===r)for(var i in n)o.call(n,i)&&n[i]&&e.push(i)}}return e.join(" ")}void 0!==e&&e.exports?e.exports=a:void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPrefix=i,t.browserPrefixToKey=o,t.browserPrefixToStyle=function(e,t){return t?"-"+t.toLowerCase()+"-"+e:e};var r=["Moz","Webkit","O","ms"];function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window||void 0===window.document)return"";var t=window.document.documentElement.style;if(e in t)return"";for(var n=0;n<r.length;n++)if(o(e,r[n])in t)return r[n];return""}function o(e,t){return t?""+t+function(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e):e}t.default=i()},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,u=[],c=!1,d=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&f())}function f(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}])},e.exports=r(n(29),n(0))},function(e,t,n){"use strict";t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=i(n(0)),r=i(n(8)),u=n(256),c=i(n(494));function i(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o=function(o){function a(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t=d(this,o.call.apply(o,[this].concat(r)))).state={resizing:!1,width:t.props.width,height:t.props.height,slackW:0,slackH:0},d(t,e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o),a.prototype.componentWillReceiveProps=function(e){this.state.resizing||e.width===this.props.width&&e.height===this.props.height||this.setState({width:e.width,height:e.height})},a.prototype.lockAspectRatio=function(e,t,n){return[e=(t=e/n)*n,t]},a.prototype.runConstraints=function(e,t){var n=[this.props.minConstraints,this.props.maxConstraints],r=n[0],i=n[1];if(this.props.lockAspectRatio){var o=this.state.width/this.state.height;e=(t=e/o)*o}if(!r&&!i)return[e,t];var a=e,s=t,l=this.state,u=l.slackW,c=l.slackH;return e+=u,t+=c,r&&(e=Math.max(r[0],e),t=Math.max(r[1],t)),i&&(e=Math.min(i[0],e),t=Math.min(i[1],t)),c+=s-t,(u+=a-e)===this.state.slackW&&c===this.state.slackH||this.setState({slackW:u,slackH:c}),[e,t]},a.prototype.resizeHandler=function(f){var p=this;return function(e,t){var n=t.node,r=t.deltaX,i=t.deltaY,o="both"===p.props.axis||"x"===p.props.axis,a="both"===p.props.axis||"y"===p.props.axis,s=p.state.width+(o?r:0),l=p.state.height+(a?i:0),u=s!==p.state.width,c=l!==p.state.height;if("onResize"!==f||u||c){var d=p.runConstraints(s,l);s=d[0],l=d[1];var h={};if("onResizeStart"===f)h.resizing=!0;else if("onResizeStop"===f)h.resizing=!1,h.slackW=h.slackH=0;else{if(s===p.state.width&&l===p.state.height)return;h.width=s,h.height=l}"function"==typeof p.props[f]?("function"==typeof e.persist&&e.persist(),p.setState(h,function(){return p.props[f](e,{node:n,size:{width:s,height:l}})})):p.setState(h)}}},a.prototype.render=function(){var e=this.props,t=e.children,n=e.draggableOpts,r=(e.width,e.height,e.handleSize,e.lockAspectRatio,e.axis,e.minConstraints,e.maxConstraints,e.onResize,e.onResizeStop,e.onResizeStart,function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","draggableOpts","width","height","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart"])),i=r.className?r.className+" react-resizable":"react-resizable";return(0,c.default)(t,s({},r,{className:i,children:[t.props.children,l.default.createElement(u.DraggableCore,s({},n,{key:"resizableHandle",onStop:this.resizeHandler("onResizeStop"),onStart:this.resizeHandler("onResizeStart"),onDrag:this.resizeHandler("onResize")}),l.default.createElement("span",{className:"react-resizable-handle"}))]}))},a}(l.default.Component);o.propTypes={children:r.default.element.isRequired,width:r.default.number.isRequired,height:r.default.number.isRequired,handleSize:r.default.array,lockAspectRatio:r.default.bool,axis:r.default.oneOf(["both","x","y","none"]),minConstraints:r.default.arrayOf(r.default.number),maxConstraints:r.default.arrayOf(r.default.number),onResizeStop:r.default.func,onResizeStart:r.default.func,onResize:r.default.func,draggableOpts:r.default.object},o.defaultProps={handleSize:[20,20],lockAspectRatio:!1,axis:"both",minConstraints:[20,20],maxConstraints:[1/0,1/0]},t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.getBreakpointFromWidth=function(e,t){for(var n=f(e),r=n[0],i=1,o=n.length;i<o;i++){var a=n[i];t>e[a]&&(r=a)}return r},t.getColsFromBreakpoint=function(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]},t.findOrGenerateResponsiveLayout=function(e,t,n,r,i,o){if(e[n])return(0,h.cloneLayout)(e[n]);for(var a=e[r],s=f(t),l=s.slice(s.indexOf(n)),u=0,c=l.length;u<c;u++){var d=l[u];if(e[d]){a=e[d];break}}return a=(0,h.cloneLayout)(a||[]),(0,h.compact)((0,h.correctBounds)(a,{cols:i}),o,i)},t.sortBreakpoints=f;var h=n(99);function f(n){return Object.keys(n).sort(function(e,t){return n[e]-n[t]})}},function(e,t,n){e.exports={ResizeSensor:n(260),ElementQueries:n(498)}},function(e,t,n){"use strict";var r,i;"undefined"!=typeof window&&window,void 0===(i="function"==typeof(r=function(){if("undefined"==typeof window)return null;var x=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};function i(e,t){var n=Object.prototype.toString.call(e),r="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"[object Object]"===n||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,i=0,o=e.length;if(r)for(;i<o;i++)t(e[i]);else t(e)}function _(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}var o=function(t,n){var r;function w(){var n,r,i=[];this.add=function(e){i.push(e)},this.call=function(e){for(n=0,r=i.length;n<r;n++)i[n].call(this,e)},this.remove=function(e){var t=[];for(n=0,r=i.length;n<r;n++)i[n]!==e&&t.push(i[n]);i=t},this.length=function(){return i.length}}"undefined"!=typeof ResizeObserver?(r=new ResizeObserver(function(e){i(e,function(e){n.call(this,{width:e.contentRect.width,height:e.contentRect.height})})}),void 0!==t&&i(t,function(e){r.observe(e)})):i(t,function(e){!function(e,t){if(e)if(e.resizedAttached)e.resizedAttached.add(t);else{e.resizedAttached=new w,e.resizedAttached.add(t),e.resizeSensor=document.createElement("div"),e.resizeSensor.dir="ltr",e.resizeSensor.className="resize-sensor";var n="position: absolute; left: -10px; top: -10px; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",r="position: absolute; left: 0; top: 0; transition: 0s;";e.resizeSensor.style.cssText=n,e.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+n+'"><div style="'+r+'"></div></div><div class="resize-sensor-shrink" style="'+n+'"><div style="'+r+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeSensor);var i=window.getComputedStyle(e).getPropertyValue("position");"absolute"!==i&&"relative"!==i&&"fixed"!==i&&(e.style.position="relative");var o,a,s,l=e.resizeSensor.childNodes[0],u=l.childNodes[0],c=e.resizeSensor.childNodes[1],d=_(e),h=d.width,f=d.height,p=!0,v=function(){u.style.width="100000px",u.style.height="100000px",l.scrollLeft=1e5,l.scrollTop=1e5,c.scrollLeft=1e5,c.scrollTop=1e5},m=function(){if(p){if(!l.scrollTop&&!l.scrollLeft)return v(),void(s||(s=x(function(){s=0,m()})));p=!1}v()};e.resizeSensor.resetSensor=m;var g=function(){a=0,o&&(h=d.width,f=d.height,e.resizedAttached&&e.resizedAttached.call(d))},y=function(){d=_(e),(o=d.width!==h||d.height!==f)&&!a&&(a=x(g)),m()},b=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};b(l,"scroll",y),b(c,"scroll",y),x(m)}}(e,n)}),this.detach=function(e){"undefined"!=typeof ResizeObserver?i(t,function(e){r.unobserve(e)}):o.detach(t,e)},this.reset=function(){t.resizeSensor.resetSensor()}};return o.reset=function(e,t){i(e,function(e){e.resizeSensor.resetSensor()})},o.detach=function(e,t){i(e,function(e){e&&(e.resizedAttached&&"function"==typeof t&&(e.resizedAttached.remove(t),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))})},o})?r.call(t,n,t,e):r)||(e.exports=i)},function(e,t){e.exports={"center-track":"CenterTrack-module_center-track-3ptRW","center-track-container":"CenterTrack-module_center-track-container-2ELhp"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.HorizontalRuleMixin=void 0;var a=h(n(3)),s=h(n(1)),r=h(n(2)),l=h(n(4)),i=h(n(5)),o=n(57),u=h(n(41)),c=h(n(174)),d=n(6);function h(e){return e&&e.__esModule?e:{default:e}}var f=t.HorizontalRuleMixin=(0,o.Mixin)(function(e){return function(e){function t(){return(0,s.default)(this,t),(0,l.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"drawHorizontalRule",value:function(e){var t=(0,d.colorToHex)("black");this.highlighted&&(t=(0,d.colorToHex)("red")),e.lineStyle(2,t,1);for(var n=0;n<this.dimensions[0];)e.moveTo(n,this._yScale(this.yPosition)),e.lineTo(n+5,this._yScale(this.yPosition)),n+=8}},{key:"isMouseOverHorizontalLine",value:function(e){return Math.abs(e.y-this.position[1]-this._yScale(this.yPosition))<this.MOUSEOVER_RADIUS}}]),t}(e)}),p=function(e){function o(e,t,n,r){(0,s.default)(this,o);var i=(0,l.default)(this,(o.__proto__||(0,a.default)(o)).call(this,e,n,r));return i.yPosition=t,i}return(0,i.default)(o,e),(0,r.default)(o,[{key:"mouseMoveHandler",value:function(e){if(this.isWithin(e.x,e.y)&&this.isMouseOverHorizontalLine(e))return this.highlighted=!0,void this.draw();this.highlighted=!1,this.draw()}},{key:"draw",value:function(){var e=this.pMain;e.clear(),this.drawHorizontalRule(e),this.animate()}}]),o}((0,o.mix)(u.default).with(c.default,f));t.default=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalRuleMixin=void 0;var a=h(n(3)),s=h(n(1)),r=h(n(2)),l=h(n(4)),i=h(n(5)),o=n(57),u=h(n(41)),c=h(n(174)),d=n(6);function h(e){return e&&e.__esModule?e:{default:e}}var f=t.VerticalRuleMixin=(0,o.Mixin)(function(e){return function(e){function t(){return(0,s.default)(this,t),(0,l.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"drawVerticalRule",value:function(e){var t=(0,d.colorToHex)("black");this.highlighted&&(t=(0,d.colorToHex)("red")),e.lineStyle(2,t,1);for(var n=0;n<this.dimensions[1];)e.moveTo(this._xScale(this.xPosition),n),e.lineTo(this._xScale(this.xPosition),n+5),n+=8}},{key:"isMouseOverVerticalLine",value:function(e){return Math.abs(e.x-this.position[0]-this._xScale(this.xPosition))<this.MOUSEOVER_RADIUS}}]),t}(e)}),p=function(e){function o(e,t,n,r){(0,s.default)(this,o);var i=(0,l.default)(this,(o.__proto__||(0,a.default)(o)).call(this,e,n,r));return i.xPosition=t,i}return(0,i.default)(o,e),(0,r.default)(o,[{key:"draw",value:function(){var e=this.pMain;e.clear(),this.drawVerticalRule(e),this.animate()}},{key:"mouseMoveHandler",value:function(e){this.highlighted=this.isWithin(e.x,e.y)&&this.isMouseOverVerticalLine(e),this.draw()}}]),o}((0,o.mix)(u.default).with(c.default,f));t.default=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var b=f(n(11)),r=f(n(3)),i=f(n(1)),o=f(n(2)),a=f(n(4)),s=f(n(5)),l=f(n(0)),u=f(n(8)),c=n(98),d=f(n(521)),h=f(n(522)),w=n(12);function f(e){return e&&e.__esModule?e:{default:e}}n(524);var p=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.tilesetFinder=null,t.multiSelect=null,t.options={},t.state={selectedTilesets:[{datatype:"none"}],normalizeTilesetUuid:null},t}return(0,s.default)(n,e),(0,o.default)(n,[{key:"handleSubmit",value:function(e){this.props.onTracksChosen(this.state.selectedTilesets,this.props.position,this.props.host),e.preventDefault()}},{key:"selectedTilesetsChanged",value:function(e){var t=!0,n=e[0].datatype,r=!0,i=!1,o=void 0;try{for(var a,s=(0,b.default)(e);!(r=(a=s.next()).done);r=!0)a.value.datatype!==n&&(t=!1)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}if(t){var l=!0,u=!1,c=void 0;try{for(var d,h=(0,b.default)(e);!(l=(d=h.next()).done);l=!0)d.value.type=this.selectedPlotType}catch(e){u=!0,c=e}finally{try{!l&&h.return&&h.return()}finally{if(u)throw c}}}else{var f=!0,p=!1,v=void 0;try{for(var m,g=(0,b.default)(e);!(f=(m=g.next()).done);f=!0){var y=m.value;y.type=(0,w.AVAILABLE_TRACK_TYPES)([y.datatype],this.getOrientation(this.props.position))[0].type}}catch(e){p=!0,v=e}finally{try{!f&&g.return&&g.return()}finally{if(p)throw v}}}this.setState({selectedTilesets:e})}},{key:"handleTilesetPickerDoubleClick",value:function(e){this.selectedTilesetsChanged([e]),this.props.onTracksChosen(this.state.selectedTilesets,this.props.position,this.props.host)}},{key:"handleOptionsChanged",value:function(e){this.options=e}},{key:"handlePlotTypeSelected",value:function(e){var t=this.state.selectedTilesets,n=!0,r=!1,i=void 0;try{for(var o,a=(0,b.default)(t);!(n=(o=a.next()).done);n=!0)o.value.type=e}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}this.selectedPlotType=e,this.setState({selectedTilesets:t})}},{key:"getOrientation",value:function(e){return"top"===e||"bottom"===e?"1d-horizontal":"left"===e||"right"===e?"1d-vertical":"2d"}},{key:"render",value:function(){var t=this,e=this.getOrientation(this.props.position),n=l.default.createElement("div",null,l.default.createElement(d.default,{onDoubleClick:this.handleTilesetPickerDoubleClick.bind(this),onTracksChosen:function(e){return t.props.onTracksChosen(e,t.props.position)},orientation:e,datatype:this.props.datatype,ref:function(e){t.tilesetFinder=e},selectedTilesetChanged:this.selectedTilesetsChanged.bind(this),trackSourceServers:this.props.trackSourceServers}));return l.default.createElement(c.Modal,{onHide:this.props.onCancel,show:this.props.show},l.default.createElement(c.Modal.Header,{closeButton:!0},l.default.createElement(c.Modal.Title,null,"Add Track")),l.default.createElement(c.Modal.Body,null,n,this.props.hidePlotTypeChooser?null:l.default.createElement(h.default,{ref:function(e){t.plotTypeChooser=e},datatypes:this.state.selectedTilesets.map(function(e){return e.datatype}),onPlotTypeSelected:this.handlePlotTypeSelected.bind(this),orientation:e})),l.default.createElement(c.Modal.Footer,null,l.default.createElement(c.Button,{onClick:this.props.onCancel},"Cancel"),l.default.createElement(c.Button,{onClick:this.handleSubmit.bind(this)},"Submit")))}}]),n}(l.default.Component);p.defaultProps={position:"top",show:!1},p.propTypes={host:u.default.object,onCancel:u.default.func.isRequired,onTracksChosen:u.default.func.isRequired,position:u.default.string,show:u.default.bool,trackSourceServers:u.default.array.isRequired},t.default=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(3)),i=h(n(1)),o=h(n(2)),a=h(n(4)),s=h(n(5)),l=n(57),u=h(n(0)),c=h(n(526)),d=n(124);function h(e){return e&&e.__esModule?e:{default:e}}var f=(0,l.Mixin)(function(e){return function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"getSubmenu",value:function(){var t=this;if(this.state.submenuShown){var e=this.state.submenuSourceBbox,n=null;n="left"===this.state.orientation?{left:this.state.left,top:e.top}:{left:this.state.left+e.width+7,top:e.top};var r=(0,d.getAllTracksAndSubtracks)(this.props.tracks).filter(function(e){return e.uid===t.state.submenuShown.uid})[0],i=!("whole"===r.position);return u.default.createElement(c.default,{key:"series-list-menu-"+String(r.uid),ref:function(e){t.seriesListMenu=e},closeMenu:this.props.closeMenu,hostTrack:this.props.tracks[0],onAddDivisor:this.props.onAddDivisor,onAddSeries:i?this.props.onAddSeries:null,onChangeTrackType:this.props.onChangeTrackType,onChangeTrackData:this.props.onChangeTrackData,onCloseTrack:function(){return t.props.onCloseTrack(t.state.submenuShown.uid)},onConfigureTrack:this.props.onConfigureTrack,onDivideSeries:this.props.onDivideSeries,onExportData:this.props.onExportData,onLockScales:this.props.onLockScales,onTrackOptionsChanged:this.props.onTrackOptionsChanged,orientation:this.state.orientation,parentBbox:e,position:n,series:this.state.submenuShown,track:r,trackOrientation:this.props.trackOrientation,trackSourceServers:this.props.trackSourceServers})}return u.default.createElement("div",null)}}]),t}(e)});t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(3)),o=f(n(1)),a=f(n(2)),s=f(n(4)),l=f(n(5)),u=f(n(31)),c=f(n(0)),r=f(n(69)),d=f(n(48)),h=n(9);function f(e){return e&&e.__esModule?e:{default:e}}n(49);var p={"../styles/ContextMenu.module.scss":{"context-menu":"ContextMenu-module_context-menu-2OwvL","context-menu-dark":"ContextMenu-module_context-menu-dark-2PO31","context-menu-icon":"ContextMenu-module_context-menu-icon-I4kiw","context-menu-item":"ContextMenu-module_context-menu-item-1HeVv","context-menu-hr":"ContextMenu-module_context-menu-hr-3yapb","play-icon":"ContextMenu-module_play-icon-R4pIO","context-menu-span":"ContextMenu-module_context-menu-span-8EUfZ","context-menu-thumbnail":"ContextMenu-module_context-menu-thumbnail-2vHLD","context-menu-thumbnail-inline":"ContextMenu-module_context-menu-thumbnail-inline-1iOcg"}},v=function(e){function r(){return(0,o.default)(this,r),(0,s.default)(this,(r.__proto__||(0,i.default)(r)).apply(this,arguments))}return(0,l.default)(r,e),(0,a.default)(r,[{key:"getSubmenu",value:function(){if(this.state.submenuShown){var e=this.state.submenuSourceBbox,t="left"===this.state.orientation?{left:this.state.left,top:e.top}:{left:this.state.left+e.width+7,top:e.top},n=this.state.submenuShown;return c.default.createElement(r,{menuItems:n.children,orientation:this.state.orientation,parentBbox:e,position:t})}return c.default.createElement("div",null)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var n=this,r=[],e=function(e){var t=n.props.menuItems[e];r.push(c.default.createElement(d.default,{key:e,onClick:t.handler?t.handler:function(){return null},onMouseEnter:t.children?function(e){return n.handleItemMouseEnter(e,t)}:n.handleOtherMouseEnter.bind(n),onMouseLeave:n.handleMouseLeave},t.name,t.children&&c.default.createElement("svg",{className:"ContextMenu-module_play-icon-R4pIO"},c.default.createElement("use",{xlinkHref:"#play"}))))};for(var t in this.props.menuItems)e(t);var i="context-menu";return(0,h.getDarkTheme)()&&(i+=" context-menu-dark"),c.default.createElement("div",{ref:function(e){return n.div=e},style:{left:this.state.left,top:this.state.top},className:(0,u.default)(i,p)},r,this.getSubmenu())}}]),r}(r.default);t.default=v},function(e,t){},function(e,t){e.exports={"multitrack-header":"ViewHeader-module_multitrack-header-3XnZx","multitrack-header-focus":"ViewHeader-module_multitrack-header-focus-3akkN","multitrack-header-squeazed":"ViewHeader-module_multitrack-header-squeazed-GHIVd","multitrack-header-dark":"ViewHeader-module_multitrack-header-dark-97tZt","multitrack-header-id":"ViewHeader-module_multitrack-header-id-3YURk","multitrack-header-left":"ViewHeader-module_multitrack-header-left-Qj9Sm","multitrack-header-grabber":"ViewHeader-module_multitrack-header-grabber-3jrIz","multitrack-header-grabber-squeazed":"ViewHeader-module_multitrack-header-grabber-squeazed-dU45Z","multitrack-header-search":"ViewHeader-module_multitrack-header-search-1X_3_","multitrack-header-nav-list":"ViewHeader-module_multitrack-header-nav-list-2nvcu","multitrack-header-icon":"ViewHeader-module_multitrack-header-icon-16QKZ","multitrack-header-icon-squeazed":"ViewHeader-module_multitrack-header-icon-squeazed-25lkF","mouse-tool-selection":"ViewHeader-module_mouse-tool-selection-1pg2m"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.svgArrowheadDomainsIcon=t.svgVertical1DTilesIcon=t.svg1DTilesIcon=t.svgVerticalGeneAnnotationsIcon=t.svgGeneAnnotationsIcon=t.svgVertical1DAxisIcon=t.svg1DAxisIcon=t.svg2DHeatmapIcon=t.svg2DTilesIcon=t.svgVerticalLineIcon=t.svgHorizontalLineIcon=t.svgGeoMapIcon=t.all=t.SELECT=t.TRACK_LINE=t.CONTENT_COPY=t.PLUS=t.PLAY=t.MOVE=t.MINUS=t.ENLARGE=t.CROSS=t.COG=void 0;var r=n(!function(){var e=new Error('Cannot find module "d3-selection"');throw e.code="MODULE_NOT_FOUND",e}()),i=t.COG={id:"cog",paths:["M466.895 305.125c-26.863-46.527-10.708-106.152 36.076-133.244l-50.313-87.146c-14.375 8.427-31.088 13.259-48.923 13.259-53.768 0-97.354-43.873-97.354-97.995h-100.629c0.133 16.705-4.037 33.641-12.979 49.126-26.862 46.528-86.578 62.351-133.431 35.379l-50.312 87.146c14.485 8.236 27.025 20.294 35.943 35.739 26.819 46.454 10.756 105.96-35.854 133.112l50.313 87.146c14.325-8.348 30.958-13.127 48.7-13.127 53.598 0 97.072 43.596 97.35 97.479h100.627c-0.043-16.537 4.136-33.285 12.983-48.609 26.818-46.453 86.388-62.297 133.207-35.506l50.313-87.145c-14.39-8.233-26.846-20.249-35.717-35.614zM256 359.666c-57.254 0-103.668-46.412-103.668-103.667 0-57.254 46.413-103.667 103.668-103.667s103.666 46.413 103.666 103.667c-0.001 57.255-46.412 103.667-103.666 103.667z"],viewBox:"0 0 512 512"},o=t.CROSS={id:"cross",paths:["M507.331 411.33c-0.002-0.002-0.004-0.004-0.006-0.005l-155.322-155.325 155.322-155.325c0.002-0.002 0.004-0.003 0.006-0.005 1.672-1.673 2.881-3.627 3.656-5.708 2.123-5.688 0.912-12.341-3.662-16.915l-73.373-73.373c-4.574-4.573-11.225-5.783-16.914-3.66-2.080 0.775-4.035 1.984-5.709 3.655 0 0.002-0.002 0.003-0.004 0.005l-155.324 155.326-155.324-155.325c-0.002-0.002-0.003-0.003-0.005-0.005-1.673-1.671-3.627-2.88-5.707-3.655-5.69-2.124-12.341-0.913-16.915 3.66l-73.374 73.374c-4.574 4.574-5.784 11.226-3.661 16.914 0.776 2.080 1.985 4.036 3.656 5.708 0.002 0.001 0.003 0.003 0.005 0.005l155.325 155.324-155.325 155.326c-0.001 0.002-0.003 0.003-0.004 0.005-1.671 1.673-2.88 3.627-3.657 5.707-2.124 5.688-0.913 12.341 3.661 16.915l73.374 73.373c4.575 4.574 11.226 5.784 16.915 3.661 2.080-0.776 4.035-1.985 5.708-3.656 0.001-0.002 0.003-0.003 0.005-0.005l155.324-155.325 155.324 155.325c0.002 0.001 0.004 0.003 0.006 0.004 1.674 1.672 3.627 2.881 5.707 3.657 5.689 2.123 12.342 0.913 16.914-3.661l73.373-73.374c4.574-4.574 5.785-11.227 3.662-16.915-0.776-2.080-1.985-4.034-3.657-5.707z"],viewBox:"0 0 512 512"},a=t.ENLARGE={id:"enlarge",paths:["M512 0h-208l80 80-96 96 48 48 96-96 80 80z","M512 512v-208l-80 80-96-96-48 48 96 96-80 80z","M0 512h208l-80-80 96-96-48-48-96 96-80-80z","M0 0v208l80-80 96 96 48-48-96-96 80-80z"],viewBox:"0 0 512 512"},s=t.MINUS={id:"minus",paths:["M0 208v96c0 8.836 7.164 16 16 16h480c8.836 0 16-7.164 16-16v-96c0-8.836-7.164-16-16-16h-480c-8.836 0-16 7.164-16 16z"],viewBox:"0 0 512 512"},l=t.MOVE={id:"move",paths:["M512,260.096L405.5,161.79v49.155H301.061v-104.45h49.149L251.904,0L160.77,106.495h49.15v104.45H106.495V161.79L0,260.096l106.495,91.135v-49.149h104.45v104.45H161.79L251.904,512l98.306-106.5h-49.149V301.061H405.5v49.149L512,260.096z"],viewBox:"0 0 512 512"},u=t.PLAY={id:"play",paths:["M96 64l320 192-320 192z"],viewBox:"0 0 512 512"},c=t.PLUS={id:"plus",paths:["M496 192h-176v-176c0-8.836-7.164-16-16-16h-96c-8.836 0-16 7.164-16 16v176h-176c-8.836 0-16 7.164-16 16v96c0 8.836 7.164 16 16 16h176v176c0 8.836 7.164 16 16 16h96c8.836 0 16-7.164 16-16v-176h176c8.836 0 16-7.164 16-16v-96c0-8.836-7.164-16-16-16z"],viewBox:"0 0 512 512"},d=t.CONTENT_COPY={id:"copy",paths:["M607.5 672v-448.5h-351v448.5h351zM607.5 160.5c34.5 0 64.5 28.5 64.5 63v448.5c0 34.5-30 64.5-64.5 64.5h-351c-34.5 0-64.5-30-64.5-64.5v-448.5c0-34.5 30-63 64.5-63h351zM511.5 31.5v64.5h-384v448.5h-63v-448.5c0-34.5 28.5-64.5 63-64.5h384z"],viewBox:"0 0 712 712"},h=(t.TRACK_LINE={id:"trackLine",paths:["M60 20 L50 52 L40 26 L34 46 L24 30 L14 50 L4 12"],viewBox:"0 0 60 60"},t.SELECT={id:"select",viewBox:"0 0 16 16",paths:["M2 14h2v1H1v-3h1v2zm8 1H6v-1h4v1zm5 0h-3v-1h2v-2h1v3zm0-5h-1V6h1v4zM2 10H1V6h1v4zm13-6h-1V2h-2V1h3v3zM4 2H2v2H1V1h3v1zm6 0H6V1h4.03L10 2z"]}),f=(t.all=[i,o,a,s,l,u,c,d,h],new DOMParser),p=(t.svgGeoMapIcon=f.parseFromString('<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268M10.5 3.5v12" fill="none" stroke="currentColor"/><path d="M5.5 13.5v-7" fill="none" stroke="currentColor" stroke-width=".9969299999999999"/><path d="M5.494 0c-1.803 0-3.26 1.496-3.26 3.35 0 .427.124.97.264 1.343L5.5 11l3.003-6.306c.142-.375.263-.916.263-1.342C8.766 1.496 7.3 0 5.494 0zM5.5 4.64c-.76 0-1.375-.616-1.375-1.374 0-.76.616-1.376 1.375-1.376.76 0 1.374.616 1.374 1.376 0 .758-.614 1.375-1.374 1.375z" fill="currentColor"/></svg>',"text/xml").documentElement,'\n<svg width="20px" height="20px" viewBox="0 0 135 85" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>line</title>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polyline id="Path" stroke="#4990E2" stroke-width="8" points="2 45.5625 20.7460938 6.3359375 36.828125 86.6484375 59.8945312 17.5742188 79.0390625 70.703125 99.9335938 27 112.769531 81.1601562 132.078125 3"></polyline>\n    </g>\n</svg>\n'),v=(t.svgHorizontalLineIcon=f.parseFromString(p,"text/xml").documentElement,t.svgVerticalLineIcon=(0,r.select)(f.parseFromString(p,"text/xml").documentElement).style("transform","rotate(90deg)").node(),t.svg2DTilesIcon=f.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 60 60" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>2d-tiles-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="tiles2DIconStr-path-1" x="0" y="0" width="30" height="30"></rect>\n        <mask id="tiles2DIconStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">\n            <use xlink:href="#tiles2DIconStr-path-1"></use>\n        </mask>\n        <rect id="tiles2DIconStr-path-3" x="0" y="30" width="30" height="30"></rect>\n        <mask id="tiles2DIconStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">\n            <use xlink:href="#tiles2DIconStr-path-3"></use>\n        </mask>\n        <rect id="tiles2DIconStr-path-5" x="30" y="0" width="30" height="30"></rect>\n        <mask id="tiles2DIconStr-mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">\n            <use xlink:href="#tiles2DIconStr-path-5"></use>\n        </mask>\n        <rect id="tiles2DIconStr-path-7" x="30" y="30" width="30" height="30"></rect>\n        <mask id="tiles2DIconStr-mask-8" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">\n            <use xlink:href="#tiles2DIconStr-path-7"></use>\n        </mask>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-2)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-1"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-4)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-3"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-6)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-5"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-8)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-7"></use>\n    </g>\n</svg>\n',"text/xml").documentElement,t.svg2DHeatmapIcon=f.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 90 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>2d-heatmap</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="heatmap2DStr-path-1" x="0" y="0" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-2" x="30" y="0" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-3" x="60" y="0" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-4" x="0" y="30" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-5" x="30" y="30" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-6" x="60" y="30" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-7" x="0" y="60" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-8" x="30" y="60" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-9" x="60" y="60" width="30" height="30"></rect>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <use id="Rectangle" fill="#858372" xlink:href="#heatmap2DStr-path-1"></use>\n        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-2"></use>\n        <use id="Rectangle" fill="#ECECD5" xlink:href="#heatmap2DStr-path-3"></use>\n        <use id="Rectangle" fill="#BCBD9E" xlink:href="#heatmap2DStr-path-4"></use>\n        <use id="Rectangle" fill="#817C7C" xlink:href="#heatmap2DStr-path-5"></use>\n        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-6"></use>\n        <use id="Rectangle" fill="#ECECD5" xlink:href="#heatmap2DStr-path-7"></use>\n        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-8"></use>\n        <use id="Rectangle" fill="#7B7777" xlink:href="#heatmap2DStr-path-9"></use>\n    </g>\n</svg>\n',"text/xml").documentElement,'\n<svg width="20px" height="20px" viewBox="0 0 77 33" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>axis-1d</title>\n    <desc>Created with Sketch.</desc>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polyline id="Path" stroke="#979797" stroke-width="8" transform="translate(38.258485, 27.557860) scale(1, -1) translate(-38.258485, -27.557860) " points="4 27.05786 36.7512307 27.05786 72.5169695 27.05786"></polyline>\n        <path d="M38,24.484375 L38,3" id="Path-2" stroke="#979797" stroke-width="4"></path>\n    </g>\n</svg>\n'),m=(t.svg1DAxisIcon=f.parseFromString(v,"text/xml").documentElement,t.svgVertical1DAxisIcon=(0,r.select)(f.parseFromString(v,"text/xml").documentElement).style("transform","rotate(90deg)").node(),'\n<svg width="20px" height="20px" viewBox="0 0 171 116" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>gene-annotations</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="geneAnnotations-path-1" x="34" y="0" width="24" height="116"></rect>\n        <mask id="geneAnnotations-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="24" height="116" fill="white">\n            <use xlink:href="#geneAnnotations-path-1"></use>\n        </mask>\n        <rect id="geneAnnotations-path-3" x="80" y="0" width="56" height="116"></rect>\n        <mask id="geneAnnotations-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="56" height="116" fill="white">\n            <use xlink:href="#geneAnnotations-path-3"></use>\n        </mask>\n        <rect id="geneAnnotations-path-5" x="147" y="40" width="24" height="35"></rect>\n        <mask id="geneAnnotations-mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="24" height="35" fill="white">\n            <use xlink:href="#geneAnnotations-path-5"></use>\n        </mask>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M12.71875,58 L147.10172,58" id="Path" stroke="#979797" stroke-width="8"></path>\n        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-2)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-1"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-4)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-3"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-6)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-5"></use>\n        <polygon id="Triangle" stroke="#979797" fill="#D8D8D8" points="25 57.5 1 75 1 40"></polygon>\n    </g>\n</svg>\n'),g=(t.svgGeneAnnotationsIcon=f.parseFromString(m,"text/xml").documentElement,t.svgVerticalGeneAnnotationsIcon=(0,r.select)(f.parseFromString(m,"text/xml").documentElement).style("transform","rotate(90deg)").node(),'\n<svg width="20px" height="20px" viewBox="0 0 180 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>1d-tiles-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="tiles1DIconStr-path-1" x="0" y="0" width="90" height="90"></rect>\n        <mask id="tiles1DIconStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">\n            <use xlink:href="#tiles1DIconStr-path-1"></use>\n        </mask>\n        <rect id="tiles1DIconStr-path-3" x="90" y="0" width="90" height="90"></rect>\n        <mask id="tiles1DIconStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">\n            <use xlink:href="#tiles1DIconStr-path-3"></use>\n        </mask>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles1DIconStr-mask-2)" stroke-width="12" fill="#E6D5D5" xlink:href="#tiles1DIconStr-path-1"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles1DIconStr-mask-4)" stroke-width="12" fill="#E6D5D5" xlink:href="#tiles1DIconStr-path-3"></use>\n    </g>\n</svg>\n');t.svg1DTilesIcon=f.parseFromString(g,"text/xml").documentElement,t.svgVertical1DTilesIcon=(0,r.select)(f.parseFromString(g,"text/xml").documentElement).style("transform","rotate(90deg)").node(),t.svgArrowheadDomainsIcon=f.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 111 111" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>arrowhead-domains</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="arrowHeadDomainsStr-path-1" x="0" y="0" width="90" height="90"></rect>\n        <mask id="arrowHeadDomainsStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">\n            <use xlink:href="#arrowHeadDomainsStr-path-1"></use>\n        </mask>\n        <rect id="arrowHeadDomainsStr-path-3" x="52" y="52" width="59" height="59"></rect>\n        <mask id="arrowHeadDomainsStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="59" height="59" fill="white">\n            <use xlink:href="#arrowHeadDomainsStr-path-3"></use>\n        </mask>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0">\n        <use id="Rectangle" stroke="#979797" mask="url(#arrowHeadDomainsStr-mask-2)" stroke-width="22" fill="#D8D8D8" xlink:href="#arrowHeadDomainsStr-path-1"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#arrowHeadDomainsStr-mask-4)" stroke-width="22" fill="#D8D8D8" xlink:href="#arrowHeadDomainsStr-path-3"></use>\n    </g>\n</svg>\n',"text/xml").documentElement},function(e,t,n){var r=n(97);e.exports=function(e){return"function"==typeof e?e:r}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t,n){var i=n(273),o=n(116),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var r=e[t];a.call(e,t)&&o(r,n)&&(void 0!==n||t in e)||i(e,t,n)}},function(e,t,n){var r=n(239);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(226),i=n(557),o=n(85);e.exports=function(e){return o(e)?r(e,!0):i(e)}},function(e,t,n){var r=n(161),i=n(177),o=n(162),a=n(225),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=s},function(e,t){e.exports=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checkboard=void 0;var l=r(n(0)),u=r(n(7)),c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(584));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.Checkboard=function(e){var t=e.white,n=e.grey,r=e.size,i=e.renderers,o=e.borderRadius,a=e.boxShadow,s=(0,u.default)({default:{grid:{borderRadius:o,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+c.get(t,n,r,i.canvas)+") center left"}}});return l.default.createElement("div",{style:s.grid})};i.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},t.default=i},function(e,t,n){var y=n(47),b=n(591),w=n(235),x=Math.max,_=Math.min;e.exports=function(r,i,e){var o,a,s,l,u,c,d=0,h=!1,f=!1,t=!0;if("function"!=typeof r)throw new TypeError("Expected a function");function p(e){var t=o,n=a;return o=a=void 0,d=e,l=r.apply(n,t)}function v(e){var t=e-c;return void 0===c||i<=t||t<0||f&&s<=e-d}function m(){var e,t,n=b();if(v(n))return g(n);u=setTimeout(m,(t=i-((e=n)-c),f?_(t,s-(e-d)):t))}function g(e){return u=void 0,t&&o?p(e):(o=a=void 0,l)}function n(){var e,t=b(),n=v(t);if(o=arguments,a=this,c=t,n){if(void 0===u)return d=e=c,u=setTimeout(m,i),h?p(e):l;if(f)return u=setTimeout(m,i),p(c)}return void 0===u&&(u=setTimeout(m,i)),l}return i=w(i)||0,y(e)&&(h=!!e.leading,s=(f="maxWait"in e)?x(w(e.maxWait)||0,i):s,t="trailing"in e?!!e.trailing:t),n.cancel=function(){void 0!==u&&clearTimeout(u),o=c=a=u=void(d=0)},n.flush=function(){return void 0===u?l:g(b())},n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorWrap=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(0),a=u(o),s=u(n(278)),l=u(n(43));function u(e){return e&&e.__esModule?e:{default:e}}var c=t.ColorWrap=function(n){var e=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.handleChange=function(e,t){if(l.default.simpleCheckForValidColor(e)){var n=l.default.toState(e,e.h||r.state.oldHue);r.setState(n),r.props.onChangeComplete&&r.debounce(r.props.onChangeComplete,n,t),r.props.onChange&&r.props.onChange(n,t)}},r.handleSwatchHover=function(e,t){if(l.default.simpleCheckForValidColor(e)){var n=l.default.toState(e,e.h||r.state.oldHue);r.setState(n),r.props.onSwatchHover&&r.props.onSwatchHover(n,t)}},r.state=i({},l.default.toState(e.color,0)),r.debounce=(0,s.default)(function(e,t,n){e(t,n)},100),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent||o.Component),r(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(i({},l.default.toState(e.color,this.state.oldHue)))}},{key:"render",value:function(){var e={};return this.props.onSwatchHover&&(e.onSwatchHover=this.handleSwatchHover),a.default.createElement(n,i({},this.props,this.state,{onChange:this.handleChange},e))}}]),t}();return e.propTypes=i({},n.propTypes),e.defaultProps=i({},n.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),e};t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"red",function(){return r}),n.d(t,"pink",function(){return i}),n.d(t,"purple",function(){return o}),n.d(t,"deepPurple",function(){return a}),n.d(t,"indigo",function(){return s}),n.d(t,"blue",function(){return l}),n.d(t,"lightBlue",function(){return u}),n.d(t,"cyan",function(){return c}),n.d(t,"teal",function(){return d}),n.d(t,"green",function(){return h}),n.d(t,"lightGreen",function(){return f}),n.d(t,"lime",function(){return p}),n.d(t,"yellow",function(){return v}),n.d(t,"amber",function(){return m}),n.d(t,"orange",function(){return g}),n.d(t,"deepOrange",function(){return y}),n.d(t,"brown",function(){return b}),n.d(t,"grey",function(){return w}),n.d(t,"blueGrey",function(){return x}),n.d(t,"darkText",function(){return _}),n.d(t,"lightText",function(){return k}),n.d(t,"darkIcons",function(){return S}),n.d(t,"lightIcons",function(){return T}),n.d(t,"white",function(){return C}),n.d(t,"black",function(){return O});var r={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},i={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},o={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},a={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},s={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},l={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},u={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},c={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},d={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},h={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},f={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},p={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},v={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},m={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},g={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},y={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},b={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},w={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},x={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},_={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},k={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},S={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},T={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},C="#ffffff",O="#000000";t.default={red:r,pink:i,purple:o,deepPurple:a,indigo:s,blue:l,lightBlue:u,cyan:c,teal:d,green:h,lightGreen:f,lime:p,yellow:v,amber:m,orange:g,deepOrange:y,brown:b,grey:w,blueGrey:x,darkText:_,lightText:k,darkIcons:S,lightIcons:T,white:C,black:O}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(t){return function(e){return Array.prototype.reduce.call(e,t)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(46),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=e,i=[],t=function(t){r[t].forEach(function(e){"combined"==e.type&&n&&e.contents.forEach(function(e){i.push((0,a.default)(e,{position:t}))}),i.push((0,a.default)(e,{position:t}))})};for(var o in r)t(o);return i}},function(e,t,n){e.exports=n(284)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.viewer=t.createHgComponent=t.HiGlassComponent=t.ChromosomeInfo=void 0;var r=n(44);Object.defineProperty(t,"ChromosomeInfo",{enumerable:!0,get:function(){return o(r).default}});var i=n(253);Object.defineProperty(t,"HiGlassComponent",{enumerable:!0,get:function(){return o(i).default}});var u=o(n(0)),c=o(n(29)),d=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var a=t.createHgComponent=function(e,t,n,r){var i,o,a,s,l=(i=e,o=t,a=n,s=void 0,c.default.render(u.default.createElement(d.default,{ref:function(e){s=e},options:a||{},viewConfig:o}),i),s);try{r(l.api),console.warn("Deprecated use of `createHgComponent`. The api is directly returned now.")}catch(e){}return l.api};t.viewer=a;t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(87),o=(r=i)&&r.__esModule?r:{default:r},a=n(100),s=n(44);var l={},u=function(e){return fetch(e).then(function(e){return e.text()}).then(function(e){return function(e){if(0==e.length)return null;var t=(0,a.tsvParseRows)(e);return(0,s.parseChromsizesRows)(t)}(e)}).catch(function(e){console.error("Could not retrieve or parse chrom info.",e)})},c={get:function(e){return(t=r=e,n=u,l[t]?o.default.resolve(l[t]):n(t)).then(function(e){return l[r]=e,l[r]});var t,n;var r}};t.default=c},function(e,t,n){n(126),n(50),n(64),n(287),n(290),n(291),e.exports=n(13).Promise},function(e,t,n){"use strict";var r,i,o,a,s=n(71),l=n(17),u=n(38),c=n(77),d=n(15),h=n(27),f=n(61),p=n(134),v=n(90),m=n(181),g=n(182).set,y=n(289)(),b=n(135),w=n(183),x=n(184),_="Promise",k=l.TypeError,S=l.process,T=l[_],C="process"==c(S),O=function(){},E=i=b.f,M=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[n(16)("species")]=function(e){e(O,O)};return(C||"function"==typeof PromiseRejectionEvent)&&e.then(O)instanceof t}catch(e){}}(),P=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},A=function(u,n){if(!u._n){u._n=!0;var r=u._c;y(function(){for(var s=u._v,l=1==u._s,e=0,t=function(e){var t,n,r=l?e.ok:e.fail,i=e.resolve,o=e.reject,a=e.domain;try{r?(l||(2==u._h&&I(u),u._h=1),!0===r?t=s:(a&&a.enter(),t=r(s),a&&a.exit()),t===e.promise?o(k("Promise-chain cycle")):(n=P(t))?n.call(t,i,o):i(t)):o(s)}catch(e){o(e)}};r.length>e;)t(r[e++]);u._c=[],u._n=!1,n&&!u._h&&R(u)})}},R=function(o){g.call(l,function(){var e,t,n,r=o._v,i=j(o);if(i&&(e=w(function(){C?S.emit("unhandledRejection",r,o):(t=l.onunhandledrejection)?t({promise:o,reason:r}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",r)}),o._h=C||j(o)?2:1),o._a=void 0,i&&e.e)throw e.v})},j=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if((t=n[r++]).fail||!j(t.promise))return!1;return!0},I=function(t){g.call(l,function(){var e;C?S.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},L=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),A(t,!0))},D=function(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw k("Promise can't be resolved itself");(n=P(e))?y(function(){var t={_w:r,_d:!1};try{n.call(e,u(D,t,1),u(L,t,1))}catch(e){L.call(t,e)}}):(r._v=e,r._s=1,A(r,!1))}catch(e){L.call({_w:r,_d:!1},e)}}};M||(T=function(e){p(this,T,_,"_h"),f(e),r.call(this);try{e(u(D,this,1),u(L,this,1))}catch(e){L.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(136)(T.prototype,{then:function(e,t){var n=E(m(this,T));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=C?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(D,e,1),this.reject=u(L,e,1)},b.f=E=function(e){return e===T||e===a?new o(e):i(e)}),d(d.G+d.W+d.F*!M,{Promise:T}),n(54)(T,_),n(185)(_),a=n(13)[_],d(d.S+d.F*!M,_,{reject:function(e){var t=E(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!M),_,{resolve:function(e){return x(s&&this===a?T:this,e)}}),d(d.S+d.F*!(M&&n(186)(function(e){T.all(e).catch(O)})),_,{all:function(e){var a=this,t=E(a),s=t.resolve,l=t.reject,n=w(function(){var r=[],i=0,o=1;v(e,!1,function(e){var t=i++,n=!1;r.push(void 0),o++,a.resolve(e).then(function(e){n||(n=!0,r[t]=e,--o||s(r))},l)}),--o||s(r)});return n.e&&l(n.v),t.promise},race:function(e){var t=this,n=E(t),r=n.reject,i=w(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var s=n(17),l=n(182).set,u=s.MutationObserver||s.WebKitMutationObserver,c=s.process,d=s.Promise,h="process"==n(53)(c);e.exports=function(){var n,r,i,e=function(){var e,t;for(h&&(e=c.domain)&&e.exit();n;){t=n.fn,n=n.next;try{t()}catch(e){throw n?i():r=void 0,e}}r=void 0,e&&e.enter()};if(h)i=function(){c.nextTick(e)};else if(!u||s.navigator&&s.navigator.standalone)if(d&&d.resolve){var t=d.resolve();i=function(){t.then(e)}}else i=function(){l.call(s,e)};else{var o=!0,a=document.createTextNode("");new u(e).observe(a,{characterData:!0}),i=function(){a.data=o=!o}}return function(e){var t={fn:e,next:void 0};r&&(r.next=t),n||(n=t,i()),r=t}}},function(e,t,n){"use strict";var r=n(15),i=n(13),o=n(17),a=n(181),s=n(184);r(r.P+r.R,"Promise",{finally:function(t){var n=a(this,i.Promise||o.Promise),e="function"==typeof t;return this.then(e?function(e){return s(n,t()).then(function(){return e})}:t,e?function(e){return s(n,t()).then(function(){throw e})}:t)}})},function(e,t,n){"use strict";var r=n(15),i=n(135),o=n(183);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(78),o=(r=i)&&r.__esModule?r:{default:r};var a={},s=function(t){return a[t]?a[t]:function(e){return o.default.publish(t,e)}},l={},u=function(e,t){(l[e]||l[e]===t)&&(l[e].removeEventListener(e,s(e)),l[e]=void 0,delete l[e])},c={register:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];t&&l[e]!==t&&(l[e]&&u(l[e]),l[e]=t,l[e].addEventListener(e,s(e),n))},unregister:u};t.default=c},function(e,t,n){e.exports={default:n(294),__esModule:!0}},function(e,t,n){n(50),n(64),e.exports=n(137).f("iterator")},function(e,t,n){e.exports={default:n(296),__esModule:!0}},function(e,t,n){n(297),n(126),n(300),n(301),e.exports=n(13).Symbol},function(e,t,n){"use strict";var r=n(17),a=n(33),i=n(28),o=n(15),s=n(102),l=n(138).KEY,u=n(45),c=n(75),d=n(54),h=n(63),f=n(16),p=n(137),v=n(139),m=n(298),g=n(187),y=n(26),b=n(27),w=n(34),x=n(88),_=n(51),k=n(73),S=n(299),T=n(141),C=n(25),O=n(52),E=T.f,M=C.f,P=S.f,A=r.Symbol,R=r.JSON,j=R&&R.stringify,I="prototype",L=f("_hidden"),D=f("toPrimitive"),N={}.propertyIsEnumerable,B=c("symbol-registry"),F=c("symbols"),V=c("op-symbols"),z=Object[I],H="function"==typeof A,U=r.QObject,q=!U||!U[I]||!U[I].findChild,W=i&&u(function(){return 7!=k(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=E(z,t);r&&delete z[t],M(e,t,n),r&&e!==z&&M(z,t,r)}:M,G=function(e){var t=F[e]=k(A[I]);return t._k=e,t},Y=H&&"symbol"==typeof A.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof A},X=function(e,t,n){return e===z&&X(V,t,n),y(e),t=x(t,!0),y(n),a(F,t)?(n.enumerable?(a(e,L)&&e[L][t]&&(e[L][t]=!1),n=k(n,{enumerable:_(0,!1)})):(a(e,L)||M(e,L,_(1,{})),e[L][t]=!0),W(e,t,n)):M(e,t,n)},Z=function(e,t){y(e);for(var n,r=m(t=w(t)),i=0,o=r.length;i<o;)X(e,n=r[i++],t[n]);return e},K=function(e){var t=N.call(this,e=x(e,!0));return!(this===z&&a(F,e)&&!a(V,e))&&(!(t||!a(this,e)||!a(F,e)||a(this,L)&&this[L][e])||t)},$=function(e,t){if(e=w(e),t=x(t,!0),e!==z||!a(F,t)||a(V,t)){var n=E(e,t);return!n||!a(F,t)||a(e,L)&&e[L][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=P(w(e)),r=[],i=0;n.length>i;)a(F,t=n[i++])||t==L||t==l||r.push(t);return r},J=function(e){for(var t,n=e===z,r=P(n?V:w(e)),i=[],o=0;r.length>o;)!a(F,t=r[o++])||n&&!a(z,t)||i.push(F[t]);return i};H||(s((A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=h(0<arguments.length?arguments[0]:void 0),n=function(e){this===z&&n.call(V,e),a(this,L)&&a(this[L],t)&&(this[L][t]=!1),W(this,t,_(1,e))};return i&&q&&W(z,t,{configurable:!0,set:n}),G(t)})[I],"toString",function(){return this._k}),T.f=$,C.f=X,n(188).f=S.f=Q,n(92).f=K,n(140).f=J,i&&!n(71)&&s(z,"propertyIsEnumerable",K,!0),p.f=function(e){return G(f(e))}),o(o.G+o.W+o.F*!H,{Symbol:A});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)f(ee[te++]);for(var ne=O(f.store),re=0;ne.length>re;)v(ne[re++]);o(o.S+o.F*!H,"Symbol",{for:function(e){return a(B,e+="")?B[e]:B[e]=A(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),o(o.S+o.F*!H,"Object",{create:function(e,t){return void 0===t?k(e):Z(k(e),t)},defineProperty:X,defineProperties:Z,getOwnPropertyDescriptor:$,getOwnPropertyNames:Q,getOwnPropertySymbols:J}),R&&o(o.S+o.F*(!H||u(function(){var e=A();return"[null]"!=j([e])||"{}"!=j({a:e})||"{}"!=j(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!Y(e))return g(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,j.apply(R,r)}}),A[I][D]||n(30)(A[I],D,A[I].valueOf),d(A,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){var s=n(52),l=n(140),u=n(92);e.exports=function(e){var t=s(e),n=l.f;if(n)for(var r,i=n(e),o=u.f,a=0;i.length>a;)o.call(e,r=i[a++])&&t.push(r);return t}},function(e,t,n){var r=n(34),i=n(188).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},function(e,t,n){n(139)("asyncIterator")},function(e,t,n){n(139)("observable")},function(e,o,t){Object.defineProperty(o,"__esModule",{value:!0}),o.tileDataToPixData=o.trackInfo=o.calculateTilesFromResolution=o.calculateTileWidth=o.calculateTiles=o.calculateTileAndPosInTile=o.calculateZoomLevel=o.calculateResolution=o.calculateZoomLevelFromResolutions=o.fetchTiles=o.fetchTilesDebounced=o.setTileProxyAuthHeader=o.authHeader=o.requestsInFlight=void 0;var P=i(t(11)),k=i(t(87)),A=i(t(24));o.fetchMultiRequestTiles=d;t(20);var l=t(!function(){var e=new Error('Cannot find module "d3-array"');throw e.code="MODULE_NOT_FOUND",e}()),a=t(189),n=i(t(21)),S=t(108),T=i(t(78)),s=t(6),r=t(12);function i(e){return e&&e.__esModule?e:{default:e}}var C=20,u=n.default.nice(),c=o.requestsInFlight=0,O=o.authHeader=null;o.setTileProxyAuthHeader=function(e){o.authHeader=O=e};function d(e){var s=e.sessionId,M=e.requests,l=[],n={},t=!0,r=!1,i=void 0;try{for(var o,a=(0,P.default)(M);!(t=(o=a.next()).done);t=!0){var u=o.value;n[u.server]||(n[u.server]={});var c=!0,d=!1,h=void 0;try{for(var f,p=(0,P.default)(u.ids);!(c=(f=p.next()).done);c=!0){var v=f.value;n[u.server][v]=!0}}catch(e){d=!0,h=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw h}}}}catch(e){r=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw i}}var m=(0,A.default)(n),g=function(o){for(var a=(0,A.default)(n[o]),e=function(e){var r=a.slice(e,e+Math.min(a.length-e,C)),t=r.map(function(e){return"d="+String(e)}).join("&"),i=String(o)+"/tiles/?"+String(t)+"&s="+String(s),n=new k.default(function(e,t){T.default.publish("requestSent",i);var n={};n.outUrl=i,n.server=o,n.theseTileIds=r,n.authHeader=O,(0,S.workerGetTiles)(n.outUrl,n.server,n.theseTileIds,n.authHeader,e),T.default.publish("requestReceived",i)});l.push(n)},t=0;t<a.length;t+=C)e(t)},y=!0,b=!1,w=void 0;try{for(var x,_=(0,P.default)(m);!(y=(x=_.next()).done);y=!0){g(x.value)}}catch(e){b=!0,w=e}finally{try{!y&&_.return&&_.return()}finally{if(b)throw w}}k.default.all(l).then(function(e){var t={},n=!0,r=!1,i=void 0;try{for(var o,a=(0,P.default)(e);!(n=(o=a.next()).done);n=!0){var s=o.value,l=(0,A.default)(s),u=!0,c=!1,d=void 0;try{for(var h,f=(0,P.default)(l);!(u=(h=f.next()).done);u=!0){var p=h.value;t[String(s[p].server)+"/"+String(p)]=s[p]}}catch(e){c=!0,d=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw d}}}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}var v=!0,m=!1,g=void 0;try{for(var y,b=(0,P.default)(M);!(v=(y=b.next()).done);v=!0){var w=y.value,x={},_=w.server,k=!0,S=!1,T=void 0;try{for(var C,O=(0,P.default)(w.ids);!(k=(C=O.next()).done);k=!0){var E=C.value;x[E]=t[String(_)+"/"+String(E)]}}catch(e){S=!0,T=e}finally{try{!k&&O.return&&O.return()}finally{if(S)throw T}}w.done(x)}}catch(e){m=!0,g=e}finally{try{!v&&b.return&&b.return()}finally{if(m)throw g}}})}var h,f,p,v,m,g,y,b=o.fetchTilesDebounced=(h=d,f=r.TILE_FETCH_DEBOUNCE,p=void 0,v=[],m={},g=function(){p=null,v=[],m={}},(y=function(e){var t,n;(n=m[(t=e).id])&&v[n]?v[n].ids=v[n].ids.concat(t.ids):(m[t.id]=v.length,v.push(t)),clearTimeout(p),p=setTimeout(function(){h({sessionId:u,requests:v}),g()},f)}).cancel=function(){clearTimeout(p),g()},y.immediate=function(){h({sessionId:u,requests:v})},y),w=o.fetchTiles=function(e,t,n){return(0,S.workerFetchTiles)(e,t,(void 0).sessionId,function(e){n(e)})},x=o.calculateZoomLevelFromResolutions=function(e,t){var n=e.map(function(e){return+e}).sort(function(e,t){return t-e}),r=t.range()[1]-t.range()[0],i=n.map(function(e){return(t.domain()[1]-t.domain()[0])/e}).map(function(e){return e/r}),o=i.filter(function(e){return e<1});return 0===o.length?0:i.indexOf(o[o.length-1])},_=o.calculateResolution=function(e,t){if(e.resolutions)return e.resolutions.map(function(e){return+e}).sort(function(e,t){return t-e})[t];var n=e.max_width,r=+e.bins_per_dimension;return n/(Math.pow(2,t)*r)},E=o.calculateZoomLevel=function(e,t,n,r){var i=e.range()[1]-e.range()[0],o=Math.max((n-t)/(e.domain()[1]-e.domain()[0]),1),a=Math.max(0,Math.ceil(Math.log(i/384)/Math.LN2)),s=Math.round(Math.log(o)/Math.LN2)+a,l=0;return r&&(l=Math.floor(Math.log(256)/Math.log(2)-Math.log(r)/Math.log(2))),s+=l},M=o.calculateTileAndPosInTile=function(e,t,n,r,i){var o=null,a=e.bins_per_dimension||256;o=e.resolutions?e.resolutions[r]*a:t/Math.pow(2,r);var s=Math.floor((i-n)/o);return[s,Math.floor(a*(i-s*o)/o)]},R=o.calculateTiles=function(e,t,n,r,i,o){var a=Math.min(e,i),s=o/Math.pow(2,a);return(0,l.range)(Math.max(0,Math.floor((t.domain()[0]-n)/s)),Math.min(Math.pow(2,a),Math.ceil((t.domain()[1]-n-1e-7)/s)))},j=o.calculateTileWidth=function(e,t,n){return e.resolutions?e.resolutions.map(function(e){return+e}).sort(function(e,t){return t-e})[t]*n:e.max_width/Math.pow(2,t)},I=o.calculateTilesFromResolution=function(e,t,n,r,i){var o=e*(i||256);r||(r=Number.MAX_VALUE);var a=(0,l.range)(Math.max(0,Math.floor((t.domain()[0]-n)/o)),Math.ceil(Math.min(r,t.domain()[1]-n-1e-7)/o));return 20<a.length&&(console.warn("Too many visible tiles: "+String(a.length)+" truncating to 20"),a=a.slice(0,20)),a},L=o.trackInfo=function(n,e,r,i){var o=String((0,s.trimTrailingSlash)(n))+"/tileset_info/?d="+String(e)+"&s="+String(u);T.default.publish("requestSent",o),D(o,function(e,t){T.default.publish("requestReceived",o),e?i?i("Error retrieving tilesetInfo from: "+String(n)):console.warn("Error retrieving: ",o):r(t)})};function D(r,i){o.requestsInFlight=c+=1,T.default.publish("requestSent",r);var e=(0,a.request)(r).header("Content-Type","application/json");O&&e.header("Authorization",""+String(O)),e.send("GET",function(e,t){T.default.publish("requestReceived",r);var n=t&&JSON.parse(t.response);i(e,n),o.requestsInFlight=c-=1})}var N={calculateResolution:_,calculateTileAndPosInTile:M,calculateTiles:R,calculateTilesFromResolution:I,calculateTileWidth:j,calculateZoomLevel:E,calculateZoomLevelFromResolutions:x,fetchTiles:w,fetchTilesDebounced:b,json:D,text:function(n,r){o.requestsInFlight=c+=1,T.default.publish("requestSent",n),(0,a.text)(n,function(e,t){r(e,t),T.default.publish("requestReceived",n),o.requestsInFlight=c-=1})},tileDataToPixData:o.tileDataToPixData=function(e,t,n,r,i,o){6<arguments.length&&void 0!==arguments[6]&&arguments[6];var a=arguments[7],s=e.tileData;if(s.dense){if(e.mirrored&&0<e.tileData.tilePos.length&&e.tileData.tilePos[0]==e.tileData.tilePos[1])for(var l=Math.floor(Math.sqrt(e.tileData.dense.length)),u=0;u<l;u++)for(var c=0;c<l;c++)e.tileData.dense[u*l+c]=e.tileData.dense[c*l+u];o({pixData:(0,S.workerSetPix)(s.dense.length,s.dense,t,n,r,i,a)})}else o(null)},trackInfo:L};o.default=N},function(e,t,n){n(304),e.exports=n(13).Object.keys},function(e,t,n){var r=n(55),i=n(52);n(144)("keys",function(){return function(e){return i(r(e))}})},function(e,t,i){(function(n){var r=i(309);t.encode=function(e){var t=r.parse(e);return new n(t).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").substring(0,22)},t.decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/")+"==";return r.unparse(new n(t,"base64"))},t.v4=function(){return r.v4(null,new n(16)).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").substring(0,22)},t.nice=function(){var e=r.v4(null,new n(16));return e[0]=127&e[0],e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").substring(0,22)}}).call(t,i(191).Buffer)},function(e,t,n){"use strict";t.byteLength=function(e){return 3*e.length/4-d(e)},t.toByteArray=function(e){var t,n,r,i,o,a=e.length;i=d(e),o=new c(3*a/4-i),n=0<i?a-4:a;var s=0;for(t=0;t<n;t+=4)r=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],o[s++]=r>>16&255,o[s++]=r>>8&255,o[s++]=255&r;2===i?(r=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,o[s++]=255&r):1===i&&(r=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,o[s++]=r>>8&255,o[s++]=255&r);return o},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i="",o=[],a=0,s=n-r;a<s;a+=16383)o.push(h(e,a,s<a+16383?s:a+16383));1===r?(t=e[n-1],i+=l[t>>2],i+=l[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=l[t>>10],i+=l[t>>4&63],i+=l[t<<2&63],i+="=");return o.push(i),o.join("")};for(var l=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)l[i]=r[i],u[r.charCodeAt(i)]=i;function d(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function h(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(l[(i=r)>>18&63]+l[i>>12&63]+l[i>>6&63]+l[63&i]);return o.join("")}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;0<c;o=256*o+e[t+d],d+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+e[t+d],d+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,d=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(t+=1<=a+d?h/l:h*Math.pow(2,1-d))*l&&(a++,l/=2),c<=a+d?(s=0,a=c):1<=a+d?(s=(t*l-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));8<=i;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;e[n+f]=255&a,f+=p,a/=256,u-=8);e[n+f-p]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){for(var a=n(310),i=[],o={},r=0;r<256;r++)i[r]=(r+256).toString(16).substr(1),o[i[r]]=r;function f(e,t){var n=t||0,r=i;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}var s=a(),p=[1|s[0],s[1],s[2],s[3],s[4],s[5]],v=16383&(s[6]<<8|s[7]),m=0,g=0;function l(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;o++)t[r+o]=i[o];return t||f(i)}var u=l;u.v1=function(e,t,n){var r=t&&n||0,i=t||[],o=void 0!==(e=e||{}).clockseq?e.clockseq:v,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),s=void 0!==e.nsecs?e.nsecs:g+1,l=a-m+(s-g)/1e4;if(l<0&&void 0===e.clockseq&&(o=o+1&16383),(l<0||m<a)&&void 0===e.nsecs&&(s=0),1e4<=s)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=a,v=o;var u=(1e4*(268435455&(a+=122192928e5))+(g=s))%4294967296;i[r++]=u>>>24&255,i[r++]=u>>>16&255,i[r++]=u>>>8&255,i[r++]=255&u;var c=a/4294967296*1e4&268435455;i[r++]=c>>>8&255,i[r++]=255&c,i[r++]=c>>>24&15|16,i[r++]=c>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var d=e.node||p,h=0;h<6;h++)i[r+h]=d[h];return t||f(i)},u.v4=l,u.parse=function(e,t,n){var r=t&&n||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){i<16&&(t[r+i++]=o[e])});i<16;)t[r+i++]=0;return t},u.unparse=f,e.exports=u},function(o,e,t){(function(e){var t,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var r=new Uint8Array(16);t=function(){return n.getRandomValues(r),r}}if(!t){var i=new Array(16);t=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}o.exports=t}).call(e,t(65))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=n(6);t.default=function(e,t){if(!t||!t.cumPositions||!t.cumPositions.length)return null;var n=(0,s.chromInfoBisector)(t.cumPositions,e),r=t.cumPositions[t.cumPositions.length-1].chr,i=t.chromLengths[r];n-=0<n&&1;var o=Math.floor(e-t.cumPositions[n].pos),a=0;return o<0&&(a=o-1,o=1),n===t.cumPositions.length-1&&i<o&&(a=o-i,o=i),[t.cumPositions[n].chr,o,a,n]}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(t,n){return function(e){return e%t*n+Math.floor(e/t)}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e};t.default=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:i;return e.map(function(e,t){return e+n[r(t)]})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(149),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){if("http://www.w3.org/2000/svg"===e.namespaceURI){if(!(0,o.default)(e,t)){var n=e.getAttribute("class")||"";e.setAttribute("class",String(n)+" "+String(t))}}else e.classList?e.classList.add(t):(0,o.default)(e,t)||(e.className+=" "+String(t))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(87),s=(r=i)&&r.__esModule?r:{default:r};t.default=function(r,i,o){var a=document.createElement("canvas");return new s.default(function(e,t){var n=new window.Image;n.onload=function(){a.width=i||n.width,a.height=o||n.height,a.getContext("2d").drawImage(n,0,0),e(a)},n.onerror=function(){t("Could not convert base64 to canvas")},n.src="data:image/png;base64,"+String(r)})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(!function(){var e=new Error('Cannot find module "d3-array"');throw e.code="MODULE_NOT_FOUND",e}()).bisector)(function(e){return e.pos}).left;t.default=r},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n){return n.chrPositions[e].pos+t}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(20),s=n(!function(){var e=new Error('Cannot find module "d3-array"');throw e.code="MODULE_NOT_FOUND",e}()),l=n(18);t.default=function(n){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t=n.map(function(e,t){return t*(255/(n.length-1))}),r=(0,a.scaleLinear)().domain(t).range(n),i=e?255:254,o=(0,s.range)(i,-1,-1).map(r).map(function(e){var t=(0,l.rgb)(e);return[t.r,t.g,t.b,255]});return o.length<256&&o.push([255,255,255,0]),o}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19));t.default=function(e){var t=(0,r.color)(e);return i.utils.rgb2hex([t.r/255,t.g/255,t.b/255])}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=t.debounce=function(i,o,a){var s=void 0;return function(){clearTimeout(s),s=null},function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=a&&!s;clearTimeout(s),s=setTimeout(function(){s=null,a||i.apply(void 0,t)},o),r&&i.apply(void 0,t)}};t.default=n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t={};return e.forEach(function(e){t[e[0]]=e[1]}),t}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push([n,e[n]]);return t}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}},function(e,t){function n(e,t){var n=new Blob([t],{type:"text/csv"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(n,e);else{var r=window.document.createElement("a");r.href=window.URL.createObjectURL(n),r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.download=n,t.default=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(12);t.default=function(t){return t.center=t.center||[],t.left=t.left||[],t.right=t.right||[],t.top=t.top||[],t.bottom=t.bottom||[],t.whole=t.whole||[],t.gallery=t.gallery||[],["top","bottom","gallery"].map(function(e){return t[e]}).forEach(function(e){return e.forEach(function(e){var t=r.TRACKS_INFO_BY_TYPE[e.type];"height"in e&&!(t&&e.height<t.minHeight)||(e.height=t&&t.minHeight||r.MIN_HORIZONTAL_HEIGHT)})}),["left","right","gallery"].map(function(e){return t[e]}).forEach(function(e){return e.forEach(function(e){var t=r.TRACKS_INFO_BY_TYPE[e.type];"width"in e&&!(t&&e.width<t.minWidth)||(e.width=t&&t.minWidth||r.MIN_VERTICAL_WIDTH)})}),t}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=G(n(19)),i=W(n(194)),o=W(n(199)),a=W(n(150)),s=W(n(200)),l=W(n(205)),u=W(n(155)),c=W(n(206)),d=W(n(95)),h=W(n(207)),f=W(n(208)),p=W(n(209)),v=W(n(210)),m=W(n(93)),g=W(n(211)),y=W(n(212)),b=W(n(213)),w=W(n(240)),x=W(n(242)),_=W(n(243)),k=W(n(244)),S=W(n(246)),T=W(n(248)),C=W(n(170)),O=W(n(172)),E=W(n(482)),M=W(n(41)),P=W(n(86)),A=W(n(249)),R=W(n(151)),j=W(n(56)),I=W(n(250)),L=W(n(109)),D=W(n(251)),N=W(n(245)),B=W(n(252)),F=W(n(48)),V=W(n(198)),z=n(483),H=G(n(9)),U=G(n(6)),q=G(n(12));function W(e){return e&&e.__esModule?e:{default:e}}function G(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var Y={PIXI:r},X={Annotations2dTrack:i.default,ArrowheadDomainsTrack:o.default,BarTrack:a.default,BedLikeTrack:s.default,CNVIntervalTrack:l.default,CombinedTrack:u.default,DivergentBarTrack:c.default,HeatmapTiledPixiTrack:d.default,Horizontal2DDomainsTrack:h.default,HorizontalChromosomeLabels:f.default,HorizontalGeneAnnotationsTrack:p.default,HorizontalHeatmapTrack:v.default,HorizontalLine1DPixiTrack:m.default,HorizontalMultivecTrack:g.default,HorizontalPoint1DPixiTrack:y.default,HorizontalTiledPlot:b.default,HorizontalTrack:w.default,Id2DTiledPixiTrack:x.default,IdHorizontal1DTiledPixiTrack:_.default,IdVertical1DTiledPixiTrack:k.default,LeftAxisTrack:S.default,MapboxTilesTrack:T.default,MoveableTrack:C.default,OneDimensionalMixin:E.default,OSMTilesTrack:O.default,PixiTrack:M.default,SVGTrack:P.default,SquareMarkersTrack:A.default,Tiled1DPixiTrack:R.default,TiledPixiTrack:j.default,TopAxisTrack:I.default,Track:L.default,ValueIntervalTrack:D.default,VerticalTiled1DPixiTrack:N.default,VerticalTrack:B.default},Z={ContextMenuItem:F.default,DataFetcher:V.default,LruCache:z.LruCache};t.default={libraries:Y,tracks:X,factories:Z,services:H,utils:U,configs:q}},function(e,t,n){n(50),n(329),e.exports=n(13).Array.from},function(e,t,n){"use strict";var h=n(38),r=n(15),f=n(55),p=n(179),v=n(180),m=n(74),g=n(330),y=n(91);r(r.S+r.F*!n(186)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,i,o=f(e),a="function"==typeof this?this:Array,s=arguments.length,l=1<s?arguments[1]:void 0,u=void 0!==l,c=0,d=y(o);if(u&&(l=h(l,2<s?arguments[2]:void 0,2)),null==d||a==Array&&v(d))for(n=new a(t=m(o.length));c<t;c++)g(n,c,u?l(o[c],c):o[c]);else for(i=d.call(o),n=new a;!(r=i.next()).done;c++)g(n,c,u?p(i,l,[r.value,c],!0):r.value);return n.length=c,n}})},function(e,t,n){"use strict";var r=n(25),i=n(51);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){n(126),n(50),n(64),n(332),n(338),n(341),n(343),e.exports=n(13).Set},function(e,t,n){"use strict";var r=n(333),i=n(196);e.exports=n(334)("Set",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var a=n(25).f,s=n(73),l=n(136),u=n(38),c=n(134),d=n(90),r=n(70),i=n(106),o=n(185),h=n(28),f=n(138).fastKey,p=n(196),v=h?"_s":"size",m=function(e,t){var n,r=f(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,o,n,r){var i=e(function(e,t){c(e,i,o,"_i"),e._t=o,e._i=s(null),e._f=void 0,e._l=void 0,e[v]=0,null!=t&&d(t,n,e[r],e)});return l(i.prototype,{clear:function(){for(var e=p(this,o),t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var t=p(this,o),n=m(t,e);if(n){var r=n.n,i=n.p;delete t._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),t._f==n&&(t._f=r),t._l==n&&(t._l=i),t[v]--}return!!n},forEach:function(e){p(this,o);for(var t,n=u(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!m(p(this,o),e)}}),h&&a(i.prototype,"size",{get:function(){return p(this,o)[v]}}),i},def:function(e,t,n){var r,i,o=m(e,t);return o?o.v=n:(e._l=o={i:i=f(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,n,t){r(e,n,function(e,t){this._t=p(e,n),this._k=t,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?i(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,i(1))},t?"entries":"values",!t,!0),o(n)}}},function(e,t,n){"use strict";var d=n(17),h=n(15),f=n(138),p=n(45),v=n(30),m=n(136),g=n(90),y=n(134),b=n(27),w=n(54),x=n(25).f,_=n(335)(0),k=n(28);e.exports=function(n,e,t,r,i,o){var a=d[n],s=a,l=i?"set":"add",u=s&&s.prototype,c={};return k&&"function"==typeof s&&(o||u.forEach&&!p(function(){(new s).entries().next()}))?(s=e(function(e,t){y(e,s,n,"_c"),e._c=new a,null!=t&&g(t,i,e[l],e)}),_("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(r){var i="add"==r||"set"==r;r in u&&(!o||"clear"!=r)&&v(s.prototype,r,function(e,t){if(y(this,s,r),!i&&o&&!b(e))return"get"==r&&void 0;var n=this._c[r](0===e?0:e,t);return i?this:n})}),o||x(s.prototype,"size",{get:function(){return this._c.size}})):(s=r.getConstructor(e,n,i,l),m(s.prototype,t),f.NEED=!0),w(s,n),c[n]=s,h(h.G+h.W+h.F,c),o||r.setStrong(s,n,i),s}},function(e,t,n){var b=n(38),w=n(89),x=n(55),_=n(74),r=n(336);e.exports=function(d,e){var h=1==d,f=2==d,p=3==d,v=4==d,m=6==d,g=5==d||m,y=e||r;return function(e,t,n){for(var r,i,o=x(e),a=w(o),s=b(t,n,3),l=_(a.length),u=0,c=h?y(e,l):f?y(e,0):void 0;u<l;u++)if((g||u in a)&&(i=s(r=a[u],u,o),d))if(h)c[u]=i;else if(i)switch(d){case 3:return!0;case 5:return r;case 6:return u;case 2:c.push(r)}else if(v)return!1;return m?-1:p||v?v:c}}},function(e,t,n){var r=n(337);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(27),i=n(187),o=n(16)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(15);r(r.P+r.R,"Set",{toJSON:n(339)("Set")})},function(e,t,n){var r=n(77),i=n(340);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(90);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(342)("Set")},function(e,t,n){"use strict";var r=n(15);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(344)("Set")},function(e,t,n){"use strict";var r=n(15),a=n(61),s=n(38),l=n(90);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,i,o=arguments[1];return a(this),(t=void 0!==o)&&a(o),null==e?new this:(n=[],t?(r=0,i=s(o,arguments[2],2),l(e,!1,function(e){n.push(i(e,r++))})):l(e,!1,n.push,n),new this(n))}})}},function(e,t,n){e.exports={default:n(346),__esModule:!0}},function(e,t,n){n(64),n(50),e.exports=n(347)},function(e,t,n){var r=n(77),i=n(16)("iterator"),o=n(39);e.exports=n(13).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){n(349),e.exports=n(13).Object.getPrototypeOf},function(e,t,n){var r=n(55),i=n(105);n(144)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){n(351);var r=n(13).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(15);r(r.S+r.F*!n(28),"Object",{defineProperty:n(25).f})},function(e,t,n){e.exports={default:n(353),__esModule:!0}},function(e,t,n){n(354);var r=n(13).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var r=n(34),i=n(141).f;n(144)("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},function(e,t,n){e.exports={default:n(356),__esModule:!0}},function(e,t,n){n(357),e.exports=n(13).Object.setPrototypeOf},function(e,t,n){var r=n(15);r(r.S,"Object",{setPrototypeOf:n(358).set})},function(e,t,i){var n=i(27),r=i(26),o=function(e,t){if(r(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,n,r){try{(r=i(38)(Function.call,i(141).f(Object.prototype,"__proto__").set,2))(e,[]),n=!(e instanceof Array)}catch(e){n=!0}return function(e,t){return o(e,t),n?e.__proto__=t:r(e,t),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(360),__esModule:!0}},function(e,t,n){n(361);var r=n(13).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(15);r(r.S,"Object",{create:n(73)})},function(e,t,n){var r=n(13),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){n(364),e.exports=n(13).Object.assign},function(e,t,n){var r=n(15);r(r.S+r.F,"Object",{assign:n(365)})},function(e,t,n){"use strict";var h=n(52),f=n(140),p=n(92),v=n(55),m=n(89),i=Object.assign;e.exports=!i||n(45)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=i({},e)[n]||Object.keys(i({},t)).join("")!=r})?function(e,t){for(var n=v(e),r=arguments.length,i=1,o=f.f,a=p.f;i<r;)for(var s,l=m(arguments[i++]),u=o?h(l).concat(o(l)):h(l),c=u.length,d=0;d<c;)a.call(l,s=u[d++])&&(n[s]=l[s]);return n}:i},function(e,t,n){n(367),e.exports=n(13).Object.values},function(e,t,n){var r=n(15),i=n(368)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var l=n(52),u=n(34),c=n(92).f;e.exports=function(s){return function(e){for(var t,n=u(e),r=l(n),i=r.length,o=0,a=[];o<i;)c.call(n,t=r[o++])&&a.push(s?[t,n[t]]:n[t]);return a}}},function(e,t,n){"use strict";e.exports=function(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(0<e)return function(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}(0|e,t);break;case"object":if("number"==typeof e.length)return function e(t,n,r){var i=0|t[r];if(i<=0)return[];var o,a=new Array(i);if(r===t.length-1)for(o=0;o<i;++o)a[o]=n;else for(o=0;o<i;++o)a[o]=e(t,n,r+1);return a}(e,t,0)}return[]}},function(e,t,n){"use strict";e.exports=function(e,t){t<=4*j?I(0,t-1,e):function e(t,n,r){var i=(n-t+1)/6|0,o=t+i,a=n-i,s=t+n>>1,l=s-i,u=s+i,c=o,d=l,h=s,f=u,p=a,v=t+1,m=n-1,g=0;F(c,d,r)&&(g=c,c=d,d=g);F(f,p,r)&&(g=f,f=p,p=g);F(c,h,r)&&(g=c,c=h,h=g);F(d,h,r)&&(g=d,d=h,h=g);F(c,f,r)&&(g=c,c=f,f=g);F(h,f,r)&&(g=h,h=f,f=g);F(d,p,r)&&(g=d,d=p,p=g);F(d,h,r)&&(g=d,d=h,h=g);F(f,p,r)&&(g=f,f=p,p=g);var y=r[2*d];var b=r[2*d+1];var w=r[2*f];var x=r[2*f+1];var _=2*c;var k=2*h;var S=2*p;var T=2*o;var C=2*s;var O=2*a;for(var E=0;E<2;++E){var M=r[_+E],P=r[k+E],A=r[S+E];r[T+E]=M,r[C+E]=P,r[O+E]=A}D(l,t,r);D(u,n,r);for(var R=v;R<=m;++R)if(V(R,y,b,r))R!==v&&L(R,v,r),++v;else if(!V(R,w,x,r))for(;;){if(V(m,w,x,r)){V(m,y,b,r)?(N(R,v,m,r),++v):L(R,m,r),--m;break}if(--m<R)break}B(t,v-1,y,b,r);B(n,m+1,w,x,r);v-2-t<=j?I(t,v-2,r):e(t,v-2,r);n-(m+2)<=j?I(m+2,n,r):e(m+2,n,r);m-v<=j?I(v,m,r):e(v,m,r)}(0,t-1,e)};var j=32;function I(e,t,n){for(var r=2*(e+1),i=e+1;i<=t;++i){for(var o=n[r++],a=n[r++],s=i,l=r-2;s-- >e;){var u=n[l-2],c=n[l-1];if(u<o)break;if(u===o&&c<a)break;n[l]=u,n[l+1]=c,l-=2}n[l]=o,n[l+1]=a}}function L(e,t,n){t*=2;var r=n[e*=2],i=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=r,n[t+1]=i}function D(e,t,n){t*=2,n[e*=2]=n[t],n[e+1]=n[t+1]}function N(e,t,n,r){t*=2,n*=2;var i=r[e*=2],o=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=r[n],r[t+1]=r[n+1],r[n]=i,r[n+1]=o}function B(e,t,n,r,i){t*=2,i[e*=2]=i[t],i[t]=n,i[e+1]=i[t+1],i[t+1]=r}function F(e,t,n){t*=2;var r=n[e*=2],i=n[t];return!(r<i)&&(r!==i||n[e+1]>n[t+1])}function V(e,t,n,r){var i=r[e*=2];return i<t||i===t&&r[e+1]<n}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s,l){!function(e,t){var n=8*N.log2(t+1)*(e+1)|0,r=N.nextPow2($*n);J.length<r&&(D.free(J),J=D.mallocInt32(r));var i=N.nextPow2(Q*n);ee<i&&(D.free(ee),ee=D.mallocDouble(i))}(e,r+a);var u,c=0,d=2*e;te(c++,0,0,r,0,a,n?16:0,-1/0,1/0),n||te(c++,0,0,a,0,r,1,-1/0,1/0);for(;0<c;){var h=(c-=1)*$,f=J[h],p=J[h+1],v=J[h+2],m=J[h+3],g=J[h+4],y=J[h+5],b=c*Q,w=ee[b],x=ee[b+1],_=1&y,k=!!(16&y),S=i,T=o,C=s,O=l;if(_&&(S=s,T=l,C=i,O=o),!(2&y&&(v=Y(e,f,p,v,S,T,x))<=p||4&y&&(p=X(e,f,p,v,S,T,w),v<=p))){var E=v-p,M=g-m;if(k){if(e*E*(E+M)<q){if(void 0!==(u=V.scanComplete(e,f,t,p,v,S,T,m,g,C,O)))return u;continue}}else{if(e*Math.min(E,M)<H){if(void 0!==(u=B(e,f,t,_,p,v,S,T,m,g,C,O)))return u;continue}if(e*E*M<U){if(void 0!==(u=V.scanBipartite(e,f,t,_,p,v,S,T,m,g,C,O)))return u;continue}}var P=W(e,f,p,v,S,T,w,x);if(p<P)if(e*(P-p)<H){if(void 0!==(u=F(e,f+1,t,p,P,S,T,m,g,C,O)))return u}else if(f===e-2){if(void 0!==(u=_?V.sweepBipartite(e,t,m,g,C,O,p,P,S,T):V.sweepBipartite(e,t,p,P,S,T,m,g,C,O)))return u}else te(c++,f+1,p,P,m,g,_,-1/0,1/0),te(c++,f+1,m,g,p,P,1^_,-1/0,1/0);if(P<v){var A=z(e,f,m,g,C,O),R=C[d*A+f],j=G(e,f,A,g,C,O,R);if(j<g&&te(c++,f,P,v,j,g,(4|_)+(k?16:0),R,x),m<A&&te(c++,f,P,v,m,A,(2|_)+(k?16:0),w,R),A+1===j){if(void 0!==(u=k?re(e,f,t,P,v,S,T,A,C,O[A]):ne(e,f,t,_,P,v,S,T,A,C,O[A])))return u}else if(A<j){var I;if(k){if(I=Z(e,f,P,v,S,T,R),P<I){var L=G(e,f,P,I,S,T,R);if(f===e-2){if(P<L&&void 0!==(u=V.sweepComplete(e,t,P,L,S,T,A,j,C,O)))return u;if(L<I&&void 0!==(u=V.sweepBipartite(e,t,L,I,S,T,A,j,C,O)))return u}else P<L&&te(c++,f+1,P,L,A,j,16,-1/0,1/0),L<I&&(te(c++,f+1,L,I,A,j,0,-1/0,1/0),te(c++,f+1,A,j,L,I,1,-1/0,1/0))}}else I=_?K(e,f,P,v,S,T,R):Z(e,f,P,v,S,T,R),P<I&&(f===e-2?u=_?V.sweepBipartite(e,t,A,j,C,O,P,I,S,T):V.sweepBipartite(e,t,P,I,S,T,A,j,C,O):(te(c++,f+1,P,I,A,j,_,-1/0,1/0),te(c++,f+1,A,j,P,I,1^_,-1/0,1/0)))}}}}};var D=n(153),N=n(154),r=n(372),B=r.partial,F=r.full,V=n(202),z=n(373),i=n(203),H=128,U=1<<22,q=1<<22,W=i("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),G=i("lo===p0",["p0"]),Y=i("lo<p0",["p0"]),X=i("hi<=p0",["p0"]),Z=i("lo<=p0&&p0<=hi",["p0"]),K=i("lo<p0&&p0<=hi",["p0"]),$=6,Q=2,J=D.mallocInt32(1024),ee=D.mallocDouble(1024);function te(e,t,n,r,i,o,a,s,l){var u=$*e;J[u]=t,J[u+1]=n,J[u+2]=r,J[u+3]=i,J[u+4]=o,J[u+5]=a;var c=Q*e;ee[c]=s,ee[c+1]=l}function ne(e,t,n,r,i,o,a,s,l,u,c){var d=2*e,h=l*d,f=u[h+t];e:for(var p=i,v=i*d;p<o;++p,v+=d){var m=a[v+t],g=a[v+t+e];if(!(f<m||g<f)&&(!r||f!==m)){for(var y,b=s[p],w=t+1;w<e;++w){m=a[v+w],g=a[v+w+e];var x=u[h+w],_=u[h+w+e];if(g<x||_<m)continue e}if(void 0!==(y=r?n(c,b):n(b,c)))return y}}}function re(e,t,n,r,i,o,a,s,l,u){var c=2*e,d=s*c,h=l[d+t];e:for(var f=r,p=r*c;f<i;++f,p+=c){var v=a[f];if(v!==u){var m=o[p+t],g=o[p+t+e];if(!(h<m||g<h)){for(var y=t+1;y<e;++y){m=o[p+y],g=o[p+y+e];var b=l[d+y],w=l[d+y+e];if(g<b||w<m)continue e}var x=n(v,u);if(void 0!==x)return x}}}}},function(e,t,n){"use strict";var f="d",p="ax",v="vv",m="es",g="rs",y="re",b="rb",w="ri",x="rp",_="bs",k="be",S="bb",T="bi",C="bp",O="rv",E="Q",M=[f,p,v,g,y,b,w,_,k,S,T];function r(c){var e="bruteForce"+(c?"Full":"Partial"),d=[],t=M.slice();c||t.splice(3,0,"fp");var h=["function "+e+"("+t.join()+"){"];function n(e,t){var n,r,i,o,a,s,l,u=(a=["function ",o="bruteForce"+((n=e)?"Red":"Blue")+((r=t)?"Flip":"")+((i=c)?"Full":""),"(",M.join(),"){","var ",m,"=2*",f,";"],s="for(var i="+g+","+x+"="+m+"*"+g+";i<"+y+";++i,"+x+"+="+m+"){var x0="+b+"["+p+"+"+x+"],x1="+b+"["+p+"+"+x+"+"+f+"],xi="+w+"[i];",l="for(var j="+_+","+C+"="+m+"*"+_+";j<"+k+";++j,"+C+"+="+m+"){var y0="+S+"["+p+"+"+C+"],"+(i?"y1="+S+"["+p+"+"+C+"+"+f+"],":"")+"yi="+T+"[j];",n?a.push(s,E,":",l):a.push(l,E,":",s),i?a.push("if(y1<x0||x1<y0)continue;"):r?a.push("if(y0<=x0||x1<y0)continue;"):a.push("if(y0<x0||x1<y0)continue;"),a.push("for(var k="+p+"+1;k<"+f+";++k){var r0="+b+"[k+"+x+"],r1="+b+"[k+"+f+"+"+x+"],b0="+S+"[k+"+C+"],b1="+S+"[k+"+f+"+"+C+"];if(r1<b0||b1<r0)continue "+E+";}var "+O+"="+v+"("),r?a.push("yi,xi"):a.push("xi,yi"),a.push(");if("+O+"!==void 0)return "+O+";}}}"),{name:o,code:a.join("")});d.push(u.code),h.push("return "+u.name+"("+M.join()+");")}h.push("if("+y+"-"+g+">"+k+"-"+_+"){"),c?(n(!0,!1),h.push("}else{"),n(!1,!1)):(h.push("if(fp){"),n(!0,!0),h.push("}else{"),n(!0,!1),h.push("}}else{if(fp){"),n(!1,!0),h.push("}else{"),n(!1,!1),h.push("}")),h.push("}}return "+e);var r=d.join("")+h.join("");return new Function(r)()}t.partial=r(!1),t.full=r(!0)},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o){if(r<=n+1)return n;var a=n,s=r,l=r+n>>>1,u=2*e,c=l,d=i[u*l+t];for(;a<s;){if(s-a<T){C(e,t,a,s,i,o),d=i[u*l+t];break}var h=s-a,f=Math.random()*h+a|0,p=i[u*f+t],v=Math.random()*h+a|0,m=i[u*v+t],g=Math.random()*h+a|0,y=i[u*g+t];p<=m?m<=y?(c=v,d=m):y<=p?(c=f,d=p):(c=g,d=y):y<=m?(c=v,d=m):p<=y?(c=f,d=p):(c=g,d=y);for(var b=u*(s-1),w=u*c,x=0;x<u;++x,++b,++w){var _=i[b];i[b]=i[w],i[w]=_}var k=o[s-1];o[s-1]=o[c],o[c]=k,c=S(e,t,a,s-1,i,o,d);for(var b=u*(s-1),w=u*c,x=0;x<u;++x,++b,++w){var _=i[b];i[b]=i[w],i[w]=_}var k=o[s-1];if(o[s-1]=o[c],o[c]=k,l<c){for(s=c-1;a<s&&i[u*(s-1)+t]===d;)s-=1;s+=1}else{if(!(c<l))break;for(a=c+1;a<s&&i[u*a+t]===d;)a+=1}}return S(e,t,n,l,i,o,i[u*l+t])};var S=n(203)("lo<p0",["p0"]),T=8;function C(e,t,n,r,i,o){for(var a=2*e,s=a*(n+1)+t,l=n+1;l<r;++l,s+=a)for(var u=i[s],c=l,d=a*(l-1);n<c&&i[d+t]>u;--c,d-=a){for(var h=d,f=d+a,p=0;p<a;++p,++h,++f){var v=i[h];i[h]=i[f],i[f]=v}var m=o[c];o[c]=o[c-1],o[c-1]=m}}},function(e,t,n){e.exports=function(e,t){for(var n=t[0],r=t[1],i=e.length,o=1,a=i,s=0,l=i-1;s<a;l=s++){var u=e[s],c=e[l],d=u[1],h=c[1];if(h<d){if(h<r&&r<d){var f=k(u,c,t);if(0===f)return 0;o^=0<f|0}else if(r===d){var p=e[(s+1)%i],v=p[1];if(d<v){var f=k(u,c,t);if(0===f)return 0;o^=0<f|0}}}else if(d<h){if(d<r&&r<h){var f=k(u,c,t);if(0===f)return 0;o^=f<0|0}else if(r===d){var p=e[(s+1)%i],v=p[1];if(v<d){var f=k(u,c,t);if(0===f)return 0;o^=f<0|0}}}else if(r===d){var m=Math.min(u[0],c[0]),g=Math.max(u[0],c[0]);if(0===s){for(;0<l;){var y=(l+i-1)%i,b=e[y];if(b[1]!==r)break;var w=b[0];m=Math.min(m,w),g=Math.max(g,w),l=y}if(0===l)return m<=n&&n<=g?0:1;a=l+1}for(var x=e[(l+i-1)%i][1];s+1<a;){var b=e[s+1];if(b[1]!==r)break;var w=b[0];m=Math.min(m,w),g=Math.max(g,w),s+=1}if(m<=n&&n<=g)return 0;var _=e[(s+1)%i][1];n<m&&x<r!=_<r&&(o^=1)}}return 2*o-1};var k=n(375)},function(o,e,t){"use strict";var c=t(204),d=t(376),h=t(377),f=t(379);function p(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var i=n[r-1]=new Array(e.length-1),o=0,a=0;o<e.length;++o)o!==t&&(i[a++]=e[r][o]);return n}function v(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",v(e.slice(0,t)),",",v(e.slice(t)),")"].join("")}function m(e){if(2===e.length)return[["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("")];for(var t=[],n=0;n<e.length;++n)t.push(["scale(",v(m(p(e,n))),",",(r=n,1&r?"-":""),e[0][n],")"].join(""));return t;var r}function a(e){for(var t=[],n=[],r=function(e){for(var t=new Array(e),n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m",r,"[",e-n-1,"]"].join("")}return t}(e),i=[],o=0;o<e;++o)0==(1&o)?t.push.apply(t,m(p(r,o))):n.push.apply(n,m(p(r,o))),i.push("m"+o);var a=v(t),s=v(n),l="orientation"+e+"Exact",u=["function ",l,"(",i.join(),"){var p=",a,",n=",s,",d=sub(p,n);return d[d.length-1];};return ",l].join("");return new Function("sum","prod","scale","sub",u)(d,c,h,f)}var l=a(3),x=a(4),s=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){var r,i=(e[1]-n[1])*(t[0]-n[0]),o=(e[0]-n[0])*(t[1]-n[1]),a=i-o;if(0<i){if(o<=0)return a;r=i+o}else{if(!(i<0))return a;if(0<=o)return a;r=-(i+o)}var s=33306690738754716e-32*r;return s<=a||a<=-s?a:l(e,t,n)},function(e,t,n,r){var i=e[0]-r[0],o=t[0]-r[0],a=n[0]-r[0],s=e[1]-r[1],l=t[1]-r[1],u=n[1]-r[1],c=e[2]-r[2],d=t[2]-r[2],h=n[2]-r[2],f=o*u,p=a*l,v=a*s,m=i*u,g=i*l,y=o*s,b=c*(f-p)+d*(v-m)+h*(g-y),w=7771561172376103e-31*((Math.abs(f)+Math.abs(p))*Math.abs(c)+(Math.abs(v)+Math.abs(m))*Math.abs(d)+(Math.abs(g)+Math.abs(y))*Math.abs(h));return w<b||w<-b?b:x(e,t,n,r)}];!function(){for(;s.length<=5;)s.push(a(s.length));for(var e=[],t=["slow"],n=0;n<=5;++n)e.push("a"+n),t.push("o"+n);var r=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=5;++n)r.push("case ",n,":return o",n,"(",e.slice(0,n).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),t.push(r.join(""));var i=Function.apply(void 0,t);for(o.exports=i.apply(void 0,[function(e){var t=s[e.length];return t||(t=s[e.length]=a(e.length)),t.apply(void 0,e)}].concat(s)),n=0;n<=5;++n)o.exports[n]=s[n]}()},function(e,t,n){"use strict";e.exports=function(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return function(e,t){var n=e+t,r=n-e,i=e-(n-r)+(t-r);if(i)return[i,n];return[n]}(e[0],t[0]);var i,o,a=new Array(n+r),s=0,l=0,u=0,c=Math.abs,d=e[l],h=c(d),f=t[u],p=c(f);h<p?(o=d,(l+=1)<n&&(d=e[l],h=c(d))):(o=f,(u+=1)<r&&(f=t[u],p=c(f)));l<n&&h<p||r<=u?(i=d,(l+=1)<n&&(d=e[l],h=c(d))):(i=f,(u+=1)<r&&(f=t[u],p=c(f)));var v,m,g=i+o,y=g-i,b=o-y,w=b,x=g;for(;l<n&&u<r;)h<p?(i=d,(l+=1)<n&&(d=e[l],h=c(d))):(i=f,(u+=1)<r&&(f=t[u],p=c(f))),(b=(o=w)-(y=(g=i+o)-i))&&(a[s++]=b),w=x-((v=x+g)-(m=v-x))+(g-m),x=v;for(;l<n;)(b=(o=w)-(y=(g=(i=d)+o)-i))&&(a[s++]=b),w=x-((v=x+g)-(m=v-x))+(g-m),x=v,(l+=1)<n&&(d=e[l]);for(;u<r;)(b=(o=w)-(y=(g=(i=f)+o)-i))&&(a[s++]=b),w=x-((v=x+g)-(m=v-x))+(g-m),x=v,(u+=1)<r&&(f=t[u]);w&&(a[s++]=w);x&&(a[s++]=x);s||(a[s++]=0);return a.length=s,a}},function(e,t,n){"use strict";var v=n(204),m=n(378);e.exports=function(e,t){var n=e.length;if(1===n){var r=v(e[0],t);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;v(e[0],t,o),o[0]&&(i[s++]=o[0]);for(var l=1;l<n;++l){v(e[l],t,a);var u=o[1];m(u,a[0],o),o[0]&&(i[s++]=o[0]);var c=a[1],d=o[1],h=c+d,f=h-c,p=d-f;o[1]=h,p&&(i[s++]=p)}o[1]&&(i[s++]=o[1]);0===s&&(i[s++]=0);return i.length=s,i}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=e+t,i=r-e,o=t-i,a=e-(r-i);if(n)return n[0]=a+o,n[1]=r,n;return[a+o,r]}},function(e,t,n){"use strict";e.exports=function(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return function(e,t){var n=e+t,r=n-e,i=e-(n-r)+(t-r);if(i)return[i,n];return[n]}(e[0],-t[0]);var i,o,a=new Array(n+r),s=0,l=0,u=0,c=Math.abs,d=e[l],h=c(d),f=-t[u],p=c(f);h<p?(o=d,(l+=1)<n&&(d=e[l],h=c(d))):(o=f,(u+=1)<r&&(f=-t[u],p=c(f)));l<n&&h<p||r<=u?(i=d,(l+=1)<n&&(d=e[l],h=c(d))):(i=f,(u+=1)<r&&(f=-t[u],p=c(f)));var v,m,g=i+o,y=g-i,b=o-y,w=b,x=g;for(;l<n&&u<r;)h<p?(i=d,(l+=1)<n&&(d=e[l],h=c(d))):(i=f,(u+=1)<r&&(f=-t[u],p=c(f))),(b=(o=w)-(y=(g=i+o)-i))&&(a[s++]=b),w=x-((v=x+g)-(m=v-x))+(g-m),x=v;for(;l<n;)(b=(o=w)-(y=(g=(i=d)+o)-i))&&(a[s++]=b),w=x-((v=x+g)-(m=v-x))+(g-m),x=v,(l+=1)<n&&(d=e[l]);for(;u<r;)(b=(o=w)-(y=(g=(i=f)+o)-i))&&(a[s++]=b),w=x-((v=x+g)-(m=v-x))+(g-m),x=v,(u+=1)<r&&(f=-t[u]);w&&(a[s++]=w);x&&(a[s++]=x);s||(a[s++]=0);return a.length=s,a}},function(e,t,n){"use strict";var r=n(381),a=n(382),s=n(383);e.exports=function(){function e(e,t,n,r,i,o){o!==s&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n}},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";var d=function(e){};e.exports=function(e,t,n,r,i,o,a,s){if(d(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();t.default=function(n){var e,t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return t=e=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var b=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return b.handleStart=function(e){var t=b.props,n=t.distance,r=t.shouldCancelStart;if(2===e.button||r(e))return!1;b._touched=!0,b._pos={x:e.pageX,y:e.pageY};var i=(0,w.closest)(e.target,function(e){return null!=e.sortableInfo});if(i&&i.sortableInfo&&b.nodeIsChild(i)&&!b.state.sorting){var o=b.props.useDragHandle,a=i.sortableInfo,s=a.index,l=a.collection;if(o&&!(0,w.closest)(e.target,function(e){return null!=e.sortableHandle}))return;b.manager.active={index:s,collection:l},"a"===e.target.tagName.toLowerCase()&&e.preventDefault(),n||(0===b.props.pressDelay?b.handlePress(e):b.pressTimer=setTimeout(function(){return b.handlePress(e)},b.props.pressDelay))}},b.nodeIsChild=function(e){return e.sortableInfo.manager===b.manager},b.handleMove=function(e){var t=b.props,n=t.distance,r=t.pressThreshold;if(!b.state.sorting&&b._touched){b._delta={x:b._pos.x-e.pageX,y:b._pos.y-e.pageY};var i=Math.abs(b._delta.x)+Math.abs(b._delta.y);n||r&&!(r&&r<=i)?n&&n<=i&&b.manager.isActive()&&b.handlePress(e):(clearTimeout(b.cancelTimer),b.cancelTimer=setTimeout(b.cancel,0))}},b.handleEnd=function(){var e=b.props.distance;b._touched=!1,e||b.cancel()},b.cancel=function(){b.state.sorting||(clearTimeout(b.pressTimer),b.manager.active=null)},b.handlePress=function(e){var t=b.manager.getActive();if(t){var n=b.props,r=n.axis,i=n.getHelperDimensions,o=n.helperClass,a=n.hideSortableGhost,s=n.onSortStart,l=n.useWindowAsScrollContainer,u=t.node,c=t.collection,d=u.sortableInfo.index,h=(0,w.getElementMargin)(u),f=b.container.getBoundingClientRect(),p=i({index:d,node:u,collection:c});b.node=u,b.margin=h,b.width=p.width,b.height=p.height,b.marginOffset={x:b.margin.left+b.margin.right,y:Math.max(b.margin.top,b.margin.bottom)},b.boundingClientRect=u.getBoundingClientRect(),b.containerBoundingRect=f,b.index=d,b.newIndex=d,b.axis={x:0<=r.indexOf("x"),y:0<=r.indexOf("y")},b.offsetEdge=b.getEdgeOffset(u),b.initialOffset=b.getOffset(e),b.initialScroll={top:b.scrollContainer.scrollTop,left:b.scrollContainer.scrollLeft},b.initialWindowScroll={top:window.pageYOffset,left:window.pageXOffset};var v,m=u.querySelectorAll("input, textarea, select"),g=u.cloneNode(!0),y=[].concat(x(g.querySelectorAll("input, textarea, select")));if(y.forEach(function(e,t){"file"!==e.type&&m[t]&&(e.value=m[t].value)}),b.helper=b.document.body.appendChild(g),b.helper.style.position="fixed",b.helper.style.top=b.boundingClientRect.top-h.top+"px",b.helper.style.left=b.boundingClientRect.left-h.left+"px",b.helper.style.width=b.width+"px",b.helper.style.height=b.height+"px",b.helper.style.boxSizing="border-box",b.helper.style.pointerEvents="none",a&&((b.sortableGhost=u).style.visibility="hidden",u.style.opacity=0),b.minTranslate={},b.maxTranslate={},b.axis.x&&(b.minTranslate.x=(l?0:f.left)-b.boundingClientRect.left-b.width/2,b.maxTranslate.x=(l?b.contentWindow.innerWidth:f.left+f.width)-b.boundingClientRect.left-b.width/2),b.axis.y&&(b.minTranslate.y=(l?0:f.top)-b.boundingClientRect.top-b.height/2,b.maxTranslate.y=(l?b.contentWindow.innerHeight:f.top+f.height)-b.boundingClientRect.top-b.height/2),o)(v=b.helper.classList).add.apply(v,x(o.split(" ")));b.listenerNode=e.touches?u:b.contentWindow,w.events.move.forEach(function(e){return b.listenerNode.addEventListener(e,b.handleSortMove,!1)}),w.events.end.forEach(function(e){return b.listenerNode.addEventListener(e,b.handleSortEnd,!1)}),b.setState({sorting:!0,sortingIndex:d}),s&&s({node:u,index:d,collection:c},e)}},b.handleSortMove=function(e){var t=b.props.onSortMove;e.preventDefault(),b.updatePosition(e),b.animateNodes(),b.autoscroll(),t&&t(e)},b.handleSortEnd=function(e){var t=b.props,n=t.hideSortableGhost,r=t.onSortEnd,i=b.manager.active.collection;b.listenerNode&&(w.events.move.forEach(function(e){return b.listenerNode.removeEventListener(e,b.handleSortMove)}),w.events.end.forEach(function(e){return b.listenerNode.removeEventListener(e,b.handleSortEnd)})),b.helper.parentNode.removeChild(b.helper),n&&b.sortableGhost&&(b.sortableGhost.style.visibility="",b.sortableGhost.style.opacity="");for(var o=b.manager.refs[i],a=0,s=o.length;a<s;a++){var l=o[a],u=l.node;l.edgeOffset=null,u.style[w.vendorPrefix+"Transform"]="",u.style[w.vendorPrefix+"TransitionDuration"]=""}clearInterval(b.autoscrollInterval),b.autoscrollInterval=null,b.manager.active=null,b.setState({sorting:!1,sortingIndex:null}),"function"==typeof r&&r({oldIndex:b.index,newIndex:b.newIndex,collection:i},e),b._touched=!1},b.autoscroll=function(){var e=b.translate,t={x:0,y:0},n={x:1,y:1},r={x:10,y:10};e.y>=b.maxTranslate.y-b.height/2?(t.y=1,n.y=r.y*Math.abs((b.maxTranslate.y-b.height/2-e.y)/b.height)):e.x>=b.maxTranslate.x-b.width/2?(t.x=1,n.x=r.x*Math.abs((b.maxTranslate.x-b.width/2-e.x)/b.width)):e.y<=b.minTranslate.y+b.height/2?(t.y=-1,n.y=r.y*Math.abs((e.y-b.height/2-b.minTranslate.y)/b.height)):e.x<=b.minTranslate.x+b.width/2&&(t.x=-1,n.x=r.x*Math.abs((e.x-b.width/2-b.minTranslate.x)/b.width)),b.autoscrollInterval&&(clearInterval(b.autoscrollInterval),b.autoscrollInterval=null,b.isAutoScrolling=!1),0===t.x&&0===t.y||(b.autoscrollInterval=setInterval(function(){b.isAutoScrolling=!0;var e={left:1*n.x*t.x,top:1*n.y*t.y};b.scrollContainer.scrollTop+=e.top,b.scrollContainer.scrollLeft+=e.left,b.translate.x+=e.left,b.translate.y+=e.top,b.animateNodes()},5))},b.manager=new d.default,b.events={start:b.handleStart,move:b.handleMove,end:b.handleEnd},(0,c.default)(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time."),b.state={},b}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var n=this,e=this.props,t=e.getContainer,r=e.useWindowAsScrollContainer,i=this.props.contentWindow||window;this.container="function"==typeof t?t(this.getWrappedInstance()):(0,u.findDOMNode)(this),this.document=this.container.ownerDocument||document,this.scrollContainer=r?this.document.body:this.container,this.contentWindow="function"==typeof i?i():i;var o=function(t){n.events.hasOwnProperty(t)&&w.events[t].forEach(function(e){return n.container.addEventListener(e,n.events[t],!1)})};for(var a in this.events)o(a)}},{key:"componentWillUnmount",value:function(){var n=this,e=function(t){n.events.hasOwnProperty(t)&&w.events[t].forEach(function(e){return n.container.removeEventListener(e,n.events[t])})};for(var t in this.events)e(t)}},{key:"getEdgeOffset",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{top:0,left:0};if(e){var n={top:t.top+e.offsetTop,left:t.left+e.offsetLeft};return e.parentNode!==this.container?this.getEdgeOffset(e.parentNode,n):n}}},{key:"getOffset",value:function(e){return{x:e.touches?e.touches[0].pageX:e.pageX,y:e.touches?e.touches[0].pageY:e.pageY}}},{key:"getLockPixelOffsets",value:function(){var e=this.props.lockOffset;Array.isArray(e)||(e=[e,e]),(0,c.default)(2===e.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",e);var t=e,n=h(t,2),r=n[0],i=n[1];return[this.getLockPixelOffset(r),this.getLockPixelOffset(i)]}},{key:"getLockPixelOffset",value:function(e){var t=e,n=e,r="px";if("string"==typeof e){var i=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(e);(0,c.default)(null!==i,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',e),t=n=parseFloat(e),r=i[1]}return(0,c.default)(isFinite(t)&&isFinite(n),"lockOffset value should be a finite. Given %s",e),"%"===r&&(t=t*this.width/100,n=n*this.height/100),{x:t,y:n}}},{key:"updatePosition",value:function(e){var t=this.props,n=t.lockAxis,r=t.lockToContainerEdges,i=this.getOffset(e),o={x:i.x-this.initialOffset.x,y:i.y-this.initialOffset.y};if(o.y-=window.pageYOffset-this.initialWindowScroll.top,o.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=o,r){var a=this.getLockPixelOffsets(),s=h(a,2),l=s[0],u=s[1],c={x:this.width/2-l.x,y:this.height/2-l.y},d={x:this.width/2-u.x,y:this.height/2-u.y};o.x=(0,w.limit)(this.minTranslate.x+c.x,this.maxTranslate.x-d.x,o.x),o.y=(0,w.limit)(this.minTranslate.y+c.y,this.maxTranslate.y-d.y,o.y)}"x"===n?o.y=0:"y"===n&&(o.x=0),this.helper.style[w.vendorPrefix+"Transform"]="translate3d("+o.x+"px,"+o.y+"px, 0)"}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,r=this.manager.getOrderedRefs(),i={left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top},o={left:this.offsetEdge.left+this.translate.x+i.left,top:this.offsetEdge.top+this.translate.y+i.top},a={top:window.pageYOffset-this.initialWindowScroll.top,left:window.pageXOffset-this.initialWindowScroll.left};this.newIndex=null;for(var s=0,l=r.length;s<l;s++){var u=r[s].node,c=u.sortableInfo.index,d=u.offsetWidth,h=u.offsetHeight,f={width:this.width>d?d/2:this.width/2,height:this.height>h?h/2:this.height/2},p={x:0,y:0},v=r[s].edgeOffset;v||(r[s].edgeOffset=v=this.getEdgeOffset(u));var m=s<r.length-1&&r[s+1],g=0<s&&r[s-1];m&&!m.edgeOffset&&(m.edgeOffset=this.getEdgeOffset(m.node)),c!==this.index?(t&&(u.style[w.vendorPrefix+"TransitionDuration"]=t+"ms"),this.axis.x?this.axis.y?c<this.index&&(o.left+a.left-f.width<=v.left&&o.top+a.top<=v.top+f.height||o.top+a.top+f.height<=v.top)?(p.x=this.width+this.marginOffset.x,v.left+p.x>this.containerBoundingRect.width-f.width&&(p.x=m.edgeOffset.left-v.left,p.y=m.edgeOffset.top-v.top),null===this.newIndex&&(this.newIndex=c)):c>this.index&&(o.left+a.left+f.width>=v.left&&o.top+a.top+f.height>=v.top||o.top+a.top+f.height>=v.top+h)&&(p.x=-(this.width+this.marginOffset.x),v.left+p.x<this.containerBoundingRect.left+f.width&&(p.x=g.edgeOffset.left-v.left,p.y=g.edgeOffset.top-v.top),this.newIndex=c):c>this.index&&o.left+a.left+f.width>=v.left?(p.x=-(this.width+this.marginOffset.x),this.newIndex=c):c<this.index&&o.left+a.left<=v.left+f.width&&(p.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=c)):this.axis.y&&(c>this.index&&o.top+a.top+f.height>=v.top?(p.y=-(this.height+this.marginOffset.y),this.newIndex=c):c<this.index&&o.top+a.top<=v.top+f.height&&(p.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=c))),u.style[w.vendorPrefix+"Transform"]="translate3d("+p.x+"px,"+p.y+"px,0)"):n&&((this.sortableGhost=u).style.visibility="hidden",u.style.opacity=0)}null==this.newIndex&&(this.newIndex=this.index)}},{key:"getWrappedInstance",value:function(){return(0,c.default)(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var e=r.withRef?"wrappedInstance":null;return s.default.createElement(n,i({ref:e},(0,w.omit)(this.props,"contentWindow","useWindowAsScrollContainer","distance","helperClass","hideSortableGhost","transitionDuration","useDragHandle","pressDelay","pressThreshold","shouldCancelStart","onSortStart","onSortMove","onSortEnd","axis","lockAxis","lockOffset","lockToContainerEdges","getContainer","getHelperDimensions")))}}]),t}(a.Component),e.displayName=(0,w.provideDisplayName)("sortableList",n),e.defaultProps={axis:"y",transitionDuration:300,pressDelay:0,pressThreshold:5,distance:0,useWindowAsScrollContainer:!1,hideSortableGhost:!0,shouldCancelStart:function(e){if(-1!==["input","textarea","select","option","button"].indexOf(e.target.tagName.toLowerCase()))return!0},lockToContainerEdges:!1,lockOffset:"50%",getHelperDimensions:function(e){var t=e.node;return{width:t.offsetWidth,height:t.offsetHeight}}},e.propTypes={axis:l.default.oneOf(["x","y","xy"]),distance:l.default.number,lockAxis:l.default.string,helperClass:l.default.string,transitionDuration:l.default.number,contentWindow:l.default.any,onSortStart:l.default.func,onSortMove:l.default.func,onSortEnd:l.default.func,shouldCancelStart:l.default.func,pressDelay:l.default.number,useDragHandle:l.default.bool,useWindowAsScrollContainer:l.default.bool,hideSortableGhost:l.default.bool,lockToContainerEdges:l.default.bool,lockOffset:l.default.oneOfType([l.default.number,l.default.string,l.default.arrayOf(l.default.oneOfType([l.default.number,l.default.string]))]),getContainer:l.default.func,getHelperDimensions:l.default.func},e.childContextTypes={manager:l.default.object.isRequired},t};var a=n(0),s=r(a),l=r(n(8)),u=n(29),c=r(n(157)),d=r(n(385)),w=n(112);function r(e){return e&&e.__esModule?e:{default:e}}function x(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(n(386)),o=a(n(456));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refs={}}return r(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return(0,i.default)(this.refs[this.active.collection],function(e){return e.node.sortableInfo.index==t.active.index})}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.active.collection;return(0,o.default)(this.refs[e],function(e){return e.node.sortableInfo.index})}}]),e}();t.default=s},function(e,t,n){var r=n(387)(n(452));e.exports=r},function(e,t,n){var s=n(113),l=n(85),u=n(84);e.exports=function(a){return function(e,t,n){var r=Object(e);if(!l(e)){var i=s(t,3);e=u(e),t=function(e){return i(r[e],e,r)}}var o=a(e,t,n);return-1<o?r[i?e[o]:o]:void 0}}},function(e,t,n){var r=n(389),i=n(438),o=n(232);e.exports=function(t){var n=i(t);return 1==n.length&&n[0][2]?o(n[0][0],n[0][1]):function(e){return e===t||r(e,t,n)}}},function(e,t,n){var f=n(158),p=n(218);e.exports=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=n[i])[0],u=e[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in e))return!1}else{var d=new f;if(r)var h=r(u,c,l,e,t,d);if(!(void 0===h?p(c,u,3,r,d):h))return!1}}return!0}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(115),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(115);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(115);e.exports=function(e){return-1<r(this.__data__,e)}},function(e,t,n){var i=n(115);e.exports=function(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}},function(e,t,n){var r=n(114);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var i=n(114),o=n(159),a=n(160);e.exports=function(e,t){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!o||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(215),i=n(403),o=n(47),a=n(217),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,d=u.hasOwnProperty,h=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?h:s).test(a(e))}},function(e,t,n){var r=n(83),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{var r=!(e[s]=void 0)}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,i=n(404),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},function(e,t,n){var r=n(42)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(407),i=n(114),o=n(159);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(e,t,n){var r=n(408),i=n(409),o=n(410),a=n(411),s=n(412);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(117);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(117),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(117),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(117);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(118);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(118);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(118);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var i=n(118);e.exports=function(e,t){var n=i(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}},function(e,t,n){var g=n(158),y=n(219),b=n(424),w=n(425),x=n(230),_=n(32),k=n(164),S=n(227),T="[object Arguments]",C="[object Array]",O="[object Object]",E=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,r,i,o){var a=_(e),s=_(t),l=a?C:x(e),u=s?C:x(t),c=(l=l==T?O:l)==O,d=(u=u==T?O:u)==O,h=l==u;if(h&&k(e)){if(!k(t))return!1;c=!(a=!0)}if(h&&!c)return o||(o=new g),a||S(e)?y(e,t,n,r,i,o):b(e,t,l,n,r,i,o);if(!(1&n)){var f=c&&E.call(e,"__wrapped__"),p=d&&E.call(t,"__wrapped__");if(f||p){var v=f?e.value():e,m=p?t.value():t;return o||(o=new g),i(v,m,n,r,o)}}return!!h&&(o||(o=new g),w(e,t,n,r,i,o))}},function(e,t,n){var r=n(160),i=n(420),o=n(421);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(83),d=n(220),h=n(116),f=n(219),p=n(221),v=n(222),i=r?r.prototype:void 0,m=i?i.valueOf:void 0;e.exports=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new d(e),new d(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return h(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=p;case"[object Set]":var l=1&r;if(s||(s=v),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=f(s(e),s(t),r,i,o,a);return a.delete(e),c;case"[object Symbol]":if(m)return m.call(e)==m.call(t)}return!1}},function(e,t,n){var b=n(223),w=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,r,i,o){var a=1&n,s=b(e),l=s.length;if(l!=b(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:w.call(t,c)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var h=!0;o.set(e,t),o.set(t,e);for(var f=a;++u<l;){var p=e[c=s[u]],v=t[c];if(r)var m=a?r(v,p,c,t,e,o):r(p,v,c,e,t,o);if(!(void 0===m?p===v||i(p,v,n,r,o):m)){h=!1;break}f||(f="constructor"==c)}if(h&&!f){var g=e.constructor,y=t.constructor;g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y)&&(h=!1)}return o.delete(e),o.delete(t),h}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(67),i=n(68);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(67),i=n(166),o=n(68),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},function(e,a,s){(function(e){var t=s(216),n="object"==typeof a&&a&&!a.nodeType&&a,r=n&&"object"==typeof e&&e&&!e.nodeType&&e,i=r&&r.exports===n&&t.process,o=function(){try{return i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o}).call(a,s(119)(e))},function(e,t,n){var r=n(167),i=n(433),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(229)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(66)(n(42),"DataView");e.exports=r},function(e,t,n){var r=n(66)(n(42),"Promise");e.exports=r},function(e,t,n){var r=n(66)(n(42),"Set");e.exports=r},function(e,t,n){var r=n(66)(n(42),"WeakMap");e.exports=r},function(e,t,n){var o=n(231),a=n(84);e.exports=function(e){for(var t=a(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,o(i)]}return t}},function(e,t,n){var i=n(218),o=n(440),a=n(446),s=n(168),l=n(231),u=n(232),c=n(120);e.exports=function(n,r){return s(n)&&l(r)?u(c(n),r):function(e){var t=o(e,n);return void 0===t&&t===r?a(e,n):i(r,t,3)}}},function(e,t,n){var i=n(233);e.exports=function(e,t,n){var r=null==e?void 0:i(e,t);return void 0===r?n:r}},function(e,t,n){var r=n(442),o=/^\./,a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,i=r(function(e){var i=[];return o.test(e)&&i.push(""),e.replace(a,function(e,t,n,r){i.push(n?r.replace(s,"$1"):t||e)}),i});e.exports=i},function(e,t,n){var r=n(443);e.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},function(e,t,n){var r=n(160),s="Expected a function";function l(i,o){if("function"!=typeof i||null!=o&&"function"!=typeof o)throw new TypeError(s);var a=function(){var e=arguments,t=o?o.apply(this,e):e[0],n=a.cache;if(n.has(t))return n.get(t);var r=i.apply(this,e);return a.cache=n.set(t,r)||n,r};return a.cache=new(l.Cache||r),a}l.Cache=r,e.exports=l},function(e,t,n){var r=n(445);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(83),i=n(169),o=n(32),a=n(96),s=1/0,l=r?r.prototype:void 0,u=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},function(e,t,n){var r=n(447),i=n(448);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var s=n(234),l=n(163),u=n(32),c=n(165),d=n(166),h=n(120);e.exports=function(e,t,n){for(var r=-1,i=(t=s(t,e)).length,o=!1;++r<i;){var a=h(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&d(i)&&c(a,i)&&(u(e)||l(e))}},function(e,t,n){var r=n(450),i=n(451),o=n(168),a=n(120);e.exports=function(e){return o(e)?r(a(e)):i(e)}},function(e,t){e.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(e,t,n){var r=n(233);e.exports=function(t){return function(e){return r(e,t)}}},function(e,t,n){var o=n(453),a=n(113),s=n(454),l=Math.max;e.exports=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:s(n);return i<0&&(i=l(r+i,0)),o(e,a(t,3),i)}},function(e,t){e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},function(e,t,n){var r=n(455);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){var r=n(235);e.exports=function(e){return e?(e=r(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},function(e,t,n){var r=n(457),i=n(459),o=n(466),a=n(473),s=o(function(e,t){if(null==e)return[];var n=t.length;return 1<n&&a(e,t[0],t[1])?t=[]:2<n&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])});e.exports=s},function(e,t,n){var u=n(161),c=n(458);e.exports=function e(t,n,r,i,o){var a=-1,s=t.length;for(r||(r=c),o||(o=[]);++a<s;){var l=t[a];0<n&&r(l)?1<n?e(l,n-1,r,i,o):u(o,l):i||(o[o.length]=l)}return o}},function(e,t,n){var r=n(83),i=n(163),o=n(32),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},function(e,t,n){var o=n(169),a=n(113),s=n(236),l=n(463),u=n(228),c=n(464),d=n(97);e.exports=function(e,r,n){var i=-1;r=o(r.length?r:[d],u(a));var t=s(e,function(t,e,n){return{criteria:o(r,function(e){return e(t)}),index:++i,value:t}});return l(t,function(e,t){return c(e,t,n)})}},function(e,t,n){var r=n(461)();e.exports=r},function(e,t){e.exports=function(l){return function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[l?a:++r];if(!1===t(i[s],s,i))break}return e}}},function(e,t,n){var s=n(85);e.exports=function(o,a){return function(e,t){if(null==e)return e;if(!s(e))return o(e,t);for(var n=e.length,r=a?n:-1,i=Object(e);(a?r--:++r<n)&&!1!==t(i[r],r,i););return e}}},function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},function(e,t,n){var u=n(465);e.exports=function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=u(i[r],o[r]);if(l)return s<=r?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}},function(e,t,n){var c=n(96);e.exports=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=c(e),a=void 0!==t,s=null===t,l=t==t,u=c(t);if(!s&&!u&&!o&&t<e||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}},function(e,t,n){var r=n(97),i=n(467),o=n(469);e.exports=function(e,t){return o(i(e,t,r),e+"")}},function(e,t,n){var l=n(468),u=Math.max;e.exports=function(o,a,s){return a=u(void 0===a?o.length-1:a,0),function(){for(var e=arguments,t=-1,n=u(e.length-a,0),r=Array(n);++t<n;)r[t]=e[a+t];t=-1;for(var i=Array(a+1);++t<a;)i[t]=e[t];return i[a]=s(r),l(o,this,i)}}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(470),i=n(472)(r);e.exports=i},function(e,t,n){var r=n(471),i=n(239),o=n(97),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t){var o=Date.now;e.exports=function(n){var r=0,i=0;return function(){var e=o(),t=16-(e-i);if(i=e,0<t){if(800<=++r)return arguments[0]}else r=0;return n.apply(void 0,arguments)}}},function(e,t,n){var i=n(116),o=n(85),a=n(165),s=n(47);e.exports=function(e,t,n){if(!s(n))return!1;var r=typeof t;return!!("number"==r?o(n)&&a(t,n.length):"string"==r&&t in n)&&i(n[t],e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();t.default=function(n){var e,t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return t=e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.collection,n=e.disabled,r=e.index;n||this.setDraggable(t,r)}},{key:"componentWillReceiveProps",value:function(e){if(this.props.index!==e.index&&this.node&&(this.node.sortableInfo.index=e.index),this.props.disabled!==e.disabled){var t=e.collection,n=e.disabled,r=e.index;n?this.removeDraggable(t):this.setDraggable(t,r)}else this.props.collection!==e.collection&&(this.removeDraggable(this.props.collection),this.setDraggable(e.collection,e.index))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.collection,n=e.disabled;n||this.removeDraggable(t)}},{key:"setDraggable",value:function(e,t){var n=this.node=(0,u.findDOMNode)(this);n.sortableInfo={index:t,collection:e,manager:this.context.manager},this.ref={node:n},this.context.manager.add(e,this.ref)}},{key:"removeDraggable",value:function(e){this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return(0,c.default)(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var e=r.withRef?"wrappedInstance":null;return s.default.createElement(n,i({ref:e},(0,d.omit)(this.props,"collection","disabled","index")))}}]),t}(a.Component),e.displayName=(0,d.provideDisplayName)("sortableElement",n),e.contextTypes={manager:l.default.object.isRequired},e.propTypes={index:l.default.number.isRequired,collection:l.default.oneOfType([l.default.number,l.default.string]),disabled:l.default.bool},e.defaultProps={collection:0},t};var a=n(0),s=r(a),l=r(n(8)),u=n(29),c=r(n(157)),d=n(112);function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();t.default=function(n){var e,t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return t=e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=(0,l.findDOMNode)(this);e.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return(0,u.default)(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var e=r.withRef?"wrappedInstance":null;return s.default.createElement(n,i({ref:e},this.props))}}]),t}(a.Component),e.displayName=(0,c.provideDisplayName)("sortableHandle",n),t};var a=n(0),s=r(a),l=n(29),u=r(n(157)),c=n(112);function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=n(82),o=a(n(240));function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,i.SortableElement)(function(e){return r.default.createElement(o.default,{className:e.className,editable:e.editable,handleConfigTrack:e.handleConfigTrack,handleResizeTrack:e.handleResizeTrack,height:e.height,item:e.item,onAddSeries:e.onAddSeries,onCloseTrack:e.onCloseTrack,onCloseTrackMenuOpened:e.onCloseTrackMenuOpened,onConfigTrackMenuOpened:e.onConfigTrackMenuOpened,resizeHandles:e.resizeHandles,uid:e.uid,width:e.width})});t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var u=p(n(37)),r=p(n(3)),i=p(n(1)),o=p(n(2)),a=p(n(4)),s=p(n(5)),l=n(!function(){var e=new Error('Cannot find module "d3-drag"');throw e.code="MODULE_NOT_FOUND",e}()),c=n(!function(){var e=new Error('Cannot find module "d3-selection"');throw e.code="MODULE_NOT_FOUND",e}()),d=p(n(8)),h=p(n(0)),f=n(171);function p(e){return e&&e.__esModule?e:{default:e}}n(478);var v=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.dragTopRight=(0,l.drag)().on("start",t.dragStart.bind(t)).on("drag",t.dragTopRightFunc.bind(t)),t.dragTopLeft=(0,l.drag)().on("start",t.dragStart.bind(t)).on("drag",t.dragTopLeftFunc.bind(t)),t.dragBottomRight=(0,l.drag)().on("start",t.dragStart.bind(t)).on("drag",t.dragBottomRightFunc.bind(t)),t.dragBottomLeft=(0,l.drag)().on("start",t.dragStart.bind(t)).on("drag",t.dragBottomLeftFunc.bind(t)),t.dragBottom=(0,l.drag)().on("start",t.dragStart.bind(t)).on("drag",t.dragBottomFunc.bind(t)),t.dragTop=(0,l.drag)().on("start",t.dragStart.bind(t)).on("drag",t.dragTopFunc.bind(t)),t.dragLeft=(0,l.drag)().on("start",t.dragStart.bind(t)).on("drag",t.dragLeftFunc.bind(t)),t.dragRight=(0,l.drag)().on("start",t.dragStart.bind(t)).on("drag",t.dragRightFunc.bind(t)),t.minWidth=10,t.minHeight=10,t.bottomHandleWidth=20,t.state={uid:t.props.uid,width:t.props.width,height:t.props.height,top:t.props.top,left:t.props.left},t.domBody=(0,c.select)("body").node(),t}return(0,s.default)(n,e),(0,o.default)(n,[{key:"componentDidMount",value:function(){(0,c.select)(this.bottomHandle).call(this.dragBottom),(0,c.select)(this.topHandle).call(this.dragTop),(0,c.select)(this.leftHandle).call(this.dragLeft),(0,c.select)(this.rightHandle).call(this.dragRight)}},{key:"componentWillReceiveProps",value:function(e){"width"in e&&this.setState({width:e.width}),"height"in e&&this.setState({height:e.height})}},{key:"dragBottomFunc",value:function(){var e=(0,c.mouse)(this.domBody),t=this.dragStartHeight+(e[1]-this.dragStartMousePos[1]),n={height:t=t>this.minHeight?t:this.minHeight};this.setState(n),c.event.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragLeftFunc",value:function(){var e=(0,c.mouse)(this.domBody),t=this.dragStartWidth-(e[0]-this.dragStartMousePos[0]);t=t>this.minWidth?t:this.minWidth;var n=this.dragStartLeft+e[0]-this.dragStartMousePos[0],r={left:n=t>this.minWidth?n:this.dragStartLeft+this.dragStartWidth-this.minWidth,width:t};this.setState(r),c.event.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopFunc",value:function(){var e=(0,c.mouse)(this.domBody),t=this.dragStartHeight-(e[1]-this.dragStartMousePos[1]);t=t>this.minHeight?t:this.minHeight;var n=this.dragStartTop+e[1]-this.dragStartMousePos[1],r={top:n=t>this.minHeight?n:this.dragStartTop+this.dragStartHeight-this.minHeight,height:t};this.setState(r),c.event.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragRightFunc",value:function(){var e=(0,c.mouse)(this.domBody),t=this.dragStartWidth+(e[0]-this.dragStartMousePos[0]),n={width:t=t>this.minWidth?t:this.minWidth};this.setState(n),c.event.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragBottomLeftFunc",value:function(){var e=(0,c.mouse)(this.domBody),t=this.dragStartHeight+(e[1]-this.dragStartMousePos[1]);t=t>this.minHeight?t:this.minHeight;var n=this.dragStartWidth-(e[0]-this.dragStartMousePos[0]);n=n>this.minWidth?n:this.minWidth;var r=this.dragStartLeft+e[0]-this.dragStartMousePos[0];r=n>this.minWidth?r:this.dragStartLeft+this.dragStartWidth-this.minWidth;var i={top:this.state.top,left:r,width:n,height:t};this.setState(i),c.event.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragBottomRightFunc",value:function(){var e=(0,c.mouse)(this.domBody),t=this.dragStartWidth+(e[0]-this.dragStartMousePos[0]);t=t>this.minWidth?t:this.minWidth;var n=this.dragStartHeight+(e[1]-this.dragStartMousePos[1]);n=n>this.minHeight?n:this.minHeight;var r={top:this.state.top,left:this.state.left,width:t,height:n};this.setState(r),c.event.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopRightFunc",value:function(){var e=(0,c.mouse)(this.domBody),t=this.dragStartHeight-(e[1]-this.dragStartMousePos[1]);t=t>this.minHeight?t:this.minHeight;var n=this.dragStartTop+e[1]-this.dragStartMousePos[1];n=t>this.minHeight?n:this.dragStartTop+this.dragStartHeight-this.minHeight;var r=this.dragStartWidth+(e[0]-this.dragStartMousePos[0]);r=r>this.minWidth?r:this.minWidth;var i={top:n,left:this.state.left,width:r,height:t};this.setState(i),c.event.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopLeftFunc",value:function(){var e=(0,c.mouse)(this.domBody),t=this.dragStartWidth-(e[0]-this.dragStartMousePos[0]);t=t>this.minWidth?t:this.minWidth;var n=this.dragStartLeft+e[0]-this.dragStartMousePos[0];n=t>this.minWidth?n:this.dragStartLeft+this.dragStartWidth-this.minWidth;var r=this.dragStartHeight-(e[1]-this.dragStartMousePos[1]);r=r>this.minHeight?r:this.minHeight;var i=this.dragStartTop+e[1]-this.dragStartMousePos[1],o={top:i=r>this.minHeight?i:this.dragStartTop+this.dragStartHeight-this.minHeight,left:n,width:t,height:r};this.setState(o),c.event.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragStart",value:function(){this.dragStartMousePos=(0,c.mouse)(this.domBody),this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,this.dragStartTop=this.state.top,this.dragStartLeft=this.state.left,c.event.sourceEvent.stopPropagation()}},{key:"sizeChanged",value:function(){"sizeChanged"in this.props&&this.props.sizeChanged(this.state)}},{key:"rotateClicked",value:function(){this.props.trackRotated(this.state.uid)}},{key:"closeClicked",value:function(){this.props.trackClosed(this.state.uid)}},{key:"render",value:function(){var t=this,e=(0,f.getDarkTheme)()?"white":"black",n={top:this.state.top,left:this.state.left,width:this.state.width,height:this.state.height,backgroundColor:"transparent",boxSizing:"border-box",opacity:this.props.opacity},r={position:"absolute",left:this.state.width/2-5,bottom:1,width:10,opacity:.2,height:4,borderBottom:"1px solid "+e,borderTop:"1px solid "+e,cursor:"row-resize"},i={position:"absolute",left:this.state.width/2-5,top:1,width:10,opacity:.2,height:4,borderBottom:"1px solid "+e,borderTop:"1px solid "+e,cursor:"row-resize"},o={position:"absolute",left:1,top:this.state.height/2-5,opacity:.2,width:4,height:10,borderLeft:"1px solid "+e,borderRight:"1px solid "+e,cursor:"col-resize"},a={position:"absolute",right:1,opacity:.2,top:this.state.height/2-5,width:4,height:10,borderLeft:"1px solid "+e,borderRight:"1px solid "+e,cursor:"col-resize"},s={bottom:h.default.createElement("div",{className:"bottom-draggable-handle",key:"bottom",ref:function(e){return t.bottomHandle=e},style:r}),top:h.default.createElement("div",{className:"top-draggable-handle",key:"top",ref:function(e){return t.topHandle=e},style:i}),right:h.default.createElement("div",{className:"right-draggable-handle",key:"right",ref:function(e){return t.rightHandle=e},style:a}),left:h.default.createElement("div",{className:"left-draggable-handle",key:"left",ref:function(e){return t.leftHandle=e},style:o})},l=[].concat((0,u.default)(this.props.resizeHandles)).map(function(e){return s[e]});return h.default.createElement("div",{className:this.props.className,ref:function(e){return t.divContainer=e},style:n},l)}}]),n}(h.default.Component);v.propTypes={className:d.default.string,height:d.default.number,left:d.default.number,opacity:d.default.number,resizeHandles:d.default.object,sizeChanged:d.default.func,top:d.default.number,trackClosed:d.default.func,trackRotated:d.default.func,uid:d.default.string,width:d.default.number},t.default=v},function(e,t){},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(3)),i=h(n(1)),o=h(n(2)),a=h(n(4)),s=h(n(5)),l=h(n(8)),u=h(n(0)),c=h(n(29)),d=n(82);function h(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.state={controlsVisible:!1},t}return(0,s.default)(n,e),(0,o.default)(n,[{key:"shouldComponentUpdate",value:function(){return!this.resizing}},{key:"handleMouseEnter",value:function(){this.setState({controlsVisible:!0})}},{key:"handleMouseLeave",value:function(){this.setState({controlsVisible:!1})}},{key:"handleMouseMove",value:function(){this.setState({controlsVisible:!0})}},{key:"getControls",value:function(){var t=this,e=null;return e=this.moveable?(0,d.SortableHandle)(function(){return u.default.createElement("svg",{className:"no-zoom",height:"10px",onClick:function(){},style:t.getMoveImgStyle(),width:"10px"},u.default.createElement("use",{xlinkHref:"#move"}))}):(0,d.SortableHandle)(function(){return u.default.createElement("div",null)}),u.default.createElement("div",{style:{position:"absolute",backgroundColor:"rgba(255,255,255,0.7)",right:"3px",top:"3px",pointerEvents:"none",paddingLeft:"5px",paddingRight:"5px",borderRadius:"5px",border:"1px solid #dddddd"}},u.default.createElement(e,null),u.default.createElement("svg",{className:"no-zoom",height:"10px",onClick:function(){var e=c.default.findDOMNode(t.imgConfig).getBoundingClientRect();t.props.onConfigTrackMenuOpened(t.props.uid,e)},ref:function(e){t.imgConfig=e},style:this.getSettingsImgStyle(),width:"10px"},u.default.createElement("use",{xlinkHref:"#cog"})),u.default.createElement("svg",{className:"no-zoom",height:"10px",onClick:function(){return t.props.onAddSeries(t.props.uid)},ref:function(e){t.imgAdd=e},style:this.getAddImgStyle(),width:"10px"},u.default.createElement("use",{xlinkHref:"#plus"})),u.default.createElement("svg",{className:"no-zoom",height:"10px",onClick:function(){var e=c.default.findDOMNode(t.imgClose).getBoundingClientRect();t.props.onCloseTrackMenuOpened(t.props.uid,e)},ref:function(e){t.imgClose=e},style:this.getCloseImgStyle(),width:"10px"},u.default.createElement("use",{xlinkHref:"#cross"})))}}]),n}(u.default.Component);f.propTypes={configMenuOpen:l.default.bool,onConfigTrackMenuOpened:l.default.func,onCloseTrackMenuOpened:l.default.func,onAddSeries:l.default.func,uid:l.default.string},t.default=f},function(e,t){e.exports={"track-control":"TrackControl-module_track-control-2zDf3","track-control-vertical":"TrackControl-module_track-control-vertical-2McB_","track-control-dark":"TrackControl-module_track-control-dark-fP2uZ","track-control-active":"TrackControl-module_track-control-active-2JD9i TrackControl-module_track-control-2zDf3","track-control-left":"TrackControl-module_track-control-left-zHd9W","track-control-vertical-active":"TrackControl-module_track-control-vertical-active-1QCKn","track-control-padding-right":"TrackControl-module_track-control-padding-right-2p6Lp","track-control-button":"TrackControl-module_track-control-button-2fdIb","track-control-button-vertical":"TrackControl-module_track-control-button-vertical-1s22z"}},function(e,t){e.exports={"horizontal-tiled-plot":"HorizontalTiledPlot-module_horizontal-tiled-plot-3EK65"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OneDimensionalMixin=void 0;var r=d(n(3)),i=d(n(1)),o=d(n(2)),a=d(n(4)),s=d(n(5)),l=n(57),u=n(20),c=n(6);function d(e){return e&&e.__esModule?e:{default:e}}var h=t.OneDimensionalMixin=(0,l.Mixin)(function(e){return function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"initTile",value:function(e){this.localColorToHexScale(),this.unFlatten(e),this.maxAndMin.max=e.maxValue,this.maxAndMin.min=e.minValue,this.renderTile(e)}},{key:"rerender",value:function(e){this.options=e;for(var t=this.visibleAndFetchedTiles(),n=0;n<t.length;n++)this.updateTile(t[n])}},{key:"updateTile",value:function(e){var t=this.visibleAndFetchedTiles();this.maxAndMin={max:null,min:null};for(var n=0;n<t.length;n++){var r=t[n];this.unFlatten(r),r.svgData=null,r.mouseOverData=null,r.matrix&&(null===this.maxAndMin.max||r.maxValue>this.maxAndMin.max?this.maxAndMin.max=r.maxValue:this.maxAndMin.max,null===this.maxAndMin.min||r.minValue<this.maxAndMin.min?this.maxAndMin.min=r.minValue:this.maxAndMin.min)}for(var i=0;i<t.length;i++)this.renderTile(t[i])}},{key:"localColorToHexScale",value:function(){for(var e=this.options.colorScale||(0,u.scaleOrdinal)(u.schemeCategory10),t={},n=0;n<e.length;n++)t[e[n]]=(0,c.colorToHex)(e[n]);this.colorHexMap=t}},{key:"findMaxAndMin",value:function(e){for(var t={max:null,min:null},n=0;n<e.length;n++){var r=e[n],i=r.filter(function(e){return 0<=e}).reduce(function(e,t){return e+t},0);i>t.max?t.max=i:t.max;var o=r.filter(function(e){return e<0});if(0<o.length){var a=(o=o.map(function(e){return Math.abs(e)})).reduce(function(e,t){return e+t},0);null===t.min||a>t.min?t.min=a:t.min}}return t}},{key:"unFlatten",value:function(e){if(e.matrix)return e.matrix;var t=e.tileData.dense;0<t.filter(function(e){return e<0}).length&&"linear"===this.options.valueScaling&&(console.warn("Negative values present in data. Defaulting to exponential scale."),this.options.valueScaling="exponential");var n=this.simpleUnFlatten(e,t),r=this.findMaxAndMin(n);return e.matrix=n,e.maxValue=r.max,e.minValue=r.min,n}},{key:"simpleUnFlatten",value:function(e,t){for(var n=e.tileData.shape[0],r=e.tileData.shape[1],i=[],o=0;o<n;o++)for(var a=0;a<r;a++){var s=void 0;(s=void 0===i[a]?[]:i[a]).push(t[r*o+a]),i[a]=s}return i}}]),t}(e)});t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(484);Object.defineProperty(t,"LruCache",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(46)),i=a(n(79)),o=a(n(24));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){this.size=0,this.limit=e,this._keymap={}}(0,r.default)(s.prototype,{put:function(e,t){var n={key:e,value:t};if(this._keymap[e]=n,this.tail?(this.tail.newer=n).older=this.tail:this.head=n,this.tail=n,this.size===this.limit)return this.shift();this.size+=1},get:function(e,t){var n=this._keymap[e];if(void 0!==n)return n===this.tail||(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n),t?n:n.value},find:function(e){return this._keymap[e]},keys:function(){return(0,o.default)(this._keymap)},set:function(e,t){var n=this.get(e,!0),r=void 0;return n?(r=n.value,n.value=t):(r=this.put(e,t))&&(r=r.value),r},shift:function(){var e=this.head;return e&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):(this.head=void 0,this.tail=void 0),e.newer=void 0,e.older=void 0,delete this._keymap[e.key],this.size-=1),e},remove:function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.head=t.newer):t.older?(t.older.newer=void 0,this.tail=t.older):(this.head=void 0,this.tail=void 0),this.size-=1,t.value},removeAll:function(){this.head=void 0,this.tail=void 0,this.size=0,this._keymap={}},forEach:function(e,t,n){var r=void 0;if(!0===t?(n=!0,t=void 0):"object"!==(void 0===t?"undefined":(0,i.default)(t))&&(t=this),n)for(r=this.tail;r;)e.call(t,r.key,r.value,this),r=r.older;else for(r=this.head;r;)e.call(t,r.key,r.value,this),r=r.newer},toJSON:function(){for(var e=[],t=this.head;t;)e.push({key:t.key.toJSON(),value:t.value.toJSON()}),t=t.newer;return e},toString:function(){for(var e="",t=this.head;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e}}),t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AVAILABLE_TRACK_TYPES=void 0;var r,i=n(11),c=(r=i)&&r.__esModule?r:{default:r},d=n(12);var o=t.AVAILABLE_TRACK_TYPES=function(e,t){var n=(0,d.DATATYPE_TO_TRACK_TYPE)(t),r=e[0],i=!0,o=!0,a=!1,s=void 0;try{for(var l,u=(0,c.default)(e);!(o=(l=u.next()).done);o=!0){l.value!==r&&(i=!1)}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}return i?n[e[0]]:[]};t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DATATYPE_TO_TRACK_TYPE=void 0;var r=n(12),i=t.DATATYPE_TO_TRACK_TYPE=function(t){var n={};return r.TRACKS_INFO.filter(function(e){return e.orientation==t}).forEach(function(t){var e=t.datatype;Array.isArray(t.datatype)||(e=[e]),e.forEach(function(e){e in n||(n[e]=[]),n[e].push(t)})}),n.none=[],n};t.default=i},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=t.HEATED_OBJECT_MAP=[[0,0,0,255],[35,0,0,255],[52,0,0,255],[60,0,0,255],[63,1,0,255],[64,2,0,255],[68,5,0,255],[69,6,0,255],[72,8,0,255],[74,10,0,255],[77,12,0,255],[78,14,0,255],[81,16,0,255],[83,17,0,255],[85,19,0,255],[86,20,0,255],[89,22,0,255],[91,24,0,255],[92,25,0,255],[94,26,0,255],[95,28,0,255],[98,30,0,255],[100,31,0,255],[102,33,0,255],[103,34,0,255],[105,35,0,255],[106,36,0,255],[108,38,0,255],[109,39,0,255],[111,40,0,255],[112,42,0,255],[114,43,0,255],[115,44,0,255],[117,45,0,255],[119,47,0,255],[119,47,0,255],[120,48,0,255],[122,49,0,255],[123,51,0,255],[125,52,0,255],[125,52,0,255],[126,53,0,255],[128,54,0,255],[129,56,0,255],[129,56,0,255],[131,57,0,255],[132,58,0,255],[134,59,0,255],[134,59,0,255],[136,61,0,255],[137,62,0,255],[137,62,0,255],[139,63,0,255],[139,63,0,255],[140,65,0,255],[142,66,0,255],[142,66,0,255],[143,67,0,255],[143,67,0,255],[145,68,0,255],[145,68,0,255],[146,70,0,255],[146,70,0,255],[148,71,0,255],[148,71,0,255],[149,72,0,255],[149,72,0,255],[151,73,0,255],[151,73,0,255],[153,75,0,255],[153,75,0,255],[154,76,0,255],[154,76,0,255],[154,76,0,255],[156,77,0,255],[156,77,0,255],[157,79,0,255],[157,79,0,255],[159,80,0,255],[159,80,0,255],[159,80,0,255],[160,81,0,255],[160,81,0,255],[162,82,0,255],[162,82,0,255],[163,84,0,255],[163,84,0,255],[165,85,0,255],[165,85,0,255],[166,86,0,255],[166,86,0,255],[166,86,0,255],[168,87,0,255],[168,87,0,255],[170,89,0,255],[170,89,0,255],[171,90,0,255],[171,90,0,255],[173,91,0,255],[173,91,0,255],[174,93,0,255],[174,93,0,255],[176,94,0,255],[176,94,0,255],[177,95,0,255],[177,95,0,255],[179,96,0,255],[179,96,0,255],[180,98,0,255],[182,99,0,255],[182,99,0,255],[183,100,0,255],[183,100,0,255],[185,102,0,255],[185,102,0,255],[187,103,0,255],[187,103,0,255],[188,104,0,255],[188,104,0,255],[190,105,0,255],[191,107,0,255],[191,107,0,255],[193,108,0,255],[193,108,0,255],[194,109,0,255],[196,110,0,255],[196,110,0,255],[197,112,0,255],[197,112,0,255],[199,113,0,255],[200,114,0,255],[200,114,0,255],[202,116,0,255],[202,116,0,255],[204,117,0,255],[205,118,0,255],[205,118,0,255],[207,119,0,255],[208,121,0,255],[208,121,0,255],[210,122,0,255],[211,123,0,255],[211,123,0,255],[213,124,0,255],[214,126,0,255],[214,126,0,255],[216,127,0,255],[217,128,0,255],[217,128,0,255],[219,130,0,255],[221,131,0,255],[221,131,0,255],[222,132,0,255],[224,133,0,255],[224,133,0,255],[225,135,0,255],[227,136,0,255],[227,136,0,255],[228,137,0,255],[230,138,0,255],[230,138,0,255],[231,140,0,255],[233,141,0,255],[233,141,0,255],[234,142,0,255],[236,144,0,255],[236,144,0,255],[238,145,0,255],[239,146,0,255],[241,147,0,255],[241,147,0,255],[242,149,0,255],[244,150,0,255],[244,150,0,255],[245,151,0,255],[247,153,0,255],[247,153,0,255],[248,154,0,255],[250,155,0,255],[251,156,0,255],[251,156,0,255],[253,158,0,255],[255,159,0,255],[255,159,0,255],[255,160,0,255],[255,161,0,255],[255,163,0,255],[255,163,0,255],[255,164,0,255],[255,165,0,255],[255,167,0,255],[255,167,0,255],[255,168,0,255],[255,169,0,255],[255,169,0,255],[255,170,0,255],[255,172,0,255],[255,173,0,255],[255,173,0,255],[255,174,0,255],[255,175,0,255],[255,177,0,255],[255,178,0,255],[255,179,0,255],[255,181,0,255],[255,181,0,255],[255,182,0,255],[255,183,0,255],[255,184,0,255],[255,187,7,255],[255,188,10,255],[255,189,14,255],[255,191,18,255],[255,192,21,255],[255,193,25,255],[255,195,29,255],[255,197,36,255],[255,198,40,255],[255,200,43,255],[255,202,51,255],[255,204,54,255],[255,206,61,255],[255,207,65,255],[255,210,72,255],[255,211,76,255],[255,214,83,255],[255,216,91,255],[255,219,98,255],[255,221,105,255],[255,223,109,255],[255,225,116,255],[255,228,123,255],[255,232,134,255],[255,234,142,255],[255,237,149,255],[255,239,156,255],[255,240,160,255],[255,243,167,255],[255,246,174,255],[255,248,182,255],[255,249,185,255],[255,252,193,255],[255,253,196,255],[255,255,204,255],[255,255,207,255],[255,255,211,255],[255,255,218,255],[255,255,222,255],[255,255,225,255],[255,255,229,255],[255,255,233,255],[255,255,236,255],[255,255,240,255],[255,255,244,255],[255,255,247,255],[255,255,255,0]];t.default=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IS_TRACK_RANGE_SELECTABLE=void 0;var r=n(6),i=t.IS_TRACK_RANGE_SELECTABLE=function t(e){switch(e.type){case"heatmap":case"horizontal-line":case"vertical-line":case"horizontal-1d-tiles":case"vertical-1d-tiles":case"2d-tiles":case"horizontal-gene-annotations":case"vertical-gene-annotations":case"horizontal-heatmap":case"vertical-heatmap":case"osm-tiles":case"mapbox-tiles":return!0;case"combined":return e.contents.map(function(e){return t(e)}).reduce(r.or,!1);default:return!1}};t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OPTIONS_INFO=void 0;var l=o(n(11)),r=o(n(46)),d=n(36),i=o(n(490));function o(e){return e&&e.__esModule?e:{default:e}}var a={black:{name:"Black",value:"black"},blue:{name:"Blue",value:"blue"},brown:{name:"Brown",value:"brown"},cyan:{name:"Cyan",value:"cyan"},green:{name:"Green",value:"green"},grey:{name:"Grey",value:"grey"},orange:{name:"Orange",value:"orange"},purple:{name:"Purple",value:"purple"},turquoise:{name:"Turquoise",value:"turquoise"},red:{name:"Red",value:"red"},white:{name:"White",value:"white"}},s={1:{name:"1",value:1},2:{name:"2",value:2},3:{name:"3",value:3},5:{name:"5",value:5},8:{name:"8",value:8},13:{name:"13",value:13},21:{name:"21",value:21}},u=(0,r.default)(s,{none:{name:"none",value:"none"}}),c={0:{name:"0%",value:0},.2:{name:"20%",value:.2},.4:{name:"40%",value:.4},.6:{name:"60%",value:.6},.8:{name:"80%",value:.8},"1.0":{name:"100%",value:1}},h=t.OPTIONS_INFO={heatmapValueScaling:{name:"Value Scaling",inlineOptions:{linear:{name:"Linear",value:"linear"},log:{name:"Log",value:"log"}}},valueScaling:{name:"Value Scaling",inlineOptions:{linear:{name:"Linear",value:"linear"},log:{name:"Log",value:"log"}}},lineStrokeWidth:{name:"Stroke Width",inlineOptions:s},strokeWidth:{name:"Stroke Width",inlineOptions:s},trackBorderWidth:{name:"Track Border Width",inlineOptions:s},sortLargestOnTop:{name:"Sort Largest On Top",inlineOptions:{yes:{name:"Yes",value:!0},no:{name:"No",value:!1}}},minSquareSize:{name:"Minimum size",inlineOptions:u},pointSize:{name:"Point Size",inlineOptions:s},pointColor:{name:"Point Color",inlineOptions:a},trackBorderColor:{name:"Track Border Color",inlineOptions:a},backgroundColor:{name:"Background Color",inlineOptions:{white:{name:"White",value:"white"},lightGrey:{name:"Light Grey",value:"#eeeeee"},grey:{name:"Grey",value:"#cccccc"},black:{name:"Black",value:"black"},transparent:{name:"Transparent",value:"transparent"}}},colorScale:{name:"Color Scale",inlineOptions:{epilogos:{name:"Epilogos",values:["#FF0000","#FF4500","#32CD32","#008000","#006400","#C2E105","#FFFF00","#66CDAA","#8A91D0","#CD5C5C","#E9967A","#BDB76B","#808080","#C0C0C0","#FFFFFF"]},category10:{name:"D3 Category10",values:["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"]}}},minusStrandColor:{name:"- Strand Color",inlineOptions:a},plusStrandColor:{name:"+ Strand Color",inlineOptions:a},lineStrokeColor:{name:"Stroke color",inlineOptions:a},projectionStrokeColor:{name:"Stroke color",inlineOptions:a},projectionFillColor:{name:"Fill color",inlineOptions:a},strokeColor:{name:"Stroke color",inlineOptions:a},fillColor:{name:"Fill color",inlineOptions:a},barFillColor:{name:"Fill color",inlineOptions:a},barFillColorTop:{name:"Top Fill color",inlineOptions:a},barFillColorBottom:{name:"Bottom Fill color",inlineOptions:a},barOpacity:{name:"Bar opacity",inlineOptions:c},barBorder:{name:"Bar border",inlineOptions:{yes:{name:"Yes",value:!0},no:{name:"No",value:!1}}},scaledHeight:{name:"Scaled height",inlineOptions:{yes:{name:"Yes",value:!0},no:{name:"No",value:!1}}},rectangleDomainStrokeColor:{name:"Stroke color",inlineOptions:a},rectangleDomainFillColor:{name:"Fill color",inlineOptions:a},rectangleDomainOpacity:{name:"Opacity",inlineOptions:c},mapboxStyle:{name:"Map style",inlineOptions:{streets:{name:"streets",value:"mapbox.streets"},light:{name:"light",value:"mapbox.light"},dark:{name:"dark",value:"mapbox.dark"},satellite:{name:"satellite",value:"mapbox.satellite"},"streets-satellite":{name:"streets-satellite",value:"mapbox.streets-satellite"},wheatpaste:{name:"wheatpaste",value:"mapbox.wheatpaste"},"streets-basic":{name:"streets-basic",value:"mapbox.streets-basic"},comic:{name:"comic",value:"mapbox.comic"},outdoors:{name:"outdoors",value:"mapbox.outdoors"},"run-bike-hike":{name:"run-bike-hike",value:"mapbox.run-bike-hike"},pencil:{name:"pencil",value:"mapbox.pencil"},pirates:{name:"pirates",value:"mapbox.pirates"},emerald:{name:"emerald",value:"mapbox.emerald"},"high-contrast":{name:"high-contrast",value:"mapbox.high-contrast"}}},oneDHeatmapFlipped:{name:"Flip Heatmap",inlineOptions:{yes:{name:"Yes",value:"yes"},no:{name:"No",value:null}}},showMousePosition:{name:"Show Mouse Position",inlineOptions:{yes:{name:"Yes",value:!0},no:{name:"No",value:!1}}},showTooltip:{name:"Show Tooltip",inlineOptions:{yes:{name:"Yes",value:!0},no:{name:"No",value:!1}}},axisPositionHorizontal:{name:"Axis Position",inlineOptions:{left:{name:"Left",value:"left"},outsideLeft:{name:"Outside left",value:"outsideLeft"},right:{name:"Right",value:"right"},outsideRight:{name:"Outside right",value:"outsideRight"},hidden:{name:"Hidden",value:null}}},axisPositionVertical:{name:"Axis Position",inlineOptions:{top:{name:"Top",value:"top"},outsideTop:{name:"Outside top",value:"outsideTop"},bottom:{name:"Bottom",value:"bottom"},outsideBottom:{name:"Outside bottom",value:"outsideBottom"},hidden:{name:"Hidden",value:null}}},colorbarPosition:{name:"Colorbar Position",inlineOptions:{topLeft:{name:"Top Left",value:"topLeft"},topRight:{name:"Top Right",value:"topRight"},bottomLeft:{name:"Bottom Left",value:"bottomLeft"},bottomRight:{name:"Bottom Right",value:"bottomRight"},hidden:{name:"Hidden",value:null}}},colorbarBackgroundColor:{name:"Colorbar Background Color",inlineOptions:a},colorbarBackgroundOpacity:{name:"Colorbar Background Opacity",inlineOptions:c},colorbarLabelsPosition:{name:"Colorbar Labels Position",inlineOptions:{inside:{name:"Inside",value:"inside"},outside:{name:"Outside",value:"outside"}}},labelColor:{name:"Label Color",inlineOptions:a},labelPosition:{name:"Label Position",inlineOptions:{ol:{name:"Outer left",value:"outerLeft"},or:{name:"Outer right",value:"outerRight"},ot:{name:"Outer top",value:"outerTop"},ob:{name:"Outer bottom",value:"outerBottom"},tl:{name:"Top left",value:"topLeft"},tr:{name:"Top right",value:"topRight"},bl:{name:"Bottom left",value:"bottomLeft"},br:{name:"Bottom right",value:"bottomRight"},hidden:{name:"Hidden",value:"hidden"}}},labelTextOpacity:{name:"Label Text Opacity",inlineOptions:c},labelBackgroundColor:{name:"Label Background Color",inlineOptions:a},labelBackgroundOpacity:{name:"Label Background Opacity",inlineOptions:c},viewResolution:{name:"View Resolution",inlineOptions:{high:{name:"High",value:384},medium:{name:"Medium",value:1024},low:{name:"Low",value:2048}}},colorRange:{name:"Color map",inlineOptions:{afmhot:{name:"afmhot",value:["rgba(0,0,0,1.0)","rgba(128,0,0,1.0)","rgba(256,129,1,1.0)","rgba(256,256,129,1.0)","rgba(256,256,256,1.0)"]},fall:{name:"fall",value:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"]},hot:{name:"hot",value:["rgba(10,0,0,1.0)","rgba(179,0,0,1.0)","rgba(256,91,0,1.0)","rgba(256,256,6,1.0)","rgba(256,256,256,1.0)"]},jet:{name:"jet",value:["rgba(0,0,128,1.0)","rgba(0,129,256,1.0)","rgba(125,256,122,1.0)","rgba(256,148,0,1.0)","rgba(128,0,0,1.0)"]},bwr:{name:"bwr",value:["rgba(0,0,256,1.0)","rgba(128,128,256,1.0)","rgba(256,254,254,1.0)","rgba(256,126,126,1.0)","rgba(256,0,0,1.0)"]},cubehelix:{name:"cubehelix",value:["rgba(0,0,0,1.0)","rgba(21,83,76,1.0)","rgba(162,121,74,1.0)","rgba(199,180,238,1.0)","rgba(256,256,256,1.0)"]},rainbow:{name:"rainbow",value:["rgba(128,0,256,1.0)","rgba(0,181,236,1.0)","rgba(129,255,180,1.0)","rgba(256,179,96,1.0)","rgba(256,0,0,1.0)"]},gray:{name:"greys",value:["rgba(255,255,255,1)","rgba(0,0,0,1)"]},red:{name:"White to red",value:["rgba(255,255,255,1)","rgba(255,0,0,1)"]},green:{name:"White to green",value:["rgba(255,255,255,1)","rgba(0,255,0,1)"]},blue:{name:"White to blue",value:["rgba(255,255,255,1)","rgba(0,0,255,1)"]},custard:{name:"custard",value:["#FFFFFF","#F8E71C","rgba(245,166,35,1)","rgba(0,0,0,1)"]},custom:{name:"Custom...",componentPickers:{heatmap:i.default,"horizontal-heatmap":i.default}}}},dataTransform:{name:"Transforms",inlineOptions:{default:{name:"Default",value:"default"},None:{name:"None",value:"None"}},generateOptions:function(e){var t=[];if(e.transforms){var n=!0,r=!1,i=void 0;try{for(var o,a=(0,l.default)(e.transforms);!(n=(o=a.next()).done);n=!0){var s=o.value;t.push({name:s.name,value:s.value})}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}return t}},maxZoom:{name:"Zoom limit",inlineOptions:{none:{name:"None",value:null}},generateOptions:function(e){if(e.maxZoom){for(var t=[],n=0;n<=e.maxZoom;n++){var r=e.maxWidth,i=e.binsPerDimension,o=e.maxZoom,a=1,s=1;if(e.resolutions){var l=e.resolutions.map(function(e){return+e}).sort(function(e,t){return t-e});a=l[0],s=l[n]}else s=e.maxWidth/(Math.pow(2,n)*e.binsPerDimension),a=r/(Math.pow(2,o)*i);var u=(0,d.precisionPrefix)(a,s),c=(0,d.formatPrefix)("."+String(u),s)(s);t.push({name:c,value:n.toString()})}return t}return[]}},valueColumn:{name:"Value column",inlineOptions:{none:{name:"None",value:null}},generateOptions:function(e){if(!e.header)return[];for(var t=e.header.split("\t"),n=[],r=0;r<t.length;r++)n.push({name:t[r],value:r+1});return n}}};t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=p(n(46)),s=p(n(40)),r=p(n(3)),i=p(n(1)),o=p(n(2)),l=p(n(4)),u=p(n(5)),c=p(n(0)),d=n(98),h=p(n(253)),f=p(n(548));function p(e){return e&&e.__esModule?e:{default:e}}n(267);var v=function(e){function n(e){(0,i.default)(this,n);var t=(0,l.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.state={colors:e.track.options.colorRange.slice()},t}return(0,u.default)(n,e),(0,o.default)(n,[{key:"handleColorsChanged",value:function(e){this.setState({colors:e})}},{key:"handleSubmit",value:function(){this.props.track.options.colorRange=this.state.colors,this.props.onSubmit(this.props.track.options)}},{key:"handleAddColor",value:function(){this.setState({colors:this.state.colors.concat(this.state.colors[this.state.colors.length-1])})}},{key:"handleRemoveColor",value:function(e){this.setState({colors:this.state.colors.slice(0,e).concat(this.state.colors.slice(e+1))})}},{key:"render",value:function(){var r=this,e=JSON.parse((0,s.default)(this.props.track)),t=(0,a.default)(e,{options:{colorRange:this.state.colors}}),n={editable:!1,zoomFixed:!0,views:[{uid:"hmo-"+String(this.props.track.uid),initialXDomain:this.props.xScale?this.props.xScale.domain():[0,1],initialYDomain:this.props.yScale?this.props.yScale.domain():[0,1],tracks:{center:[t]},layout:{x:0,y:0,h:12,w:12,i:"hmo-"+String(this.props.track.id)}}]},i=this.state.colors.map(function(e,t){var n=2<r.state.colors.length&&t===r.state.colors.length-1?c.default.createElement("div",{style:{background:"white",position:"absolute",top:0,right:0,opacity:1,width:14,height:14,borderRadius:2}},c.default.createElement("svg",{onClick:function(){return r.handleRemoveColor(t)},style:{position:"absolute",top:2,right:2,opacity:.5,width:10,height:10},height:"10px"},c.default.createElement("use",{xlinkHref:"#cross"}))):null;return c.default.createElement("td",{key:"l"+String(t),style:{border:"0px solid",position:"relative",outline:"none"}},n,c.default.createElement(f.default,{key:t,color:r.state.colors[t],onChange:function(e){r.state.colors[t]=e,r.handleColorsChanged(r.state.colors)}}))}),o=this.state.colors.length<4?c.default.createElement("td",{style:{border:"0px solid",position:"relative",outline:"none"}},c.default.createElement("div",{style:{height:24,marginLeft:5}},c.default.createElement("svg",{onClick:this.handleAddColor.bind(this),style:{opacity:.5},width:"10px",height:"10px"},c.default.createElement("use",{xlinkHref:"#plus"})))):null;return c.default.createElement(d.Modal,{onHide:this.props.handleCancel,show:!0,className:"hg-modal"},c.default.createElement(d.Modal.Header,{closeButton:!0},c.default.createElement(d.Modal.Title,null,"Heatmap Options")),c.default.createElement(d.Modal.Body,null,c.default.createElement("table",{className:"table-track-options"},c.default.createElement("thead",null),c.default.createElement("tbody",null,c.default.createElement("tr",null,c.default.createElement("td",{className:"td-track-options"},"Colors")),c.default.createElement("tr",null,c.default.createElement("td",{className:"td-track-options"},c.default.createElement("table",null,c.default.createElement("tbody",null,c.default.createElement("tr",null,i,o))))),c.default.createElement("tr",null,c.default.createElement("td",{className:"td-track-options"},"Preview")),c.default.createElement("tr",null,c.default.createElement("td",{rowSpan:"2",className:"td-track-options"},c.default.createElement("div",{style:{width:200}},c.default.createElement(h.default,{viewConfig:n,options:{bounded:!1}})))),c.default.createElement("tr",null)))),c.default.createElement(d.Modal.Footer,null,c.default.createElement(d.Button,{onClick:this.props.onCancel},"Cancel"),c.default.createElement(d.Button,{onClick:this.handleSubmit.bind(this)},"Submit")))}}]),n}(c.default.Component);t.default=v},function(e,t,n){e.exports=n(254).default,e.exports.utils=n(99),e.exports.Responsive=n(496).default,e.exports.Responsive.utils=n(258),e.exports.WidthProvider=n(497).default},function(e,t,n){"use strict";t.__esModule=!0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=o(n(0)),r=o(n(8)),i=n(256),v=n(493),s=n(99),h=o(n(255));function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(o){function a(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t=l(this,o.call.apply(o,[this].concat(r)))).state={resizing:null,dragging:null,className:""},l(t,e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o),a.prototype.calcColWidth=function(){var e=this.props,t=e.margin,n=e.containerPadding,r=e.containerWidth,i=e.cols;return(r-t[0]*(i-1)-2*n[0])/i},a.prototype.calcPosition=function(e,t,n,r,i){var o=this.props,a=o.margin,s=o.containerPadding,l=o.rowHeight,u=this.calcColWidth(),c={left:Math.round((u+a[0])*e+s[0]),top:Math.round((l+a[1])*t+s[1]),width:n===1/0?n:Math.round(u*n+Math.max(0,n-1)*a[0]),height:r===1/0?r:Math.round(l*r+Math.max(0,r-1)*a[1])};return i&&i.resizing&&(c.width=Math.round(i.resizing.width),c.height=Math.round(i.resizing.height)),i&&i.dragging&&(c.top=Math.round(i.dragging.top),c.left=Math.round(i.dragging.left)),c},a.prototype.calcXY=function(e,t){var n=this.props,r=n.margin,i=n.cols,o=n.rowHeight,a=n.w,s=n.h,l=n.maxRows,u=this.calcColWidth(),c=Math.round((t-r[0])/(u+r[0])),d=Math.round((e-r[1])/(o+r[1]));return{x:c=Math.max(Math.min(c,i-a),0),y:d=Math.max(Math.min(d,l-s),0)}},a.prototype.calcWH=function(e){var t=e.height,n=e.width,r=this.props,i=r.margin,o=r.maxRows,a=r.cols,s=r.rowHeight,l=r.x,u=r.y,c=this.calcColWidth(),d=Math.round((n+i[0])/(c+i[0])),h=Math.round((t+i[1])/(s+i[1]));return{w:d=Math.max(Math.min(d,a-l),0),h:h=Math.max(Math.min(h,o-u),0)}},a.prototype.createStyle=function(e){var t=this.props,n=t.usePercentages,r=t.containerWidth,i=void 0;return t.useCSSTransforms?i=(0,s.setTransform)(e):(i=(0,s.setTopLeft)(e),n&&(i.left=(0,s.perc)(e.left/r),i.width=(0,s.perc)(e.width/r))),i},a.prototype.mixinDraggable=function(e){return p.default.createElement(i.DraggableCore,{onStart:this.onDragHandler("onDragStart"),onDrag:this.onDragHandler("onDrag"),onStop:this.onDragHandler("onDragStop"),handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:"")},e)},a.prototype.mixinResizable=function(e,t){var n=this.props,r=n.cols,i=n.x,o=n.minW,a=n.minH,s=n.maxW,l=n.maxH,u=this.calcPosition(0,0,r-i,0).width,c=this.calcPosition(0,0,o,a),d=this.calcPosition(0,0,s,l),h=[c.width,c.height],f=[Math.min(d.width,u),Math.min(d.height,1/0)];return p.default.createElement(v.Resizable,{width:t.width,height:t.height,minConstraints:h,maxConstraints:f,onResizeStop:this.onResizeHandler("onResizeStop"),onResizeStart:this.onResizeHandler("onResizeStart"),onResize:this.onResizeHandler("onResize")},e)},a.prototype.onDragHandler=function(f){var p=this;return function(e,t){var n=t.node,r=t.deltaX,i=t.deltaY,o=p.props[f];if(o){var a={top:0,left:0};switch(f){case"onDragStart":var s=n.offsetParent;if(!s)return;var l=s.getBoundingClientRect(),u=n.getBoundingClientRect();a.left=u.left-l.left+s.scrollLeft,a.top=u.top-l.top+s.scrollTop,p.setState({dragging:a});break;case"onDrag":if(!p.state.dragging)throw new Error("onDrag called before onDragStart.");a.left=p.state.dragging.left+r,a.top=p.state.dragging.top+i,p.setState({dragging:a});break;case"onDragStop":if(!p.state.dragging)throw new Error("onDragEnd called before onDragStart.");a.left=p.state.dragging.left,a.top=p.state.dragging.top,p.setState({dragging:null});break;default:throw new Error("onDragHandler called with unrecognized handlerName: "+f)}var c=p.calcXY(a.top,a.left),d=c.x,h=c.y;return o.call(p,p.props.i,d,h,{e:e,node:n,newPosition:a})}}},a.prototype.onResizeHandler=function(m){var g=this;return function(e,t){var n=t.node,r=t.size,i=g.props[m];if(i){var o=g.props,a=o.cols,s=o.x,l=o.i,u=o.maxW,c=o.minW,d=o.maxH,h=o.minH,f=g.calcWH(r),p=f.w,v=f.h;p=Math.min(p,a-s),p=Math.max(p,1),p=Math.max(Math.min(p,u),c),v=Math.max(Math.min(v,d),h),g.setState({resizing:"onResizeStop"===m?null:r}),i.call(g,l,p,v,{e:e,node:n,size:r})}}},a.prototype.render=function(){var e=this.props,t=e.x,n=e.y,r=e.w,i=e.h,o=e.isDraggable,a=e.isResizable,s=e.useCSSTransforms,l=this.calcPosition(t,n,r,i,this.state),u=p.default.Children.only(this.props.children),c=p.default.cloneElement(u,{className:(0,h.default)("react-grid-item",u.props.className,this.props.className,{static:this.props.static,resizing:Boolean(this.state.resizing),"react-draggable":o,"react-draggable-dragging":Boolean(this.state.dragging),cssTransforms:s}),style:d({},this.props.style,u.props.style,this.createStyle(l))});return a&&(c=this.mixinResizable(c,l)),o&&(c=this.mixinDraggable(c)),c},a}(p.default.Component);a.propTypes={children:r.default.element,cols:r.default.number.isRequired,containerWidth:r.default.number.isRequired,rowHeight:r.default.number.isRequired,margin:r.default.array.isRequired,maxRows:r.default.number.isRequired,containerPadding:r.default.array.isRequired,x:r.default.number.isRequired,y:r.default.number.isRequired,w:r.default.number.isRequired,h:r.default.number.isRequired,minW:function(e,t){var n=e[t];return"number"!=typeof n?new Error("minWidth not Number"):n>e.w||n>e.maxW?new Error("minWidth larger than item width/maxWidth"):void 0},maxW:function(e,t){var n=e[t];return"number"!=typeof n?new Error("maxWidth not Number"):n<e.w||n<e.minW?new Error("maxWidth smaller than item width/minWidth"):void 0},minH:function(e,t){var n=e[t];return"number"!=typeof n?new Error("minHeight not Number"):n>e.h||n>e.maxH?new Error("minHeight larger than item height/maxHeight"):void 0},maxH:function(e,t){var n=e[t];return"number"!=typeof n?new Error("maxHeight not Number"):n<e.h||n<e.minH?new Error("maxHeight smaller than item height/minHeight"):void 0},i:r.default.string.isRequired,onDragStop:r.default.func,onDragStart:r.default.func,onDrag:r.default.func,onResizeStop:r.default.func,onResizeStart:r.default.func,onResize:r.default.func,isDraggable:r.default.bool.isRequired,isResizable:r.default.bool.isRequired,static:r.default.bool,useCSSTransforms:r.default.bool.isRequired,className:r.default.string,handle:r.default.string,cancel:r.default.string},a.defaultProps={className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0},t.default=a},function(e,t,n){"use strict";e.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},e.exports.Resizable=n(257).default,e.exports.ResizableBox=n(495).default},function(e,t,n){"use strict";var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),a=(r=o)&&r.__esModule?r:{default:r};e.exports=function(e,t){return t.style&&e.props.style&&(t.style=i({},e.props.style,t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),a.default.cloneElement(e,t)}},function(e,t,n){"use strict";t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=i(n(0)),r=i(n(8)),h=i(n(257));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o=function(o){function a(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r=s(this,o.call.apply(o,[this].concat(n)))).state={width:r.props.width,height:r.props.height},r.onResize=function(e,t){var n=t.size;n.width,n.height;r.props.onResize?(e.persist&&e.persist(),r.setState(n,function(){return r.props.onResize&&r.props.onResize(e,t)})):r.setState(n)},s(r,e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o),a.prototype.componentWillReceiveProps=function(e){e.width===this.props.width&&e.height===this.props.height||this.setState({width:e.width,height:e.height})},a.prototype.render=function(){var e=this.props,t=e.handleSize,n=(e.onResize,e.onResizeStart),r=e.onResizeStop,i=e.draggableOpts,o=e.minConstraints,a=e.maxConstraints,s=e.lockAspectRatio,l=e.axis,u=(e.width,e.height,function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height"]));return d.default.createElement(h.default,{handleSize:t,width:this.state.width,height:this.state.height,onResizeStart:n,onResize:this.onResize,onResizeStop:r,draggableOpts:i,minConstraints:o,maxConstraints:a,lockAspectRatio:s,axis:l},d.default.createElement("div",c({style:{width:this.state.width+"px",height:this.state.height+"px"}},u)))},a}(d.default.Component);o.propTypes={height:r.default.number,width:r.default.number},o.defaultProps={handleSize:[20,20]},t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=o(n(0)),i=o(n(8)),l=o(n(173)),u=n(99),c=n(258),d=o(n(254));function o(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){return Object.prototype.toString.call(e)},f=function(o){function a(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n=h(this,o.call.apply(o,[this].concat(r)))).state=n.generateInitialState(),n.onLayoutChange=function(e){var t;n.props.onLayoutChange(e,s({},n.props.layouts,((t={})[n.state.breakpoint]=e,t)))},h(n,e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o),a.prototype.generateInitialState=function(){var e=this.props,t=e.width,n=e.breakpoints,r=e.layouts,i=e.cols,o=(0,c.getBreakpointFromWidth)(n,t),a=(0,c.getColsFromBreakpoint)(o,i),s=!1===this.props.verticalCompact?null:this.props.compactType;return{layout:(0,c.findOrGenerateResponsiveLayout)(r,n,o,o,a,s),breakpoint:o,cols:a}},a.prototype.componentWillReceiveProps=function(e){if(e.width==this.props.width&&e.breakpoint===this.props.breakpoint&&(0,l.default)(e.breakpoints,this.props.breakpoints)&&(0,l.default)(e.cols,this.props.cols)){if(!(0,l.default)(e.layouts,this.props.layouts)){var t=this.state,n=t.breakpoint,r=t.cols,i=(0,c.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,n,n,r,e.compactType);this.setState({layout:i})}}else this.onWidthChange(e)},a.prototype.onWidthChange=function(e){var t=e.breakpoints,n=e.cols,r=e.layouts,i=e.compactType,o=e.breakpoint||(0,c.getBreakpointFromWidth)(e.breakpoints,e.width),a=this.state.breakpoint;if(a!==o||this.props.breakpoints!==t||this.props.cols!==n){a in r||(r[a]=(0,u.cloneLayout)(this.state.layout));var s=(0,c.getColsFromBreakpoint)(o,n),l=(0,c.findOrGenerateResponsiveLayout)(r,t,o,a,s,i);l=(0,u.synchronizeLayoutWithChildren)(l,e.children,s,i),r[o]=l,this.props.onLayoutChange(l,r),this.props.onBreakpointChange(o,s),this.props.onWidthChange(e.width,e.margin,s,e.containerPadding),this.setState({breakpoint:o,layout:l,cols:s})}},a.prototype.render=function(){var e=this.props,t=(e.breakpoint,e.breakpoints,e.cols,e.layouts,e.onBreakpointChange,e.onLayoutChange,e.onWidthChange,function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["breakpoint","breakpoints","cols","layouts","onBreakpointChange","onLayoutChange","onWidthChange"]));return r.default.createElement(d.default,s({},t,{onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))},a}(r.default.Component);f.propTypes={breakpoint:i.default.string,breakpoints:i.default.object,cols:i.default.object,layouts:function(t,e){if("[object Object]"!==a(t[e]))throw new Error("Layout property must be an object. Received: "+a(t[e]));Object.keys(t[e]).forEach(function(e){if(!(e in t.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,u.validateLayout)(t.layouts[e],"layouts."+e)})},width:i.default.number.isRequired,onBreakpointChange:i.default.func,onLayoutChange:i.default.func,onWidthChange:i.default.func},f.defaultProps={breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},layouts:{},onBreakpointChange:u.noop,onLayoutChange:u.noop,onWidthChange:u.noop},t.default=f},function(e,t,n){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(r){var e,t;return t=e=function(o){function a(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=u(this,o.call.apply(o,[this].concat(r))),(e=t).state={width:1280},t.mounted=!1,t.onWindowResize=function(){if(t.mounted){var e=l.default.findDOMNode(t);e instanceof HTMLElement&&t.setState({width:e.offsetWidth})}},u(t,e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o),a.prototype.componentDidMount=function(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize),this.onWindowResize()},a.prototype.componentWillUnmount=function(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize)},a.prototype.render=function(){var e=this.props,t=e.measureBeforeMount,n=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["measureBeforeMount"]);return t&&!this.mounted?s.default.createElement("div",{className:this.props.className,style:this.props.style}):s.default.createElement(r,i({},n,this.state))},a}(s.default.Component),e.defaultProps={measureBeforeMount:!1},e.propTypes={measureBeforeMount:o.default.bool},t};var s=r(n(0)),o=r(n(8)),l=r(n(29));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";var r,i,o,a;"undefined"!=typeof window&&window,a=function(g){var t=function(){var o,d={},a=[];function s(e){e||(e=document.documentElement);var t=window.getComputedStyle(e,null).fontSize;return parseFloat(t)||16}function h(e,t){var n=t.split(/\d/),r=n[n.length-1];switch(t=parseFloat(t),r){case"px":return t;case"em":return t*s(e);case"rem":return t*s();case"vw":return t*document.documentElement.clientWidth/100;case"vh":return t*document.documentElement.clientHeight/100;case"vmin":case"vmax":var i=document.documentElement.clientWidth/100,o=document.documentElement.clientHeight/100;return t*(0,Math["vmin"===r?"min":"max"])(i,o);default:return t}}function n(e,t){var n,r,i,o,a,s,l,u;this.element=e;var c=["min-width","min-height","max-width","max-height"];this.call=function(){for(n in i=function(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}(this.element),s={},d[t])d[t].hasOwnProperty(n)&&(r=d[t][n],o=h(this.element,r.value),a="width"===r.property?i.width:i.height,u=r.mode+"-"+r.property,l="","min"===r.mode&&o<=a&&(l+=r.value),"max"===r.mode&&a<=o&&(l+=r.value),s[u]||(s[u]=""),l&&-1===(" "+s[u]+" ").indexOf(" "+l+" ")&&(s[u]+=" "+l));for(var e in c)c.hasOwnProperty(e)&&(s[c[e]]?this.element.setAttribute(c[e],s[c[e]].substr(1)):this.element.removeAttribute(c[e]))}}function l(e,t){e.elementQueriesSetupInformation||(e.elementQueriesSetupInformation=new n(e,t)),e.elementQueriesSensor||(e.elementQueriesSensor=new g(e,function(){e.elementQueriesSetupInformation.call()})),e.elementQueriesSetupInformation.call()}function u(e,t,n,r){if(void 0===d[e]){d[e]=[];var i=a.length;o.innerHTML+="\n"+e+" {animation: 0.1s element-queries;}",o.innerHTML+="\n"+e+" > .resize-sensor {min-width: "+i+"px;}",a.push(e)}d[e].push({mode:t,property:n,value:r})}function c(e){var t;if(document.querySelectorAll&&(t=e?e.querySelectorAll.bind(e):document.querySelectorAll.bind(document)),t||"undefined"==typeof $$||(t=$$),t||"undefined"==typeof jQuery||(t=jQuery),!t)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return t}function r(r){var i=[],o=[],a=[],s=0,l=-1,u=[];for(var e in r.children)if(r.children.hasOwnProperty(e)&&r.children[e].tagName&&"img"===r.children[e].tagName.toLowerCase()){i.push(r.children[e]);var t=r.children[e].getAttribute("min-width")||r.children[e].getAttribute("data-min-width"),n=r.children[e].getAttribute("data-src")||r.children[e].getAttribute("url");a.push(n);var c={minWidth:t};o.push(c),t?r.children[e].style.display="none":(s=i.length-1,r.children[e].style.display="block")}function d(){var e,t=!1;for(e in i)i.hasOwnProperty(e)&&o[e].minWidth&&r.offsetWidth>o[e].minWidth&&(t=e);if(t||(t=s),l!==t)if(u[t])i[l].style.display="none",i[t].style.display="block",l=t;else{var n=new Image;n.onload=function(){i[t].src=a[t],i[l].style.display="none",i[t].style.display="block",u[t]=!0,l=t},n.src=a[t]}else i[t].src=a[t]}l=s,r.resizeSensor=new g(r,d),d()}var f=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,p=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function i(e){var t,n,r,i;for(e=e.replace(/'/g,'"');null!==(t=f.exec(e));)for(n=t[1]+t[3],r=t[2];null!==(i=p.exec(r));)u(n,i[1],i[2],i[3])}function v(e){var t="";if(e)if("string"==typeof e)-1===(e=e.toLowerCase()).indexOf("min-width")&&-1===e.indexOf("max-width")||i(e);else for(var n=0,r=e.length;n<r;n++)1===e[n].type?-1!==(t=e[n].selectorText||e[n].cssText).indexOf("min-height")||-1!==t.indexOf("max-height")?i(t):-1===t.indexOf("min-width")&&-1===t.indexOf("max-width")||i(t):4===e[n].type?v(e[n].cssRules||e[n].rules):3===e[n].type&&e[n].styleSheet.hasOwnProperty("cssRules")&&v(e[n].styleSheet.cssRules)}var m=!1;this.init=function(){var e="animationstart";void 0!==document.documentElement.style.webkitAnimationName?e="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?e="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(e="oanimationstart"),document.body.addEventListener(e,function(e){var t=e.target;if(-1!==window.getComputedStyle(t,null).getPropertyValue("animation-name").indexOf("element-queries")){t.elementQueriesSensor=new g(t,function(){t.elementQueriesSetupInformation&&t.elementQueriesSetupInformation.call()});var n=window.getComputedStyle(t.resizeSensor,null).getPropertyValue("min-width");n=parseInt(n.replace("px","")),l(e.target,a[n])}}),m||((o=document.createElement("style")).type="text/css",o.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",o.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(o),m=!0);for(var t=0,n=document.styleSheets.length;t<n;t++)try{document.styleSheets[t].href&&0===document.styleSheets[t].href.indexOf("file://")&&console.log("CssElementQueries: unable to parse local css files, "+document.styleSheets[t].href),v(document.styleSheets[t].cssRules||document.styleSheets[t].rules||document.styleSheets[t].cssText)}catch(e){}!function(){for(var e=c()("[data-responsive-image],[responsive-image]"),t=0,n=e.length;t<n;t++)r(e[t])}()},this.findElementQueriesElements=function(e){!function(e){var t=c(e);for(var n in d)if(d.hasOwnProperty(n))for(var r=t(n,e),i=0,o=r.length;i<o;i++)l(r[i],n)}(e)},this.update=function(){this.init()}};t.update=function(){t.instance.update()},t.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor):e.resizeSensor&&(e.resizeSensor.detach(),delete e.resizeSensor)},t.init=function(){t.instance||(t.instance=new t),t.instance.init()};return t.findElementQueriesElements=function(e){t.instance.findElementQueriesElements(e)},t.listen=function(){!function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))},10);else window.onload=e}(t.init)},t},i=[n(260)],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o)},function(e,t){function p(e){var t="    ";if(isNaN(parseInt(e)))t=e;else switch(e){case 1:t=" ";break;case 2:t="  ";break;case 3:t="   ";break;case 4:t="    ";break;case 5:t="     ";break;case 6:t="      ";break;case 7:t="       ";break;case 8:t="        ";break;case 9:t="         ";break;case 10:t="          ";break;case 11:t="           ";break;case 12:t="            "}for(var n=["\n"],r=0;r<100;r++)n.push(n[r]+t);return n}function n(){this.step="    ",this.shift=p(this.step)}n.prototype.xml=function(e,t){var n=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),r=n.length,i=!1,o=0,a="",s=0,l=t?p(t):this.shift;for(s=0;s<r;s++)-1<n[s].search(/<!/)?(a+=l[o]+n[s],i=!0,(-1<n[s].search(/-->/)||-1<n[s].search(/\]>/)||-1<n[s].search(/!DOCTYPE/))&&(i=!1)):-1<n[s].search(/-->/)||-1<n[s].search(/\]>/)?(a+=n[s],i=!1):/^<\w/.exec(n[s-1])&&/^<\/\w/.exec(n[s])&&/^<[\w:\-\.\,]+/.exec(n[s-1])==/^<\/[\w:\-\.\,]+/.exec(n[s])[0].replace("/","")?(a+=n[s],i||o--):-1<n[s].search(/<\w/)&&-1==n[s].search(/<\//)&&-1==n[s].search(/\/>/)?a=a+=i?n[s]:l[o++]+n[s]:-1<n[s].search(/<\w/)&&-1<n[s].search(/<\//)?a=a+=i?n[s]:l[o]+n[s]:-1<n[s].search(/<\//)?a=a+=i?n[s]:l[--o]+n[s]:-1<n[s].search(/\/>/)?a=a+=i?n[s]:l[o]+n[s]:-1<n[s].search(/<\?/)?a+=l[o]+n[s]:-1<n[s].search(/xmlns\:/)||-1<n[s].search(/xmlns\=/)?a+=l[o]+n[s]:a+=n[s];return"\n"==a[0]?a.slice(1):a},n.prototype.json=function(e,t){t=t||this.step;return"undefined"==typeof JSON?e:"string"==typeof e?JSON.stringify(JSON.parse(e),null,t):"object"==typeof e?JSON.stringify(e,null,t):e},n.prototype.css=function(e,t){var n=e.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),r=n.length,i=0,o="",a=0,s=t?p(t):this.shift;for(a=0;a<r;a++)/\{/.exec(n[a])?o+=s[i++]+n[a]:/\}/.exec(n[a])?o+=s[--i]+n[a]:(/\*\\/.exec(n[a]),o+=s[i]+n[a]);return o.replace(/^\n{1,}/,"")},n.prototype.sql=function(e,t){var n,r,i,o=e.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),a=o.length,s=[],l=0,u=this.step,c=0,d="",h=0,f=t?p(t):this.shift;for(h=0;h<a;h++)s=h%2?s.concat(o[h]):s.concat((n=o[h],r=u,n.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+r+r+"AND ").replace(/ BETWEEN /gi,"~::~"+r+"BETWEEN ").replace(/ CASE /gi,"~::~"+r+"CASE ").replace(/ ELSE /gi,"~::~"+r+"ELSE ").replace(/ END /gi,"~::~"+r+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+r+"ON ").replace(/ OR /gi,"~::~"+r+r+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+r+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+r).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+r+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")));for(a=s.length,h=0;h<a;h++){i=s[h],c=c-(i.replace(/\(/g,"").length-i.replace(/\)/g,"").length),/\s{0,}\s{0,}SELECT\s{0,}/.exec(s[h])&&(s[h]=s[h].replace(/\,/g,",\n"+u+u)),/\s{0,}\s{0,}SET\s{0,}/.exec(s[h])&&(s[h]=s[h].replace(/\,/g,",\n"+u+u)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(s[h])?d+=f[++l]+s[h]:/\'/.exec(s[h])?(c<1&&l&&l--,d+=s[h]):(d+=f[l]+s[h],c<1&&l&&l--)}return d=d.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},n.prototype.xmlmin=function(e,t){return(t?e:e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},n.prototype.jsonmin=function(e){return"undefined"==typeof JSON?e:JSON.stringify(JSON.parse(e),null,0)},n.prototype.cssmin=function(e,t){return(t?e:e.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},n.prototype.sqlmin=function(e){return e.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},e.exports=new n},function(e,t,r){"use strict";(function(i){var f=r(501),p=r(502),n=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,v=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],a={hash:1,query:1};function m(e){var t,n={},r=typeof(e=e||i.location||{});if("blob:"===e.protocol)n=new y(unescape(e.pathname),{});else if("string"===r)for(t in n=new y(e,{}),a)delete n[t];else if("object"===r){for(t in e)t in a||(n[t]=e[t]);void 0===n.slashes&&(n.slashes=o.test(e.href))}return n}function g(e){var t=n.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function y(e,t,n){if(!(this instanceof y))return new y(e,t,n);var r,i,o,a,s,l,u=v.slice(),c=typeof t,d=this,h=0;for("object"!==c&&"string"!==c&&(n=t,t=null),n&&"function"!=typeof n&&(n=p.parse),t=m(t),r=!(i=g(e||"")).protocol&&!i.slashes,d.slashes=i.slashes||r&&t.slashes,d.protocol=i.protocol||t.protocol||"",e=i.rest,i.slashes||(u[2]=[/(.*)/,"pathname"]);h<u.length;h++)o=(a=u[h])[0],l=a[1],o!=o?d[l]=e:"string"==typeof o?~(s=e.indexOf(o))&&("number"==typeof a[2]?(d[l]=e.slice(0,s),e=e.slice(s+a[2])):(d[l]=e.slice(s),e=e.slice(0,s))):(s=o.exec(e))&&(d[l]=s[1],e=e.slice(0,s.index)),d[l]=d[l]||r&&a[3]&&t[l]||"",a[4]&&(d[l]=d[l].toLowerCase());n&&(d.query=n(d.query)),r&&t.slashes&&"/"!==d.pathname.charAt(0)&&(""!==d.pathname||""!==t.pathname)&&(d.pathname=function(e,t){for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(o=!0),n.splice(r,1),a--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(d.pathname,t.pathname)),f(d.port,d.protocol)||(d.host=d.hostname,d.port=""),d.username=d.password="",d.auth&&(a=d.auth.split(":"),d.username=a[0]||"",d.password=a[1]||""),d.origin=d.protocol&&d.host&&"file:"!==d.protocol?d.protocol+"//"+d.host:"null",d.href=d.toString()}y.prototype={set:function(e,t,n){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||p.parse)(t)),r[e]=t;break;case"port":r[e]=t,f(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";r[e]=t.charAt(0)!==i?i+t:t}else r[e]=t;break;default:r[e]=t}for(var o=0;o<v.length;o++){var a=v[o];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=p.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var i=r+(n.slashes?"//":"");return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i}},y.extractProtocol=g,y.location=m,y.qs=p,e.exports=y}).call(t,r(65))},function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty;function o(e){return decodeURIComponent(e.replace(/\+/g," "))}t.stringify=function(e,t){t=t||"";var n=[];for(var r in"string"!=typeof t&&(t="?"),e)i.call(e,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.length?t+n.join("&"):""},t.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,r={};t=n.exec(e);r[o(t[1])]=o(t[2]));return r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var S=B(n(504)),T=B(n(22)),p=B(n(11)),v=B(n(80)),m=B(n(81)),i=B(n(37)),s=B(n(40)),o=B(n(24)),a=B(n(3)),l=B(n(1)),u=B(n(2)),c=B(n(4)),d=B(n(5)),h=n(!function(){var e=new Error('Cannot find module "d3-selection"');throw e.code="MODULE_NOT_FOUND",e}()),f=B(n(21)),C=B(n(0)),g=B(n(29)),r=B(n(8)),y=n(259),b=B(n(48)),w=B(n(505)),O=B(n(506)),x=B(n(507)),_=B(n(509)),k=B(n(264)),E=B(n(525)),M=B(n(527)),P=B(n(175)),A=B(n(69)),R=B(n(213)),j=B(n(528)),I=B(n(531)),L=n(9),D=n(6),N=n(12);B(n(122)),B(n(261));function B(e){return e&&e.__esModule?e:{default:e}}var F=function(e){function r(e){(0,l.default)(this,r);var t=(0,c.default)(this,(r.__proto__||(0,a.default)(r)).call(this,e));t.closing=!1;var n=t.props.tracks;return t.xScale=null,t.yScale=null,t.addUidsToTracks(n),t.trackToReplace=null,t.trackRenderer=null,t.addTrackModal=null,t.configTrackMenu=null,t.state={sizeMeasured:!1,height:10,width:10,tracks:n,addTrackPosition:null,mouseOverOverlayUid:null,forceUpdate:0,rangeSelection:[null,null],chromInfo:null,defaultChromSizes:null,contextMenuCustomItems:null,contextMenuPosition:null,addDivisorDialog:null},window.higlassTracksByType&&(0,o.default)(window.higlassTracksByType).forEach(function(e){N.TRACKS_INFO_BY_TYPE[e]=window.higlassTracksByType[e].config}),t.topHeight=0,t.bottomHeight=0,t.leftWidth=0,t.rightWidth=0,t.centerHeight=0,t.centerWidth=0,t.dragTimeout=null,t.previousPropsStr="",t.contextMenuHandlerBound=t.contextMenuHandler.bind(t),t}return(0,d.default)(r,e),(0,u.default)(r,[{key:"waitForDOMAttachment",value:function(e){var t=this;if(this.mounted){var n=g.default.findDOMNode(this);document.body.contains(n)?e():requestAnimationFrame(function(){return t.waitForDOMAttachment(e)})}}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,this.element=g.default.findDOMNode(this),this.waitForDOMAttachment(function(){y.ElementQueries.listen(),e.resizeSensor=new y.ResizeSensor(e.element.parentNode,e.measureSize.bind(e)),e.measureSize()}),this.addEventListeners(),this.pubSubs=[],this.pubSubs.push(L.pubSub.subscribe("contextmenu",this.contextMenuHandlerBound))}},{key:"componentWillReceiveProps",value:function(e){this.addUidsToTracks(e.tracks),this.setState({tracks:e.tracks})}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.previousPropsStr,r=this.updatablePropsToString(e),i=(0,s.default)(this.state),o=(0,s.default)(t),a=n!==r||i!==o||this.props.chooseTrackHandler!==e.chooseTrackHandler;return a&&(this.previousPropsStr=r),a}},{key:"componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(t.rangeSelection!==this.state.rangeSelection){var r=[null,null];this.state.defaultChromSizes&&this.state.rangeSelection.every(function(e){return e&&e.length})&&(r=this.state.rangeSelection.map(function(e){return D.dataToGenomicLoci.apply(void 0,(0,i.default)(e).concat([n.state.defaultChromSizes]))})),this.props.onRangeSelection({dataRange:this.state.rangeSelection,genomicRange:r})}e.tracks.center,this.props.tracks.center}},{key:"componentWillUnmount",value:function(){this.closing=!0,this.removeEventListeners(),this.pubSubs.forEach(function(e){return L.pubSub.unsubscribe(e)})}},{key:"addUidsToTracks",value:function(e){for(var t in e)for(var n=0;n<e[t].length;n++)e[t][n].uid=e[t][n].uid?e[t][n].uid:f.default.nice()}},{key:"contextMenuHandler",value:function(e){if(this.divTiledPlot){var t=this.divTiledPlot.getBoundingClientRect();if((0,D.isWithin)(e.clientX,e.clientY,t.left,t.left+t.width,t.top,t.top+t.height)){var n=[e.clientX,e.clientY],r=(0,h.clientPoint)(this.divTiledPlot,e),i=this.trackRenderer.zoomedXScale.invert(r[0]),o=this.trackRenderer.zoomedYScale.invert(r[1]),a=null;e.hgCustomItems&&(a=e.hgCustomItems.map(function(e){return C.default.createElement(b.default,{key:e.key,onClick:e.onClick},e.text)})),this.setState({contextMenuCustomItems:a,contextMenuPosition:{left:n[0],top:n[1],canvasLeft:r[0]+this.trackRenderer.xPositionOffset,canvasTop:r[1]+this.trackRenderer.yPositionOffset},contextMenuDataX:i,contextMenuDataY:o})}}}},{key:"measureSize",value:function(){var e=this.element.clientHeight-0,t=this.element.clientWidth;0<t&&0<e&&this.setState({sizeMeasured:!0,width:t,height:e})}},{key:"handleTrackOptionsChanged",value:function(e,t){return this.props.onTrackOptionsChanged(e,t)}},{key:"handleScalesChanged",value:function(e,t){this.xScale=e,this.yScale=t,this.props.onScalesChanged(e,t)}},{key:"handleTilesetInfoReceived",value:function(e,t){var n=(0,D.getTrackByUid)(this.props.tracks,e);n?(n.options||(n.options={}),n.name=t.name,n.maxWidth=t.max_width,n.transforms=t.transforms,n.header=t.header,n.binsPerDimension=t.bins_per_dimension,t.resolutions?(n.maxZoom=t.resolutions.length-1,n.resolutions=t.resolutions):n.maxZoom=t.max_zoom,n.coordSystem=t.coordSystem):console.warn("Strange, track not found:",e)}},{key:"handleOverlayMouseEnter",value:function(e){this.setState({mouseOverOverlayUid:e})}},{key:"handleOverlayMouseLeave",value:function(){this.setState({mouseOverOverlayUid:null})}},{key:"handleTrackPositionChosen",value:function(e){this.handleAddTrack(e),this.props.onTrackPositionChosen(e)}},{key:"handleNoTrackAdded",value:function(){this.trackToReplace=null,this.props.onNoTrackAdded(),this.setState({addTrackPosition:null,addTrackHost:null})}},{key:"handleAddDivisor",value:function(e){this.setState({addDivisorDialog:e})}},{key:"handleDivisorChosen",value:function(e,t){this.setState({addDivisorDialog:null});var n=e.data?{server:e.data.server,tilesetUid:e.data.tilesetUid}:{server:e.server,tilesetUid:e.tilesetUid},r={server:t[0].server,tilesetUid:t[0].uuid};this.handleChangeTrackData(e.uid,{type:"divided",children:[n,r]})}},{key:"getAddDivisorDialog",value:function(){var t=this;if(!this.state.addDivisorDialog)return null;var n=this.state.addDivisorDialog,e=N.TRACKS_INFO_BY_TYPE[n.type].datatype[0];return C.default.createElement(k.default,{host:this.state.addTrackHost,onCancel:function(){t.setState({addDivisorDialog:null})},onTracksChosen:function(e){return t.handleDivisorChosen(n,e)},datatype:e,ref:function(e){t.addTrackModal=e},show:null!=this.state.addDivisorDialog,trackSourceServers:this.props.trackSourceServers,hidePlotTypeChooser:!0})}},{key:"handleDivideSeries",value:function(e){}},{key:"handleAddSeries",value:function(e){var t=(0,D.getTrackPositionByUid)(this.props.tracks,e),n=(0,D.getTrackByUid)(this.props.tracks,e);this.setState({addTrackPosition:t,addTrackHost:n})}},{key:"handleReplaceTrack",value:function(e,t){this.trackToReplace=e,this.handleAddTrack(t)}},{key:"handleAddTrack",value:function(e){this.setState({addTrackPosition:e,addTrackHost:null})}},{key:"handleResizeTrack",value:function(t,e,n){var r=this.state.tracks;for(var i in r){var o=r[i].filter(function(e){return e.uid==t});0<o.length&&(o[0].width=e,o[0].height=n)}this.setState({tracks:r,forceUpdate:Math.random()})}},{key:"closeMenus",value:function(){this.setState({closeTrackMenuId:null,configTrackMenuId:null,contextMenuPosition:null,contextMenuCustomItems:null})}},{key:"handleLockValueScale",value:function(e){this.closeMenus(),this.props.onLockValueScale(e)}},{key:"handleUnlockValueScale",value:function(e){this.closeMenus(),this.props.onUnlockValueScale(e)}},{key:"handleCloseTrack",value:function(e){this.closeMenus(),this.props.onCloseTrack(e)}},{key:"handleChangeTrackType",value:function(e,t){this.closeMenus(),this.props.onChangeTrackType(e,t)}},{key:"handleChangeTrackData",value:function(e,t){this.closeMenus(),this.props.onChangeTrackData(e,t)}},{key:"handleTracksAdded",value:function(e,t,n){return this.trackToReplace&&(this.handleCloseTrack(this.trackToReplace),this.trackToReplace=null),this.props.onTracksAdded(e,t,n),this.setState({addTrackPosition:null,addTrackHost:null}),e}},{key:"handleCloseTrackMenuOpened",value:function(e,t){this.setState({closeTrackMenuId:e,closeTrackMenuLocation:t})}},{key:"handleCloseContextMenu",value:function(){this.setState({contextMenuCustomItems:null,contextMenuPosition:null,contextMenuDataX:null,contextMenuDataY:null})}},{key:"handleCloseTrackMenuClosed",value:function(){this.setState({closeTrackMenuId:null})}},{key:"handleConfigTrackMenuOpened",value:function(e,t){this.closeMenus(),this.setState({configTrackMenuId:e,configTrackMenuLocation:t})}},{key:"handleConfigureTrack",value:function(e,t){this.setState({configTrackMenuId:null,trackOptions:{track:e,configComponent:t}}),this.closeMenus()}},{key:"handleSortEnd",value:function(e){for(var t=this.state.tracks,n={},r=0;r<e.length;r++)n[e[r].uid]=r;for(var i in t){var o=t[i];if(o.length&&o[0].uid in n){for(var a=new Array(o.length),s=0;s<o.length;s++)a[n[o[s].uid]]=o[s];t[i]=a}}this.setState({tracks:t,forceUpdate:Math.random()})}},{key:"createTracksAndLocations",value:function(){var n=[],e=this.state.tracks;return N.TRACK_LOCATIONS.forEach(function(t){e[t]&&e[t].forEach(function(e){n.push({track:e,location:t})})}),n}},{key:"calculateTrackPosition",value:function(e,t){var n=this.props.verticalMargin,r=this.props.verticalMargin,i=this.props.horizontalMargin,o=this.props.horizontalMargin,a=this.centerWidth,s=e.height,l=0,u=0;switch(t){case"top":i+=this.leftWidth;for(var c=0;c<this.state.tracks.top.length&&this.state.tracks.top[c].uid!==e.uid;c++)n+=this.state.tracks.top[c].height;break;case"bottom":i+=this.leftWidth,n+=this.topHeight+this.centerHeight+this.galleryDim;for(var d=0;d<this.state.tracks.bottom.length&&this.state.tracks.bottom[d].uid!==e.uid;d++)n+=this.state.tracks.bottom[d].height;break;case"left":n+=this.topHeight,a=e.width,s=this.centerHeight;for(var h=0;h<this.state.tracks.left.length&&this.state.tracks.left[h].uid!==e.uid;h++)i+=this.state.tracks.left[h].width;break;case"right":i+=this.leftWidth+this.centerWidth+this.galleryDim,n+=this.topHeight,a=e.width,s=this.centerHeight;for(var f=0;f<this.state.tracks.right.length&&this.state.tracks.right[f].uid!==e.uid;f++)i+=this.state.tracks.right[f].width;break;case"center":i+=this.leftWidth,n+=this.topHeight,s=this.centerHeight;break;case"gallery":i+=this.leftWidthNoGallery,n+=this.topHeightNoGallery,a=this.state.width-this.leftWidthNoGallery-this.rightWidthNoGallery-2*this.props.horizontalMargin,s=this.state.height-this.topHeightNoGallery-this.bottomHeightNoGallery-2*this.props.verticalMargin,l=this.galleryDim,u=this.galleryDim;for(var p=0;p<this.state.tracks.gallery.length&&this.state.tracks.gallery[p].uid!==e.uid;p++)a-=2*this.state.tracks.gallery[p].height,s-=2*this.state.tracks.gallery[p].height,i+=this.state.tracks.gallery[p].height,n+=this.state.tracks.gallery[p].height,l-=this.state.tracks.gallery[p].height,u-=this.state.tracks.gallery[p].height;for(var v=0;v<this.state.tracks.right.length;v++)o+=this.state.tracks.right[v].width;for(var m=0;m<this.state.tracks.bottom.length;m++)r+=this.state.tracks.bottom[m].height;e.offsetX=l,e.offsetY=u,e.offsetTop=n,e.offsetRight=o,e.offsetBottom=r,e.offsetLeft=i;break;case"whole":default:a=this.leftWidth+this.centerWidth+this.rightWidth,s=this.topHeight+this.centerHeight+this.bottomHeight}return-1===N.TRACK_LOCATIONS.indexOf(t)&&console.warn("Track with unknown position present:",t,e),{left:i,top:n,width:a,height:s,track:e}}},{key:"findCentralHeatmapTrack",value:function(e){for(var t=0;t<e.length;t++){if("combined"===e[t].type)return this.findCentralHeatmapTrack(e[t].contents);if("heatmap"===e[t].type)return e[t]}}},{key:"positionedTracks",value:function(){var r=this;return this.createTracksAndLocations().map(function(e){var t=e.track,n=e.location;return r.calculateTrackPosition(t,n)})}},{key:"createTrackPositionTexts",value:function(){var e=this.positionedTracks();return this.createTracksAndLocations(),e.map(function(e){var t=e.track;return C.default.createElement("div",{key:t.uid,style:{left:e.left,top:e.top,width:e.width,height:e.height,position:"absolute"}},t.uid.slice(0,2))})}},{key:"handleExportTrackData",value:function(e,t){var n=(0,D.getTrackByUid)(this.props.tracks,t);this.trackRenderer.trackDefObjects[e].trackObject.createdTracks[n.uid].exportData()}},{key:"listTracksAtPosition",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=[];for(var i in this.trackRenderer.trackDefObjects){var o=this.trackRenderer.trackDefObjects[i].trackObject;if(o.respondsToPosition(e,t))if(n){if(this.props.tracks.center)if(this.props.tracks.center.contents)for(var a=0;a<this.props.tracks.center.contents.length;a++)this.props.tracks.center.contents[a].uid==i&&(o.is2d=!0);else this.props.tracks.center&&this.props.tracks.center.length&&this.props.tracks.center[0].uid==i&&(o.is2d=!0);r.push(o)}else r.push(this.trackRenderer.trackDefObjects[i].trackDef.track)}return r}},{key:"listAllTrackObjects",value:function(){var e=[];for(var t in this.trackRenderer.trackDefObjects){var n=this.trackRenderer.trackDefObjects[t];if(n.trackObject.createdTracks)for(var r in n.trackObject.createdTracks){var i=n.trackObject.createdTracks[r];e.push(i)}else e.push(n.trackObject)}return e}},{key:"handleZoomToData",value:function(){var e=m.default,t=v.default,n=[e,e],r=[t,t],i=this.listAllTrackObjects(),o=!0,a=!1,s=void 0;try{for(var l,u=(0,p.default)(i);!(o=(l=u.next()).done);o=!0){var c=l.value;if(c.tilesetInfo&&c.tilesetInfo.min_pos)for(var d=0;d<c.tilesetInfo.min_pos.length;d++)c.tilesetInfo.min_pos[d]<n[d]&&(n[d]=c.tilesetInfo.min_pos[d]),c.tilesetInfo.max_pos[d]>r[d]&&(r[d]=c.tilesetInfo.max_pos[d])}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}var h=[this.trackRenderer.currentProps.marginLeft+this.trackRenderer.currentProps.leftWidth,this.trackRenderer.currentProps.marginLeft+this.trackRenderer.currentProps.leftWidth+this.trackRenderer.currentProps.centerWidth].map(this.trackRenderer.zoomTransform.rescaleX(this.trackRenderer.xScale).invert),f=[this.trackRenderer.currentProps.marginTop+this.trackRenderer.currentProps.topHeight,this.trackRenderer.currentProps.marginTop+this.trackRenderer.currentProps.topHeight+this.trackRenderer.currentProps.centerHeight].map(this.trackRenderer.zoomTransform.rescaleY(this.trackRenderer.yScale).invert);this.trackRenderer.zoomTransform.k=1,this.trackRenderer.zoomTransform.x=0,this.trackRenderer.zoomTransform.y=0,this.trackRenderer.applyZoomTransform(),n[0]<m.default&&r[0]>v.default&&(h=[n[0],r[0]]),n[1]<m.default&&r[1]>v.default&&(f=[n[1],r[1]]),this.props.onDataDomainChanged(h,f)}},{key:"updatablePropsToString",value:function(e){return(0,s.default)({tracks:e.tracks,viewOptions:e.viewOptions,uid:e.uid,addTrackPosition:e.addTrackPosition,editable:e.editable,horizontalMargin:e.horizontalMargin,mouseTool:e.mouseTool,verticalTiledPlot:e.verticalMargin,initialXDomain:e.initialXDomain,initialYDomain:e.initialYDomain,trackSourceServers:e.trackSourceServers,zoomable:e.zoomable,draggingHappending:e.draggingHappening})}},{key:"rangeViewToDataLoci",value:function(e,t){return[parseInt(t.invert(e[0]),10),parseInt(t.invert(e[1]),10)]}},{key:"rangeSelectionEndHandler",value:function(){this.state.rangeSelectionMaster&&this.setState({is1dRangeSelection:null,rangeSelection:[null,null],rangeSelectionMaster:null})}},{key:"rangeSelection1dHandler",value:function(n){var r=this,i="x"===n?this.xScale:this.yScale;return function(e){var t=r.state.is1dRangeSelection?[null,null]:r.state.rangeSelection.slice();t[r.state.is1dRangeSelection||"y"!==n?0:1]=r.rangeViewToDataLoci(e,i),r.setState({rangeSelection:t})}}},{key:"rangeSelection1dStartHandler",value:function(){this.state.rangeSelectionMaster||this.setState({is1dRangeSelection:!0,rangeSelectionMaster:!0})}},{key:"rangeSelection2dHandler",value:function(e){this.setState({rangeSelection:[this.rangeViewToDataLoci(e[0],this.xScale),this.rangeViewToDataLoci(e[1],this.yScale)]})}},{key:"rangeSelection2dStartHandler",value:function(){this.state.rangeSelectionMaster||this.setState({is1dRangeSelection:!1,rangeSelectionMaster:!0})}},{key:"getContextMenu",value:function(){var t=this;if(this.state.contextMenuPosition){var e=this.listTracksAtPosition(this.state.contextMenuPosition.canvasLeft,this.state.contextMenuPosition.canvasTop);return C.default.createElement(P.default,{onMenuClosed:this.closeMenus.bind(this)},C.default.createElement(I.default,{closeMenu:this.closeMenus.bind(this),coords:[this.state.contextMenuDataX,this.state.contextMenuDataY],customItems:this.state.contextMenuCustomItems,onAddSeries:this.handleAddSeries.bind(this),onAddTrack:function(e){t.props.onTracksAdded([e],e.position,null),t.handleCloseContextMenu()},onChangeTrackType:this.handleChangeTrackType.bind(this),onChangeTrackData:this.handleChangeTrackData.bind(this),onAddDivisor:this.handleAddDivisor.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onConfigureTrack:this.handleConfigureTrack.bind(this),onExportData:this.handleExportTrackData.bind(this),onLockValueScale:this.handleLockValueScale.bind(this),onReplaceTrack:this.handleReplaceTrack.bind(this),onTrackOptionsChanged:this.handleTrackOptionsChanged.bind(this),onUnlockValueScale:this.handleUnlockValueScale.bind(this),orientation:"right",position:this.state.contextMenuPosition,tracks:e,trackSourceServers:this.props.trackSourceServers}))}return null}},{key:"getIdealizedTrackPositionsOverlay",value:function(){var e,t=this,n=this.props.draggingHappening,r=n.datatype;if(r in N.DEFAULT_TRACKS_FOR_DATATYPE){var i=N.DEFAULT_TRACKS_FOR_DATATYPE[r],o=new T.default(["top","left","right","center","bottom"].filter(function(e){return e in t.state.tracks&&t.state.tracks[e].length})),a="top"in i,s="left"in i,l="right"in i,u="bottom"in i,c="center"in i,d="center"in i||o.has("left")||o.has("right")||o.has("center"),h="top"in i,f="bottom"in i&&d,p="left"in i&&d,v="right"in i&&d,m="center"in i||d,g=C.default.createElement("div",{style:{flexGrow:1}}),y=C.default.cloneElement(g),b=C.default.createElement("div",{style:{display:"flex",flexGrow:1}},h&&(m||p)?g:null,C.default.createElement(O.default,{enabled:a,position:"top",draggingHappening:this.props.draggingHappening,onTrackDropped:function(e){return t.handleTracksAdded([e],"top")},style:{border:"1px solid black",flexGrow:1}}),h&&(m||p)?y:null),w=C.default.createElement("div",{style:{display:"flex",flexGrow:1}},h&&(m||p)?g:null,C.default.createElement(O.default,{enabled:u,position:"bottom",draggingHappening:this.props.draggingHappening,onTrackDropped:function(e){return t.handleTracksAdded([e],"bottom")},style:{border:"1px solid black",flexGrow:1}}),h&&(m||p)?y:null),x=C.default.createElement(O.default,{enabled:s,position:"left",draggingHappening:this.props.draggingHappening,onTrackDropped:function(e){return t.handleTracksAdded([e],"left")},style:{border:"1px solid black",flexGrow:1}}),_=C.default.createElement(O.default,(e={enabled:c,draggingHappening:this.props.draggingHappening,onTrackDropped:function(e){return t.handleTracksAdded([e],"center")},position:"center"},(0,S.default)(e,"enabled",c),(0,S.default)(e,"style",{border:"1px solid black",flexGrow:1}),e)),k=C.default.cloneElement(x,{enabled:l,onTrackDropped:function(e){return t.handleTracksAdded([e],"right")},position:"right"});return C.default.createElement("div",{style:{position:"absolute",left:"0px",top:"0px",width:this.state.width,height:this.state.height}},C.default.createElement("div",{style:{position:"absolute",width:this.state.width,height:this.state.height,background:"white",opacity:.4}}),C.default.createElement("div",{style:{width:this.state.width,height:this.state.height,position:"absolute",display:"flex",flexDirection:"column"}},h?b:null,d&&C.default.createElement("div",{style:{display:"flex",height:h||f?"40%":"100%",width:"100%"}},p?x:null,m?_:null,v?k:null),f?w:null))}console.warn("unknown data type:",n.higlassTrack)}},{key:"render",value:function(){var r=this;this.galleryDim=this.props.tracks.gallery.map(function(e){return e.height}).reduce(D.sum,0),this.topHeightNoGallery=this.props.tracks.top.map(function(e){return e.height}).reduce(D.sum,0),this.topHeight=this.topHeightNoGallery+this.galleryDim,this.bottomHeightNoGallery=this.props.tracks.bottom.map(function(e){return e.height}).reduce(D.sum,0),this.bottomHeight=this.bottomHeightNoGallery+this.galleryDim,this.leftWidthNoGallery=this.props.tracks.left.map(function(e){return e.width}).reduce(D.sum,0),this.leftWidth=this.leftWidthNoGallery+this.galleryDim,this.rightWidthNoGallery=this.props.tracks.right.map(function(e){return e.width}).reduce(D.sum,0),this.rightWidth=this.rightWidthNoGallery+this.galleryDim,this.centerHeight=this.state.height-this.topHeight-this.bottomHeight-2*this.props.verticalMargin,this.centerWidth=this.state.width-this.leftWidth-this.rightWidth-2*this.props.horizontalMargin;var e="none",t=C.default.createElement("div",{key:"topTracksDiv",style:{left:this.leftWidth+this.props.horizontalMargin,top:this.props.verticalMargin,width:this.centerWidth,height:this.topHeightNoGallery,outline:e,position:"absolute"}},C.default.createElement(R.default,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===N.MOUSE_TOOL_SELECT,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionEnd:this.rangeSelectionEndHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,resizeHandles:new T.default(["bottom"]),scale:this.xScale,tracks:this.props.tracks.top,width:this.centerWidth})),n=C.default.createElement("div",{key:"leftTracksPlot",style:{left:this.props.horizontalMargin,top:this.topHeight+this.props.verticalMargin,width:this.leftWidthNoGallery,height:this.centerHeight,outline:e,position:"absolute"}},C.default.createElement(j.default,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===N.MOUSE_TOOL_SELECT,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionEnd:this.rangeSelectionEndHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,resizeHandles:new T.default(["right"]),scale:this.yScale,tracks:this.props.tracks.left})),i=C.default.createElement("div",{style:{right:this.props.horizontalMargin,top:this.topHeight+this.props.verticalMargin,width:this.rightWidthNoGallery,height:this.centerHeight,outline:e,position:"absolute"}},C.default.createElement(j.default,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===N.MOUSE_TOOL_SELECT,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionEnd:this.rangeSelectionEndHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,resizeHandles:new T.default(["left"]),scale:this.yScale,tracks:this.props.tracks.right,tracksControlAlignLeft:!0})),o=C.default.createElement("div",{style:{left:this.leftWidth+this.props.horizontalMargin,bottom:this.props.verticalMargin,width:this.centerWidth,height:this.bottomHeightNoGallery,outline:e,position:"absolute"}},C.default.createElement(R.default,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===N.MOUSE_TOOL_SELECT,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionEnd:this.rangeSelectionEndHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,resizeHandles:new T.default(["top"]),scale:this.xScale,tracks:this.props.tracks.bottom,width:this.centerWidth})),a=C.default.createElement("div",{key:"galleryTracksDiv",className:"gallery-track-container",style:{left:this.leftWidthNoGallery+this.props.horizontalMargin,top:this.topHeightNoGallery+this.props.verticalMargin,width:this.centerWidth+2*this.galleryDim,height:this.centerHeight+2*this.galleryDim,outline:e,position:"absolute"}},C.default.createElement(x.default,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,height:this.centerHeight+2*this.galleryDim,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),tracks:this.props.tracks.gallery,width:this.centerWidth+2*this.galleryDim})),s=C.default.createElement("div",{style:{left:this.leftWidth+this.props.horizontalMargin,top:this.props.verticalMargin+this.topHeight,width:this.centerWidth,height:this.bottomHeight,outline:e},className:"CenterTrack-module_center-track-container-2ELhp"});this.props.tracks.center.length&&(s=C.default.createElement("div",{className:"center-track-container CenterTrack-module_center-track-container-2ELhp",style:{left:this.leftWidth+this.props.horizontalMargin,top:this.props.verticalMargin+this.topHeight,width:this.centerWidth,height:this.centerHeight,outline:e}},C.default.createElement(w.default,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===N.MOUSE_TOOL_SELECT,onAddSeries:this.handleAddSeries.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelectionEnd:this.rangeSelectionEndHandler.bind(this),onRangeSelectionStart:this.rangeSelection2dStartHandler.bind(this),onRangeSelectionX:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionXY:this.rangeSelection2dHandler.bind(this),onRangeSelectionY:this.rangeSelection1dHandler("y").bind(this),rangeSelection:this.state.rangeSelection,scaleX:this.xScale,scaleY:this.yScale,tracks:this.props.tracks.center,uid:this.props.tracks.center[0].uid,width:this.centerWidth}))),this.createTrackPositionTexts();var l=this.positionedTracks(),u=null;this.state.sizeMeasured&&(u=C.default.createElement(_.default,{ref:function(e){r.trackRenderer=e},canvasElement:this.props.canvasElement,centerHeight:this.centerHeight,centerWidth:this.centerWidth,dragging:this.props.dragging,galleryDim:this.galleryDim,height:this.state.height,initialXDomain:this.props.initialXDomain,initialYDomain:this.props.initialYDomain,isRangeSelection:this.props.mouseTool===N.MOUSE_TOOL_SELECT,leftWidth:this.leftWidth,leftWidthNoGallery:this.leftWidthNoGallery,marginLeft:this.props.horizontalMargin,marginTop:this.props.verticalMargin,metaTracks:this.props.metaTracks,onMouseMoveZoom:this.props.onMouseMoveZoom,onNewTilesLoaded:this.props.onNewTilesLoaded,onScalesChanged:this.handleScalesChanged.bind(this),onTilesetInfoReceived:this.handleTilesetInfoReceived.bind(this),onTrackOptionsChanged:this.handleTrackOptionsChanged.bind(this),onValueScaleChanged:this.props.onValueScaleChanged,pixiStage:this.props.pixiStage,pluginTracks:this.props.pluginTracks,positionedTracks:l,registerDraggingChangedListener:this.props.registerDraggingChangedListener,removeDraggingChangedListener:this.props.removeDraggingChangedListener,setCentersFunction:this.props.setCentersFunction,svgElement:this.props.svgElement,topHeight:this.topHeight,topHeightNoGallery:this.topHeightNoGallery,uid:this.props.uid,width:this.state.width,viewOptions:this.props.viewOptions,xDomainLimits:this.props.xDomainLimits,yDomainLimits:this.props.yDomainLimits,zoomable:this.props.zoomable,zoomLimits:this.props.zoomLimits},t,n,i,o,a,s));var c=null,d=null;this.state.configTrackMenuId&&(c=C.default.createElement(P.default,{onMenuClosed:this.closeMenus.bind(this)},C.default.createElement(E.default,{closeMenu:this.closeMenus.bind(this),onAddSeries:this.handleAddSeries.bind(this),onAddTrack:this.handleAddTrack.bind(this),onChangeTrackType:this.handleChangeTrackType.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onConfigureTrack:this.handleConfigureTrack.bind(this),onExportData:this.handleExportTrackData.bind(this),onLockValueScale:this.handleLockValueScale.bind(this),onReplaceTrack:this.handleReplaceTrack.bind(this),onTrackOptionsChanged:this.handleTrackOptionsChanged.bind(this),onUnlockValueScale:this.handleUnlockValueScale.bind(this),ref:function(e){r.configTrackMenu=e},position:this.state.configTrackMenuLocation,tracks:[(0,D.getTrackByUid)(this.props.tracks,this.state.configTrackMenuId)],trackOrientation:(0,D.getTrackPositionByUid)(this.props.tracks,this.state.configTrackMenuId)}))),this.state.closeTrackMenuId&&(d=C.default.createElement(P.default,{onMenuClosed:this.handleCloseTrackMenuClosed.bind(this)},C.default.createElement(A.default,{position:this.state.closeTrackMenuLocation},C.default.createElement(M.default,{onCloseTrack:this.handleCloseTrack.bind(this),tracks:[(0,D.getTrackByUid)(this.props.tracks,this.state.closeTrackMenuId)]}))));var h=null;this.props.chooseTrackHandler&&(h=l.map(function(e){var t="transparent",n="none";return r.state.mouseOverOverlayUid===e.track.uid&&(t="yellow",n="1px solid black"),C.default.createElement("div",{className:"tiled-plot-track-overlay",key:e.track.uid,onClick:function(){r.setState({mouseOverOverlayUid:null}),r.props.chooseTrackHandler(e.track.uid)},onMouseEnter:function(){return r.handleOverlayMouseEnter(e.track.uid)},onMouseLeave:function(){return r.handleOverlayMouseLeave(e.track.uid)},style:{position:"absolute",left:e.left,top:e.top,width:e.width,height:e.height,background:t,opacity:.4,border:n,zIndex:1}})}));var f=null;if(this.xScale&&this.yScale&&this.props.editable&&this.state.trackOptions){var p=this.state.trackOptions.configComponent,v=this.state.trackOptions.track;f=C.default.createElement(p,{track:v,xScale:this.xScale,yScale:this.yScale,onCancel:function(){r.setState({trackOptions:null})},onTrackOptionsChanged:function(e){return e},onSubmit:function(e){r.handleTrackOptionsChanged(r.state.trackOptions.track.uid,e),r.setState({trackOptions:null})}})}var m=null,g=this.state.addTrackPosition?this.state.addTrackPosition:this.props.addTrackPosition;return(this.state.addTrackPosition||this.props.addTrackPosition)&&(m=C.default.createElement(k.default,{host:this.state.addTrackHost,onCancel:this.handleNoTrackAdded.bind(this),onTracksChosen:this.handleTracksAdded.bind(this),position:g,ref:function(e){r.addTrackModal=e},show:null!=this.state.addTrackPosition||null!=this.props.addTrackPosition,trackSourceServers:this.props.trackSourceServers})),C.default.createElement("div",{ref:function(e){r.divTiledPlot=e},className:"tiled-plot-div TiledPlot-module_tiled-plot-uFHiB",onDragEnter:function(e){}},u,h,m,this.getAddDivisorDialog(),c,d,f,this.getContextMenu(),this.props.draggingHappening&&this.getIdealizedTrackPositionsOverlay())}},{key:"addEventListeners",value:function(){this.eventListeners=[],this.eventListeners.forEach(function(e){return document.addEventListener(e.name,e.callback,!1)})}},{key:"removeEventListeners",value:function(){this.eventListeners.forEach(function(e){return document.removeEventListener(e.name,e.callback)})}}]),r}(C.default.Component);F.defaultProps={pluginTracks:{},metaTracks:[],zoomable:!0},F.propTypes={addTrackPosition:r.default.string,canvasElement:r.default.object,chooseTrackHandler:r.default.func,chromInfoPath:r.default.string,dragging:r.default.bool,editable:r.default.bool,horizontalMargin:r.default.number,initialXDomain:r.default.array,initialYDomain:r.default.array,mouseTool:r.default.string,onCloseTrack:r.default.func,onDataDomainChanged:r.default.func,onLockValueScale:r.default.func,onMouseMoveZoom:r.default.func,onNoTrackAdded:r.default.func,onNewTilesLoaded:r.default.func,onRangeSelection:r.default.func.isRequired,onScalesChanged:r.default.func,onTracksAdded:r.default.func,onTrackOptionsChanged:r.default.func,onTrackPositionChosen:r.default.func,onValueScaleChanged:r.default.func,onUnlockValueScale:r.default.func,registerDraggingChangedListener:r.default.func,removeDraggingChangedListener:r.default.func,setCentersFunction:r.default.func,pixiStage:r.default.object,pluginTracks:r.default.object,svgElement:r.default.object,trackSourceServers:r.default.array,tracks:r.default.object,metaTracks:r.default.array,verticalMargin:r.default.number,viewOptions:r.default.object,uid:r.default.string,zoomable:r.default.bool},t.default=F},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(197),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t,n){return t in e?(0,o.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(3)),i=g(n(1)),o=g(n(2)),a=g(n(4)),s=g(n(5)),l=g(n(31)),u=g(n(8)),c=g(n(0)),d=n(!function(){var e=new Error('Cannot find module "d3-brush"');throw e.code="MODULE_NOT_FOUND",e}()),h=n(!function(){var e=new Error('Cannot find module "d3-selection"');throw e.code="MODULE_NOT_FOUND",e}()),f=g(n(121)),p=n(6),v=n(12),m=(g(n(261)),g(n(123)));function g(e){return e&&e.__esModule?e:{default:e}}var y={styles:{"center-track":"CenterTrack-module_center-track-3ptRW","center-track-container":"CenterTrack-module_center-track-container-2ELhp"},stylesTrack:{"track-range-selection":"Track-module_track-range-selection-1yrDf","track-range-selection-active":"Track-module_track-range-selection-active-1oljJ Track-module_track-range-selection-1yrDf","track-range-selection-active-primary":"Track-module_track-range-selection-active-primary-29M73 Track-module_track-range-selection-active-1oljJ Track-module_track-range-selection-1yrDf","track-range-selection-active-secondary":"Track-module_track-range-selection-active-secondary-1s0t5 Track-module_track-range-selection-active-1oljJ Track-module_track-range-selection-1yrDf","track-range-selection-group-inactive":"Track-module_track-range-selection-group-inactive-YNRM4","track-range-selection-group-brush-selection":"Track-module_track-range-selection-group-brush-selection-2VYDl"}},b={pointerEvents:"all"},w=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.state={isVisible:!1},t.brushBehaviorX=(0,d.brushX)(!0,!0).on("brush",t.brushedX.bind(t)),t.brushBehaviorY=(0,d.brushY)(!0,!0,!0).on("brush",t.brushedY.bind(t)),t.brushBehaviorXY=(0,d.brush)(!0).on("start",t.brushStarted.bind(t)).on("brush",t.brushedXY.bind(t)).on("end",t.brushedXYEnded.bind(t)),t}return(0,s.default)(n,e),(0,o.default)(n,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush2d()}},{key:"shouldComponentUpdate",value:function(e,t){if(this.rangeSelectionTriggeredXY)return this.rangeSelectionTriggeredXY=!1,this.state!==t;if(this.props.rangeSelection!==e.rangeSelection){var n=e.rangeSelection[0]||null;this.props.is1dRangeSelection?(this.rangeSelectionTriggeredX||this.moveBrushX(n),this.rangeSelectionTriggeredY||this.moveBrushY(n),this.rangeSelectionTriggeredX=!1,this.rangeSelectionTriggeredY=!1):this.moveBrushXY([n,e.rangeSelection[1]]);var r=this.props.is1dRangeSelection&&!e.is1dRangeSelection&&null===n;return this.state!==t||r}return!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush2d():(this.removeBrush1d(),this.removeBrush2d())}},{key:"addBrush1d",value:function(){this.brushElX&&this.brushElY&&(this.brushElXOld!==this.brushElX||this.brushElYOld!==this.brushElY)&&(this.brushElXOld&&this.brushElXOld.on(".brush",null),this.brushElYOld&&this.brushElYOld.on(".brush",null),this.brushElX.call(this.brushBehaviorX),this.brushElY.call(this.brushBehaviorY),(0,p.resetD3BrushStyle)(this.brushElX,m.default["track-range-selection-group-brush-selection"]),(0,p.resetD3BrushStyle)(this.brushElY,m.default["track-range-selection-group-brush-selection"]),this.brushElXOld=this.brushElX,this.brushElYOld=this.brushElY,this.brushIs1dBound=!0)}},{key:"addBrush2d",value:function(){this.brushElXY&&this.brushElXYOld!==this.brushElXY&&(this.brushElXYOld&&this.brushElXYOld.on(".brush",null),this.brushElXY.call(this.brushBehaviorXY),this.brushElXYOld=this.brushElXY,this.brushIs2dBound=!0,(0,p.resetD3BrushStyle)(this.brushElXY,m.default["track-range-selection-group-brush-selection"]))}},{key:"brushedX",value:function(){var e=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,this.sourceEvent&&this.props.onRangeSelectionX&&this.props.is1dRangeSelection&&!e&&(this.rangeSelectionTriggeredX=!0,this.props.onRangeSelectionX(h.event.selection))}},{key:"brushedY",value:function(){var e=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,this.sourceEvent&&this.props.onRangeSelectionY&&this.props.is1dRangeSelection&&!e&&(this.rangeSelectionTriggeredY=!0,this.props.onRangeSelectionY(h.event.selection))}},{key:"brushedXY",value:function(){var e=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,this.sourceEvent&&this.props.onRangeSelectionXY&&!e&&!this.props.is1dRangeSelection&&(this.rangeSelectionTriggeredXY=!0,this.props.onRangeSelectionXY([[h.event.selection[0][0],h.event.selection[1][0]],[h.event.selection[0][1],h.event.selection[1][1]]]))}},{key:"brushedXYEnded",value:function(){h.event.selection||this.props.is1dRangeSelection||(this.rangeSelectionTriggeredXY=!0,this.props.onRangeSelectionEnd())}},{key:"brushStarted",value:function(){this.sourceEvent&&this.props.onRangeSelectionStart()}},{key:"moveBrushX",value:function(e){if(this.brushEl||this.sourceEvent){this.brushIs2dBound&&(this.removeBrush2d(),this.addBrush1d());var t=e?[this.props.scaleX(e[0]),this.props.scaleX(e[1])]:null;this.rangeSelectionMoved=!0,this.brushElX.call(this.brushBehaviorX.move,t)}}},{key:"moveBrushY",value:function(e){if(this.brushEl||this.sourceEvent){this.brushIs2dBound&&(this.removeBrush2d(),this.addBrush1d());var t=e?[this.props.scaleY(e[0]),this.props.scaleY(e[1])]:null;this.rangeSelectionMoved=!0,this.brushElY.call(this.brushBehaviorY.move,t)}}},{key:"moveBrushXY",value:function(e){if(this.brushEl||this.sourceEvent){var t=[[this.props.scaleX(e[0][0]),this.props.scaleY(e[1][0])],[this.props.scaleX(e[0][1]),this.props.scaleY(e[1][1])]];this.rangeSelectionMoved=!0,this.brushElXY.call(this.brushBehaviorXY.move,t)}}},{key:"mouseEnterHandler",value:function(){this.props.isRangeSelectionActive||this.setState({isVisible:!0})}},{key:"mouseLeaveHandler",value:function(){this.setState({isVisible:!1})}},{key:"removeBrush1d",value:function(){this.brushIs1dBound&&(this.brushElX&&(this.brushElX.call(this.brushBehaviorX.move,null),this.brushElX.on(".brush",null)),this.brushElY&&(this.brushElY.call(this.brushBehaviorY.move,null),this.brushElY.on(".brush",null)),this.brushIs1dBound=!1)}},{key:"removeBrush2d",value:function(){this.brushIs2dBound&&this.brushElXY&&(this.brushElXY.call(this.brushBehaviorXY.move,null),this.brushElXY.on(".brush",null),this.brushElXYOld=void 0,this.brushIs2dBound=!1,this.props.is1dRangeSelection||this.props.onRangeSelectionEnd())}},{key:"render",value:function(){var t=this,e=this.props.tracks.map(function(e){return(0,v.IS_TRACK_RANGE_SELECTABLE)(e)}).reduce(p.or,!1),n=this.props.tracks.some(function(e){return e.contents?e.contents.some(function(e){return"heatmap"===e.type&&"topRight"===e.options.colorbarPosition}):"heatmap"===e.type&&"topRight"===e.options.colorbarPosition}),r=this.props.isRangeSelectionActive?this.props.is1dRangeSelection?"stylesTrack.track-range-selection-active-secondary":"stylesTrack.track-range-selection-active-primary":"stylesTrack.track-range-selection",i=this.props.is1dRangeSelection?"":"stylesTrack.track-range-selection-group-inactive",o=this.props.is1dRangeSelection?"stylesTrack.track-range-selection-group-inactive":"";return c.default.createElement("div",{className:(this.props.className?this.props.className+" ":"")+"CenterTrack-module_center-track-3ptRW",onMouseEnter:this.mouseEnterHandler.bind(this),onMouseLeave:this.mouseLeaveHandler.bind(this),style:{height:this.props.height,width:this.props.width}},e&&c.default.createElement("svg",{style:{height:this.props.height,width:this.props.width},xmlns:"http://www.w3.org/2000/svg",className:(0,l.default)(r,y)},c.default.createElement("g",{ref:function(e){t.brushElX=(0,h.select)(e)},className:(0,l.default)(i,y)}),c.default.createElement("g",{ref:function(e){t.brushElY=(0,h.select)(e)},className:(0,l.default)(i,y)}),c.default.createElement("g",{ref:function(e){t.brushElXY=(0,h.select)(e)},className:(0,l.default)(o,y)})),this.props.editable&&c.default.createElement(f.default,{imgStyleAdd:b,imgStyleClose:b,imgStyleMove:b,imgStyleSettings:b,isMoveable:!1,isVisible:this.state.isVisible||this.props.uid===this.props.configTrackMenuId,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,paddingRight:n,uid:this.props.uid}))}},{key:"sourceEvent",get:function(){return h.event&&h.event.sourceEvent}}]),n}(c.default.Component);w.defaultProps={className:"center-track",configTrackMenuId:null,is1dRangeSelection:!1,isRangeSelectionActive:!1,scaleX:function(e){return e},scaleY:function(e){return e}},w.propTypes={className:u.default.string,configTrackMenuId:u.default.string,editable:u.default.bool.isRequired,height:u.default.number.isRequired,is1dRangeSelection:u.default.bool,isRangeSelectionActive:u.default.bool,onAddSeries:u.default.func.isRequired,onCloseTrackMenuOpened:u.default.func.isRequired,onConfigTrackMenuOpened:u.default.func.isRequired,onRangeSelectionX:u.default.func.isRequired,onRangeSelectionY:u.default.func.isRequired,onRangeSelectionXY:u.default.func.isRequired,onRangeSelectionEnd:u.default.func.isRequired,onRangeSelectionStart:u.default.func.isRequired,rangeSelection:u.default.array.isRequired,scaleX:u.default.func,scaleY:u.default.func,tracks:u.default.array.isRequired,uid:u.default.string.isRequired,width:u.default.number.isRequired},t.default=w},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(46)),r=f(n(3)),o=f(n(1)),a=f(n(2)),s=f(n(4)),l=f(n(5)),u=f(n(0)),c=f(n(21)),d=n(9),h=n(12);function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function n(e){(0,o.default)(this,n);var t=(0,s.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.state={dragOnTop:!1},t}return(0,l.default)(n,e),(0,a.default)(n,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var r=this,e=this.props.enabled?this.state.dragOnTop?"green":"blue":"red";return u.default.createElement("div",{className:"DragListeningDiv",style:(0,i.default)({background:e,opacity:.6},this.props.style),onDragEnter:function(e){r.setState({dragOnTop:!0})},onDragLeave:function(e){return r.setState({dragOnTop:!1})},onDragOver:function(e){return e.preventDefault()},onDrop:function(e){if(r.props.enabled){var t=r.props.draggingHappening;!t.datatype in h.DEFAULT_TRACKS_FOR_DATATYPE&&console.warn("unknown track type:",t);var n={type:h.DEFAULT_TRACKS_FOR_DATATYPE[t.datatype][r.props.position],uid:c.default.nice(),tilesetUid:t.tilesetUid,server:t.server};r.props.onTrackDropped(n),d.pubSub.publish("trackDropped",n)}}})}}]),n}(u.default.Component);t.default=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(3)),i=d(n(1)),o=d(n(2)),a=d(n(4)),s=d(n(5)),l=d(n(8)),u=d(n(0)),c=d(n(121));d(n(508)),d(n(122)),d(n(123));function d(e){return e&&e.__esModule?e:{default:e}}var h={pointerEvents:"all"},f=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.state={hovering:!1},t}return(0,s.default)(n,e),(0,o.default)(n,[{key:"mouseEnterHandler",value:function(){this.setState({hovering:!0})}},{key:"mouseLeaveHandler",value:function(){this.setState({hovering:!1})}},{key:"render",value:function(){var n=this;return u.default.createElement("div",{className:"gallery-tracks GalleryTracks-module_gallery-tracks-3tsUO"},this.props.tracks.map(function(e,t){return u.default.createElement("div",{key:e.uid||t,onMouseLeave:n.mouseLeaveHandler.bind(n),style:{top:e.height*t,right:e.height*t,bottom:e.height*t,left:e.height*t},className:"GalleryTracks-module_gallery-track-eGKoq"},u.default.createElement("div",{onMouseEnter:n.mouseEnterHandler.bind(n),style:{top:0,right:0,left:0,height:e.height},className:"GalleryTracks-module_gallery-sub-track-z1HEh"}),u.default.createElement("div",{onMouseEnter:n.mouseEnterHandler.bind(n),style:{top:0,right:0,bottom:0,width:e.height},className:"GalleryTracks-module_gallery-sub-track-z1HEh"}),u.default.createElement("div",{onMouseEnter:n.mouseEnterHandler.bind(n),style:{right:0,bottom:0,left:0,height:e.height},className:"GalleryTracks-module_gallery-sub-track-z1HEh"}),u.default.createElement("div",{onMouseEnter:n.mouseEnterHandler.bind(n),style:{top:0,bottom:0,left:0,width:e.height},className:"GalleryTracks-module_gallery-sub-track-z1HEh"}),u.default.createElement("div",{onMouseLeave:n.mouseLeaveHandler.bind(n),style:{top:e.height,right:e.height,bottom:e.height,left:e.height},className:"GalleryTracks-module_gallery-invisible-track-1hMJp"}),n.props.editable&&u.default.createElement(c.default,{configMenuVisible:!0,imgStyleAdd:h,imgStyleClose:h,imgStyleMove:h,imgStyleSettings:h,isMoveable:!1,isVisible:n.state.hovering,onCloseTrackMenuOpened:n.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:n.props.onConfigTrackMenuOpened,uid:e.uid||t}))}))}}]),n}(u.default.Component);f.propTypes={editable:l.default.bool.isRequired,onCloseTrackMenuOpened:l.default.func.isRequired,onConfigTrackMenuOpened:l.default.func.isRequired,tracks:l.default.array.isRequired},t.default=f},function(e,t){e.exports={"gallery-tracks":"GalleryTracks-module_gallery-tracks-3tsUO","gallery-track":"GalleryTracks-module_gallery-track-eGKoq","gallery-sub-track":"GalleryTracks-module_gallery-sub-track-z1HEh","gallery-invisible-track":"GalleryTracks-module_gallery-invisible-track-1hMJp"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var h=se(n(23)),l=se(n(22)),u=se(n(40)),c=se(n(37)),d=se(n(24)),S=se(n(11)),r=se(n(3)),i=se(n(1)),o=se(n(2)),a=se(n(4)),s=se(n(5)),f=se(n(0)),T=se(n(29)),p=se(n(8)),v=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),m=n(510),g=n(!function(){var e=new Error('Cannot find module "d3-selection"');throw e.code="MODULE_NOT_FOUND",e}()),y=n(20),b=se(n(21)),w=se(n(95)),x=se(n(242)),_=se(n(243)),k=se(n(244)),C=se(n(250)),O=se(n(246)),E=se(n(155)),M=se(n(200)),P=se(n(93)),A=se(n(212)),R=se(n(211)),j=se(n(150)),I=se(n(206)),L=se(n(205)),D=se(n(511)),N=se(n(109)),B=se(n(209)),F=se(n(199)),V=se(n(194)),z=se(n(207)),H=se(n(249)),U=se(n(512)),q=se(n(513)),W=se(n(514)),G=se(n(208)),Y=se(n(210)),X=se(n(515)),Z=se(n(251)),K=se(n(516)),$=se(n(517)),Q=se(n(518)),J=se(n(262)),ee=se(n(263)),te=se(n(519)),ne=se(n(172)),re=se(n(248)),ie=n(6),oe=n(9),ae=n(12);function se(e){return e&&e.__esModule?e:{default:e}}n(520);var le=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.dragging=!1,t.element=null,t.closing=!1,t.yPositionOffset=0,t.xPositionOffset=0,t.scrollTimeout=null,t.activeTransitions=0,t.zoomTransform=m.zoomIdentity,t.windowScrolledBound=t.windowScrolled.bind(t),t.zoomStartedBound=t.zoomStarted.bind(t),t.zoomedBound=t.zoomed.bind(t),t.zoomEndedBound=t.zoomEnded.bind(t),t.uid=b.default.nice(),t.mounted=!1,t.emptyZoomBehavior=(0,m.zoom)(),t.currentProps=e,t.prevPropsStr="",t.zoomBehavior=(0,m.zoom)().filter(function(){return!g.event.target.classList.contains("no-zoom")&&!g.event.target.classList.contains("react-resizable-handle")}).on("start",t.zoomStartedBound).on("zoom",t.zoomedBound).on("end",t.zoomEndedBound),t.zoomTransform=m.zoomIdentity,t.prevZoomTransform=m.zoomIdentity,t.initialXDomain=[0,1],t.initialYDomain=[0,1],t.xDomainLimits=[-1/0,1/0],t.yDomainLimits=[-1/0,1/0],t.zoomLimits=[0,1/0],t.prevCenterX=t.currentProps.marginLeft+t.currentProps.leftWidth+t.currentProps.centerWidth/2,t.prevCenterY=t.currentProps.marginTop+t.currentProps.topHeight+t.currentProps.centerHeight/2,t.cumCenterXOffset=0,t.cumCenterYOffset=0,t.setUpInitialScales(t.currentProps.initialXDomain,t.currentProps.initialYDomain,t.currentProps.xDomainLimits,t.currentProps.yDomainLimits,t.currentProps.zoomLimits),t.setUpScales(),t.trackDefObjects={},t.metaTracks={},t.pubSubs=[],t.boundForwardEvent=t.forwardEvent.bind(t),t.boundScrollEvent=t.scrollEvent.bind(t),t.boundForwardContextMenu=t.forwardContextMenu.bind(t),t}return(0,s.default)(n,e),(0,o.default)(n,[{key:"componentWillMount",value:function(){this.pubSubs=[],this.pubSubs.push(oe.pubSub.subscribe("scroll",this.windowScrolledBound)),this.pubSubs.push(oe.pubSub.subscribe("app.event",this.dispatchEvent.bind(this))),this.pubSubs.push(oe.pubSub.subscribe("zoomToDataPos",this.zoomToDataPosHandler.bind(this)))}},{key:"componentDidMount",value:function(){if(this.elementPos=this.element.getBoundingClientRect(),this.elementSelection=(0,g.select)(this.element),this.svgTrackAreaSelection=(0,g.select)(this.svgTrackArea),this.pStage=new v.Graphics,this.pMask=new v.Graphics,this.pBackground=new v.Graphics,this.pStage.addChild(this.pMask),this.pStage.addChild(this.pBackground),this.currentProps.pixiStage.addChild(this.pStage),this.pStage.mask=this.pMask,this.props.isRangeSelection||this.addZoom(),this.currentProps.svgElement&&this.currentProps.canvasElement){this.svgElement=this.currentProps.svgElement,this.syncTrackObjects(this.currentProps.positionedTracks),this.syncMetaTracks(this.currentProps.metaTracks),this.currentProps.setCentersFunction(this.setCenter.bind(this)),this.currentProps.registerDraggingChangedListener(this.draggingChanged.bind(this)),this.draggingChanged(!0),this.addEventTracker();var e=[[this.xScale(this.xDomainLimits[0]),this.yScale(this.yDomainLimits[0])],[this.xScale(this.xDomainLimits[1]),this.yScale(this.yDomainLimits[1])]],t=this.svgElement.getBoundingClientRect(),n=[[Math.max(e[0][0],0),Math.max(e[0][1],0)],[Math.min(e[1][0],t.width),Math.min(e[1][1],t.height)]];this.zoomBehavior.extent(n).translateExtent(e).scaleExtent(this.zoomLimits)}}},{key:"componentWillReceiveProps",value:function(e){if(e.svgElement&&e.canvasElement){var t=this.updatablePropsToString(e);if(this.currentProps=e,this.prevPropsStr!==t){for(var n in this.setBackground(),this.trackDefObjects)this.trackDefObjects[n].trackObject.delayDrawing=!0;this.prevPropsStr=t,this.setUpInitialScales(e.initialXDomain,e.initialYDomain,e.xDomainLimits,e.yDomainLimits,e.zoomLimits),this.setUpScales(e.width!==this.props.width||e.height!==this.props.height),this.currentProps.canvasElement=T.default.findDOMNode(e.canvasElement),this.svgElement=e.svgElement;var r=[[this.xScale(this.xDomainLimits[0]),this.yScale(this.yDomainLimits[0])],[this.xScale(this.xDomainLimits[1]),this.yScale(this.yDomainLimits[1])]],i=this.svgElement.getBoundingClientRect(),o=[[Math.max(r[0][0],0),Math.max(r[0][1],0)],[Math.min(r[1][0],i.width),Math.min(r[1][1],i.height)]];this.zoomBehavior.extent(o).translateExtent(r).scaleExtent(this.zoomLimits),this.syncTrackObjects(e.positionedTracks),this.syncMetaTracks(e.metaTracks);var a=!0,s=!1,l=void 0;try{for(var u,c=(0,S.default)(e.positionedTracks);!(a=(u=c.next()).done);a=!0){var d=u.value,h=d.track.options,f=this.trackDefObjects[d.track.uid].trackObject;if(f.rerender(h),d.track.hasOwnProperty("contents")){var p={},v=!0,m=!1,g=void 0;try{for(var y,b=(0,S.default)(d.track.contents);!(v=(y=b.next()).done);v=!0){var w=y.value;p[w.uid]=w}}catch(e){m=!0,g=e}finally{try{!v&&b.return&&b.return()}finally{if(m)throw g}}for(var x in f.createdTracks)f.createdTracks[x].rerender(p[x].options)}}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}for(var _ in this.props.onNewTilesLoaded(),this.trackDefObjects){var k=this.trackDefObjects[_].trackObject;k.delayDrawing=!1,k.draw()}}}}},{key:"componentDidUpdate",value:function(e){e.isRangeSelection!==this.props.isRangeSelection&&(this.props.isRangeSelection?this.removeZoom():this.addZoom()),this.addEventTracker()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.removeTracks((0,d.default)(this.trackDefObjects)),this.removeMetaTracks((0,d.default)(this.metaTracks)),this.currentProps.removeDraggingChangedListener(this.draggingChanged),this.currentProps.pixiStage.removeChild(this.pStage),this.pMask.destroy(!0),this.pStage.destroy(!0),this.pubSubs.forEach(function(e){return oe.pubSub.unsubscribe(e)}),this.pubSubs=[],this.removeEventTracker()}},{key:"dispatchEvent",value:function(e){e.sourceUid==this.uid&&"contextmenu"!==e.type&&(0,ie.forwardEvent)(e,this.element)}},{key:"isWithin",value:function(e,t){if(!this.element)return!1;var n=e>=this.elementPos.left&&e<=this.elementPos.width+this.elementPos.left,r=t>=this.elementPos.top&&t<=this.elementPos.height+this.elementPos.top;return n&&r}},{key:"zoomToDataPosHandler",value:function(e){var t=e.pos,n=e.animateTime,r=e.isMercator;this.zoomToDataPos.apply(this,(0,c.default)(t).concat([n,r]))}},{key:"addZoom",value:function(){this.elementSelection&&(this.elementSelection.call(this.zoomBehavior),this.zoomBehavior.transform(this.elementSelection,this.zoomTransform))}},{key:"removeZoom",value:function(){this.elementSelection&&(this.zoomEnded(),this.elementSelection.on(".zoom",null))}},{key:"setMask",value:function(){this.pMask.clear(),this.pMask.beginFill(),this.pMask.drawRect(this.xPositionOffset,this.yPositionOffset,this.currentProps.width,this.currentProps.height),this.pMask.endFill()}},{key:"setBackground",value:function(){var e=(0,oe.getDarkTheme)()?"black":"white",t=(0,ie.colorToHex)(this.currentProps.viewOptions&&this.currentProps.viewOptions.backgroundColor||e);this.pBackground.clear(),this.pBackground.beginFill(t),this.pBackground.drawRect(this.xPositionOffset,this.yPositionOffset,this.currentProps.width,this.currentProps.height),this.pBackground.endFill()}},{key:"windowScrolled",value:function(){var e=this;this.removeZoom(),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){e.addZoom()},100)}},{key:"setUpInitialScales",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,1],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[-1/0,1/0],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[-1/0,1/0],i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[0,1/0];i[0]=null===i[0]?0:i[0],i[1]=null===i[1]?1/0:i[1];var o=e[1]-e[0],a=(t[0]+t[1])/2;t[0]=a-o/2,t[1]=a+o/2,e[0]===this.initialXDomain[0]&&e[1]===this.initialXDomain[1]&&t[0]===this.initialYDomain[0]&&t[1]===this.initialYDomain[1]&&n[0]===this.xDomainLimits[0]&&n[1]===this.xDomainLimits[1]&&r[0]===this.yDomainLimits[0]&&r[1]===this.yDomainLimits[1]&&i[0]===this.zoomLimits[0]&&i[1]===this.zoomLimits[1]||(this.initialXDomain=e,this.initialYDomain=t,this.xDomainLimits=n,this.yDomainLimits=r,this.zoomLimits=i,this.cumCenterYOffset=0,this.cumCenterXOffset=0,this.drawableToDomainX=(0,y.scaleLinear)().domain([this.currentProps.marginLeft+this.currentProps.leftWidth,this.currentProps.marginLeft+this.currentProps.leftWidth+this.currentProps.centerWidth]).range([e[0],e[1]]),this.drawableToDomainY=(0,y.scaleLinear)().domain([this.currentProps.marginTop+this.currentProps.topHeight+this.currentProps.centerHeight/2-this.currentProps.centerWidth/2,this.currentProps.marginTop+this.currentProps.topHeight+this.currentProps.centerHeight/2+this.currentProps.centerWidth/2]).range([t[0],t[1]]),this.prevCenterX=this.currentProps.marginLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,this.prevCenterY=this.currentProps.marginTop+this.currentProps.topHeight+this.currentProps.centerHeight/2)}},{key:"updatablePropsToString",value:function(e){return(0,u.default)({positionedTracks:e.positionedTracks,initialXDomain:e.initialXDomain,initialYDomain:e.initialYDomain,width:e.width,height:e.height,marginLeft:e.marginLeft,marginRight:e.marginRight,leftWidth:e.leftWidth,topHeight:e.topHeight,dragging:e.dragging,viewOptions:e.viewOptions})}},{key:"draggingChanged",value:function(e){this.dragging=e,this.timedUpdatePositionAndDimensions()}},{key:"setUpScales",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.currentProps.marginLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,n=this.currentProps.marginTop+this.currentProps.topHeight+this.currentProps.centerHeight/2,r=(this.drawableToDomainX(t)-this.drawableToDomainX(this.prevCenterX))/this.zoomTransform.k,i=(this.drawableToDomainY(n)-this.drawableToDomainY(this.prevCenterY))/this.zoomTransform.k;this.cumCenterYOffset+=i,this.cumCenterXOffset+=r,this.prevCenterY=n,this.prevCenterX=t;var o=[this.drawableToDomainX(0)-this.cumCenterXOffset,this.drawableToDomainX(this.currentProps.width)-this.cumCenterXOffset],a=[this.drawableToDomainY(0)-this.cumCenterYOffset,this.drawableToDomainY(this.currentProps.height)-this.cumCenterYOffset];for(var s in this.xScale=(0,y.scaleLinear)().domain(o).range([0,this.currentProps.width]),this.yScale=(0,y.scaleLinear)().domain(a).range([0,this.currentProps.height]),this.trackDefObjects)this.trackDefObjects[s].trackObject.refScalesChanged(this.xScale,this.yScale);this.applyZoomTransform(e)}},{key:"getTrackObject",value:function(e){for(var t=(0,ie.dictItems)(this.trackDefObjects),n=0;n<t.length;n++){var r=t[n][0],i=t[n][1].trackObject;if(r===e)return i;if(i.createdTracks)for(var o=(0,ie.dictItems)(i.createdTracks),a=0;a<o.length;a++){var s=o[a][0],l=o[a][1];if(s===e)return l}}}},{key:"timedUpdatePositionAndDimensions",value:function(){!this.closing&&this.element&&(this.elementPos=this.element.getBoundingClientRect(),this.dragging&&(this.yPositionOffset=this.element.getBoundingClientRect().top-this.currentProps.canvasElement.getBoundingClientRect().top,this.xPositionOffset=this.element.getBoundingClientRect().left-this.currentProps.canvasElement.getBoundingClientRect().left,this.setMask(),this.setBackground(),this.updateTrackPositions()&&this.applyZoomTransform(!0),requestAnimationFrame(this.timedUpdatePositionAndDimensions.bind(this))))}},{key:"syncMetaTracks",value:function(e){var t=this,n=(0,d.default)(this.metaTracks),r=new l.default(e.map(function(e){return e.uid}));this.addMetaTracks(e.filter(function(e){return!t.metaTracks[e.uid]})),this.updateMetaTracks(e.filter(function(e){return t.metaTracks[e.uid]})),this.removeMetaTracks(n.filter(function(e){return!r.has(e)}))}},{key:"syncTrackObjects",value:function(e){this.prevTrackDefinitions=(0,u.default)(e);for(var t={},n=0;n<e.length;n++)t[e[n].track.uid]=e[n];var r=new l.default((0,d.default)(this.trackDefObjects)),i=new l.default((0,d.default)(t)),o=new l.default([].concat((0,c.default)(i)).filter(function(e){return!r.has(e)})),a=new l.default([].concat((0,c.default)(r)).filter(function(e){return!i.has(e)})),s=new l.default([].concat((0,c.default)(i)).filter(function(e){return r.has(e)}));this.updateExistingTrackDefs([].concat((0,c.default)(s)).map(function(e){return t[e]})),this.addNewTracks([].concat((0,c.default)(o)).map(function(e){return t[e]})),this.updateExistingTrackDefs([].concat((0,c.default)(o)).map(function(e){return t[e]})),this.removeTracks([].concat((0,c.default)(a)))}},{key:"addMetaTracks",value:function(e){var t=this;e.filter(function(e){return!t.metaTracks[e.uid]}).forEach(function(e){t.metaTracks[e.uid]={trackDef:e,trackObject:t.createMetaTrack(e)}})}},{key:"addNewTracks",value:function(e){if(this.currentProps.pixiStage){for(var t=0;t<e.length;t++){var n=e[t],r=this.createTrackObject(n.track);r.refScalesChanged(this.xScale,this.yScale),this.trackDefObjects[n.track.uid]={trackDef:n,trackObject:r};var i=this.zoomTransform.rescaleX(this.xScale),o=this.zoomTransform.rescaleY(this.yScale);r.setDimensions([n.width,n.height]),r.zoomed(i,o)}this.applyZoomTransform(!1)}}},{key:"updateMetaTracks",value:function(){}},{key:"updateExistingTrackDefs",value:function(e){for(var t=0;t<e.length;t++)this.trackDefObjects[e[t].track.uid].trackDef=e[t],"combined"===e[t].track.type&&this.trackDefObjects[e[t].track.uid].trackObject.updateContents(e[t].track.contents,this.createTrackObject.bind(this)).refScalesChanged(this.xScale,this.yScale);this.updateTrackPositions()&&this.applyZoomTransform(!1)}},{key:"updateTrackPositions",value:function(){var e=!1;for(var t in this.trackDefObjects){var n=this.trackDefObjects[t].trackDef,r=this.trackDefObjects[t].trackObject,i=r.position,o=r.dimensions,a=[this.xPositionOffset+n.left,this.yPositionOffset+n.top],s=[n.width,n.height];i&&a[0]===i[0]&&a[1]===i[1]||(r.setPosition(a),e=!0),o&&s[0]===o[0]&&s[1]===o[1]||(r.setDimensions(s),e=!0)}return e}},{key:"removeMetaTracks",value:function(e){var t=this;e.forEach(function(e){t.metaTracks[e].trackObject.remove(),t.metaTracks[e]=void 0,delete t.metaTracks[e]})}},{key:"removeTracks",value:function(e){for(var t=0;t<e.length;t++)this.trackDefObjects[e[t]].trackObject.remove(),delete this.trackDefObjects[e[t]]}},{key:"setCenter",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=this,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:this.xScale,s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:this.yScale,l=(this.xScale.invert(1)-this.xScale.invert(0))/n,u=this.currentProps.marginLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,c=this.currentProps.marginTop+this.currentProps.topHeight+this.currentProps.centerHeight/2,d=u-a(e)*l,h=c-s(t)*l,f=void 0,p=function(){var e=m.zoomIdentity.translate(d,h).scale(l);o.zoomTransform=e,o.emptyZoomBehavior.transform(o.elementSelection,e),f=o.applyZoomTransform(r)};if(i){var v=this.elementSelection;this.activeTransitions+=1,document.hidden||(v=v.transition().duration(i)),v.call(this.zoomBehavior.transform,m.zoomIdentity.translate(d,h).scale(l)).on("end",function(){p(),o.activeTransitions-=1})}else p();return f}},{key:"zoomed",value:function(){this.zoomTransform=this.currentProps.zoomable?g.event.transform:m.zoomIdentity,this.applyZoomTransform(!0),oe.pubSub.publish("app.zoom",g.event)}},{key:"zoomStarted",value:function(){this.zooming=!0,oe.pubSub.publish("app.zoomStart")}},{key:"zoomEnded",value:function(){this.zooming=!1,oe.pubSub.publish("app.zoomEnd")}},{key:"applyZoomTransform",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this.currentProps,n=t.marginLeft+t.leftWidth,r=t.marginTop+t.topHeight;this.zoomedXScale=this.zoomTransform.rescaleX(this.xScale),this.zoomedYScale=this.zoomTransform.rescaleY(this.yScale);var i=(0,y.scaleLinear)().domain([n,n+t.centerWidth].map(this.zoomedXScale.invert)).range([0,t.centerWidth]),o=(0,y.scaleLinear)().domain([r,r+t.centerHeight].map(this.zoomedYScale.invert)).range([0,t.centerHeight]);for(var a in this.trackDefObjects){var s=this.trackDefObjects[a].trackObject;if("whole"!==this.trackDefObjects[a].trackDef.track.position)if("gallery"!==this.trackDefObjects[a].trackDef.track.position)s.zoomed(i.copy(),o.copy(),this.zoomTransform.k,this.zoomTransform.x+this.xPositionOffset,this.zoomTransform.y+this.yPositionOffset,t.marginLeft+t.leftWidth,t.marginTop+t.topHeight);else{var l=(0,y.scaleLinear)().domain([t.marginLeft+t.leftWidthNoGallery,t.marginLeft+t.leftWidth+t.centerWidth+t.galleryDim].map(this.zoomedXScale.invert)).range([0,t.centerWidth+2*t.galleryDim]),u=(0,y.scaleLinear)().domain([t.marginTop+t.topHeightNoGallery,t.marginTop+t.topHeight+t.centerHeight+t.galleryDim].map(this.zoomedYScale.invert)).range([0,t.centerHeight-2*t.galleryDim]);s.zoomed(l.copy(),u.copy(),this.zoomTransform.k)}else{var c=(0,y.scaleLinear)().domain([t.marginLeft,t.width-t.marginLeft].map(this.zoomedXScale.invert)).range([0,t.width-2*t.marginLeft]),d=(0,y.scaleLinear)().domain([t.marginTop,t.height-t.marginTop].map(this.zoomedYScale.invert)).range([0,t.height-2*t.marginTop]);s.zoomed(c,d)}}return e&&this.currentProps.onScalesChanged(i,o),[i,o]}},{key:"createMetaTrack",value:function(t){var e=this;t.type;var n=this.props.pluginTracks[t.type];if(n&&n.isMetaTrack)try{return new n.track(ae.AVAILABLE_FOR_PLUGINS,t,this.getTrackObject.bind(this),function(){return e.currentProps.onNewTilesLoaded(t.uid)})}catch(e){console.error("Plugin meta track",t.type,"failed to instantiate.",e)}return console.warn("Unknown meta track of type: "+String(t.type)),new X.default(this.pStage,{name:"Unknown Track Type",type:t.type},function(){return e.currentProps.onNewTilesLoaded(t.uid)})}},{key:"createTrackObject",value:function(t){var n=this,e=function(e){n.currentProps.onTilesetInfoReceived(t.uid,e)},r=t.data;switch(r||(r={server:(0,ie.trimTrailingSlash)(t.server),tilesetUid:t.tilesetUid}),t.type){case"left-axis":return new O.default(this.svgElement);case"top-axis":return new C.default(this.svgElement);case"heatmap":return new w.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},this.svgElement,function(){return n.currentProps.onValueScaleChanged(t.uid)},function(e){return n.currentProps.onTrackOptionsChanged(t.uid,e)},this.props.onMouseMoveZoom);case"horizontal-multivec":return new R.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},this.svgElement,function(){return n.currentProps.onValueScaleChanged(t.uid)},function(e){return n.currentProps.onTrackOptionsChanged(t.uid,e)});case"horizontal-line":return new P.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},function(){return n.currentProps.onValueScaleChanged(t.uid)},this.props.onMouseMoveZoom);case"vertical-line":return new D.default(new P.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},function(){return n.currentProps.onValueScaleChanged(t.uid)}));case"horizontal-point":return new A.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},function(){return n.currentProps.onValueScaleChanged(t.uid)});case"vertical-point":return new D.default(new A.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},function(){return n.currentProps.onValueScaleChanged(t.uid)}));case"horizontal-bar":return new j.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},function(){return n.currentProps.onValueScaleChanged(t.uid)});case"horizontal-divergent-bar":return new I.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},function(){return n.currentProps.onValueScaleChanged(t.uid)});case"vertical-bar":return new D.default(new j.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},function(){return n.currentProps.onValueScaleChanged(t.uid)}));case"horizontal-1d-tiles":return new _.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"vertical-1d-tiles":return new k.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"2d-tiles":return new x.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"top-stacked-interval":return new L.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},function(){return n.currentProps.onValueScaleChanged(t.uid)});case"left-stacked-interval":return new D.default(new L.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},function(){return n.currentProps.onValueScaleChanged(t.uid)}));case"viewport-projection-center":return t.registerViewportChanged&&t.removeViewportChanged&&t.setDomainsCallback?new K.default(this.svgElement,t.registerViewportChanged,t.removeViewportChanged,t.setDomainsCallback,t.options):new N.default;case"viewport-projection-horizontal":return t.registerViewportChanged&&t.removeViewportChanged&&t.setDomainsCallback?new $.default(this.svgElement,t.registerViewportChanged,t.removeViewportChanged,t.setDomainsCallback,t.options):new N.default;case"viewport-projection-vertical":return t.registerViewportChanged&&t.removeViewportChanged&&t.setDomainsCallback?new Q.default(this.svgElement,t.registerViewportChanged,t.removeViewportChanged,t.setDomainsCallback,t.options):new N.default;case"horizontal-gene-annotations":return new B.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"vertical-gene-annotations":return new D.default(new B.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)}));case"2d-rectangle-domains":case"arrowhead-domains":return new F.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"2d-annotations":return new V.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"vertical-2d-rectangle-domains":return new D.default(new z.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)}));case"horizontal-2d-rectangle-domains":return new z.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"square-markers":return new H.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"combined":return new E.default(t.contents,this.createTrackObject.bind(this));case"2d-chromosome-labels":return new U.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"2d-chromosome-grid":return new q.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},t.chromInfoPath);case"horizontal-chromosome-labels":return new G.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},t.chromInfoPath);case"vertical-chromosome-labels":return new D.default(new G.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},t.chromInfoPath));case"horizontal-heatmap":return new Y.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},this.svgElement,function(){return n.currentProps.onValueScaleChanged(t.uid)},function(e){return n.currentProps.onTrackOptionsChanged(t.uid,e)});case"vertical-heatmap":return new D.default(new Y.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},this.svgElement,function(){return n.currentProps.onValueScaleChanged(t.uid)},function(e){return n.currentProps.onTrackOptionsChanged(t.uid,e)}));case"2d-chromosome-annotations":return new W.default(this.pStage,t.chromInfoPath,t.options);case"horizontal-1d-value-interval":return new Z.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"vertical-1d-value-interval":return new D.default(new Z.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)}));case"osm-tiles":return new ne.default(this.pStage,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"mapbox-tiles":return new re.default(this.pStage,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)},t.accessToken);case"bedlike":return new M.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"horizontal-rule":return new J.default(this.pStage,t.y,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"vertical-rule":return new ee.default(this.pStage,t.x,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"cross-rule":return new te.default(this.pStage,t.x,t.y,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)});case"vertical-bedlike":return new D.default(new M.default(this.pStage,r,e,t.options,function(){return n.currentProps.onNewTilesLoaded(t.uid)}));default:var i=this.props.pluginTracks[t.type];if(i&&!i.isMetaTrack)try{return new i.track(ae.AVAILABLE_FOR_PLUGINS,this.pStage,t,r,e,function(){return n.currentProps.onNewTilesLoaded(t.uid)},this.baseEl)}catch(e){console.error("Plugin track",t.type,"failed to instantiate.",e)}return console.warn("Unknown track type:",t.type),new X.default(this.pStage,{name:"Unknown Track Type",type:t.type},function(){return n.currentProps.onNewTilesLoaded(t.uid)})}}},{key:"zoomToDataPos",value:function(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:3e3,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,a=(0,ie.scalesCenterAndK)(this.xScale.copy().domain([e,t]),this.yScale.copy().domain([n,r])),s=(0,h.default)(a,3),l=s[0],u=s[1],c=s[2],d=o?o(this.xScale,this.yScale):[this.xScale,this.yScale];this.setCenter(l,u,c,!1,i,d[0],d[1])}},{key:"forwardContextMenu",value:function(e){e.altKey||(e.preventDefault(),setTimeout(function(){oe.pubSub.publish("contextmenu",e)},0))}},{key:"addEventTracker",value:function(){this.eventTracker&&this.eventTracker!==this.eventTrackerOld&&(this.eventTrackerOld||(this.eventTrackerOld=this.eventTracker),this.eventTracker=this.eventTrackerOld,this.eventTracker.addEventListener("click",this.boundForwardEvent),this.eventTracker.addEventListener("contextmenu",this.boundForwardContextMenu),this.eventTracker.addEventListener("dblclick",this.boundForwardEvent),this.eventTracker.addEventListener("wheel",this.boundForwardEvent),this.eventTracker.addEventListener("dragstart",this.boundForwardEvent),this.eventTracker.addEventListener("selectstart",this.boundForwardEvent),this.eventTracker.addEventListener("mouseover",this.boundForwardEvent),this.eventTracker.addEventListener("mouseenter",this.boundForwardEvent),this.eventTracker.addEventListener("mousedown",this.boundForwardEvent),this.eventTracker.addEventListener("mousemove",this.boundForwardEvent),this.eventTracker.addEventListener("mouseup",this.boundForwardEvent),this.eventTracker.addEventListener("mouseout",this.boundForwardEvent),this.eventTracker.addEventListener("mouseleave",this.boundForwardEvent),this.eventTracker.addEventListener("touchstart",this.boundForwardEvent),this.eventTracker.addEventListener("touchmove",this.boundForwardEvent),this.eventTracker.addEventListener("touchend",this.boundForwardEvent),this.eventTracker.addEventListener("touchcancel",this.boundForwardEvent),this.eventTracker.addEventListener("pointerover",this.boundForwardEvent),this.eventTracker.addEventListener("pointerenter",this.boundForwardEvent),this.eventTracker.addEventListener("pointerdown",this.boundForwardEvent),this.eventTracker.addEventListener("pointermove",this.boundForwardEvent),this.eventTracker.addEventListener("pointerup",this.boundForwardEvent),this.eventTracker.addEventListener("pointercancel",this.boundForwardEvent),this.eventTracker.addEventListener("pointerout",this.boundForwardEvent),this.eventTracker.addEventListener("pointerleave",this.boundForwardEvent),window.addEventListener("scroll",this.boundScrollEvent))}},{key:"removeEventTracker",value:function(){this.eventTracker&&(this.eventTracker.removeEventListener("click",this.boundForwardEvent),this.eventTracker.removeEventListener("contextmenu",this.boundForwardContextMenu),this.eventTracker.removeEventListener("dblclick",this.boundForwardEvent),this.eventTracker.removeEventListener("wheel",this.boundForwardEvent),this.eventTracker.removeEventListener("dragstart",this.boundForwardEvent),this.eventTracker.removeEventListener("selectstart",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseover",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseenter",this.boundForwardEvent),this.eventTracker.removeEventListener("mousedown",this.boundForwardEvent),this.eventTracker.removeEventListener("mousemove",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseup",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseout",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseleave",this.boundForwardEvent),this.eventTracker.removeEventListener("touchstart",this.boundForwardEvent),this.eventTracker.removeEventListener("touchmove",this.boundForwardEvent),this.eventTracker.removeEventListener("touchend",this.boundForwardEvent),this.eventTracker.removeEventListener("touchcancel",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerover",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerenter",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerdown",this.boundForwardEvent),this.eventTracker.removeEventListener("pointermove",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerup",this.boundForwardEvent),this.eventTracker.removeEventListener("pointercancel",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerout",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerleave",this.boundForwardEvent),window.removeEventListener("scroll",this.boundScrollEvent))}},{key:"scrollEvent",value:function(e){this.elementPos=this.element.getBoundingClientRect()}},{key:"forwardEvent",value:function(e){e.sourceUid=this.uid,oe.pubSub.publish("app.event",e)}},{key:"render",value:function(){var t=this;return f.default.createElement("div",{ref:function(e){t.baseEl=e},className:"track-renderer-div TrackRenderer-module_track-renderer-3TM7n",style:{height:this.currentProps.height,width:this.currentProps.width}},f.default.createElement("div",{ref:function(e){t.element=e},className:"track-renderer-element TrackRenderer-module_track-renderer-element-2i16D"}),f.default.createElement("div",{ref:function(e){t.eventTracker=e},className:"track-renderer-events TrackRenderer-module_track-renderer-events-3tVM2"},this.currentProps.children))}}]),n}(f.default.Component);le.defaultProps={pluginTracks:{},canvasElement:null,centerHeight:0,centerWidth:0,children:[],galleryDim:0,height:0,initialXDomain:[],initialYDomain:[],isRangeSelection:!1,leftWidth:0,leftWidthNoGallery:0,marginLeft:0,marginTop:0,positionedTracks:[],topHeight:0,topHeightNoGallery:0,width:0,metaTracks:[]},le.propTypes={canvasElement:p.default.object,centerHeight:p.default.number,centerWidth:p.default.number,children:p.default.array,galleryDim:p.default.number,height:p.default.number,initialXDomain:p.default.array,initialYDomain:p.default.array,xDomainLimits:p.default.array,yDomainLimits:p.default.array,zoomDomain:p.default.array,isRangeSelection:p.default.bool,leftWidth:p.default.number,leftWidthNoGallery:p.default.number,marginLeft:p.default.number,marginTop:p.default.number,onMouseMoveZoom:p.default.func,onScalesChanged:p.default.func.isRequired,pixiStage:p.default.object.isRequired,pluginTracks:p.default.object,positionedTracks:p.default.array,metaTracks:p.default.array,setCentersFunction:p.default.func,svgElement:p.default.object.isRequired,topHeight:p.default.number,topHeightNoGallery:p.default.number,viewOptions:p.default.object,width:p.default.number},t.default=le},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(190),n(35);function r(e,t,n){this.k=e,this.x=t,this.y=n}r.prototype={constructor:r,scale:function(e){return 1===e?this:new r(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new r(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new r(1,0,0);throw r.prototype,new Error('Cannot find module "d3-selection"')},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),i=a(n(2)),o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function t(e){(0,r.default)(this,t),this.scene=e.scene,this.originalTrack=e,this.pBase=new o.Graphics,this.scene.removeChild(e.pBase),this.scene.addChild(this.pBase),this.moveToOrigin=new o.Graphics,this.moveToOrigin.addChild(e.pBase),this.pBase.addChild(this.moveToOrigin),this.moveToOrigin.rotation=Math.PI/2,e.flipText=!0,this.svgOutput=null,e.gBase&&e.gMain&&(this.originalTrack.gBase.attr("transform","translate("+String(this.moveToOrigin.position.x)+","+String(this.moveToOrigin.position.y)+")\n                             rotate(90)\n                             scale("+String(this.moveToOrigin.scale.x)+","+String(this.moveToOrigin.scale.y)+")"),this.originalTrack.gMain.attr("transform","translate("+String(this.originalTrack.pBase.position.x)+","+String(this.originalTrack.pBase.position.y)+")"))}return(0,i.default)(t,[{key:"remove",value:function(){this.originalTrack.remove(),this.pBase.clear(),this.scene.removeChild(this.pBase)}},{key:"setDimensions",value:function(e){var t=[(this.dimensions=e)[1],e[0]];this.originalTrack.setDimensions(t)}},{key:"setPosition",value:function(e){this.position=e,this.originalTrack.setPosition(e),this.originalTrack.pBase.position.x=-this.originalTrack.position[0],this.originalTrack.pBase.position.y=-this.originalTrack.position[1],this.moveToOrigin.scale.y=-1,this.moveToOrigin.scale.x=1,this.moveToOrigin.position.x=this.originalTrack.position[0],this.moveToOrigin.position.y=this.originalTrack.position[1],this.originalTrack.gMain&&(this.originalTrack.gBase.attr("transform","translate("+String(this.moveToOrigin.position.x)+","+String(this.moveToOrigin.position.y)+")\n                                 rotate(90)\n                                 scale("+String(this.moveToOrigin.scale.x)+","+String(this.moveToOrigin.scale.y)+")"),this.originalTrack.gMain.attr("transform","translate("+String(this.originalTrack.pBase.position.x)+","+String(this.originalTrack.pBase.position.y)+")"))}},{key:"refXScale",value:function(e){return arguments.length?(this.originalTrack._refXScale=e,this):this.originalTrack._refYScale}},{key:"refYScale",value:function(e){return arguments.length?(this.originalTrack._refYScale=e,this):this.originalTrack._refXScale}},{key:"xScale",value:function(e){return arguments.length?(this.originalTrack._yScale=e,this):this.originalTrack._xScale}},{key:"yScale",value:function(e){return arguments.length?(this.originalTrack._xScale=e,this):this.originalTrack._yScale}},{key:"getMouseOverHtml",value:function(e,t){return this.originalTrack.getMouseOverHtml(t,e)}},{key:"draw",value:function(){this.originalTrack.draw()}},{key:"zoomed",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;3<arguments.length&&void 0!==arguments[3]&&arguments[3],4<arguments.length&&void 0!==arguments[4]&&arguments[4],5<arguments.length&&void 0!==arguments[5]&&arguments[5],6<arguments.length&&void 0!==arguments[6]&&arguments[6],this.xScale(e),this.yScale(t),this.originalTrack.refreshTiles();var r=this.originalTrack._xScale(0)-n*this.originalTrack._refXScale(0);this.originalTrack.pMobile.position.x=r+this.originalTrack.position[0],this.originalTrack.pMobile.position.y=this.originalTrack.position[1]+this.originalTrack.dimensions[1],this.originalTrack.pMobile.scale.x=n,this.originalTrack.pMobile.scale.y=n,this.originalTrack.options.oneDHeatmapFlipped&&(this.originalTrack.pMobile.scale.y=-n,this.originalTrack.pMobile.position.y=this.originalTrack.position[1]),this.originalTrack.draw()}},{key:"refScalesChanged",value:function(e,t){this.originalTrack.refScalesChanged(t,e)}},{key:"rerender",value:function(e){this.originalTrack.rerender(e)}},{key:"exportSVG",value:function(){var e=document.createElement("g");if(e.setAttribute("transform","translate("+String(this.moveToOrigin.position.x)+","+String(this.moveToOrigin.position.y)+")\n                             rotate(90)\n                             scale("+String(this.moveToOrigin.scale.x)+","+String(this.moveToOrigin.scale.y)+")"),this.originalTrack.exportSVG){var t=document.createElement("g");t.setAttribute("transform","translate("+String(this.originalTrack.pBase.position.x)+", "+String(this.originalTrack.pBase.position.y)+")"),t.appendChild(this.originalTrack.exportSVG()[0]),e.appendChild(t)}return[e,e]}},{key:"respondsToPosition",value:function(e,t){return e>=this.position[0]&&e<=this.dimensions[0]+this.position[0]&&t>=this.position[1]&&t<=this.dimensions[1]+this.position[1]}}]),t}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var c=l(n(3)),d=l(n(1)),r=l(n(2)),h=l(n(4)),i=l(n(10)),o=l(n(5)),a=l(n(110)),f=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),s=l(n(41)),p=l(n(44)),v=l(n(111)),b=n(6);function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function u(e,t,n,r,i){(0,d.default)(this,u);var a=(0,h.default)(this,(u.__proto__||(0,c.default)(u)).call(this,e,r));a.searchField=null,a.chromInfo=null,a.animate=i;var o=t.server,s=t.tilesetUid,l=String(o)+"/chrom-sizes/?id="+String(s);return(0,p.default)(l,function(e){a.chromInfo=e,a.searchField=new v.default(a.chromInfo),a.draw(),a.texts=[];for(var t=0;t<a.chromInfo.cumPositions.length;t++){for(var n=[],r=0;r<a.chromInfo.cumPositions.length;r++){var i=String(a.chromInfo.cumPositions[t].chr)+"/"+String(a.chromInfo.cumPositions[r].chr),o=new f.Text(i,{fontSize:"14px",fontFamily:"Arial",fill:"red"});o.anchor.x=.5,o.anchor.y=.5,o.visible=!1,o.hashValue=Math.random(),n.push(o),a.pMain.addChild(o)}a.texts.push(n)}a.draw(),a.animate()}),a}return(0,o.default)(u,e),(0,r.default)(u,[{key:"draw",value:function(){var e=[];if(this.texts&&this.searchField){for(var t=(0,b.absToChr)(this._xScale.domain()[0],this.chromInfo),n=(0,b.absToChr)(this._xScale.domain()[1],this.chromInfo),r=(0,b.absToChr)(this._yScale.domain()[0],this.chromInfo),i=(0,b.absToChr)(this._yScale.domain()[1],this.chromInfo),o=0;o<this.texts.length;o++)for(var a=0;a<this.texts.length;a++)this.texts[o][a].visible=!1;for(var s=t[3];s<=n[3];s++)for(var l=r[3];l<=i[3];l++){var u=this.chromInfo.cumPositions[s],c=this.chromInfo.cumPositions[l],d=u.pos+this.chromInfo.chromLengths[u.chr]/2,h=c.pos+this.chromInfo.chromLengths[c.chr]/2,f=this._xScale(d),p=this._yScale(h),v=this.texts[s][l];v.x=f,v.y=p,v.updateTransform();var m=v.getBounds(),g=m.width/2,y=m.height/2;f+g>this.dimensions[0]?v.x-=f+g-this.dimensions[0]:f-g<0&&(v.x-=f-g),p+y>this.dimensions[1]?v.y-=p+y-this.dimensions[1]:p-y<0&&(v.y-=p-y),v.visible=!0,e.push({importance:this.texts[s][l].hashValue,text:this.texts[s][l],caption:null})}this.hideOverlaps(e)}}},{key:"hideOverlaps",value:function(n){var e;e=n.map(function(e){var t=e.text;t.updateTransform();var n=t.getBounds();return[n.x,n.y,n.x+n.width,n.y+n.height]}),(0,a.default)(e,function(e,t){n[e].importance>n[t].importance?n[t].text.visible=0:n[e].text.visible=0})}},{key:"setPosition",value:function(e){(0,i.default)(u.prototype.__proto__||(0,c.default)(u.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}}]),u}(s.default);t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var h=s(n(23)),f=s(n(3)),l=s(n(1)),r=s(n(2)),u=s(n(4)),p=s(n(10)),i=s(n(5)),c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),o=s(n(41)),v=s(n(44)),m=s(n(111)),a=n(6);function s(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function d(e,t,n,r,i,o){(0,l.default)(this,d);var a=(0,u.default)(this,(d.__proto__||(0,f.default)(d)).call(this,e,t,n,r,i));a.searchField=null,a.chromInfo=null,a.animate=i;var s=o;return s||(s=String(t.server)+"/chrom-sizes/?id="+String(t.tilesetUid)),(0,v.default)(s,function(e){a.chromInfo=e,a.searchField=new m.default(a.chromInfo),a.texts=[],a.lineGraphics=new c.Graphics,a.pMain.addChild(a.lineGraphics),a.draw(),a.animate()}),a}return(0,i.default)(d,e),(0,r.default)(d,[{key:"drawLines",value:function(){var e=this.lineGraphics,t=(0,a.colorToHex)(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),n=this.options.lineStrokeWidth?this.options.lineStrokeWidth:1;e.clear(),e.lineStyle(n,t,1),e.moveTo(this._xScale(0),0),e.lineTo(this._xScale(0),this.dimensions[1]),e.moveTo(0,this._yScale(0)),e.lineTo(this.dimensions[0],this._yScale(0));for(var r=0;r<this.chromInfo.cumPositions.length;r++){var i=this.chromInfo.cumPositions[r],o=i.pos+ +this.chromInfo.chromLengths[i.chr]+1;e.moveTo(0,this._yScale(o)),e.lineTo(this.dimensions[0],this._yScale(o)),e.moveTo(this._xScale(o),0),e.lineTo(this._xScale(o),this.dimensions[1])}}},{key:"draw",value:function(){this.texts&&this.searchField&&this.drawLines()}},{key:"setPosition",value:function(e){(0,p.default)(d.prototype.__proto__||(0,f.default)(d.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"exportSVG",value:function(){var e=null,t=null;if((0,p.default)(d.prototype.__proto__||(0,f.default)(d.prototype),"exportSVG",this)){var n=(0,p.default)(d.prototype.__proto__||(0,f.default)(d.prototype),"exportSVG",this).call(this),r=(0,h.default)(n,2);t=r[0],e=r[1]}else e=t=document.createElement("g");var i=document.createElement("g");if(e.appendChild(i),t.setAttribute("id","Chromosome2DGrid"),i.setAttribute("transform","translate("+String(this.position[0])+","+String(this.position[1])+")"),!this.chromInfo)return[t,e];for(var o=this.options.gridStrokeColor?this.options.gridStrokeColor:"blue",a=this.options.gridStrokeWidth,s=0;s<this.chromInfo.cumPositions.length;s++){var l=this.chromInfo.cumPositions[s],u=l.pos+ +this.chromInfo.chromLengths[l.chr]+1,c=document.createElement("line");c.setAttribute("x1",0),c.setAttribute("x2",this.dimensions[0]),c.setAttribute("y1",this._yScale(u)),c.setAttribute("y2",this._yScale(u)),c.setAttribute("stroke",o),c.setAttribute("stroke-width",a),i.appendChild(c),(c=document.createElement("line")).setAttribute("x1",this._xScale(u)),c.setAttribute("x2",this._xScale(u)),c.setAttribute("y1",0),c.setAttribute("y1",this.dimensions[1]),c.setAttribute("stroke",o),c.setAttribute("stroke-width",a),i.appendChild(c)}return[t,e]}}]),d}(o.default);t.default=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var _=c(n(11)),i=c(n(22)),k=c(n(3)),o=c(n(1)),r=c(n(2)),a=c(n(4)),S=c(n(10)),s=c(n(5)),T=n(18),C=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),l=c(n(41)),u=c(n(44));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function x(e,t,n){(0,o.default)(this,x);var r=(0,a.default)(this,(x.__proto__||(0,k.default)(x)).call(this,e,n));return r.drawnRects=new i.default,(0,u.default)(t,function(e){r.chromInfo=e,r.draw()}),r}return(0,s.default)(x,e),(0,r.default)(x,[{key:"draw",value:function(){if(this.chromInfo){this.drawnRects.clear();var e=this.options.minRectWidth?this.options.minRectWidth:10,t=this.options.minRectWidth?this.options.minRectHeight:10;(0,S.default)(x.prototype.__proto__||(0,k.default)(x.prototype),"draw",this).call(this);var n=this.pMain;n.clear();var r=!0,i=!1,o=void 0;try{for(var a,s=(0,_.default)(this.options.regions);!(r=(a=s.next()).done);r=!0){var l=a.value,u=(0,T.color)(l[6]),c=(0,T.color)(l[7]);c||(c=u);var d=C.utils.rgb2hex([u.r/255,u.g/255,u.b/255]),h=C.utils.rgb2hex([c.r/255,c.g/255,c.b/255]);n.lineStyle(1,h,c.opacity),n.beginFill(d,u.opacity);var f=this._xScale(this.chromInfo.chrPositions[l[0]].pos+ +l[1]),p=this._xScale(this.chromInfo.chrPositions[l[0]].pos+ +l[2]),v=this._yScale(this.chromInfo.chrPositions[l[3]].pos+ +l[4]),m=this._yScale(this.chromInfo.chrPositions[l[3]].pos+ +l[5]),g=p-f,y=m-v,b=void 0!==l[8]?l[8]:e,w=void 0!==l[9]?l[9]:t;g<b&&(f=(f+p)/2-b/2,g=b),y<w&&(v=(v+m)/2-w/2,y=w),n.drawRect(f,v,g,y)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}}},{key:"setPosition",value:function(e){(0,S.default)(x.prototype.__proto__||(0,k.default)(x.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}}]),x}(l.default);t.default=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(3)),o=r(n(1)),a=r(n(2)),s=r(n(4)),l=r(n(5));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function r(e,t){(0,o.default)(this,r);var n=(0,s.default)(this,(r.__proto__||(0,i.default)(r)).call(this,e,t));return n.tilesetInfo={},n.errorTextText="Unknown track type: "+String(t.type),n}return(0,l.default)(r,e),(0,a.default)(r,[{key:"zoomed",value:function(){this.draw()}}]),r}(r(n(41)).default);t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(3)),c=s(n(1)),r=s(n(2)),d=s(n(4)),i=s(n(10)),o=s(n(5)),h=s(n(21)),f=n(!function(){var e=new Error('Cannot find module "d3-brush"');throw e.code="MODULE_NOT_FOUND",e}()),a=n(!function(){var e=new Error('Cannot find module "d3-selection"');throw e.code="MODULE_NOT_FOUND",e}());function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function l(e,t,n,r,i){(0,c.default)(this,l);var o=(0,d.default)(this,(l.__proto__||(0,u.default)(l)).call(this,e,!0)),a=h.default.nice();o.uid=a,o.options=i,o.removeViewportChanged=n,o.setDomainsCallback=r,o.viewportXDomain=null,o.viewportYDomain=null;var s=Number.MAX_VALUE/2;return o.brush=(0,f.brush)(!0).extent([[-s,-s],[s,s]]).on("brush",o.brushed.bind(o)),o.gBrush=o.gMain.append("g").attr("id","brush-"+String(o.uid)).call(o.brush),o.gBrush.selectAll(".overlay").style("pointer-events","none"),o.gBrush.selectAll(".handle--n").style("pointer-events","none"),o.gBrush.selectAll(".handle--s").style("pointer-events","none"),o.gBrush.selectAll(".handle--w").style("pointer-events","none"),o.gBrush.selectAll(".handle--e").style("pointer-events","none"),t(a,o.viewportChanged.bind(o)),o.draw(),o}return(0,o.default)(l,e),(0,r.default)(l,[{key:"brushed",value:function(){var e=a.event.selection;if(this._xScale&&this._yScale){var t=[this._xScale.invert(e[0][0]),this._xScale.invert(e[1][0])],n=[this._yScale.invert(e[0][1]),this._yScale.invert(e[1][1])];this.setDomainsCallback(t,n)}}},{key:"viewportChanged",value:function(e,t){var n=e.domain(),r=t.domain();this.viewportXDomain=n,this.viewportYDomain=r,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),(0,i.default)(l.prototype.__proto__||(0,u.default)(l.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(this._xScale&&this.yScale&&this.viewportXDomain&&this.viewportYDomain){var e=[[this._xScale(this.viewportXDomain[0]),this._yScale(this.viewportYDomain[0])],[this._xScale(this.viewportXDomain[1]),this._yScale(this.viewportYDomain[1])]];this.brush.on("brush",null),this.gBrush.call(this.brush.move,e),this.brush.on("brush",this.brushed.bind(this))}}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"setPosition",value:function(e){(0,i.default)(l.prototype.__proto__||(0,u.default)(l.prototype),"setPosition",this).call(this,e),this.draw()}}]),l}(s(n(86)).default);t.default=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var l=s(n(3)),u=s(n(1)),r=s(n(2)),c=s(n(4)),i=s(n(10)),o=s(n(5)),d=n(!function(){var e=new Error('Cannot find module "d3-brush"');throw e.code="MODULE_NOT_FOUND",e}()),a=n(!function(){var e=new Error('Cannot find module "d3-selection"');throw e.code="MODULE_NOT_FOUND",e}()),h=s(n(21));function s(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function s(e,t,n,r,i){(0,u.default)(this,s);var o=(0,c.default)(this,(s.__proto__||(0,l.default)(s)).call(this,e,!0)),a=h.default.nice();return o.uid=a,o.options=i,o.removeViewportChanged=n,o.setDomainsCallback=r,o.viewportXDomain=null,o.viewportYDomain=null,o.brush=(0,d.brush)(!0).on("brush",o.brushed.bind(o)),o.gBrush=o.gMain.append("g").attr("id","brush-"+String(o.uid)).call(o.brush),o.gBrush.selectAll(".overlay").style("pointer-events","none"),o.gBrush.selectAll(".handle--ne").style("pointer-events","none"),o.gBrush.selectAll(".handle--nw").style("pointer-events","none"),o.gBrush.selectAll(".handle--sw").style("pointer-events","none"),o.gBrush.selectAll(".handle--se").style("pointer-events","none"),o.gBrush.selectAll(".handle--n").style("pointer-events","none"),o.gBrush.selectAll(".handle--s").style("pointer-events","none"),t(a,o.viewportChanged.bind(o)),o.draw(),o}return(0,o.default)(s,e),(0,r.default)(s,[{key:"brushed",value:function(){var e=a.event.selection;if(this._xScale&&this._yScale){var t=[this._xScale.invert(e[0][0]),this._xScale.invert(e[1][0])],n=this.viewportYDomain;this.setDomainsCallback(t,n)}}},{key:"viewportChanged",value:function(e,t){!(2<arguments.length&&void 0!==arguments[2])||arguments[2];var n=e.domain(),r=t.domain();this.viewportXDomain=n,this.viewportYDomain=r,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),(0,i.default)(s.prototype.__proto__||(0,l.default)(s.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(this._xScale&&this.yScale&&this.viewportXDomain&&this.viewportYDomain){var e=[[this._xScale(this.viewportXDomain[0]),0],[this._xScale(this.viewportXDomain[1]),this.dimensions[1]]];this.brush.on("brush",null),this.gBrush.call(this.brush.move,e),this.brush.on("brush",this.brushed.bind(this))}}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"setPosition",value:function(e){(0,i.default)(s.prototype.__proto__||(0,l.default)(s.prototype),"setPosition",this).call(this,e),this.draw()}}]),s}(s(n(86)).default);t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var l=s(n(3)),u=s(n(1)),r=s(n(2)),c=s(n(4)),i=s(n(10)),o=s(n(5)),d=n(!function(){var e=new Error('Cannot find module "d3-brush"');throw e.code="MODULE_NOT_FOUND",e}()),a=n(!function(){var e=new Error('Cannot find module "d3-selection"');throw e.code="MODULE_NOT_FOUND",e}()),h=s(n(21));function s(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function s(e,t,n,r,i){(0,u.default)(this,s);var o=(0,c.default)(this,(s.__proto__||(0,l.default)(s)).call(this,e,!0)),a=h.default.nice();return o.uid=a,o.options=i,o.removeViewportChanged=n,o.setDomainsCallback=r,o.viewportXDomain=null,o.viewportYDomain=null,o.brush=(0,d.brush)(!0).on("brush",o.brushed.bind(o)),o.gBrush=o.gMain.append("g").attr("id","brush-"+String(o.uid)).call(o.brush),o.gBrush.selectAll(".overlay").style("pointer-events","none"),o.gBrush.selectAll(".handle--ne").style("pointer-events","none"),o.gBrush.selectAll(".handle--nw").style("pointer-events","none"),o.gBrush.selectAll(".handle--sw").style("pointer-events","none"),o.gBrush.selectAll(".handle--se").style("pointer-events","none"),o.gBrush.selectAll(".handle--e").style("pointer-events","none"),o.gBrush.selectAll(".handle--w").style("pointer-events","none"),t(a,o.viewportChanged.bind(o)),o.draw(),o}return(0,o.default)(s,e),(0,r.default)(s,[{key:"brushed",value:function(){var e=a.event.selection;if(this._xScale&&this._yScale){var t=this.viewportXDomain,n=[this._yScale.invert(e[0][1]),this._yScale.invert(e[1][1])];this.setDomainsCallback(t,n)}}},{key:"viewportChanged",value:function(e,t){!(2<arguments.length&&void 0!==arguments[2])||arguments[2];var n=e.domain(),r=t.domain();this.viewportXDomain=n,this.viewportYDomain=r,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),(0,i.default)(s.prototype.__proto__||(0,l.default)(s.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(this._xScale&&this.yScale&&this.viewportXDomain&&this.viewportYDomain){var e=[[0,this._yScale(this.viewportYDomain[0])],[this.dimensions[0],this._yScale(this.viewportYDomain[1])]];this.brush.on("brush",null),this.gBrush.call(this.brush.move,e),this.brush.on("brush",this.brushed.bind(this))}}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"setPosition",value:function(e){(0,i.default)(s.prototype.__proto__||(0,l.default)(s.prototype),"setPosition",this).call(this,e),this.draw()}}]),s}(s(n(86)).default);t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s=f(n(3)),l=f(n(1)),r=f(n(2)),u=f(n(4)),i=f(n(5)),o=n(57),a=f(n(41)),c=f(n(174)),d=n(262),h=n(263);function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function a(e,t,n,r,i){(0,l.default)(this,a);var o=(0,u.default)(this,(a.__proto__||(0,s.default)(a)).call(this,e,r,i));return o.xPosition=t,o.yPosition=n,o}return(0,i.default)(a,e),(0,r.default)(a,[{key:"draw",value:function(){var e=this.pMain;e.clear(),this.drawHorizontalRule(e),this.drawVerticalRule(e)}},{key:"mouseMoveHandler",value:function(e){this.highlighted=this.isWithin(e.x,e.y)&&(this.isMouseOverHorizontalLine(e)||this.isMouseOverVerticalLine(e)),this.draw()}}]),a}((0,o.mix)(a.default).with(c.default,d.HorizontalRuleMixin,h.VerticalRuleMixin));t.default=p},function(e,t){e.exports={"track-renderer":"TrackRenderer-module_track-renderer-3TM7n","track-renderer-element":"TrackRenderer-module_track-renderer-element-2i16D","track-renderer-events":"TrackRenderer-module_track-renderer-events-3tVM2"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(37)),i=o(n(22)),a=o(n(46)),l=o(n(24)),s=o(n(3)),u=o(n(1)),c=o(n(2)),d=o(n(4)),h=o(n(5)),f=o(n(0)),p=n(98),v=o(n(29)),m=o(n(21)),g=n(9),y=n(12);function o(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function o(t){(0,u.default)(this,o);var n=(0,d.default)(this,(o.__proto__||(0,s.default)(o)).call(this,t));n.localTracks=y.TRACKS_INFO.filter(function(e){return e.local&&!e.hidden}),n.augmentedTracksInfo=y.TRACKS_INFO,window.higlassTracksByType&&(0,l.default)(window.higlassTracksByType).forEach(function(e){n.augmentedTracksInfo.push(window.higlassTracksByType[e].config)}),t.datatype?n.localTracks=n.localTracks.filter(function(e){return e.datatype[0]==t.datatype}):n.localTracks=n.localTracks.filter(function(e){return e.orientation==n.props.orientation}),n.localTracks.forEach(function(e){return e.uuid=m.default.nice()});var e=n.prepareNewEntries("",n.localTracks,{}),r=(0,l.default)(e),i=r.length?[r[0]]:null;return n.mounted=!1,n.state={selectedUuid:i,options:e,filter:""},n.requestTilesetLists(),n}return(0,h.default)(o,e),(0,c.default)(o,[{key:"serverUidKey",value:function(e,t){return String(e)+"/"+String(t)}},{key:"prepareNewEntries",value:function(t,e,n){var r=this,i=n;return e.map(function(e){return(0,a.default)({},e,{server:t,tilesetUid:e.uuid,serverUidKey:r.serverUidKey(t,e.uuid),datatype:e.datatype,name:e.name,uid:m.default.nice()})}).forEach(function(e){i[e.serverUidKey]=e}),i}},{key:"componentDidMount",value:function(){if(this.mounted=!0,this.requestTilesetLists(),this.state.selectedUuid){var e=[this.state.options[this.state.selectedUuid]];this.props.selectedTilesetChanged(e)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"requestTilesetLists",value:function(){var s=this,e=null;if(this.props.datatype)e="dt="+String(this.props.datatype);else{var t=new i.default([].concat.apply([],this.augmentedTracksInfo.filter(function(e){return e.datatype}).filter(function(e){return e.orientation==s.props.orientation}).map(function(e){return e.datatype})));e=[].concat((0,r.default)(t)).map(function(e){return"dt="+String(e)}).join("&")}this.props.trackSourceServers?this.props.trackSourceServers.forEach(function(a){g.tileProxy.json(String(a)+"/tilesets/?limit=10000&"+String(e),function(e,t){if(e)console.error("ERROR:",e);else{var n=s.prepareNewEntries(a,t.results,s.state.options),r=(0,l.default)(n),i=s.state.selectedUuid;if(!i){i=r.length?[r[0]]:null;var o=s.state.options[i[0]];s.props.selectedTilesetChanged([o])}s.mounted&&s.setState({selectedUuid:i,options:n})}})}):console.warn("No track source servers specified in the viewconf")}},{key:"handleOptionDoubleClick",value:function(e,t){var n=this.state.options[e.target.value];this.props.onDoubleClick(n)}},{key:"handleSelectedOptions",value:function(e){for(var t=[],n=[],r=0;r<e.length;r++)t.push(e[r]),n.push(this.state.options[e[r]]);this.props.selectedTilesetChanged(n),this.setState({selectedUuid:t})}},{key:"handleSelect",value:function(e){for(var t=v.default.findDOMNode(this.multiSelect).selectedOptions,n=[],r=0;r<t.length;r++){var i=t[r];n.push(i.value)}this.handleSelectedOptions(n)}},{key:"handleSearchChange",value:function(){var e=v.default.findDOMNode(this.searchBox);this.setState({filter:e.value})}},{key:"render",value:function(){var t=this,e=[];for(var n in this.state.options)e.push(this.state.options[n]);var r=e.filter(function(e){return e.name.toLowerCase().includes(t.state.filter)}).map(function(e){return f.default.createElement("option",{onDoubleClick:t.handleOptionDoubleClick.bind(t),key:e.serverUidKey,value:e.serverUidKey},e.name)}),i=f.default.createElement(p.Form,{horizontal:!0,onSubmit:function(e){e.preventDefault()}},f.default.createElement(p.FormGroup,null,f.default.createElement(p.Col,{sm:3},f.default.createElement(p.ControlLabel,null,"Select tileset")),f.default.createElement(p.Col,{smOffset:5,sm:4},f.default.createElement(p.FormControl,{placeholder:"Search Term",ref:function(e){t.searchBox=e},onChange:this.handleSearchChange.bind(this),autoFocus:!0}),f.default.createElement("div",{style:{height:10}})),f.default.createElement(p.Col,{sm:12},f.default.createElement(p.FormControl,{componentClass:"select",multiple:!0,className:"tileset-list",value:this.state.selectedUuid?this.state.selectedUuid:["x"],onChange:this.handleSelect.bind(this),ref:function(e){return t.multiSelect=e},size:15},r))));return f.default.createElement("div",null,i)}}]),o}(f.default.Component);t.default=b},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(3)),i=c(n(1)),o=c(n(2)),a=c(n(4)),s=c(n(5)),l=c(n(0)),u=n(12);function c(e){return e&&e.__esModule?e:{default:e}}n(523);var d=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.DATATYPE_TO_TRACK_TYPE=(0,u.DATATYPE_TO_TRACK_TYPE)(t.props.orientation),t.AVAILABLE_TRACK_TYPES=(0,u.AVAILABLE_TRACK_TYPES)(t.props.datatypes,t.props.orientation),t.state={selectedPlotType:t.AVAILABLE_TRACK_TYPES[0]},t}return(0,s.default)(n,e),(0,o.default)(n,[{key:"componentWillReceiveProps",value:function(e){this.AVAILABLE_TRACK_TYPES=(0,u.AVAILABLE_TRACK_TYPES)(e.datatypes,this.props.orientation),this.AVAILABLE_TRACK_TYPES&&0<this.AVAILABLE_TRACK_TYPES.length&&(this.AVAILABLE_TRACK_TYPES.includes(this.state.selectedPlotType)||this.handlePlotTypeSelected(this.AVAILABLE_TRACK_TYPES[0]))}},{key:"handlePlotTypeSelected",value:function(e){this.setState({selectedPlotType:e}),this.props.onPlotTypeSelected(e.type)}},{key:"render",value:function(){var i=this,e="No plot types available for track",o={};return u.TRACKS_INFO.forEach(function(e){o[e.type]=e}),this.AVAILABLE_TRACK_TYPES&&(e=this.AVAILABLE_TRACK_TYPES.sort(function(e,t){return e.type<t.type}).map(function(t){var e=o[t.type].thumbnail,n=i.state.selectedPlotType.type==t.type?"plot-type-selected":"unselected",r=o[t.type].thumbnail?l.default.createElement("div",{style:{display:"inline-block",marginRight:10,verticalAlign:"middle"},dangerouslySetInnerHTML:{__html:e.outerHTML}}):l.default.createElement("div",{style:{display:"inline-block",marginRight:10,verticalAlign:"middle"}},l.default.createElement("svg",{width:30,height:20}));return l.default.createElement("li",{className:n,key:t.type,onClick:function(e){i.setState({selectedPlotType:t}),i.props.onPlotTypeSelected(t.type)},style:{listStyle:"none",paddingLeft:5,paddingBottom:0}},r,l.default.createElement("span",{style:{verticalAlign:"middle"}},t.type))})),l.default.createElement("div",null,e)}}]),n}(l.default.Component);t.default=d},function(e,t){},function(e,t){},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(3)),i=g(n(1)),o=g(n(2)),a=g(n(4)),s=g(n(10)),l=g(n(5)),u=g(n(31)),c=n(57),d=g(n(0)),h=g(n(69)),f=g(n(48)),p=g(n(265)),v=n(124),m=n(9);function g(e){return e&&e.__esModule?e:{default:e}}n(49);var y={"../styles/ContextMenu.module.scss":{"context-menu":"ContextMenu-module_context-menu-2OwvL","context-menu-dark":"ContextMenu-module_context-menu-dark-2PO31","context-menu-icon":"ContextMenu-module_context-menu-icon-I4kiw","context-menu-item":"ContextMenu-module_context-menu-item-1HeVv","context-menu-hr":"ContextMenu-module_context-menu-hr-3yapb","play-icon":"ContextMenu-module_play-icon-R4pIO","context-menu-span":"ContextMenu-module_context-menu-span-8EUfZ","context-menu-thumbnail":"ContextMenu-module_context-menu-thumbnail-2vHLD","context-menu-thumbnail-inline":"ContextMenu-module_context-menu-thumbnail-inline-1iOcg"}},b=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.seriesRefs={},t.seriesListMenu=null,t}return(0,l.default)(n,e),(0,o.default)(n,[{key:"componentDidMount",value:function(){(0,s.default)(n.prototype.__proto__||(0,r.default)(n.prototype),"componentDidMount",this).call(this)}},{key:"render",value:function(){var t=this,e="context-menu";return(0,m.getDarkTheme)()&&(e+=" context-menu-dark"),d.default.createElement("div",{ref:function(e){return t.div=e},"data-menu-type":"ConfigTrackMenu",style:{left:this.state.left,top:this.state.top},className:(0,u.default)(e,y)},(0,v.getSeriesItems)(this.props.tracks,this.handleItemMouseEnter.bind(this),this.handleMouseLeave.bind(this),null),d.default.createElement("hr",{className:"ContextMenu-module_context-menu-hr-3yapb"}),d.default.createElement(f.default,{contextMenu:this,onClick:function(){return t.props.onLockValueScale(t.props.tracks[0].uid)},onMouseEnter:function(e){return t.handleOtherMouseEnter(e)}},"Lock Value Scale With"),d.default.createElement(f.default,{contextMenu:this,onClick:function(){return t.props.onUnlockValueScale(t.props.tracks[0].uid)},onMouseEnter:function(e){return t.handleOtherMouseEnter(e)}},"Unlock Value Scale"),d.default.createElement("hr",{className:"ContextMenu-module_context-menu-hr-3yapb"}),d.default.createElement(f.default,{contextMenu:this,onClick:function(){return t.props.onAddSeries(t.props.tracks[0].uid)},onMouseEnter:function(e){return t.handleOtherMouseEnter(e)}},"Add Series"),d.default.createElement(f.default,{onClick:function(){return t.props.onCloseTrack(t.props.tracks[0].uid)}},"Close Track"),d.default.createElement(f.default,{onClick:function(){t.props.onReplaceTrack(t.props.tracks[0].uid,t.props.trackOrientation)}},"Replace Track"),this.getSubmenu())}}]),n}((0,c.mix)(h.default).with(p.default));t.default=b},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var f=h(n(11)),r=h(n(3)),i=h(n(1)),o=h(n(2)),a=h(n(4)),s=h(n(5)),l=h(n(31)),p=(h(n(264)),h(n(0))),u=h(n(69)),c=h(n(48)),v=h(n(266)),d=n(9),m=n(12);function h(e){return e&&e.__esModule?e:{default:e}}n(49);var g={"../styles/ContextMenu.module.scss":{"context-menu":"ContextMenu-module_context-menu-2OwvL","context-menu-dark":"ContextMenu-module_context-menu-dark-2PO31","context-menu-icon":"ContextMenu-module_context-menu-icon-I4kiw","context-menu-item":"ContextMenu-module_context-menu-item-1HeVv","context-menu-hr":"ContextMenu-module_context-menu-hr-3yapb","play-icon":"ContextMenu-module_play-icon-R4pIO","context-menu-span":"ContextMenu-module_context-menu-span-8EUfZ","context-menu-thumbnail":"ContextMenu-module_context-menu-thumbnail-2vHLD","context-menu-thumbnail-inline":"ContextMenu-module_context-menu-thumbnail-inline-1iOcg"}},y=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"getConfigureSeriesMenu",value:function(e,t,c){var d=this,h={};if(!m.TRACKS_INFO_BY_TYPE[c.type]||!m.TRACKS_INFO_BY_TYPE[c.type].availableOptions)return null;var n=function(r){if(m.OPTIONS_INFO.hasOwnProperty(r)){if(h[r]={name:m.OPTIONS_INFO[r].name},m.OPTIONS_INFO[r].generateOptions){var e=m.OPTIONS_INFO[r].generateOptions(c);h[r].children||(h[r].children={});var t=function(e){var t={name:e.name,value:e.value,handler:function(){c.options[r]=e.value,d.props.onTrackOptionsChanged(c.uid,c.options),d.props.closeMenu()}};h[r].children[e.value]=t},n=!0,i=!1,o=void 0;try{for(var a,s=(0,f.default)(e);!(n=(a=s.next()).done);n=!0)t(a.value)}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}}if(m.OPTIONS_INFO[r].inlineOptions){var l=function(e){var t=m.OPTIONS_INFO[r].inlineOptions[e];h[r].children||(h[r].children={});var n={name:t.name,value:t.value};t.componentPickers&&t.componentPickers[c.type]?n.handler=function(){d.props.onConfigureTrack(c,t.componentPickers[c.type]),d.props.closeMenu()}:n.handler=function(){c.options[r]=t.value,d.props.onTrackOptionsChanged(c.uid,c.options),d.props.closeMenu()},h[r].children[e]=n};for(var u in m.OPTIONS_INFO[r].inlineOptions)l(u)}else m.OPTIONS_INFO[r].componentPickers&&m.OPTIONS_INFO[r].componentPickers[c.type]&&(h[r].handler=function(){d.props.onConfigureTrack(c,m.OPTIONS_INFO[r].componentPickers[c.type]),d.props.closeMenu()})}},r=!0,i=!1,o=void 0;try{for(var a,s=(0,f.default)(m.TRACKS_INFO_BY_TYPE[c.type].availableOptions);!(r=(a=s.next()).done);r=!0)n(a.value)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return p.default.createElement(v.default,{key:"config-series-menu",closeMenu:this.props.closeMenu,menuItems:h,orientation:this.state.orientation,parentBbox:t,position:e})}},{key:"getTrackTypeItems",value:function(e,t,n){var r=this,i=null,o=null;n.type in m.TRACKS_INFO_BY_TYPE&&(i=m.TRACKS_INFO_BY_TYPE[n.type].datatype[0],o=m.TRACKS_INFO_BY_TYPE[n.type].orientation);for(var a=m.TRACKS_INFO.filter(function(e){return e.datatype}).filter(function(e){return e.orientation}).filter(function(e){return e.datatype[0]==i}).filter(function(e){return e.orientation==o}).map(function(e){return e.type}),s={},l=function(e){s[a[e]]={value:a[e],name:a[e],handler:function(){r.props.onChangeTrackType(n.uid,a[e])}}},u=0;u<a.length;u++)l(u);return p.default.createElement(v.default,{key:"track-type-items",closeMenu:this.props.closeMenu,menuItems:s,orientation:this.state.orientation,parentBbox:t,position:e})}},{key:"getSubmenu",value:function(){if(this.state.submenuShown){var e=this.state.submenuSourceBbox,t="left"===this.state.orientation?{left:this.state.left,top:e.top}:{left:this.state.left+e.width+7,top:e.top},n=this.state.submenuShown,r=n.value;return"track-type"==n.option?this.getTrackTypeItems(t,e,r):this.getConfigureSeriesMenu(t,e,r)}return p.default.createElement("div",null)}},{key:"getDivideByMenuItem",value:function(){var t=this;if(this.props.series.data&&"divided"==this.props.series.data.type){var e={tilesetUid:this.props.series.data.children[0].tilesetUid,server:this.props.series.data.children[0].server};return console.log("newData:",e),p.default.createElement(c.default,{onClick:function(){return t.props.onChangeTrackData(t.props.series.uid,e)},onMouseEnter:function(e){return t.handleOtherMouseEnter(e)},className:"ContextMenu-module_context-menu-item-1HeVv"},p.default.createElement("span",{className:"ContextMenu-module_context-menu-span-8EUfZ"},"Remove divisor"))}return p.default.createElement(c.default,{onClick:function(){return t.props.onAddDivisor(t.props.series)},onMouseEnter:function(e){return t.handleOtherMouseEnter(e)},className:"ContextMenu-module_context-menu-item-1HeVv"},p.default.createElement("span",{className:"ContextMenu-module_context-menu-span-8EUfZ"},"Divide by"))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var t=this,e=this.props.onAddSeries?p.default.createElement(c.default,{onClick:function(){t.props.onCloseTrack(t.props.series.uid),t.props.onAddSeries(t.props.hostTrack.uid)},onMouseEnter:function(e){return t.handleOtherMouseEnter(e)},className:"ContextMenu-module_context-menu-item-1HeVv"},p.default.createElement("span",{className:"ContextMenu-module_context-menu-span-8EUfZ"},"Replace Series")):null,n="context-menu";return(0,d.getDarkTheme)()&&(n+=" context-menu-dark"),p.default.createElement("div",{onMouseLeave:this.props.handleMouseLeave,ref:function(e){return t.div=e},"data-menu-type":"SeriesListMenu",style:{left:this.state.left,top:this.state.top},className:(0,l.default)(n,g)},p.default.createElement(c.default,{onClick:this.props.onConfigureTrack,onMouseEnter:function(e){return t.handleItemMouseEnter(e,{option:"configure-series",value:t.props.track})},onMouseLeave:function(e){return t.handleMouseLeave(e)}},"Configure Series",p.default.createElement("svg",{className:"ContextMenu-module_play-icon-R4pIO"},p.default.createElement("use",{xlinkHref:"#play"}))),p.default.createElement(c.default,{onClick:function(){},onMouseEnter:function(e){return t.handleItemMouseEnter(e,{option:"track-type",value:t.props.track})},onMouseLeave:function(e){return t.handleMouseLeave(e)},className:"ContextMenu-module_context-menu-item-1HeVv"},p.default.createElement("span",{className:"ContextMenu-module_context-menu-span-8EUfZ"},"Track Type",p.default.createElement("svg",{className:"ContextMenu-module_play-icon-R4pIO"},p.default.createElement("use",{xlinkHref:"#play"})))),null,this.getDivideByMenuItem(),p.default.createElement(c.default,{onClick:this.props.onCloseTrack,onMouseEnter:function(e){return t.handleOtherMouseEnter(e)},className:"ContextMenu-module_context-menu-item-1HeVv"},p.default.createElement("span",{className:"ContextMenu-module_context-menu-span-8EUfZ"},"Close Series")),e,this.getSubmenu())}}]),t}(u.default);t.default=y},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(8)),i=s(n(0)),o=s(n(48)),a=n(124);function s(e){return e&&e.__esModule?e:{default:e}}n(49);var l=function(e){return i.default.createElement("div",null,(0,a.getSeriesItems)(e.tracks,null,null,e.onCloseTrack),i.default.createElement("hr",{className:"ContextMenu-module_context-menu-hr-3yapb"}),i.default.createElement(o.default,{onClick:function(){return e.onCloseTrack(e.tracks[0].uid)}},"Close track"))};l.propTypes={onCloseTrack:r.default.func.isRequired,tracks:r.default.array.isRequired},t.default=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=x(n(3)),i=x(n(1)),o=x(n(2)),a=x(n(4)),s=x(n(5)),l=x(n(31)),u=x(n(8)),c=x(n(0)),d=n(!function(){var e=new Error('Cannot find module "d3-brush"');throw e.code="MODULE_NOT_FOUND",e}()),h=n(!function(){var e=new Error('Cannot find module "d3-selection"');throw e.code="MODULE_NOT_FOUND",e}()),f=x(n(21)),p=x(n(214)),v=x(n(529)),m=x(n(241)),g=n(6),y=n(12),b=(x(n(530)),x(n(122))),w=x(n(123));function x(e){return e&&e.__esModule?e:{default:e}}var _={styles:{"vertical-tiled-plot":"VerticalTiledPlot-module_vertical-tiled-plot-R3sb7"},stylesPlot:{"tiled-plot":"TiledPlot-module_tiled-plot-uFHiB",horizontalList:"TiledPlot-module_horizontalList-1c1P8",list:"TiledPlot-module_list-24zgV",stylizedList:"TiledPlot-module_stylizedList-Mt4JL",stylizedItem:"TiledPlot-module_stylizedItem-2bQBK",stylizedHelper:"TiledPlot-module_stylizedHelper-3IVEu",horizontalItem:"TiledPlot-module_horizontalItem-2-ZjU","resizable-track":"TiledPlot-module_resizable-track-2oLT9",domain:"TiledPlot-module_domain-qYw6K"},stylesTrack:{"track-range-selection":"Track-module_track-range-selection-1yrDf","track-range-selection-active":"Track-module_track-range-selection-active-1oljJ Track-module_track-range-selection-1yrDf","track-range-selection-active-primary":"Track-module_track-range-selection-active-primary-29M73 Track-module_track-range-selection-active-1oljJ Track-module_track-range-selection-1yrDf","track-range-selection-active-secondary":"Track-module_track-range-selection-active-secondary-1s0t5 Track-module_track-range-selection-active-1oljJ Track-module_track-range-selection-1yrDf","track-range-selection-group-inactive":"Track-module_track-range-selection-group-inactive-YNRM4","track-range-selection-group-brush-selection":"Track-module_track-range-selection-group-brush-selection-2VYDl"}},k=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.brushBehavior=(0,d.brushY)(!0).on("start",t.brushStarted.bind(t)).on("brush",t.brushed.bind(t)).on("end",t.brushedEnded.bind(t)),t}return(0,s.default)(n,e),(0,o.default)(n,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush()}},{key:"shouldComponentUpdate",value:function(e,t){if(this.rangeSelectionTriggered)return this.rangeSelectionTriggered=!1,this.state!==t;if(this.props.rangeSelection!==e.rangeSelection){var n=this.props.is1dRangeSelection?0:1;return this.moveBrush(e.rangeSelection[n]?e.rangeSelection[n]:null),this.state!==t}return!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush():this.removeBrush()}},{key:"addBrush",value:function(){this.brushEl&&this.brushElAddedBefore!==this.brushEl&&(this.brushElAddedBefore&&this.brushElAddedBefore.on(".brush",null),this.brushEl.call(this.brushBehavior),this.brushElAddedBefore=this.brushEl,(0,g.resetD3BrushStyle)(this.brushEl,w.default["track-range-selection-group-brush-selection"]))}},{key:"brushed",value:function(){var e=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,this.sourceEvent&&this.props.onRangeSelection&&!e&&(this.rangeSelectionTriggered=!0,this.props.onRangeSelection(h.event.selection))}},{key:"brushStarted",value:function(){this.sourceEvent&&h.event.selection&&this.props.onRangeSelectionStart()}},{key:"brushedEnded",value:function(){!h.event.selection&&this.props.is1dRangeSelection&&(this.rangeSelectionTriggered=!0,this.props.onRangeSelectionEnd())}},{key:"moveBrush",value:function(e){if(this.brushEl){var t=e?[this.props.scale(e[0]),this.props.scale(e[1])]:null;this.rangeSelectionMoved=!0,this.brushEl.call(this.brushBehavior.move,t)}}},{key:"removeBrush",value:function(){this.brushElAddedBefore&&(this.brushElAddedBefore.call(this.brushBehavior.move,null),this.brushElAddedBefore.on(".brush",null),this.brushElAddedBefore=void 0,this.props.onRangeSelectionEnd())}},{key:"render",value:function(){var t=this,e=this.props.tracks.map(function(e){return e.width}).reduce(g.sum,0),n=this.props.tracks.map(function(e){return(0,y.IS_TRACK_RANGE_SELECTABLE)(e)}).reduce(g.or,!1),r=this.props.isRangeSelectionActive?"stylesTrack.track-range-selection-active":"stylesTrack.track-range-selection";return c.default.createElement("div",{className:"VerticalTiledPlot-module_vertical-tiled-plot-R3sb7"},n&&c.default.createElement("svg",{ref:function(e){t.brushEl=(0,h.select)(e)},style:{height:this.props.height,width:e},xmlns:"http://www.w3.org/2000/svg",className:(0,l.default)(r,_)}),c.default.createElement(p.default,{axis:"x",className:String(b.default.list)+" "+String(b.default.stylizedList)+" "+String(b.default.horizontalList),component:m.default,editable:this.props.editable,handleConfigTrack:this.props.handleConfigTrack,handleResizeTrack:this.props.handleResizeTrack,height:this.props.height,helperClass:b.default.stylizedHelper,itemClass:String(b.default.stylizedItem)+" "+String(b.default.horizontalItem),itemControlAlignLeft:this.props.tracksControlAlignLeft,itemReactClass:v.default,items:this.props.tracks.map(function(e){return{configMenuVisible:e.uid===t.props.configTrackMenuId,uid:e.uid||f.default.nice(),height:t.props.height,width:e.width,value:e.value}}),onAddSeries:this.props.onAddSeries,onCloseTrack:this.props.onCloseTrack,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,onSortEnd:this.props.handleSortEnd,referenceAncestor:this.props.referenceAncestor,resizeHandles:this.props.resizeHandles,useDragHandle:!0,width:e}))}},{key:"sourceEvent",get:function(){return h.event&&h.event.sourceEvent}}]),n}(c.default.Component);k.propTypes={configTrackMenuId:u.default.string,editable:u.default.bool,handleConfigTrack:u.default.func,handleResizeTrack:u.default.func,handleSortEnd:u.default.func,is1dRangeSelection:u.default.bool,isRangeSelectionActive:u.default.bool,height:u.default.number,onAddSeries:u.default.func,onCloseTrack:u.default.func,onCloseTrackMenuOpened:u.default.func,onConfigTrackMenuOpened:u.default.func,onRangeSelection:u.default.func,onRangeSelectionEnd:u.default.func,onRangeSelectionStart:u.default.func,rangeSelection:u.default.array,referenceAncestor:u.default.func,resizeHandles:u.default.object,scale:u.default.func,tracks:u.default.array,tracksControlAlignLeft:u.default.bool},t.default=k},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=n(82),o=a(n(252));function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,i.SortableElement)(function(e){return r.default.createElement(o.default,{className:e.className,controlAlignLeft:e.controlAlignLeft,editable:e.editable,handleConfigTrack:e.handleConfigTrack,handleResizeTrack:e.handleResizeTrack,height:e.height,item:e.item,onAddSeries:e.onAddSeries,onCloseTrack:e.onCloseTrack,onCloseTrackMenuOpened:e.onCloseTrackMenuOpened,onConfigTrackMenuOpened:e.onConfigTrackMenuOpened,resizeHandles:e.resizeHandles,uid:e.uid,width:e.width})});t.default=s},function(e,t){e.exports={"vertical-tiled-plot":"VerticalTiledPlot-module_vertical-tiled-plot-R3sb7"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=y(n(3)),i=y(n(1)),o=y(n(2)),a=y(n(4)),s=y(n(5)),l=y(n(31)),u=n(57),c=y(n(0)),d=y(n(8)),h=n(6),f=n(124),p=y(n(48)),v=y(n(69)),m=y(n(265)),g=n(9);function y(e){return e&&e.__esModule?e:{default:e}}n(49);var b={"../styles/ContextMenu.module.scss":{"context-menu":"ContextMenu-module_context-menu-2OwvL","context-menu-dark":"ContextMenu-module_context-menu-dark-2PO31","context-menu-icon":"ContextMenu-module_context-menu-icon-I4kiw","context-menu-item":"ContextMenu-module_context-menu-item-1HeVv","context-menu-hr":"ContextMenu-module_context-menu-hr-3yapb","play-icon":"ContextMenu-module_play-icon-R4pIO","context-menu-span":"ContextMenu-module_context-menu-span-8EUfZ","context-menu-thumbnail":"ContextMenu-module_context-menu-thumbnail-2vHLD","context-menu-thumbnail-inline":"ContextMenu-module_context-menu-thumbnail-inline-1iOcg"}},w=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var t=this,e=(0,f.getSeriesItems)(this.props.tracks,this.handleItemMouseEnter.bind(this),this.handleMouseLeave.bind(this)),n=this.props.customItems?c.default.Children.map(this.props.customItems,function(e){return c.default.cloneElement(e,{onMouseEnter:function(e){t.handleOtherMouseEnter(e)}})}):null,r="context-menu";return(0,g.getDarkTheme)()&&(r+=" context-menu-dark"),c.default.createElement("div",{ref:function(e){t.div=e},"data-menu-type":"ViewContextMenu",style:{left:this.state.left,top:this.state.top},className:(0,l.default)(r,b)},n,n&&c.default.createElement("hr",{className:"ContextMenu-module_context-menu-hr-3yapb"}),e,e&&c.default.createElement("hr",{className:"ContextMenu-module_context-menu-hr-3yapb"}),c.default.createElement(p.default,{onClick:function(){return t.props.onAddTrack({type:"horizontal-rule",y:t.props.coords[1],position:"whole"})},onMouseEnter:function(e){return t.handleOtherMouseEnter(e)}},"Add Horizontal Rule"),c.default.createElement(p.default,{onClick:function(){return t.props.onAddTrack({type:"vertical-rule",x:t.props.coords[0],position:"whole"})},onMouseEnter:function(e){return t.handleOtherMouseEnter(e)}},"Add Vertical Rule"),c.default.createElement(p.default,{onClick:function(){return t.props.onAddTrack({type:"cross-rule",x:t.props.coords[0],y:t.props.coords[1],position:"whole"})},onMouseEnter:function(e){return t.handleOtherMouseEnter(e)}},"Add Cross Rule"),c.default.createElement("hr",{className:"ContextMenu-module_context-menu-hr-3yapb"}),this.hasMatrixTrack(this.props.tracks)&&c.default.createElement(p.default,{onMouseEnter:function(e){return t.handleOtherMouseEnter(e)},onClick:this.handleAddHorizontalSection.bind(this)},"Add Horizontal Cross Section"),this.hasMatrixTrack(this.props.tracks)&&c.default.createElement(p.default,{onMouseEnter:function(e){return t.handleOtherMouseEnter(e)},onClick:this.handleAddVerticalSection.bind(this)},"Add Vertical Cross Section"),this.getSubmenu())}},{key:"hasMatrixTrack",value:function(e){return 0<(0,h.expandCombinedTracks)(this.props.tracks).filter(function(e){return"heatmap"==e.type}).length}},{key:"handleAddHorizontalSection",value:function(){var e=(0,h.expandCombinedTracks)(this.props.tracks).filter(function(e){return"heatmap"==e.type})[0];this.props.onAddTrack({type:"horizontal-rule",y:this.props.coords[1],position:"whole"}),this.props.onAddTrack({data:{type:"horizontal-section",server:e.server,tilesetUid:e.tilesetUid,slicePos:this.props.coords[1]},options:{valueScaling:"log"},type:"horizontal-bar",height:30,position:"top"})}},{key:"handleAddVerticalSection",value:function(){var e=(0,h.expandCombinedTracks)(this.props.tracks).filter(function(e){return"heatmap"==e.type})[0];this.props.onAddTrack({type:"vertical-rule",x:this.props.coords[0],position:"whole"}),this.props.onAddTrack({data:{type:"vertical-section",server:e.server,tilesetUid:e.tilesetUid,slicePos:this.props.coords[0]},options:{valueScaling:"log"},type:"vertical-bar",height:30,position:"left"})}}]),t}((0,u.mix)(v.default).with(m.default));w.propTypes={coords:d.default.array,customItems:d.default.array},t.default=w},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var f=C(n(23)),o=C(n(37)),i=C(n(22)),r=C(n(3)),a=C(n(1)),s=C(n(2)),l=C(n(4)),u=C(n(5)),c=C(n(31)),d=n(533),h=n(!function(){var e=new Error('Cannot find module "d3-selection"');throw e.code="MODULE_NOT_FOUND",e}()),p=C(n(0)),v=C(n(21)),m=n(98),g=C(n(8)),y=n(12),b=C(n(534)),w=C(n(44)),x=C(n(111)),_=C(n(175)),k=n(9),S=n(6),T=C(n(538));function C(e){return e&&e.__esModule?e:{default:e}}var O={styles:{"genome-position-search":"GenomePositionSearchBox-module_genome-position-search-SYccr","genome-position-search-focus":"GenomePositionSearchBox-module_genome-position-search-focus-23by2","genome-position-search-bar":"GenomePositionSearchBox-module_genome-position-search-bar-1_0ZU","genome-position-search-dark":"GenomePositionSearchBox-module_genome-position-search-dark-EML2e","genome-position-search-bar-button":"GenomePositionSearchBox-module_genome-position-search-bar-button-33SWJ","genome-position-search-bar-button-focus":"GenomePositionSearchBox-module_genome-position-search-bar-button-focus-1IhAk","genome-position-search-bar-icon":"GenomePositionSearchBox-module_genome-position-search-bar-icon-14AEk","genome-position-search-bar-icon-focus":"GenomePositionSearchBox-module_genome-position-search-bar-icon-focus-1Ay7Z","genome-position-search-bar-suggestions":"GenomePositionSearchBox-module_genome-position-search-bar-suggestions-SrIoU",btn:"GenomePositionSearchBox-module_btn-2bTUd","btn-sm":"GenomePositionSearchBox-module_btn-sm-2Ltms","btn-default":"GenomePositionSearchBox-module_btn-default-2pap4"}},E=function(e){function n(e){(0,a.default)(this,n);var t=(0,l.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.mounted=!1,t.uid=v.default.nice(),t.chromInfo=null,t.searchField=null,t.autocompleteMenu=null,t.xScale=null,t.yScale=null,t.prevParts=[],t.props.registerViewportChangedListener(t.scalesChanged.bind(t)),t.menuPosition={left:0,top:0},t.positionText="chr4:190,998,876-191,000,255",t.state={value:t.positionText,loading:!1,menuPosition:[0,0],genes:[],isFocused:!1,menuOpened:!1,autocompleteServer:t.props.autocompleteServer,autocompleteId:t.props.autocompleteId,availableAssemblies:[],selectedAssembly:null},t.styles={item:{padding:"2px 6px",cursor:"default"},highlightedItem:{color:"white",background:"hsl(200, 50%, 50%)",padding:"2px 6px",cursor:"default"},menu:{border:"solid 1px #ccc"}},t.availableAutocompletes={},t.props.autocompleteId&&(t.availableAutocompletes[t.props.chromInfoId]=new i.default([{server:t.props.autocompleteServer,acId:t.props.autocompleteId}])),t.availableChromSizes={},t}return(0,u.default)(n,e),(0,s.default)(n,[{key:"componentDidMount",value:function(){this.mounted=!0,(0,h.select)(this.autocompleteMenu.inputEl).on("keypress",this.autocompleteKeyPress.bind(this)),this.findAvailableAutocompleteSources(),this.findAvailableChromSizes(),this.setPositionText()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.props.removeViewportChangedListener()}},{key:"fetchChromInfo",value:function(n){var r=this;if(this.mounted&&this.availableChromSizes[n]){var i=[].concat((0,o.default)(this.availableChromSizes[n]))[0];this.setState({autocompleteServer:i.server}),(0,w.default)(String(i.server)+"/chrom-sizes/?id="+String(i.uuid),function(e){if(r.chromInfo=e,r.searchField=new x.default(r.chromInfo),r.setPositionText(),r.gpsbForm&&r.setState({selectedAssembly:n}),r.availableAutocompletes[n]){var t=[].concat((0,o.default)(r.availableAutocompletes[n]))[0].acId;r.props.onSelectedAssemblyChanged(n,t,i.server),r.gpsbForm&&r.setState({autocompleteId:t})}else r.props.onSelectedAssemblyChanged(n,null,i.server),r.gpsbForm&&r.setState({autocompleteId:null})})}}},{key:"findAvailableAutocompleteSources",value:function(){var r=this;this.props.trackSourceServers&&this.props.trackSourceServers.forEach(function(n){k.tileProxy.json(String(n)+"/tilesets/?limit=100&dt=gene-annotation",function(e,t){e?console.error(e):(t.results.map(function(e){e.coordSystem in r.availableAutocompletes||(r.availableAutocompletes[e.coordSystem]=new i.default),r.availableAutocompletes[e.coordSystem].add({server:n,acId:e.uuid}),r.setAvailableAssemblies()}),r.state.autocompleteId||r.gpsbForm&&r.availableAutocompletes[r.props.chromInfoId]&&r.setState({autocompleteId:[].concat((0,o.default)(r.availableAutocompletes[r.props.chromInfoId]))[0].acId}))})})}},{key:"findAvailableChromSizes",value:function(){var r=this;this.props.trackSourceServers&&this.props.trackSourceServers.forEach(function(n){k.tileProxy.json(String(n)+"/available-chrom-sizes/",function(e,t){e?console.error(e):(t.results.map(function(e){e.uuid in r.availableChromSizes||(r.availableChromSizes[e.coordSystem]=new i.default),r.availableChromSizes[e.coordSystem].add({server:n,uuid:e.uuid}),r.setAvailableAssemblies()}),r.searchField||r.fetchChromInfo(r.props.chromInfoId))})})}},{key:"setAvailableAssemblies",value:function(){new i.default((0,S.dictKeys)(this.availableAutocompletes));var e=new i.default((0,S.dictKeys)(this.availableChromSizes)),t=new i.default([].concat((0,o.default)(e)));this.gpsbForm&&this.setState({availableAssemblies:[].concat((0,o.default)(t))})}},{key:"scalesChanged",value:function(e,t){this.xScale=e,this.yScale=t,this.setPositionText()}},{key:"setPositionText",value:function(){if(this.mounted&&this.searchField){var e=this.searchField.scalesToPositionText(this.xScale,this.yScale,this.props.twoD);this.prevParts=e.split(/[ -]/),this.gpsbForm&&(this.positionText=e,this.autocompleteMenu.inputEl.value=e)}}},{key:"autocompleteKeyPress",value:function(){13==h.event.keyCode&&this.buttonClick()}},{key:"replaceGenesWithLoadedPositions",value:function(e){for(var t=this.positionText.split(" "),n=0;n<t.length;n++)for(var r=t[n].split("-"),i=0;i<r.length;i++){var o=e[r[i].toLowerCase()];if(o){var a=Math.floor((o.txEnd-o.txStart)/4);1==r.length?r[i]=String(o.chr)+":"+(o.txStart-a)+"-"+String(o.txEnd+a):r[i]=0==i?String(o.chr)+":"+(o.txStart-a):String(o.chr)+":"+String(o.txEnd+a),t[n]=r.join("-")}}var s=t.join(" ");this.prevParts=s.split(/[ -]/),this.positionText=s,this.setState({value:s})}},{key:"replaceGenesWithPositions",value:function(o){for(var a=this,e=this.positionText.split(/[ -]/),t=(0,d.queue)(),n=0;n<e.length;n++)if(0!=e[n].length){var r=this.searchField.parsePosition(e[n]),i=(0,f.default)(r,3),s=(i[0],i[1],i[2]);if(null==s||isNaN(s)){var l=String(this.state.autocompleteServer)+"/suggest/?d="+String(this.state.autocompleteId)+"&ac="+String(e[n].toLowerCase());t=t.defer(k.tileProxy.json,l)}}t.awaitAll(function(e,t){if(t){for(var n={},r=0;r<t.length;r++)if(t[r][0])for(var i=0;i<t[r].length;i++)n[t[r][i].geneName.toLowerCase()]=t[r][i];a.replaceGenesWithLoadedPositions(n),o()}})}},{key:"buttonClick",value:function(){var h=this;this.setState({genes:[]}),this.replaceGenesWithPositions(function(){var e=h.positionText;if(null!=h.searchField){var t=h.searchField.searchPosition(e),n=(0,f.default)(t,2),r=n[0],i=n[1];if(r&&(isNaN(r[0])||isNaN(r[1]))||i&&(isNaN(i[0])||isNaN(i[1])))return;i||(i=r);var o=h.xScale.copy().domain(r),a=h.yScale.copy().domain(i),s=(0,S.scalesCenterAndK)(o,a),l=(0,f.default)(s,3),u=l[0],c=l[1],d=l[2];h.props.setCenters(u,c,d,y.ZOOM_TRANSITION_DURATION)}})}},{key:"searchFieldSubmit",value:function(){this.buttonClick()}},{key:"pathJoin",value:function(e,t){var n=t||"/",r=new RegExp(String(n)+"{1,}","g");return e.join(n).replace(r,n)}},{key:"onAutocompleteChange",value:function(e,t){var n=this;this.positionText=t,this.setState({value:t,loading:!0});var r=t.split(/[ -]/);this.changedPart=null;for(var i=0;i<r.length;i++){if(i==this.prevParts.length){this.changedPart=i;break}if(r[i]!=this.prevParts[i]){this.changedPart=i;break}}if(this.prevParts=r,this.state.autocompleteServer&&this.state.autocompleteId&&null!=this.changedPart){this.setState({loading:!0});var o=String(this.state.autocompleteServer)+"/suggest/?d="+String(this.state.autocompleteId)+"&ac="+String(r[this.changedPart].toLowerCase());k.tileProxy.json(o,function(e,t){e?n.setState({loading:!1,genes:[]}):n.setState({loading:!1,genes:t})})}}},{key:"geneSelected",value:function(e,t){for(var n=this.positionText.split(" "),r=this.changedPart,i=0;i<n.length;i++){var o=n[i].split("-");if(!(r>o.length-1)){o[r]=t.geneName,n[i]=o.join("-");break}r-=o.length}this.prevParts=n.join(" ").split(/[ -]/),this.positionText=n.join(" "),this.setState({value:n.join(" "),genes:[]})}},{key:"handleMenuVisibilityChange",value:function(e,t){var n=t.getBoundingClientRect();this.menuPosition={left:n.left,top:n.top+n.height},this.setState({menuOpened:e})}},{key:"handleRenderMenu",value:function(e){return p.default.createElement(_.default,{children:e},p.default.createElement("div",{children:e,style:{left:this.menuPosition.left,top:this.menuPosition.top},className:"GenomePositionSearchBox-module_genome-position-search-bar-suggestions-SrIoU"}))}},{key:"handleAssemblySelect",value:function(e){this.fetchChromInfo(e),this.setState({selectedAssembly:e})}},{key:"focusHandler",value:function(e){this.setState({isFocused:e})}},{key:"render",value:function(){var n=this,e=this.state.availableAssemblies.map(function(e){return p.default.createElement(m.MenuItem,{eventKey:e,key:e},e)}),t=this.state.isFocused?"styles.genome-position-search-focus":"styles.genome-position-search",r=this.state.isFocused?"styles.genome-position-search-bar-button-focus":"styles.genome-position-search-bar-button";return this.state.isFocused,(0,k.getDarkTheme)()&&(t+=" styles.genome-position-search-dark"),p.default.createElement(m.FormGroup,{bsSize:"small",ref:function(e){return n.gpsbForm=e},className:(0,c.default)(t,O)},p.default.createElement(m.DropdownButton,{bsSize:"small",className:T.default["genome-position-search-bar-button"],id:this.uid,onSelect:this.handleAssemblySelect.bind(this),ref:function(e){return n.assemblyPickButton=e},title:this.state.selectedAssembly?this.state.selectedAssembly:"(none)"},e),p.default.createElement(b.default,{getItemValue:function(e){return e.geneName},inputProps:{className:T.default["genome-position-search-bar"]},items:this.state.genes,menuStyle:{position:"absolute",left:this.menuPosition.left,top:this.menuPosition.top,border:"1px solid black"},onChange:this.onAutocompleteChange.bind(this),onFocus:this.focusHandler.bind(this),onMenuVisibilityChange:this.handleMenuVisibilityChange.bind(this),onSelect:function(e,t){return n.geneSelected(e,t)},onSubmit:this.searchFieldSubmit.bind(this),ref:function(e){return n.autocompleteMenu=e},renderItem:function(e,t){return p.default.createElement("div",{id:e.refseqid,key:e.refseqid,style:t?n.styles.highlightedItem:n.styles.item},e.geneName)},renderMenu:this.handleRenderMenu.bind(this),value:this.positionText,wrapperStyle:{width:"100%"}}),p.default.createElement("button",{onClick:this.buttonClick.bind(this),className:(0,c.default)(r,O)},p.default.createElement(m.Glyphicon,{glyph:"search"})))}}]),n}(p.default.Component);E.propTypes={autocompleteId:g.default.string,autocompleteServer:g.default.string,chromInfoId:g.default.string,isFocused:g.default.bool,onFocus:g.default.func,onSelectedAssemblyChanged:g.default.func,registerViewportChangedListener:g.default.func,removeViewportChangedListener:g.default.func,setCenters:g.default.func,trackSourceServers:g.default.array,twoD:g.default.bool},t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[].slice,o={};function i(e){this._size=e,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function a(t){if(!t._start)try{!function(e){for(;e._start=e._waiting&&e._active<e._size;){var t=e._ended+e._active,n=e._tasks[t],r=n.length-1,i=n[r];n[r]=s(e,t),--e._waiting,++e._active,n=i.apply(null,n),e._tasks[t]&&(e._tasks[t]=n||o)}}(t)}catch(e){if(t._tasks[t._ended+t._active-1])l(t,e);else if(!t._data)throw e}}function s(n,r){return function(e,t){n._tasks[r]&&(--n._active,++n._ended,(n._tasks[r]=null)==n._error&&(null!=e?l(n,e):(n._data[r]=t,n._waiting?a(n):u(n))))}}function l(e,t){var n,r=e._tasks.length;for(e._error=t,e._data=void 0,e._waiting=NaN;0<=--r;)if((n=e._tasks[r])&&(e._tasks[r]=null,n.abort))try{n.abort()}catch(t){}e._active=NaN,u(e)}function u(e){if(!e._active&&e._call){var t=e._data;e._data=void 0,e._call(e._error,t)}}function c(e){if(null==e)e=1/0;else if(!(1<=(e=+e)))throw new Error("invalid concurrency");return new i(e)}i.prototype=c.prototype={constructor:i,defer:function(e){if("function"!=typeof e)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var t=r.call(arguments,1);return t.push(e),++this._waiting,this._tasks.push(t),a(this),this},abort:function(){return null==this._error&&l(this,new Error("abort")),this},await:function(n){if("function"!=typeof n)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,t){n.apply(null,[e].concat(t))},u(this),this},awaitAll:function(e){if("function"!=typeof e)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=e,u(this),this}},n.d(t,"queue",function(){return c})},function(e,v,m){(function(a){Object.defineProperty(v,"__esModule",{value:!0});var r=n(m(40)),i=n(m(156)),o=n(m(3)),s=n(m(1)),t=n(m(2)),l=n(m(4)),u=n(m(5)),c=n(m(0)),d=m(29),h=n(m(535)),e=n(m(8));function n(e){return e&&e.__esModule?e:{default:e}}var f=[],p=function(e){function n(e){(0,s.default)(this,n);var t=(0,l.default)(this,(n.__proto__||(0,o.default)(n)).call(this,e));return t.state={highlightedIndex:null,menuTop:0,menuLeft:0,menuWidth:0,isOpen:!1},t.keyDownHandlers={ArrowDown:function(e){e.preventDefault();var t=this.getFilteredItems().length;if(t){var n=this.state.highlightedIndex,r=null===n||n===t-1?0:n+1;this._performAutoCompleteOnKeyUp=!0,this.setState({highlightedIndex:r,isOpen:!0})}},ArrowUp:function(e){e.preventDefault();var t=this.getFilteredItems().length;if(t){var n=this.state.highlightedIndex,r=0===n||null===n?t-1:n-1;this._performAutoCompleteOnKeyUp=!0,this.setState({highlightedIndex:r,isOpen:!0})}},Enter:function(e){var t=this;if(!1===this.state.isOpen);else if(null==this.state.highlightedIndex)this.setState({isOpen:!1},function(){t.inputEl.select()});else{e.preventDefault();var n=this.getFilteredItems()[this.state.highlightedIndex],r=this.props.getItemValue(n);this.setState({isOpen:!1,highlightedIndex:null},function(){t.inputEl.setSelectionRange(r.length,r.length),t.props.onSelect(r,n)})}},Escape:function(){this.setState({highlightedIndex:null,isOpen:!1})}},t}return(0,u.default)(n,e),(0,t.default)(n,[{key:"getInitialState",value:function(){return{isOpen:!1,highlightedIndex:null}}},{key:"componentWillMount",value:function(){this._ignoreBlur=!1,this._performAutoCompleteOnUpdate=!1,this._performAutoCompleteOnKeyUp=!1}},{key:"componentWillReceiveProps",value:function(e){this._performAutoCompleteOnUpdate=!0,(this.props.items!==e.items||this.state.highlightedIndex>=e.items.length)&&this.setState({highlightedIndex:null})}},{key:"componentDidUpdate",value:function(e,t){!0===this.state.isOpen&&!1===t.isOpen&&this.setMenuPositions(),this.state.isOpen&&this._performAutoCompleteOnUpdate&&(this._performAutoCompleteOnUpdate=!1,this.maybeAutoCompleteText()),this.maybeScrollItemIntoView(),t.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen,this.inputEl)}},{key:"maybeScrollItemIntoView",value:function(){if(!0===this.state.isOpen&&null!==this.state.highlightedIndex){var e=this.refs["item-"+String(this.state.highlightedIndex)],t=this.refs.menu;e&&(0,h.default)((0,d.findDOMNode)(e),(0,d.findDOMNode)(t),{onlyScrollIfNeeded:!0})}}},{key:"handleKeyDown",value:function(e){this.keyDownHandlers[e.key]?this.keyDownHandlers[e.key].call(this,e):this.setState({highlightedIndex:null,isOpen:!0})}},{key:"handleChange",value:function(e){this._performAutoCompleteOnKeyUp=!0,this.props.onChange(e,e.target.value)}},{key:"handleKeyUp",value:function(){this._performAutoCompleteOnKeyUp&&(this._performAutoCompleteOnKeyUp=!1,this.maybeAutoCompleteText())}},{key:"getFilteredItems",value:function(){var n=this,e=this.props.items;return this.props.shouldItemRender&&(e=e.filter(function(e){return n.props.shouldItemRender(e,n.props.value)})),this.props.sortItems&&e.sort(function(e,t){return n.props.sortItems(e,t,n.props.value)}),e}},{key:"maybeAutoCompleteText",value:function(){if(this.props.autoHighlight&&""!==this.props.value){var e=this.state.highlightedIndex,t=this.getFilteredItems();if(0!==t.length){var n=null!==e?t[e]:t[0];0===this.props.getItemValue(n).toLowerCase().indexOf(this.props.value.toLowerCase())&&null===e&&this.setState({highlightedIndex:0})}}}},{key:"setMenuPositions",value:function(){var e=this.inputEl,t=e.getBoundingClientRect(),n=a.window.getComputedStyle(e),r=parseInt(n.marginBottom,10)||0,i=parseInt(n.marginLeft,10)||0,o=parseInt(n.marginRight,10)||0;this.setState({menuTop:t.bottom+r,menuLeft:t.left+i,menuWidth:t.width+i+o})}},{key:"highlightItemFromMouse",value:function(e){this.setState({highlightedIndex:e})}},{key:"selectItemFromMouse",value:function(e){var t=this,n=this.props.getItemValue(e);this.setState({isOpen:!1,highlightedIndex:null},function(){t.props.onSelect(n,e),t.inputEl.focus()})}},{key:"setIgnoreBlur",value:function(e){this._ignoreBlur=e}},{key:"renderMenu",value:function(){var r=this,e=this.getFilteredItems().map(function(e,t){var n=r.props.renderItem(e,r.state.highlightedIndex===t,{cursor:"default"});return c.default.cloneElement(n,{onMouseDown:function(){return r.setIgnoreBlur(!0)},onMouseEnter:function(){return r.highlightItemFromMouse(t)},onClick:function(){return r.selectItemFromMouse(e)},ref:"item-"+String(t)})}),t={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth};if(!e.length)return null;var n=this.props.renderMenu(e,this.props.value,t);return c.default.cloneElement(n,{ref:"menu"})}},{key:"handleInputBlur",value:function(){this.props.onFocus&&this.props.onFocus(),this._ignoreBlur||this.setState({isOpen:!1,highlightedIndex:null})}},{key:"handleInputFocus",value:function(){this.props.onFocus&&this.props.onFocus(!0),this._ignoreBlur?this.setIgnoreBlur(!1):(this._ignoreClick=!0,this.setState({isOpen:!0}))}},{key:"isInputFocused",value:function(){return this.inputEl.ownerDocument&&this.inputEl===this.inputEl.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&!1===this.state.isOpen?this.setState({isOpen:!0}):null===this.state.highlightedIndex||this._ignoreClick||this.selectItemFromMouse(this.getFilteredItems()[this.state.highlightedIndex]),this._ignoreClick=!1}},{key:"composeEventHandlers",value:function(t,n){return n?function(e){t(e),n(e)}:t}},{key:"render",value:function(){var t=this;this.props.debug&&f.push({id:f.length,state:this.state});var e=this.props.inputProps;return c.default.createElement("div",(0,i.default)({style:(0,i.default)({},this.props.wrapperStyle)},this.props.wrapperProps),c.default.createElement("input",(0,i.default)({},e,{"aria-autocomplete":"list",autoComplete:"off",onBlur:this.composeEventHandlers(this.handleInputBlur.bind(this),e.onBlur&&e.onBlur.bind(this)),onChange:this.handleChange.bind(this),onClick:this.composeEventHandlers(this.handleInputClick.bind(this),e.onClick&&e.onClick.bind(this)),onFocus:this.composeEventHandlers(this.handleInputFocus.bind(this),e.onFocus&&e.onFocus.bind(this)),onKeyDown:this.composeEventHandlers(this.handleKeyDown.bind(this),e.onKeyDown&&e.onKeyDown.bind(this)),onKeyUp:this.composeEventHandlers(this.handleKeyUp.bind(this),e.onKeyUp&&e.onKeyUp.bind(this)),ref:function(e){return t.inputEl=e},role:"combobox",value:this.props.value})),("open"in this.props?this.props.open:this.state.isOpen)&&this.renderMenu(),this.props.debug&&c.default.createElement("pre",{style:{marginLeft:300}},(0,r.default)(f.slice(f.length-5,f.length),null,2)))}}]),n}(c.default.Component);p.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},onChange:function(){},onSelect:function(){},renderMenu:function(e,t,n){return c.default.createElement("div",{children:e,style:(0,i.default)({},n,this.menuStyle)})},shouldItemRender:function(){return!0},menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,onMenuVisibilityChange:function(){}},p.propTypes={autoHighlight:e.default.bool,debug:e.default.bool,getItemValue:e.default.func.isRequired,inputProps:e.default.object,items:e.default.array,menuStyle:e.default.object,onChange:e.default.func,onFocus:e.default.func,onMenuVisibilityChange:e.default.func,onSelect:e.default.func,open:e.default.bool,renderItem:e.default.func.isRequired,renderMenu:e.default.func,shouldItemRender:e.default.func,sortItems:e.default.func,value:e.default.any,wrapperProps:e.default.object,wrapperStyle:e.default.object},v.default=p}).call(v,m(65))},function(e,t,n){"use strict";e.exports=n(536)},function(e,t,n){"use strict";var T=n(537);e.exports=function(e,t,n){n=n||{},9===t.nodeType&&(t=T.getWindow(t));var r=n.allowHorizontalScroll,i=n.onlyScrollIfNeeded,o=n.alignWithTop,a=n.alignWithLeft,s=n.offsetTop||0,l=n.offsetLeft||0,u=n.offsetBottom||0,c=n.offsetRight||0;r=void 0===r||r;var d=T.isWindow(t),h=T.offset(e),f=T.outerHeight(e),p=T.outerWidth(e),v=void 0,m=void 0,g=void 0,y=void 0,b=void 0,w=void 0,x=void 0,_=void 0,k=void 0,S=void 0;d?(x=t,S=T.height(x),k=T.width(x),_={left:T.scrollLeft(x),top:T.scrollTop(x)},b={left:h.left-_.left-l,top:h.top-_.top-s},w={left:h.left+p-(_.left+k)+c,top:h.top+f-(_.top+S)+u},y=_):(v=T.offset(t),m=t.clientHeight,g=t.clientWidth,y={left:t.scrollLeft,top:t.scrollTop},b={left:h.left-(v.left+(parseFloat(T.css(t,"borderLeftWidth"))||0))-l,top:h.top-(v.top+(parseFloat(T.css(t,"borderTopWidth"))||0))-s},w={left:h.left+p-(v.left+g+(parseFloat(T.css(t,"borderRightWidth"))||0))+c,top:h.top+f-(v.top+m+(parseFloat(T.css(t,"borderBottomWidth"))||0))+u}),b.top<0||0<w.top?!0===o?T.scrollTop(t,y.top+b.top):!1===o?T.scrollTop(t,y.top+w.top):b.top<0?T.scrollTop(t,y.top+b.top):T.scrollTop(t,y.top+w.top):i||((o=void 0===o||!!o)?T.scrollTop(t,y.top+b.top):T.scrollTop(t,y.top+w.top)),r&&(b.left<0||0<w.left?!0===a?T.scrollLeft(t,y.left+b.left):!1===a?T.scrollLeft(t,y.left+w.left):b.left<0?T.scrollLeft(t,y.left+b.left):T.scrollLeft(t,y.left+w.left):i||((a=void 0===a||!!a)?T.scrollLeft(t,y.left+b.left):T.scrollLeft(t,y.left+w.left)))}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function i(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],r="scroll"+(t?"Top":"Left");if("number"!=typeof n){var i=e.document;"number"!=typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}function d(e){return i(e)}function h(e){return i(e,!0)}function a(e){var t,n,r,i,o,a,s,l=(i=r=void 0,o=(t=e).ownerDocument,a=o.body,s=o&&o.documentElement,r=(n=t.getBoundingClientRect()).left,i=n.top,{left:r-=s.clientLeft||a.clientLeft||0,top:i-=s.clientTop||a.clientTop||0}),u=e.ownerDocument,c=u.defaultView||u.parentWindow;return l.left+=d(c),l.top+=h(c),l}var s=new RegExp("^("+/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source+")(?!px)[a-z%]+$","i"),l=/^(top|right|bottom|left)$/,u="currentStyle",c="runtimeStyle";var f=void 0;function p(e,t){for(var n=0;n<e.length;n++)t(e[n])}function v(e){return"border-box"===f(e,"boxSizing")}"undefined"!=typeof window&&(f=window.getComputedStyle?function(e,t,n){var r="",i=e.ownerDocument,o=n||i.defaultView.getComputedStyle(e,null);return o&&(r=o.getPropertyValue(t)||o[t]),r}:function(e,t){var n=e[u]&&e[u][t];if(s.test(n)&&!l.test(t)){var r=e.style,i=r.left,o=e[c].left;e[c].left=e[u].left,r.left="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r.left=i,e[c].left=o}return""===n?"auto":n});var m=["margin","border","padding"],g=-1,y=2,b=1;function w(e,t,n){var r=0,i=void 0,o=void 0,a=void 0;for(o=0;o<t.length;o++)if(i=t[o])for(a=0;a<n.length;a++){var s=void 0;s="border"===i?i+n[a]+"Width":i+n[a],r+=parseFloat(f(e,s))||0}return r}function x(e){return null!=e&&e==e.window}var _={};function k(e,t,n){if(x(e))return"width"===t?_.viewportWidth(e):_.viewportHeight(e);if(9===e.nodeType)return"width"===t?_.docWidth(e):_.docHeight(e);var r="width"===t?["Left","Right"]:["Top","Bottom"],i="width"===t?e.offsetWidth:e.offsetHeight,o=(f(e),v(e)),a=0;(null==i||i<=0)&&(i=void 0,(null==(a=f(e,t))||Number(a)<0)&&(a=e.style[t]||0),a=parseFloat(a)||0),void 0===n&&(n=o?b:g);var s=void 0!==i||o,l=i||a;if(n===g)return s?l-w(e,["border","padding"],r):a;if(s){var u=n===y?-w(e,["border"],r):w(e,["margin"],r);return l+(n===b?0:u)}return a+w(e,m.slice(n),r)}p(["Width","Height"],function(o){_["doc"+o]=function(e){var t=e.document;return Math.max(t.documentElement["scroll"+o],t.body["scroll"+o],_["viewport"+o](t))},_["viewport"+o]=function(e){var t="client"+o,n=e.document,r=n.body,i=n.documentElement[t];return"CSS1Compat"===n.compatMode&&i||r&&r[t]||i}});var S={position:"absolute",visibility:"hidden",display:"block"};function T(e){var t=void 0,n=arguments;return 0!==e.offsetWidth?t=k.apply(void 0,n):function(e,t,n){var r={},i=e.style,o=void 0;for(o in t)t.hasOwnProperty(o)&&(r[o]=i[o],i[o]=t[o]);for(o in n.call(e),t)t.hasOwnProperty(o)&&(i[o]=r[o])}(e,S,function(){t=k.apply(void 0,n)}),t}function C(e,t,n){var r=n;if("object"!==(void 0===t?"undefined":o(t)))return void 0!==r?("number"==typeof r&&(r+="px"),void(e.style[t]=r)):f(e,t);for(var i in t)t.hasOwnProperty(i)&&C(e,i,t[i])}p(["width","height"],function(n){var e=n.charAt(0).toUpperCase()+n.slice(1);_["outer"+e]=function(e,t){return e&&T(e,n,t?0:b)};var r="width"===n?["Left","Right"]:["Top","Bottom"];_[n]=function(e,t){if(void 0===t)return e&&T(e,n,g);if(e){f(e);return v(e)&&(t+=w(e,["padding","border"],r)),C(e,n,t)}}}),e.exports=r({getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t){if(void 0===t)return a(e);!function(e,t){"static"===C(e,"position")&&(e.style.position="relative");var n=a(e),r={},i=void 0,o=void 0;for(o in t)t.hasOwnProperty(o)&&(i=parseFloat(C(e,o))||0,r[o]=i+t[o]-n[o]);C(e,r)}(e,t)},isWindow:x,each:p,css:C,clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);if(e.overflow)for(var n in e)e.hasOwnProperty(n)&&(t.overflow[n]=e.overflow[n]);return t},scrollLeft:function(e,t){if(x(e)){if(void 0===t)return d(e);window.scrollTo(t,h(e))}else{if(void 0===t)return e.scrollLeft;e.scrollLeft=t}},scrollTop:function(e,t){if(x(e)){if(void 0===t)return h(e);window.scrollTo(d(e),t)}else{if(void 0===t)return e.scrollTop;e.scrollTop=t}},viewportWidth:0,viewportHeight:0},_)},function(e,t){e.exports={"genome-position-search":"GenomePositionSearchBox-module_genome-position-search-SYccr","genome-position-search-focus":"GenomePositionSearchBox-module_genome-position-search-focus-23by2","genome-position-search-bar":"GenomePositionSearchBox-module_genome-position-search-bar-1_0ZU","genome-position-search-dark":"GenomePositionSearchBox-module_genome-position-search-dark-EML2e","genome-position-search-bar-button":"GenomePositionSearchBox-module_genome-position-search-bar-button-33SWJ","genome-position-search-bar-button-focus":"GenomePositionSearchBox-module_genome-position-search-bar-button-focus-1IhAk","genome-position-search-bar-icon":"GenomePositionSearchBox-module_genome-position-search-bar-icon-14AEk","genome-position-search-bar-icon-focus":"GenomePositionSearchBox-module_genome-position-search-bar-icon-focus-1Ay7Z","genome-position-search-bar-suggestions":"GenomePositionSearchBox-module_genome-position-search-bar-suggestions-SrIoU",btn:"GenomePositionSearchBox-module_btn-2bTUd","btn-sm":"GenomePositionSearchBox-module_btn-sm-2Ltms","btn-default":"GenomePositionSearchBox-module_btn-default-2pap4"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(3)),i=c(n(1)),o=c(n(2)),a=c(n(4)),s=c(n(5)),l=c(n(0)),u=n(98);function c(e){return e&&e.__esModule?e:{default:e}}n(267);var d=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.state={},t}return(0,s.default)(n,e),(0,o.default)(n,[{key:"render",value:function(){var e=this.props.linkLocation?l.default.createElement("input",{readOnly:!0,style:{width:500},value:this.props.linkLocation}):l.default.createElement("div",null,l.default.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate","aria-hidden":"true"}),l.default.createElement("span",null,"  We are generating your link..."));return l.default.createElement("div",{className:"modal-container",style:{position:"absolute",left:0,top:0,height:this.props.height,width:this.props.width}},l.default.createElement(u.Modal,{className:"hg-modal",container:this,onHide:this.props.onDone,show:!0},l.default.createElement(u.Modal.Header,{closeButton:!0},l.default.createElement(u.Modal.Title,null,"Share view link")),l.default.createElement(u.Modal.Body,null,e),l.default.createElement(u.Modal.Footer,null,l.default.createElement(u.Button,{onClick:this.props.onDone},"Done"))))}}]),n}(l.default.Component);t.default=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(3)),i=g(n(1)),o=g(n(2)),a=g(n(4)),s=g(n(5)),l=g(n(31)),u=g(n(0)),c=g(n(8)),d=g(n(175)),h=g(n(69)),f=g(n(541)),p=g(n(542)),v=n(12),m=n(9);function g(e){return e&&e.__esModule?e:{default:e}}n(268);var y={"../styles/ViewHeader.module.scss":{"multitrack-header":"ViewHeader-module_multitrack-header-3XnZx","multitrack-header-focus":"ViewHeader-module_multitrack-header-focus-3akkN","multitrack-header-squeazed":"ViewHeader-module_multitrack-header-squeazed-GHIVd","multitrack-header-dark":"ViewHeader-module_multitrack-header-dark-97tZt","multitrack-header-id":"ViewHeader-module_multitrack-header-id-3YURk","multitrack-header-left":"ViewHeader-module_multitrack-header-left-Qj9Sm","multitrack-header-grabber":"ViewHeader-module_multitrack-header-grabber-3jrIz","multitrack-header-grabber-squeazed":"ViewHeader-module_multitrack-header-grabber-squeazed-dU45Z","multitrack-header-search":"ViewHeader-module_multitrack-header-search-1X_3_","multitrack-header-nav-list":"ViewHeader-module_multitrack-header-nav-list-2nvcu","multitrack-header-icon":"ViewHeader-module_multitrack-header-icon-16QKZ","multitrack-header-icon-squeazed":"ViewHeader-module_multitrack-header-icon-squeazed-25lkF","mouse-tool-selection":"ViewHeader-module_mouse-tool-selection-1pg2m"}},b=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.configImg=null,t.plusImg=null,t.state={addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null,configMenuUid:null,configMenuPosition:null,isFocused:!1,width:-1},t}return(0,s.default)(n,e),(0,o.default)(n,[{key:"componentDidMount",value:function(){this.setState({width:this.el.clientWidth})}},{key:"checkWidth",value:function(){var e=this.el.clientWidth;e!==this.state.width&&this.setState({width:e})}},{key:"handleConfigMenuOpened",value:function(e){this.setState({configMenuUid:e,configMenuPosition:this.configImg.getBoundingClientRect()})}},{key:"handleAddTrackPositionMenuOpened",value:function(e){this.setState({addTrackPositionMenuUid:e,addTrackPositionMenuPosition:this.plusImg.getBoundingClientRect()})}},{key:"handleTrackPositionChosen",value:function(e){this.props.onTrackPositionChosen(e),this.setState({addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null})}},{key:"render",value:function(){var t=this,e=null,n=null;this.state.addTrackPositionMenuPosition&&(n=u.default.createElement(d.default,{onMenuClosed:function(){t.setState({addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null})}},u.default.createElement(h.default,{orientation:"left",position:this.state.addTrackPositionMenuPosition},u.default.createElement(p.default,{onTrackPositionChosen:this.handleTrackPositionChosen.bind(this)})))),this.state.configMenuUid&&(e=u.default.createElement(d.default,{onMenuClosed:function(){return t.setState({configMenuUid:null})}},u.default.createElement(f.default,{orientation:"left",position:this.state.configMenuPosition,onExportSVG:function(){t.setState({configMenuUid:null}),t.props.onExportSVG()},onClearView:function(){t.setState({configMenuUid:null}),t.props.onClearView()},onExportViewAsJSON:function(){t.setState({configMenuUid:null}),t.props.onExportViewsAsJSON()},onExportViewAsLink:function(){t.setState({configMenuUid:null}),t.props.onExportViewsAsLink()},onLockLocation:function(){t.setState({configMenuUid:null}),t.props.onLockLocation(t.state.configMenuUid)},onLockZoom:function(){t.setState({configMenuUid:null}),t.props.onLockZoom(t.state.configMenuUid)},onLockZoomAndLocation:function(){t.setState({configMenuUid:null}),t.props.onLockZoomAndLocation(t.state.configMenuUid)},onProjectViewport:function(){t.setState({configMenuUid:null}),t.props.onProjectViewport(t.state.configMenuUid)},onOptionsChanged:function(e){t.props.onViewOptionsChanged(e),t.setState({configMenuUid:null})},onTakeAndLockZoomAndLocation:function(){t.setState({configMenuUid:null}),t.props.onTakeAndLockZoomAndLocation(t.state.configMenuUid)},onTogglePositionSearchBox:function(){t.setState({configMenuUid:null}),t.props.onTogglePositionSearchBox(t.state.configMenuUid)},onUnlockLocation:function(){t.setState({configMenuUid:null}),t.props.onUnlockLocation(t.state.configMenuUid)},onUnlockZoom:function(){t.setState({configMenuUid:null}),t.props.onUnlockZoom(t.state.configMenuUid)},onUnlockZoomAndLocation:function(){t.setState({configMenuUid:null}),t.props.onUnlockZoomAndLocation(t.state.configMenuUid)},onYankLocation:function(){t.setState({configMenuUid:null}),t.props.onYankLocation(t.state.configMenuUid)},onYankZoom:function(){t.setState({configMenuUid:null}),t.props.onYankZoom(t.state.configMenuUid)},onYankZoomAndLocation:function(){t.setState({configMenuUid:null}),t.props.onYankZoomAndLocation(t.state.configMenuUid)},onZoomToData:function(){t.setState({configMenuUid:null}),t.props.onZoomToData(t.state.configMenuUid)}})));var r=this.props.getGenomePositionSearchBox(this.state.isFocused,function(e){t.setState({isFocused:e})}),i=this.state.isFocused?"multitrack-header-focus":"multitrack-header",o=this.state.width<=v.VIEW_HEADER_MED_WIDTH_SEARCH_BAR?"multitrack-header-icon-squeazed":"multitrack-header-icon";return(0,m.getDarkTheme)()&&(i+=" multitrack-header-dark"),u.default.createElement("div",{ref:function(e){t.el=e},className:(0,l.default)(i,y)},u.default.createElement("div",{className:"ViewHeader-module_multitrack-header-left-Qj9Sm"},this.props.mouseTool===v.MOUSE_TOOL_SELECT&&u.default.createElement("svg",{title:"Selection tool active",className:(0,l.default)("mouse-tool-selection "+o,y)},u.default.createElement("use",{xlinkHref:"#select"})),u.default.createElement("div",{className:"ViewHeader-module_multitrack-header-grabber-3jrIz"},u.default.createElement("div",null),u.default.createElement("div",null),u.default.createElement("div",null)),this.state.width>v.VIEW_HEADER_MIN_WIDTH_SEARCH_BAR&&u.default.createElement("div",{className:"ViewHeader-module_multitrack-header-search-1X_3_"},this.props.isGenomePositionSearchBoxVisible&&r)),u.default.createElement("nav",{className:"ViewHeader-module_multitrack-header-nav-list-2nvcu"},u.default.createElement("svg",{onClick:this.props.onAddView,className:(0,l.default)(o,y)},u.default.createElement("use",{xlinkHref:"#copy"})),u.default.createElement("svg",{ref:function(e){t.configImg=e},onClick:function(){return t.handleConfigMenuOpened(t.props.viewUid)},className:(0,l.default)(o,y)},u.default.createElement("use",{xlinkHref:"#cog"})),u.default.createElement("svg",{ref:function(e){t.plusImg=e},onClick:function(){return t.handleAddTrackPositionMenuOpened(t.props.viewUid)},className:(0,l.default)(o,y)},u.default.createElement("use",{xlinkHref:"#plus"})),u.default.createElement("svg",{onClick:this.props.onCloseView,className:(0,l.default)(o,y)},u.default.createElement("use",{xlinkHref:"#cross"}))),e,n)}}]),n}(u.default.Component);b.defaultProps={isGenomePositionSearchBoxVisible:!1},b.propTypes={getGenomePositionSearchBox:c.default.func.isRequired,isGenomePositionSearchBoxVisible:c.default.bool,mouseTool:c.default.string.isRequired,onAddView:c.default.func.isRequired,onClearView:c.default.func.isRequired,onCloseView:c.default.func.isRequired,onExportSVG:c.default.func.isRequired,onExportViewsAsJSON:c.default.func.isRequired,onExportViewsAsLink:c.default.func.isRequired,onLockLocation:c.default.func.isRequired,onLockZoom:c.default.func.isRequired,onLockZoomAndLocation:c.default.func.isRequired,onProjectViewport:c.default.func.isRequired,onTakeAndLockZoomAndLocation:c.default.func.isRequired,onTogglePositionSearchBox:c.default.func.isRequired,onTrackPositionChosen:c.default.func.isRequired,onUnlockLocation:c.default.func.isRequired,onUnlockZoom:c.default.func.isRequired,onUnlockZoomAndLocation:c.default.func.isRequired,onYankLocation:c.default.func.isRequired,onYankZoom:c.default.func.isRequired,onYankZoomAndLocation:c.default.func.isRequired,onZoomToData:c.default.func.isRequired,viewUid:c.default.string.isRequired},t.default=b},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var c=g(n(11)),r=g(n(3)),i=g(n(1)),o=g(n(2)),a=g(n(4)),s=g(n(5)),l=g(n(31)),d=g(n(0)),u=g(n(8)),h=g(n(69)),f=g(n(48)),p=g(n(266)),v=n(9);n(49);var m=n(12);function g(e){return e&&e.__esModule?e:{default:e}}var y={"../styles/ContextMenu.module.scss":{"context-menu":"ContextMenu-module_context-menu-2OwvL","context-menu-dark":"ContextMenu-module_context-menu-dark-2PO31","context-menu-icon":"ContextMenu-module_context-menu-icon-I4kiw","context-menu-item":"ContextMenu-module_context-menu-item-1HeVv","context-menu-hr":"ContextMenu-module_context-menu-hr-3yapb","play-icon":"ContextMenu-module_play-icon-R4pIO","context-menu-span":"ContextMenu-module_context-menu-span-8EUfZ","context-menu-thumbnail":"ContextMenu-module_context-menu-thumbnail-2vHLD","context-menu-thumbnail-inline":"ContextMenu-module_context-menu-thumbnail-inline-1iOcg"}},b=function(e){function n(e){(0,i.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,r.default)(n)).call(this,e));return t.state={submenuShown:!1},t}return(0,s.default)(n,e),(0,o.default)(n,[{key:"getConfigureViewMenu",value:function(e,t){var i=this,o={},n=function(r){if(m.OPTIONS_INFO.hasOwnProperty(r)&&(o[r]={name:m.OPTIONS_INFO[r].name},m.OPTIONS_INFO[r].inlineOptions)){var e=function(e){var t=m.OPTIONS_INFO[r].inlineOptions[e];o[r].children||(o[r].children={});var n={name:t.name,value:t.value,handler:function(){newOptions[r]=t.value,i.props.onOptionsChanged(newOptions)}};o[r].children[e]=n};for(var t in m.OPTIONS_INFO[r].inlineOptions)e(t)}},r=!0,a=(newOptions={},!1),s=void 0;try{for(var l,u=(0,c.default)(["backgroundColor"]);!(r=(l=u.next()).done);r=!0)n(l.value)}catch(e){a=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw s}}return d.default.createElement(p.default,{key:"config-series-menu",closeMenu:this.props.closeMenu,menuItems:o,orientation:this.state.orientation,parentBbox:t,position:e})}},{key:"getSubmenu",value:function(){if(this.state.submenuShown){var e=this.state.submenuSourceBbox,t="left"===this.state.orientation?{left:this.state.left,top:e.top}:{left:this.state.left+e.width+7,top:e.top};return"options"==this.state.submenuShown.option?this.getConfigureViewMenu(t,e):d.default.createElement("div",null)}return d.default.createElement("div",null)}},{key:"render",value:function(){var t=this,e="context-menu";return(0,v.getDarkTheme)()&&(e+=" context-menu-dark"),d.default.createElement("div",{ref:function(e){return t.div=e},"data-menu-type":"ConfigViewMenu",style:{left:this.state.left,top:this.state.top},className:(0,l.default)(e,y)},d.default.createElement(f.default,{onClick:function(e){return t.props.onTogglePositionSearchBox(e)}},"Toggle position search box"),d.default.createElement("hr",{className:"ContextMenu-module_context-menu-hr-3yapb"}),d.default.createElement(f.default,{onClick:function(){},onMouseEnter:function(e){return t.handleItemMouseEnter(e,{option:"options"})},onMouseLeave:function(e){return t.handleMouseLeave(e)}},"Options",d.default.createElement("svg",{className:"ContextMenu-module_play-icon-R4pIO"},d.default.createElement("use",{xlinkHref:"#play"}))),d.default.createElement("hr",{className:"ContextMenu-module_context-menu-hr-3yapb"}),d.default.createElement(f.default,{onClick:function(e){return t.props.onZoomToData(e)}},"Zoom to data extent"),d.default.createElement(f.default,{onClick:function(e){return t.props.onClearView(e)}},"Clear View"),d.default.createElement("hr",{className:"ContextMenu-module_context-menu-hr-3yapb"}),d.default.createElement(f.default,{onClick:function(e){return t.props.onYankZoom(e)}},"Take zoom from"),d.default.createElement(f.default,{onClick:function(e){return t.props.onYankLocation(e)}},"Take location from"),d.default.createElement(f.default,{onClick:function(e){return t.props.onYankZoomAndLocation(e)}},"Take zoom and location from"),d.default.createElement("hr",{className:"ContextMenu-module_context-menu-hr-3yapb"}),d.default.createElement(f.default,{onClick:this.props.onLockZoom},"Lock zoom with"),d.default.createElement(f.default,{onClick:this.props.onLockLocation},"Lock location with"),d.default.createElement(f.default,{onClick:this.props.onLockZoomAndLocation},"Lock zoom and location with"),d.default.createElement("hr",{className:"ContextMenu-module_context-menu-hr-3yapb"}),d.default.createElement(f.default,{onClick:this.props.onTakeAndLockZoomAndLocation},"Take and lock zoom and location with"),d.default.createElement("hr",{className:"ContextMenu-module_context-menu-hr-3yapb"}),d.default.createElement(f.default,{onClick:function(e){return t.props.onUnlockZoom(e)}},"Unlock zoom"),d.default.createElement(f.default,{onClick:function(e){return t.props.onUnlockLocation(e)}},"Unlock location"),d.default.createElement(f.default,{onClick:function(e){return t.props.onUnlockZoomAndLocation(e)}},"Unlock zoom and location"),d.default.createElement("hr",{className:"ContextMenu-module_context-menu-hr-3yapb"}),d.default.createElement(f.default,{onClick:function(e){return t.props.onProjectViewport(e)}},"Show this viewport on"),d.default.createElement("hr",{className:"ContextMenu-module_context-menu-hr-3yapb"}),d.default.createElement(f.default,{onClick:function(){return t.props.onExportSVG()}},"Export views as SVG"),d.default.createElement(f.default,{onClick:function(){return t.props.onExportViewAsJSON()}},"Export views as JSON"),d.default.createElement(f.default,{onClick:function(){return t.props.onExportViewAsLink()}},"Export views as Link"),this.getSubmenu())}}]),n}(h.default);b.propTypes={onExportSVG:u.default.func,onExportViewAsJSON:u.default.func,onExportViewAsLink:u.default.func,onLockLocation:u.default.func,onLockZoom:u.default.func,onLockZoomAndLocation:u.default.func,onProjectViewport:u.default.func,onTakeAndLockZoomAndLocation:u.default.func,onTogglePositionSearchBox:u.default.func,onUnlockLocation:u.default.func,onUnlockZoom:u.default.func,onUnlockZoomAndLocation:u.default.func,onYankLocation:u.default.func,onYankZoom:u.default.func,onYankZoomAndLocation:u.default.func,onZoomToData:u.default.func},t.default=b},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(3)),i=h(n(1)),o=h(n(2)),a=h(n(4)),s=h(n(5)),l=h(n(31)),u=h(n(8)),c=h(n(0)),d=n(171);function h(e){return e&&e.__esModule?e:{default:e}}n(543);var f={"../styles/AddTrackPositionMenu.module.scss":{"add-track-position-table":"AddTrackPositionMenu-module_add-track-position-table-RHODc","add-track-position-table-dark":"AddTrackPositionMenu-module_add-track-position-table-dark-_B9fu","add-track-position-other":"AddTrackPositionMenu-module_add-track-position-other-lIGbb","add-track-position-top-center":"AddTrackPositionMenu-module_add-track-position-top-center-2Dw4e","add-track-position-middle-left":"AddTrackPositionMenu-module_add-track-position-middle-left-2ycaN","add-track-position-middle-right":"AddTrackPositionMenu-module_add-track-position-middle-right-Qqjnn","add-track-position-middle-middle":"AddTrackPositionMenu-module_add-track-position-middle-middle-2YFZd","add-track-position-bottom-middle":"AddTrackPositionMenu-module_add-track-position-bottom-middle-3ityE","add-track-position-span":"AddTrackPositionMenu-module_add-track-position-span-2hbwE"}},p=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this,t="add-track-position-table";return(0,d.getDarkTheme)()&&(t+=" add-track-position-table-dark"),c.default.createElement("div",null,c.default.createElement("div",{className:"AddTrackPositionMenu-module_add-track-position-span-2hbwE"},"Add Track..."),c.default.createElement("table",{className:(0,l.default)(t,f)},c.default.createElement("tbody",null,c.default.createElement("tr",null,c.default.createElement("td",{className:"AddTrackPositionMenu-module_add-track-position-other-lIGbb"}),c.default.createElement("td",{onClick:function(){return e.props.onTrackPositionChosen("top")},className:"AddTrackPositionMenu-module_add-track-position-top-center-2Dw4e"},"top"),c.default.createElement("td",{className:"AddTrackPositionMenu-module_add-track-position-other-lIGbb"})),c.default.createElement("tr",{style:{height:"80px"}},c.default.createElement("td",{onClick:function(){return e.props.onTrackPositionChosen("left")},className:"AddTrackPositionMenu-module_add-track-position-middle-left-2ycaN"},"left"),c.default.createElement("td",{onClick:function(){return e.props.onTrackPositionChosen("center")},className:"AddTrackPositionMenu-module_add-track-position-middle-middle-2YFZd"},"center"),c.default.createElement("td",{onClick:function(){return e.props.onTrackPositionChosen("right")},className:"AddTrackPositionMenu-module_add-track-position-middle-right-Qqjnn"},"right")),c.default.createElement("tr",null,c.default.createElement("td",{className:"AddTrackPositionMenu-module_add-track-position-other-lIGbb"}),c.default.createElement("td",{onClick:function(){return e.props.onTrackPositionChosen("bottom")},className:"AddTrackPositionMenu-module_add-track-position-bottom-middle-3ityE"},"bottom"),c.default.createElement("td",{className:"AddTrackPositionMenu-module_add-track-position-other-lIGbb"})))))}}]),t}(c.default.Component);p.propTypes={onTrackPositionChosen:u.default.func.isRequired},t.default=p},function(e,t){e.exports={"add-track-position-table":"AddTrackPositionMenu-module_add-track-position-table-RHODc","add-track-position-table-dark":"AddTrackPositionMenu-module_add-track-position-table-dark-_B9fu","add-track-position-other":"AddTrackPositionMenu-module_add-track-position-other-lIGbb","add-track-position-top-center":"AddTrackPositionMenu-module_add-track-position-top-center-2Dw4e","add-track-position-middle-left":"AddTrackPositionMenu-module_add-track-position-middle-left-2ycaN","add-track-position-middle-right":"AddTrackPositionMenu-module_add-track-position-middle-right-Qqjnn","add-track-position-middle-middle":"AddTrackPositionMenu-module_add-track-position-middle-middle-2YFZd","add-track-position-bottom-middle":"AddTrackPositionMenu-module_add-track-position-bottom-middle-3ityE","add-track-position-span":"AddTrackPositionMenu-module_add-track-position-span-2hbwE"}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createSymbolIcon=function(e,t,n,r){var i=e.append("symbol").attr("id",t).attr("viewBox",r);n.forEach(function(e){return i.append("path").attr("d",e).attr("fill","currentColor")})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.publish=t.destroy=void 0;var i=c(n(79)),h=c(n(23)),o=c(n(87)),r=c(n(29)),f=n(6),a=n(9),s=n(12),l=n(78),u=c(l);c(n(44));function c(e){return e&&e.__esModule?e:{default:e}}var d={},p=[],v=(0,l.create)(d),m=(t.destroy=function(){p.forEach(function(e){return u.default.unsubscribe(e)}),p=[],d={}},function(e){var d=e;return{setAuthHeader:function(e){(0,a.setTileProxyAuthHeader)(e),this.reload()},reload:function(){},destroy:function(){r.default.unmountComponentAtNode(d.topDiv.parentNode)},setViewConfig:function(t){var n=this,r=d.processViewConfig(t);return new o.default(function(e){n.requestsInFlight=0,p.push(u.default.subscribe("requestSent",function(){n.requestsInFlight+=1})),p.push(u.default.subscribe("requestReceived",function(){n.requestsInFlight-=1,0===n.requestsInFlight&&e()})),d.setState({viewConfig:t,views:r},function(){})})},shareViewConfigAsLink:function(e){return d.handleExportViewsAsLink(e,!0)},showAvailableTrackPositions:function(e){d.setState({draggingHappening:e})},hideAvailableTrackPositions:function(e){d.setState({draggingHappening:null})},setDarkTheme:function(e){(0,a.setDarkTheme)(!!e)},zoomToDataExtent:function(e){d.handleZoomToData(e)},getDataURI:function(){return d.createDataURI()},activateTool:function(e){switch(e){case"select":d.setMouseTool(s.MOUSE_TOOL_SELECT);break;default:d.setMouseTool(s.MOUSE_TOOL_MOVE)}},exportAsPng:function(){return d.createDataURI()},exportAsSvg:function(){return d.createSVGString()},exportAsViewConfString:function(){return d.getViewsAsString()},getRangeSelection:function(){return d.rangeSelection},getLocation:function(e){return void 0===e?"Please provide the view UUID sweetheart 😙":{xDomain:d.xScales[e].domain(),yDomain:d.yScales[e].domain()}},zoomTo:function(e,t,n,r,i){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=(0,f.scalesCenterAndK)(d.xScales[e].copy().domain([t,n]),d.yScales[e].copy().domain([r,i])),s=(0,h.default)(a,3),l=s[0],u=s[1],c=s[2];d.setCenters[e](l,u,c,!1,o)},off:function(e,t,n){var r="object"===(void 0===t?"undefined":(0,i.default)(t))?t.callback:t;switch(e){case"location":d.offLocationChange(n,t);break;case"mouseMoveZoom":v.unsubscribe("mouseMoveZoom",r);break;case"rangeSelection":v.unsubscribe("rangeSelection",r);break;case"viewConfig":d.offViewChange(t)}},on:function(e,t,n,r){switch(e){case"location":return d.onLocationChange(n,t,r);case"mouseMoveZoom":return v.subscribe("mouseMoveZoom",t);case"rangeSelection":return v.subscribe("rangeSelection",t);case"viewConfig":return d.onViewChange(t);default:return}}}});t.default=m;t.publish=v.publish},function(e,t){e.exports={higlass:"HiGlass-module_higlass-1NHR2","higlass-dark-theme":"HiGlass-module_higlass-dark-theme-2visd","higlass-canvas":"HiGlass-module_higlass-canvas-_mP9r","higlass-drawing-surface":"HiGlass-module_higlass-drawing-surface-3aQQo","higlass-svg":"HiGlass-module_higlass-svg-JJZbf","tiled-area":"HiGlass-module_tiled-area-22H1L","track-mouseover-menu":"HiGlass-module_track-mouseover-menu-1AoaP"}},function(e,t){},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(3)),o=r(n(1)),a=r(n(2)),s=r(n(4)),l=r(n(5)),u=n(18),c=r(n(0)),d=r(n(7)),h=n(580);function r(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function r(e){(0,o.default)(this,r);var t=(0,s.default)(this,(r.__proto__||(0,i.default)(r)).call(this,e)),n=(0,u.rgb)(e.color);return t.state={displayColorPicker:!1,color:{r:n.r,g:n.g,b:n.b,a:n.opacity}},t}return(0,l.default)(r,e),(0,a.default)(r,[{key:"handleClick",value:function(){this.setState({displayColorPicker:!this.state.displayColorPicker})}},{key:"handleClose",value:function(){this.setState({displayColorPicker:!1})}},{key:"handleChange",value:function(e){var t=e.rgb,n="rgba("+String(t.r)+","+String(t.g)+","+String(t.b)+","+String(t.a)+")";this.props.onChange(n),this.setState({color:e.rgb})}},{key:"render",value:function(){var e=(0,d.default)({default:{color:{width:"36px",height:"14px",borderRadius:"2px",background:"rgba("+String(this.state.color.r)+", "+String(this.state.color.g)+", "+String(this.state.color.b)+", "+String(this.state.color.a)+")"},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return c.default.createElement("div",null,c.default.createElement("div",{style:e.swatch,onClick:this.handleClick.bind(this)},c.default.createElement("div",{style:e.color})),this.state.displayColorPicker?c.default.createElement("div",{style:e.popover},c.default.createElement("div",{style:e.cover,onClick:this.handleClose.bind(this)}),c.default.createElement(h.SketchPicker,{color:this.state.color,onChange:this.handleChange.bind(this)})):null)}}]),r}(c.default.Component);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var r=s(n(550)),i=s(n(176)),o=s(n(551)),a=s(n(58));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.flattenNames=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,a.default)(e,function(e){Array.isArray(e)?t(e).map(function(e){return n.push(e)}):(0,o.default)(e)?(0,i.default)(e,function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)}):(0,r.default)(e)&&n.push(e)}),n};t.default=l},function(e,t,n){var r=n(67),i=n(32),o=n(68);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},function(e,t,n){var r=n(67),i=n(177),o=n(68),a=Function.prototype,s=Object.prototype,l=a.toString,u=s.hasOwnProperty,c=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var i=r(n(176)),o=r(n(553)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function r(e){return e&&e.__esModule?e:{default:e}}var s=t.mergeClasses=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=t.default&&(0,o.default)(t.default)||{};return e.map(function(e){var n=t[e];return n&&(0,i.default)(n,function(e,t){r[t]||(r[t]={}),r[t]=a({},r[t],n[t])}),e}),r};t.default=s},function(e,t,n){var r=n(554);e.exports=function(e){return r(e,5)}},function(e,t,n){var g=n(158),y=n(271),b=n(272),w=n(555),x=n(556),_=n(559),k=n(560),S=n(561),T=n(562),C=n(223),O=n(563),E=n(230),M=n(564),P=n(565),A=n(574),R=n(32),j=n(164),I=n(47),L=n(84),D=1,N=2,B=4,F="[object Arguments]",V="[object Function]",z="[object GeneratorFunction]",H="[object Object]",U={};U[F]=U["[object Array]"]=U["[object ArrayBuffer]"]=U["[object DataView]"]=U["[object Boolean]"]=U["[object Date]"]=U["[object Float32Array]"]=U["[object Float64Array]"]=U["[object Int8Array]"]=U["[object Int16Array]"]=U["[object Int32Array]"]=U["[object Map]"]=U["[object Number]"]=U[H]=U["[object RegExp]"]=U["[object Set]"]=U["[object String]"]=U["[object Symbol]"]=U["[object Uint8Array]"]=U["[object Uint8ClampedArray]"]=U["[object Uint16Array]"]=U["[object Uint32Array]"]=!0,U["[object Error]"]=U[V]=U["[object WeakMap]"]=!1,e.exports=function n(r,i,o,e,t,a){var s,l=i&D,u=i&N,c=i&B;if(o&&(s=t?o(r,e,t,a):o(r)),void 0!==s)return s;if(!I(r))return r;var d=R(r);if(d){if(s=M(r),!l)return k(r,s)}else{var h=E(r),f=h==V||h==z;if(j(r))return _(r,l);if(h==H||h==F||f&&!t){if(s=u||f?{}:A(r),!l)return u?T(r,x(s,r)):S(r,w(s,r))}else{if(!U[h])return t?r:{};s=P(r,h,n,l)}}a||(a=new g);var p=a.get(r);if(p)return p;a.set(r,s);var v=c?u?O:C:u?keysIn:L,m=d?void 0:v(r);return y(m||r,function(e,t){m&&(e=r[t=e]),b(s,t,n(e,i,o,t,r,a))}),s}},function(e,t,n){var r=n(125),i=n(84);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){var r=n(125),i=n(274);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){var i=n(47),o=n(167),a=n(558),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return a(e);var t=o(e),n=[];for(var r in e)("constructor"!=r||!t&&s.call(e,r))&&n.push(r);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,a,s){(function(e){var t=s(42),n="object"==typeof a&&a&&!a.nodeType&&a,r=n&&"object"==typeof e&&e&&!e.nodeType&&e,i=r&&r.exports===n?t.Buffer:void 0,o=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=o?o(n):new e.constructor(n);return e.copy(r),r}}).call(a,s(119)(e))},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(125),i=n(162);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t,n){var r=n(125),i=n(275);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t,n){var r=n(224),i=n(275),o=n(274);e.exports=function(e){return r(e,o,i)}},function(e,t){var r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},function(e,t,n){var o=n(178),a=n(566),s=n(567),l=n(569),u=n(570),c=n(572),d=n(573);e.exports=function(e,t,n,r){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return o(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return a(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return d(e,r);case"[object Map]":return s(e,r,n);case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return l(e);case"[object Set]":return u(e,r,n);case"[object Symbol]":return c(e)}}},function(e,t,n){var r=n(178);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t,n){var i=n(568),o=n(276),a=n(221);e.exports=function(e,t,n){var r=t?n(a(e),1):a(e);return o(r,i,new e.constructor)}},function(e,t){e.exports=function(e,t){return e.set(t[0],t[1]),e}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var i=n(571),o=n(276),a=n(222);e.exports=function(e,t,n){var r=t?n(a(e),1):a(e);return o(r,i,new e.constructor)}},function(e,t){e.exports=function(e,t){return e.add(t),e}},function(e,t,n){var r=n(83),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},function(e,t,n){var r=n(178);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(575),i=n(177),o=n(167);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},function(e,t,n){var r=n(47),i=Object.create,o=function(){function n(){}return function(e){if(!r(e))return{};if(i)return i(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var r,i=n(176),o=(r=i)&&r.__esModule?r:{default:r},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var s={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},l=t.autoprefix=function(e){var n={};return(0,o.default)(e,function(e,t){var r={};(0,o.default)(e,function(e,t){var n=s[t];n?r=a({},r,n(e)):r[t]=e}),n[t]=r}),n};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var r,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),c=(r=i)&&r.__esModule?r:{default:r};function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o=t.hover=function(s){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"span";return function(e){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=n=d(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(i)))).state={hover:!1},n.handleMouseOver=function(){return n.setState({hover:!0})},n.handleMouseOut=function(){return n.setState({hover:!1})},n.render=function(){return c.default.createElement(l,{onMouseOver:n.handleMouseOver,onMouseOut:n.handleMouseOut},c.default.createElement(s,u({},n.props,n.state)))},d(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,c.default.Component),a}()};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var r,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),c=(r=i)&&r.__esModule?r:{default:r};function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o=t.active=function(s){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"span";return function(e){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=n=d(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(i)))).state={active:!1},n.handleMouseDown=function(){return n.setState({active:!0})},n.handleMouseUp=function(){return n.setState({active:!1})},n.render=function(){return c.default.createElement(l,{onMouseDown:n.handleMouseDown,onMouseUp:n.handleMouseUp},c.default.createElement(s,u({},n.props,n.state)))},d(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,c.default.Component),a}()};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n={},r=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2==0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomPicker=t.TwitterPicker=t.SwatchesPicker=t.SliderPicker=t.SketchPicker=t.PhotoshopPicker=t.MaterialPicker=t.HuePicker=t.GithubPicker=t.CompactPicker=t.ChromePicker=t.default=t.CirclePicker=t.BlockPicker=t.AlphaPicker=void 0;var r=n(581);Object.defineProperty(t,"AlphaPicker",{enumerable:!0,get:function(){return y(r).default}});var i=n(599);Object.defineProperty(t,"BlockPicker",{enumerable:!0,get:function(){return y(i).default}});var o=n(601);Object.defineProperty(t,"CirclePicker",{enumerable:!0,get:function(){return y(o).default}});var a=n(603);Object.defineProperty(t,"ChromePicker",{enumerable:!0,get:function(){return y(a).default}});var s=n(607);Object.defineProperty(t,"CompactPicker",{enumerable:!0,get:function(){return y(s).default}});var l=n(610);Object.defineProperty(t,"GithubPicker",{enumerable:!0,get:function(){return y(l).default}});var u=n(612);Object.defineProperty(t,"HuePicker",{enumerable:!0,get:function(){return y(u).default}});var c=n(614);Object.defineProperty(t,"MaterialPicker",{enumerable:!0,get:function(){return y(c).default}});var d=n(615);Object.defineProperty(t,"PhotoshopPicker",{enumerable:!0,get:function(){return y(d).default}});var h=n(621);Object.defineProperty(t,"SketchPicker",{enumerable:!0,get:function(){return y(h).default}});var f=n(624);Object.defineProperty(t,"SliderPicker",{enumerable:!0,get:function(){return y(f).default}});var p=n(628);Object.defineProperty(t,"SwatchesPicker",{enumerable:!0,get:function(){return y(p).default}});var v=n(631);Object.defineProperty(t,"TwitterPicker",{enumerable:!0,get:function(){return y(v).default}});var m=n(279);Object.defineProperty(t,"CustomPicker",{enumerable:!0,get:function(){return y(m).default}});var g=y(a);function y(e){return e&&e.__esModule?e:{default:e}}t.default=g.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlphaPicker=void 0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=i(n(0)),v=i(n(7)),m=n(14),r=i(n(598));function i(e){return e&&e.__esModule?e:{default:e}}var o=t.AlphaPicker=function(e){var t=e.rgb,n=e.hsl,r=e.width,i=e.height,o=e.onChange,a=e.direction,s=e.style,l=e.renderers,u=e.pointer,c=e.className,d=void 0===c?"":c,h=(0,v.default)({default:{picker:{position:"relative",width:r,height:i},alpha:{radius:"2px",style:s}}});return p.default.createElement("div",{style:h.picker,className:"alpha-picker "+d},p.default.createElement(m.Alpha,f({},h.alpha,{rgb:t,hsl:n,pointer:u,renderers:l,onChange:o,direction:a})))};o.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:r.default},t.default=(0,m.ColorWrap)(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Alpha=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(0),s=a(o),l=a(n(7)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(583)),c=a(n(277));function a(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=t.Alpha=function(e){function a(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=r=d(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(i)))).handleChange=function(e,t){var n=u.calculateChange(e,t,r.props,r.container);n&&r.props.onChange&&r.props.onChange(n,e)},r.handleMouseDown=function(e){r.handleChange(e,!0),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},d(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o.PureComponent||o.Component),i(a,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var t=this,e=this.props.rgb,n=(0,l.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+e.r+","+e.g+","+e.b+", 0) 0%,\n           rgba("+e.r+","+e.g+","+e.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*e.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+e.r+","+e.g+","+e.b+", 0) 0%,\n           rgba("+e.r+","+e.g+","+e.b+", 1) 100%)"},pointer:{left:0,top:100*e.a+"%"}},overwrite:r({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return s.default.createElement("div",{style:n.alpha},s.default.createElement("div",{style:n.checkboard},s.default.createElement(c.default,{renderers:this.props.renderers})),s.default.createElement("div",{style:n.gradient}),s.default.createElement("div",{style:n.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},s.default.createElement("div",{style:n.pointer},this.props.pointer?s.default.createElement(this.props.pointer,this.props):s.default.createElement("div",{style:n.slider}))))}}]),a}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r){e.preventDefault();var i=r.clientWidth,o=r.clientHeight,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(r.getBoundingClientRect().left+window.pageXOffset),u=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n.direction){var c=void 0;if(c=u<0?0:o<u?1:Math.round(100*u/o)/100,n.hsl.a!==c)return{h:n.hsl.h,s:n.hsl.s,l:n.hsl.l,a:c,source:"rgb"}}else{var d=void 0;if(d=l<0?0:i<l?1:Math.round(100*l/i)/100,n.a!==d)return{h:n.hsl.h,s:n.hsl.s,l:n.hsl.l,a:d,source:"rgb"}}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={},s=t.render=function(e,t,n,r){if("undefined"==typeof document&&!r)return null;var i=r?new r:document.createElement("canvas");i.width=2*n,i.height=2*n;var o=i.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,i.width,i.height),o.fillStyle=t,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),i.toDataURL()):null};t.get=function(e,t,n,r){var i=e+"-"+t+"-"+n+(r?"-server":""),o=s(e,t,n,r);return a[i]?a[i]:a[i]=o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableInput=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=n(0),o=s(i),a=s(n(7));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=t.EditableInput=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.handleBlur=function(){o.state.blurValue&&o.setState({value:o.state.blurValue,blurValue:null})},o.handleChange=function(e){o.props.label?o.props.onChange&&o.props.onChange(l({},o.props.label,e.target.value),e):o.props.onChange&&o.props.onChange(e.target.value,e),o.setState({value:e.target.value})},o.handleKeyDown=function(e){var t=String(e.target.value),n=-1<t.indexOf("%"),r=Number(t.replace(/%/g,""));if(!isNaN(r)){var i=o.props.arrowOffset||1;38===e.keyCode&&(null!==o.props.label?o.props.onChange&&o.props.onChange(l({},o.props.label,r+i),e):o.props.onChange&&o.props.onChange(r+i,e),n?o.setState({value:r+i+"%"}):o.setState({value:r+i})),40===e.keyCode&&(null!==o.props.label?o.props.onChange&&o.props.onChange(l({},o.props.label,r-i),e):o.props.onChange&&o.props.onChange(r-i,e),n?o.setState({value:r-i+"%"}):o.setState({value:r-i}))}},o.handleDrag=function(e){if(o.props.dragLabel){var t=Math.round(o.props.value+e.movementX);0<=t&&t<=o.props.dragMax&&o.props.onChange&&o.props.onChange(l({},o.props.label,t),e)}},o.handleMouseDown=function(e){o.props.dragLabel&&(e.preventDefault(),o.handleDrag(e),window.addEventListener("mousemove",o.handleDrag),window.addEventListener("mouseup",o.handleMouseUp))},o.handleMouseUp=function(){o.unbindEventListeners()},o.unbindEventListeners=function(){window.removeEventListener("mousemove",o.handleDrag),window.removeEventListener("mouseup",o.handleMouseUp)},o.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent||i.Component),r(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.input;e.value!==this.state.value&&(t===document.activeElement?this.setState({blurValue:String(e.value).toUpperCase()}):this.setState({value:String(e.value).toUpperCase(),blurValue:!this.state.blurValue&&String(e.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var t=this,e=(0,a.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return o.default.createElement("div",{style:e.wrap},o.default.createElement("input",{style:e.input,ref:function(e){return t.input=e},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?o.default.createElement("span",{style:e.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hue=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=n(0),o=a(i),s=a(n(7)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(587));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=t.Hue=function(e){function a(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=r=u(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(i)))).handleChange=function(e,t){var n=l.calculateChange(e,t,r.props,r.container);n&&r.props.onChange&&r.props.onChange(n,e)},r.handleMouseDown=function(e){r.handleChange(e,!0),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},u(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.PureComponent||i.Component),r(a,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=this,e=this.props.direction,n=void 0===e?"horizontal":e,r=(0,s.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return o.default.createElement("div",{style:r.hue},o.default.createElement("div",{className:"hue-"+n,style:r.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),o.default.createElement("div",{style:r.pointer},this.props.pointer?o.default.createElement(this.props.pointer,this.props):o.default.createElement("div",{style:r.slider}))))}}]),a}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r){e.preventDefault();var i=r.clientWidth,o=r.clientHeight,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(r.getBoundingClientRect().left+window.pageXOffset),u=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n.direction){var c=void 0;if(u<0)c=359;else if(o<u)c=0;else{c=360*(-100*u/o+100)/100}if(n.hsl.h!==c)return{h:c,s:n.hsl.s,l:n.hsl.l,a:n.hsl.a,source:"rgb"}}else{var d=void 0;if(l<0)d=0;else if(i<l)d=359;else{d=360*(100*l/i)/100}if(n.hsl.h!==d)return{h:d,s:n.hsl.s,l:n.hsl.l,a:n.hsl.a,source:"rgb"}}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Raised=void 0;var a=i(n(0)),r=i(n(8)),s=i(n(7));function i(e){return e&&e.__esModule?e:{default:e}}var o=t.Raised=function(e){var t=e.zDepth,n=e.radius,r=e.background,i=e.children,o=(0,s.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},{"zDepth-1":1===t});return a.default.createElement("div",{style:o.wrap},a.default.createElement("div",{style:o.bg}),a.default.createElement("div",{style:o.content},i))};o.propTypes={background:r.default.string,zDepth:r.default.oneOf([0,1,2,3,4,5]),radius:r.default.number},o.defaultProps={background:"#fff",zDepth:1,radius:2},t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Saturation=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=n(0),l=s(i),u=s(n(7)),o=s(n(590)),a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(592));function s(e){return e&&e.__esModule?e:{default:e}}var c=t.Saturation=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e,t){n.props.onChange&&n.throttle(n.props.onChange,a.calculateChange(e,t,n.props,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e,!0),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=(0,o.default)(function(e,t,n){e(t,n)},50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent||i.Component),r(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=this,e=this.props.style||{},n=e.color,r=e.white,i=e.black,o=e.pointer,a=e.circle,s=(0,u.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:i,pointer:o,circle:a}},{custom:!!this.props.style});return l.default.createElement("div",{style:s.color,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},l.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),l.default.createElement("div",{style:s.white,className:"saturation-white"},l.default.createElement("div",{style:s.black,className:"saturation-black"}),l.default.createElement("div",{style:s.pointer},this.props.pointer?l.default.createElement(this.props.pointer,this.props):l.default.createElement("div",{style:s.circle}))))}}]),t}();t.default=c},function(e,t,n){var o=n(278),a=n(47);e.exports=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),o(e,t,{leading:r,maxWait:t,trailing:i})}},function(e,t,n){var r=n(42);e.exports=function(){return r.Date.now()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r){e.preventDefault();var i=r.getBoundingClientRect(),o=i.width,a=i.height,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,u=s-(r.getBoundingClientRect().left+window.pageXOffset),c=l-(r.getBoundingClientRect().top+window.pageYOffset);u<0?u=0:o<u?u=o:c<0?c=0:a<c&&(c=a);var d=100*u/o,h=-100*c/a+100;return{h:n.hsl.h,s:d,v:h,a:n.hsl.a,source:"rgb"}}},function(e,t,n){e.exports=n(594)},function(e,t,n){var r=n(271),i=n(237),o=n(270),a=n(32);e.exports=function(e,t){return(a(e)?r:i)(e,o(t))}},function(z,H,U){var q;!function(d){var h=/^\s+/,f=/\s+$/,r=0,a=d.round,p=d.min,v=d.max,e=d.random;function c(e,t){if(t=t||{},(e=e||"")instanceof c)return e;if(!(this instanceof c))return new c(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(h,"").replace(f,"").toLowerCase();var t,n=!1;if(C[e])e=C[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=F.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=F.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=F.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=F.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=F.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=F.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=F.hex8.exec(e))return{r:A(t[1]),g:A(t[2]),b:A(t[3]),a:L(t[4]),format:n?"name":"hex8"};if(t=F.hex6.exec(e))return{r:A(t[1]),g:A(t[2]),b:A(t[3]),format:n?"name":"hex"};if(t=F.hex4.exec(e))return{r:A(t[1]+""+t[1]),g:A(t[2]+""+t[2]),b:A(t[3]+""+t[3]),a:L(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=F.hex3.exec(e))return{r:A(t[1]+""+t[1]),g:A(t[2]+""+t[2]),b:A(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(V(e.r)&&V(e.g)&&V(e.b)?(l=e.r,u=e.g,c=e.b,t={r:255*M(l,255),g:255*M(u,255),b:255*M(c,255)},a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):V(e.h)&&V(e.s)&&V(e.v)?(r=j(e.s),i=j(e.v),t=function(e,t,n){e=6*M(e,360),t=M(t,100),n=M(n,100);var r=d.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6;return{r:255*[n,a,o,o,s,n][l],g:255*[s,n,n,a,o,o][l],b:255*[o,o,s,n,n,a][l]}}(e.h,r,i),a=!0,s="hsv"):V(e.h)&&V(e.s)&&V(e.l)&&(r=j(e.s),o=j(e.l),t=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=M(e,360),t=M(t,100),n=M(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,r,o),a=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));var l,u,c;return n=E(n),{ok:a,format:e.format||s,r:p(255,v(t.r,0)),g:p(255,v(t.g,0)),b:p(255,v(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=a(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=n.ok,this._tc_id=r++}function i(e,t,n){e=M(e,255),t=M(t,255),n=M(n,255);var r,i,o=v(e,t,n),a=p(e,t,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=.5<s?l/(2-o-a):l/(o+a),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function o(e,t,n){e=M(e,255),t=M(t,255),n=M(n,255);var r,i,o=v(e,t,n),a=p(e,t,n),s=o,l=o-a;if(i=0===o?0:l/o,o==a)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function t(e,t,n,r){var i=[R(a(e).toString(16)),R(a(t).toString(16)),R(a(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function s(e,t,n,r){return[R(I(r)),R(a(e).toString(16)),R(a(t).toString(16)),R(a(n).toString(16))].join("")}function n(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s-=t/100,n.s=P(n.s),c(n)}function l(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s+=t/100,n.s=P(n.s),c(n)}function u(e){return c(e).desaturate(100)}function m(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l+=t/100,n.l=P(n.l),c(n)}function g(e,t){t=0===t?0:t||10;var n=c(e).toRgb();return n.r=v(0,p(255,n.r-a(-t/100*255))),n.g=v(0,p(255,n.g-a(-t/100*255))),n.b=v(0,p(255,n.b-a(-t/100*255))),c(n)}function y(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l-=t/100,n.l=P(n.l),c(n)}function b(e,t){var n=c(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,c(n)}function w(e){var t=c(e).toHsl();return t.h=(t.h+180)%360,c(t)}function x(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+120)%360,s:t.s,l:t.l}),c({h:(n+240)%360,s:t.s,l:t.l})]}function _(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+90)%360,s:t.s,l:t.l}),c({h:(n+180)%360,s:t.s,l:t.l}),c({h:(n+270)%360,s:t.s,l:t.l})]}function k(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+72)%360,s:t.s,l:t.l}),c({h:(n+216)%360,s:t.s,l:t.l})]}function S(e,t,n){t=t||6,n=n||30;var r=c(e).toHsl(),i=360/n,o=[c(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(c(r));return o}function T(e,t){t=t||6;for(var n=c(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(c({h:r,s:i,v:o})),o=(o+s)%1;return a}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:d.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:d.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:d.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=E(e),this._roundA=a(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),r=a(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=i(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=i(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),r=a(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[R(a(e).toString(16)),R(a(t).toString(16)),R(a(n).toString(16)),R(I(r))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*M(this._r,255))+"%",g:a(100*M(this._g,255))+"%",b:a(100*M(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*M(this._r,255))+"%, "+a(100*M(this._g,255))+"%, "+a(100*M(this._b,255))+"%)":"rgba("+a(100*M(this._r,255))+"%, "+a(100*M(this._g,255))+"%, "+a(100*M(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(O[t(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=c(e);n="#"+s(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&0<=this._a;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(S,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(_,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:j(e[r]));e=n}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:e(),g:e(),b:e()})},c.mix=function(e,t,n){n=0===n?0:n||50;var r=c(e).toRgb(),i=c(t).toRgb(),o=n/100;return c({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},c.readability=function(e,t){var n=c(e),r=c(t);return(d.max(n.getLuminance(),r.getLuminance())+.05)/(d.min(n.getLuminance(),r.getLuminance())+.05)},c.isReadable=function(e,t,n){var r,i,o=c.readability(e,t);switch(i=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=4.5<=o;break;case"AAlarge":i=3<=o;break;case"AAAsmall":i=7<=o}return i},c.mostReadable=function(e,t,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var u=0;u<t.length;u++)l<(r=c.readability(e,t[u]))&&(l=r,s=c(t[u]));return c.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],n))};var C=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=c.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(C);function E(e){return e=parseFloat(e),(isNaN(e)||e<0||1<e)&&(e=1),e}function M(e,t){var n;"string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var r,i="string"==typeof(r=e)&&-1!=r.indexOf("%");return e=p(t,v(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),d.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function P(e){return p(1,v(0,e))}function A(e){return parseInt(e,16)}function R(e){return 1==e.length?"0"+e:""+e}function j(e){return e<=1&&(e=100*e+"%"),e}function I(e){return d.round(255*parseFloat(e)).toString(16)}function L(e){return A(e)/255}var D,N,B,F=(N="[\\s|\\(]+("+(D="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",B="[\\s|\\(]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",{CSS_UNIT:new RegExp(D),rgb:new RegExp("rgb"+N),rgba:new RegExp("rgba"+B),hsl:new RegExp("hsl"+N),hsla:new RegExp("hsla"+B),hsv:new RegExp("hsv"+N),hsva:new RegExp("hsva"+B),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function V(e){return!!F.CSS_UNIT.exec(e)}void 0!==z&&z.exports?z.exports=c:void 0===(q=function(){return c}.call(H,U,H,z))||(z.exports=q)}(Math)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatch=void 0;var v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=i(n(0)),g=i(n(7)),r=n(597),y=n(14);function i(e){return e&&e.__esModule?e:{default:e}}var o=t.Swatch=function(e){var t=e.color,n=e.style,r=e.onClick,i=void 0===r?function(){}:r,o=e.onHover,a=e.title,s=void 0===a?t:a,l=e.children,u=e.focus,c=e.focusStyle,d=void 0===c?{}:c,h="transparent"===t,f=(0,g.default)({default:{swatch:v({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,u?d:{})}}),p={};return o&&(p.onMouseOver=function(e){return o(t,e)}),m.default.createElement("div",v({style:f.swatch,onClick:function(e){return i(t,e)},title:s,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&i(t,e)}},p),l,h&&m.default.createElement(y.Checkboard,{borderRadius:f.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};t.default=(0,r.handleFocus)(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleFocus=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=n(0),s=(r=a)&&r.__esModule?r:{default:r};function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.handleFocus=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"span";return function(e){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=n=l(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(i)))).state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},l(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.default.Component),o(a,[{key:"render",value:function(){return s.default.createElement(n,{onFocus:this.handleFocus,onBlur:this.handleBlur},s.default.createElement(t,i({},this.props,this.state)))}}]),a}()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlphaPointer=void 0;var r=o(n(0)),i=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}var a=t.AlphaPointer=function(e){var t=e.direction,n=(0,i.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return r.default.createElement("div",{style:n.picker})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;var h=i(n(0)),r=i(n(8)),f=i(n(7)),p=i(n(43)),v=n(14),m=i(n(600));function i(e){return e&&e.__esModule?e:{default:e}}var o=t.Block=function(e){var n=e.onChange,t=e.onSwatchHover,r=e.hex,i=e.colors,o=e.width,a=e.triangle,s=e.className,l=void 0===s?"":s,u="transparent"===r,c=function(e,t){p.default.isValidHex(e)&&n({hex:e,source:"hex"},t)},d=(0,f.default)({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:p.default.getContrastingColor(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},{"hide-triangle":"hide"===a});return h.default.createElement("div",{style:d.card,className:"block-picker "+l},h.default.createElement("div",{style:d.triangle}),h.default.createElement("div",{style:d.head},u&&h.default.createElement(v.Checkboard,{borderRadius:"6px 6px 0 0"}),h.default.createElement("div",{style:d.label},r)),h.default.createElement("div",{style:d.body},h.default.createElement(m.default,{colors:i,onClick:c,onSwatchHover:t}),h.default.createElement(v.EditableInput,{style:{input:d.input},value:r,onChange:c})))};o.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),colors:r.default.arrayOf(r.default.string),triangle:r.default.oneOf(["top","hide"])},o.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top"},t.default=(0,v.ColorWrap)(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSwatches=void 0;var o=r(n(0)),a=r(n(7)),s=r(n(58)),l=n(14);function r(e){return e&&e.__esModule?e:{default:e}}var i=t.BlockSwatches=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,i=(0,a.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return o.default.createElement("div",{style:i.swatches},(0,s.default)(t,function(e){return o.default.createElement(l.Swatch,{key:e,color:e,style:i.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})}),o.default.createElement("div",{style:i.clear}))};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Circle=void 0;var h=a(n(0)),r=a(n(8)),f=a(n(7)),p=a(n(58)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(280)),o=n(14),v=a(n(602));function a(e){return e&&e.__esModule?e:{default:e}}var s=t.Circle=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,i=e.colors,o=e.hex,a=e.circleSize,s=e.circleSpacing,l=e.className,u=void 0===l?"":l,c=(0,f.default)({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-s,marginBottom:-s}}}),d=function(e,t){return n({hex:e,source:"hex"},t)};return h.default.createElement("div",{style:c.card,className:"circle-picker "+u},(0,p.default)(i,function(e){return h.default.createElement(v.default,{key:e,color:e,onClick:d,onSwatchHover:r,active:o===e.toLowerCase(),circleSize:a,circleSpacing:s})}))};s.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),circleSize:r.default.number,circleSpacing:r.default.number},s.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[i.red[500],i.pink[500],i.purple[500],i.deepPurple[500],i.indigo[500],i.blue[500],i.lightBlue[500],i.cyan[500],i.teal[500],i.green[500],i.lightGreen[500],i.lime[500],i.yellow[500],i.amber[500],i.orange[500],i.deepOrange[500],i.brown[500],i.blueGrey[500]]},t.default=(0,o.ColorWrap)(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircleSwatch=void 0;var u=i(n(0)),r=n(7),c=i(r),d=n(14);function i(e){return e&&e.__esModule?e:{default:e}}var o=t.CircleSwatch=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,i=e.hover,o=e.active,a=e.circleSize,s=e.circleSpacing,l=(0,c.default)({default:{swatch:{width:a,height:a,marginRight:s,marginBottom:s,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+a/2+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:i,active:o});return u.default.createElement("div",{style:l.swatch},u.default.createElement(d.Swatch,{style:l.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:l.Swatch.boxShadow+", 0 0 5px "+t}}))};o.defaultProps={circleSize:28,circleSpacing:14},t.default=(0,r.handleHover)(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome=void 0;var d=i(n(0)),r=i(n(8)),h=i(n(7)),f=n(14),p=i(n(604)),v=i(n(605)),m=i(n(606));function i(e){return e&&e.__esModule?e:{default:e}}var o=t.Chrome=function(e){var t=e.onChange,n=e.disableAlpha,r=e.rgb,i=e.hsl,o=e.hsv,a=e.hex,s=e.renderers,l=e.className,u=void 0===l?"":l,c=(0,h.default)({default:{picker:{background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",width:"225px",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+r.r+", "+r.g+", "+r.b+", "+r.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},{disableAlpha:n});return d.default.createElement("div",{style:c.picker,className:"chrome-picker "+u},d.default.createElement("div",{style:c.saturation},d.default.createElement(f.Saturation,{style:c.Saturation,hsl:i,hsv:o,pointer:m.default,onChange:t})),d.default.createElement("div",{style:c.body},d.default.createElement("div",{style:c.controls,className:"flexbox-fix"},d.default.createElement("div",{style:c.color},d.default.createElement("div",{style:c.swatch},d.default.createElement("div",{style:c.active}),d.default.createElement(f.Checkboard,{renderers:s}))),d.default.createElement("div",{style:c.toggles},d.default.createElement("div",{style:c.hue},d.default.createElement(f.Hue,{style:c.Hue,hsl:i,pointer:v.default,onChange:t})),d.default.createElement("div",{style:c.alpha},d.default.createElement(f.Alpha,{style:c.Alpha,rgb:r,hsl:i,pointer:v.default,renderers:s,onChange:t})))),d.default.createElement(p.default,{rgb:r,hsl:i,hex:a,onChange:t,disableAlpha:n})))};o.propTypes={disableAlpha:r.default.bool},o.defaultProps={disableAlpha:!1},t.default=(0,f.ColorWrap)(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromeFields=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(n(0)),o=a(n(7)),s=a(n(43)),l=n(14);function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=t.ChromeFields=function(e){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=n=u(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(i)))).state={view:""},n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?s.default.isValidHex(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:1<e.a&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&n.props.onChange({h:e.h||n.props.hsl.h,s:Number(e.s&&e.s||n.props.hsl.s),l:Number(e.l&&e.l||n.props.hsl.l),source:"hsl"},t)},n.showHighlight=function(e){e.target.style.background="#eee"},n.hideHighlight=function(e){e.target.style.background="transparent"},u(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.default.Component),r(a,[{key:"componentDidMount",value:function(){1===this.props.hsl.a&&"hex"!==this.state.view?this.setState({view:"hex"}):"rgb"!==this.state.view&&"hsl"!==this.state.view&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(e){1!==e.hsl.a&&"hex"===this.state.view&&this.setState({view:"rgb"})}},{key:"render",value:function(){var t=this,e=(0,o.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=i.default.createElement("div",{style:e.fields,className:"flexbox-fix"},i.default.createElement("div",{style:e.field},i.default.createElement(l.EditableInput,{style:{input:e.input,label:e.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=i.default.createElement("div",{style:e.fields,className:"flexbox-fix"},i.default.createElement("div",{style:e.field},i.default.createElement(l.EditableInput,{style:{input:e.input,label:e.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),i.default.createElement("div",{style:e.field},i.default.createElement(l.EditableInput,{style:{input:e.input,label:e.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),i.default.createElement("div",{style:e.field},i.default.createElement(l.EditableInput,{style:{input:e.input,label:e.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),i.default.createElement("div",{style:e.alpha},i.default.createElement(l.EditableInput,{style:{input:e.input,label:e.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=i.default.createElement("div",{style:e.fields,className:"flexbox-fix"},i.default.createElement("div",{style:e.field},i.default.createElement(l.EditableInput,{style:{input:e.input,label:e.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),i.default.createElement("div",{style:e.field},i.default.createElement(l.EditableInput,{style:{input:e.input,label:e.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),i.default.createElement("div",{style:e.field},i.default.createElement(l.EditableInput,{style:{input:e.input,label:e.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),i.default.createElement("div",{style:e.alpha},i.default.createElement(l.EditableInput,{style:{input:e.input,label:e.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),i.default.createElement("div",{style:e.wrap,className:"flexbox-fix"},n,i.default.createElement("div",{style:e.toggle},i.default.createElement("div",{style:e.icon,onClick:this.toggleViews,ref:function(e){return t.icon=e}},i.default.createElement("svg",{style:e.svg,viewBox:"0 0 24 24",onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight},i.default.createElement("path",{ref:function(e){return t.iconUp=e},fill:"#333",d:"M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}),i.default.createElement("path",{ref:function(e){return t.iconDown=e},fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15Z"})))))}}]),a}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePointer=void 0;var r=o(n(0)),i=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}var a=t.ChromePointer=function(){var e=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return r.default.createElement("div",{style:e.picker})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePointerCircle=void 0;var r=o(n(0)),i=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}var a=t.ChromePointerCircle=function(){var e=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return r.default.createElement("div",{style:e.picker})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Compact=void 0;var c=i(n(0)),r=i(n(8)),d=i(n(7)),h=i(n(58)),f=i(n(43)),p=n(14),v=i(n(608)),m=i(n(609));function i(e){return e&&e.__esModule?e:{default:e}}var o=t.Compact=function(e){var n=e.onChange,t=e.onSwatchHover,r=e.colors,i=e.hex,o=e.rgb,a=e.className,s=void 0===a?"":a,l=(0,d.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}}),u=function(e,t){e.hex?f.default.isValidHex(e.hex)&&n({hex:e.hex,source:"hex"},t):n(e,t)};return c.default.createElement(p.Raised,{style:l.Compact},c.default.createElement("div",{style:l.compact,className:"compact-picker "+s},c.default.createElement("div",null,(0,h.default)(r,function(e){return c.default.createElement(v.default,{key:e,color:e,active:e.toLowerCase()===i,onClick:u,onSwatchHover:t})}),c.default.createElement("div",{style:l.clear})),c.default.createElement(m.default,{hex:i,rgb:o,onChange:u})))};o.propTypes={colors:r.default.arrayOf(r.default.string)},o.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"]},t.default=(0,p.ColorWrap)(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactColor=void 0;var s=r(n(0)),l=r(n(7)),u=r(n(43)),c=n(14);function r(e){return e&&e.__esModule?e:{default:e}}var i=t.CompactColor=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,o=e.active,a=(0,l.default)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:u.default.getContrastingColor(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return s.default.createElement(c.Swatch,{style:a.color,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},s.default.createElement("div",{style:a.dot}))};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactFields=void 0;var a=r(n(0)),s=r(n(7)),l=n(14);function r(e){return e&&e.__esModule?e:{default:e}}var i=t.CompactFields=function(e){var t=e.hex,n=e.rgb,r=e.onChange,i=(0,s.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(e,t){e.r||e.g||e.b?r({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):r({hex:e.hex,source:"hex"},t)};return a.default.createElement("div",{style:i.fields,className:"flexbox-fix"},a.default.createElement("div",{style:i.active}),a.default.createElement(l.EditableInput,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:t,onChange:o}),a.default.createElement(l.EditableInput,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:o}),a.default.createElement(l.EditableInput,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:o}),a.default.createElement(l.EditableInput,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:o}))};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Github=void 0;var c=o(n(0)),r=o(n(8)),d=o(n(7)),h=o(n(58)),i=n(14),f=o(n(611));function o(e){return e&&e.__esModule?e:{default:e}}var a=t.Github=function(e){var t=e.width,n=e.colors,r=e.onChange,i=e.onSwatchHover,o=e.triangle,a=e.className,s=void 0===a?"":a,l=(0,d.default)({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},{"hide-triangle":"hide"===o,"top-left-triangle":"top-left"===o,"top-right-triangle":"top-right"===o,"bottom-left-triangle":"bottom-left"==o,"bottom-right-triangle":"bottom-right"===o}),u=function(e,t){return r({hex:e,source:"hex"},t)};return c.default.createElement("div",{style:l.card,className:"github-picker "+s},c.default.createElement("div",{style:l.triangleShadow}),c.default.createElement("div",{style:l.triangle}),(0,h.default)(n,function(e){return c.default.createElement(f.default,{color:e,key:e,onClick:u,onSwatchHover:i})}))};a.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),colors:r.default.arrayOf(r.default.string),triangle:r.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"])},a.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left"},t.default=(0,i.ColorWrap)(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GithubSwatch=void 0;var s=i(n(0)),r=n(7),l=i(r),u=n(14);function i(e){return e&&e.__esModule?e:{default:e}}var o=t.GithubSwatch=function(e){var t=e.hover,n=e.color,r=e.onClick,i=e.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=(0,l.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:t});return s.default.createElement("div",{style:a.swatch},s.default.createElement(u.Swatch,{color:n,onClick:r,onHover:i,focusStyle:o}))};t.default=(0,r.handleHover)(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HuePicker=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=i(n(0)),h=i(n(7)),f=n(14),r=i(n(613));function i(e){return e&&e.__esModule?e:{default:e}}var o=t.HuePicker=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.hsl,o=e.direction,a=e.pointer,s=e.className,l=void 0===s?"":s,u=(0,h.default)({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}});return d.default.createElement("div",{style:u.picker,className:"hue-picker "+l},d.default.createElement(f.Hue,c({},u.hue,{hsl:i,pointer:a,onChange:function(e){return r({a:1,h:e.h,l:.5,s:1})},direction:o})))};o.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:r.default},t.default=(0,f.ColorWrap)(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderPointer=void 0;var r=o(n(0)),i=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}var a=t.SliderPointer=function(e){var t=e.direction,n=(0,i.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return r.default.createElement("div",{style:n.picker})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Material=void 0;var l=r(n(0)),u=r(n(7)),c=r(n(43)),d=n(14);function r(e){return e&&e.__esModule?e:{default:e}}var i=t.Material=function(e){var n=e.onChange,t=e.hex,r=e.rgb,i=e.className,o=void 0===i?"":i,a=(0,u.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+t,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}}),s=function(e,t){e.hex?c.default.isValidHex(e.hex)&&n({hex:e.hex,source:"hex"},t):(e.r||e.g||e.b)&&n({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},t)};return l.default.createElement(d.Raised,null,l.default.createElement("div",{style:a.material,className:"material-picker "+o},l.default.createElement(d.EditableInput,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"hex",value:t,onChange:s}),l.default.createElement("div",{style:a.split,className:"flexbox-fix"},l.default.createElement("div",{style:a.third},l.default.createElement(d.EditableInput,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:r.r,onChange:s})),l.default.createElement("div",{style:a.third},l.default.createElement(d.EditableInput,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:r.g,onChange:s})),l.default.createElement("div",{style:a.third},l.default.createElement(d.EditableInput,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:r.b,onChange:s})))))};t.default=(0,d.ColorWrap)(i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Photoshop=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=f(n(0)),o=f(n(8)),a=f(n(7)),s=n(14),l=f(n(616)),u=f(n(617)),c=f(n(618)),d=f(n(619)),h=f(n(620));function f(e){return e&&e.__esModule?e:{default:e}}var p=t.Photoshop=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.state={currentColor:e.hex},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default.Component),r(n,[{key:"render",value:function(){var e=this.props.className,t=void 0===e?"":e,n=(0,a.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}});return i.default.createElement("div",{style:n.picker,className:"photoshop-picker "+t},i.default.createElement("div",{style:n.head},this.props.header),i.default.createElement("div",{style:n.body,className:"flexbox-fix"},i.default.createElement("div",{style:n.saturation},i.default.createElement(s.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:u.default,onChange:this.props.onChange})),i.default.createElement("div",{style:n.hue},i.default.createElement(s.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:c.default,onChange:this.props.onChange})),i.default.createElement("div",{style:n.controls},i.default.createElement("div",{style:n.top,className:"flexbox-fix"},i.default.createElement("div",{style:n.previews},i.default.createElement(h.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),i.default.createElement("div",{style:n.actions},i.default.createElement(d.default,{label:"OK",onClick:this.props.onAccept,active:!0}),i.default.createElement(d.default,{label:"Cancel",onClick:this.props.onCancel}),i.default.createElement(l.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),n}();p.propTypes={header:o.default.string},p.defaultProps={header:"Color Picker"},t.default=(0,s.ColorWrap)(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPicker=void 0;var s=r(n(0)),l=r(n(7)),u=r(n(43)),c=n(14);function r(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPicker=function(e){var n=e.onChange,r=e.rgb,i=e.hsv,t=e.hex,o=(0,l.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(e,t){e["#"]?u.default.isValidHex(e["#"])&&n({hex:e["#"],source:"hex"},t):e.r||e.g||e.b?n({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},t):(e.h||e.s||e.v)&&n({h:e.h||i.h,s:e.s||i.s,v:e.v||i.v,source:"hsv"},t)};return s.default.createElement("div",{style:o.fields},s.default.createElement(c.EditableInput,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(i.h),onChange:a}),s.default.createElement(c.EditableInput,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(100*i.s),onChange:a}),s.default.createElement(c.EditableInput,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(100*i.v),onChange:a}),s.default.createElement("div",{style:o.divider}),s.default.createElement(c.EditableInput,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:r.r,onChange:a}),s.default.createElement(c.EditableInput,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:r.g,onChange:a}),s.default.createElement(c.EditableInput,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:r.b,onChange:a}),s.default.createElement("div",{style:o.divider}),s.default.createElement(c.EditableInput,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:t.replace("#",""),onChange:a}),s.default.createElement("div",{style:o.fieldSymbols},s.default.createElement("div",{style:o.symbol},"°"),s.default.createElement("div",{style:o.symbol},"%"),s.default.createElement("div",{style:o.symbol},"%")))};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPointerCircle=void 0;var r=o(n(0)),i=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}var a=t.PhotoshopPointerCircle=function(e){var t=e.hsl,n=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":.5<t.l});return r.default.createElement("div",{style:n.picker})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPointerCircle=void 0;var r=o(n(0)),i=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}var a=t.PhotoshopPointerCircle=function(){var e=(0,i.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return r.default.createElement("div",{style:e.pointer},r.default.createElement("div",{style:e.left},r.default.createElement("div",{style:e.leftInside})),r.default.createElement("div",{style:e.right},r.default.createElement("div",{style:e.rightInside})))};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopBotton=void 0;var a=r(n(0)),s=r(n(7));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopBotton=function(e){var t=e.onClick,n=e.label,r=e.children,i=e.active,o=(0,s.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return a.default.createElement("div",{style:o.button,onClick:t},n||r)};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPreviews=void 0;var i=r(n(0)),o=r(n(7));function r(e){return e&&e.__esModule?e:{default:e}}var a=t.PhotoshopPreviews=function(e){var t=e.rgb,n=e.currentColor,r=(0,o.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return i.default.createElement("div",null,i.default.createElement("div",{style:r.label},"new"),i.default.createElement("div",{style:r.swatches},i.default.createElement("div",{style:r.new}),i.default.createElement("div",{style:r.current})),i.default.createElement("div",{style:r.label},"current"))};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sketch=void 0;var p=i(n(0)),r=i(n(8)),v=i(n(7)),m=n(14),g=i(n(622)),y=i(n(623));function i(e){return e&&e.__esModule?e:{default:e}}var o=t.Sketch=function(e){var t=e.width,n=e.rgb,r=e.hex,i=e.hsv,o=e.hsl,a=e.onChange,s=e.onSwatchHover,l=e.disableAlpha,u=e.presetColors,c=e.renderers,d=e.className,h=void 0===d?"":d,f=(0,v.default)({default:{picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},{disableAlpha:l});return p.default.createElement("div",{style:f.picker,className:"sketch-picker "+h},p.default.createElement("div",{style:f.saturation},p.default.createElement(m.Saturation,{style:f.Saturation,hsl:o,hsv:i,onChange:a})),p.default.createElement("div",{style:f.controls,className:"flexbox-fix"},p.default.createElement("div",{style:f.sliders},p.default.createElement("div",{style:f.hue},p.default.createElement(m.Hue,{style:f.Hue,hsl:o,onChange:a})),p.default.createElement("div",{style:f.alpha},p.default.createElement(m.Alpha,{style:f.Alpha,rgb:n,hsl:o,renderers:c,onChange:a}))),p.default.createElement("div",{style:f.color},p.default.createElement(m.Checkboard,null),p.default.createElement("div",{style:f.activeColor}))),p.default.createElement(g.default,{rgb:n,hsl:o,hex:r,onChange:a,disableAlpha:l}),p.default.createElement(y.default,{colors:u,onClick:a,onSwatchHover:s}))};o.propTypes={disableAlpha:r.default.bool,width:r.default.oneOfType([r.default.string,r.default.number])},o.defaultProps={disableAlpha:!1,width:200,presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},t.default=(0,m.ColorWrap)(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchFields=void 0;var l=r(n(0)),u=r(n(7)),c=r(n(43)),d=n(14);function r(e){return e&&e.__esModule?e:{default:e}}var i=t.SketchFields=function(e){var n=e.onChange,r=e.rgb,i=e.hsl,t=e.hex,o=e.disableAlpha,a=(0,u.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),s=function(e,t){e.hex?c.default.isValidHex(e.hex)&&n({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,a:r.a,source:"rgb"},t):e.a&&(e.a<0?e.a=0:100<e.a&&(e.a=100),e.a/=100,n({h:i.h,s:i.s,l:i.l,a:e.a,source:"rgb"},t))};return l.default.createElement("div",{style:a.fields,className:"flexbox-fix"},l.default.createElement("div",{style:a.double},l.default.createElement(d.EditableInput,{style:{input:a.input,label:a.label},label:"hex",value:t.replace("#",""),onChange:s})),l.default.createElement("div",{style:a.single},l.default.createElement(d.EditableInput,{style:{input:a.input,label:a.label},label:"r",value:r.r,onChange:s,dragLabel:"true",dragMax:"255"})),l.default.createElement("div",{style:a.single},l.default.createElement(d.EditableInput,{style:{input:a.input,label:a.label},label:"g",value:r.g,onChange:s,dragLabel:"true",dragMax:"255"})),l.default.createElement("div",{style:a.single},l.default.createElement(d.EditableInput,{style:{input:a.input,label:a.label},label:"b",value:r.b,onChange:s,dragLabel:"true",dragMax:"255"})),l.default.createElement("div",{style:a.alpha},l.default.createElement(d.EditableInput,{style:{input:a.input,label:a.label},label:"a",value:Math.round(100*r.a),onChange:s,dragLabel:"true",dragMax:"100"})))};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchPresetColors=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=i(n(0)),r=i(n(8)),u=i(n(7)),c=n(14);function i(e){return e&&e.__esModule?e:{default:e}}var o=t.SketchPresetColors=function(e){var t=e.colors,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,o=(0,u.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),a=function(e,t){r({hex:e,source:"hex"},t)};return l.default.createElement("div",{style:o.colors,className:"flexbox-fix"},t.map(function(e){var t="string"==typeof e?{color:e}:e,n=""+t.color+(t.title||"");return l.default.createElement("div",{key:n,style:o.swatchWrap},l.default.createElement(c.Swatch,s({},t,{style:o.swatch,onClick:a,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))}))};o.propTypes={colors:r.default.arrayOf(r.default.oneOfType([r.default.string,r.default.shape({color:r.default.string,title:r.default.string})])).isRequired},t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0;var s=i(n(0)),l=i(n(7)),u=n(14),c=i(n(625)),r=i(n(627));function i(e){return e&&e.__esModule?e:{default:e}}var o=t.Slider=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,i=e.className,o=void 0===i?"":i,a=(0,l.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}});return s.default.createElement("div",{className:"slider-picker "+o},s.default.createElement("div",{style:a.hue},s.default.createElement(u.Hue,{style:a.Hue,hsl:t,pointer:r,onChange:n})),s.default.createElement("div",{style:a.swatches},s.default.createElement(c.default,{hsl:t,onClick:n})))};o.defaultProps={pointer:r.default},t.default=(0,u.ColorWrap)(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderSwatches=void 0;var i=r(n(0)),o=r(n(7)),a=r(n(626));function r(e){return e&&e.__esModule?e:{default:e}}var s=t.SliderSwatches=function(e){var t=e.onClick,n=e.hsl,r=(0,o.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}});return i.default.createElement("div",{style:r.swatches},i.default.createElement("div",{style:r.swatch},i.default.createElement(a.default,{hsl:n,offset:".80",active:Math.round(100*n.l)/100==.8&&Math.round(100*n.s)/100==.5,onClick:t,first:!0})),i.default.createElement("div",{style:r.swatch},i.default.createElement(a.default,{hsl:n,offset:".65",active:Math.round(100*n.l)/100==.65&&Math.round(100*n.s)/100==.5,onClick:t})),i.default.createElement("div",{style:r.swatch},i.default.createElement(a.default,{hsl:n,offset:".50",active:Math.round(100*n.l)/100==.5&&Math.round(100*n.s)/100==.5,onClick:t})),i.default.createElement("div",{style:r.swatch},i.default.createElement(a.default,{hsl:n,offset:".35",active:Math.round(100*n.l)/100==.35&&Math.round(100*n.s)/100==.5,onClick:t})),i.default.createElement("div",{style:r.swatch},i.default.createElement(a.default,{hsl:n,offset:".20",active:Math.round(100*n.l)/100==.2&&Math.round(100*n.s)/100==.5,onClick:t,last:!0})),i.default.createElement("div",{style:r.clear}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderSwatch=void 0;var u=r(n(0)),c=r(n(7));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderSwatch=function(e){var t=e.hsl,n=e.offset,r=e.onClick,i=void 0===r?function(){}:r,o=e.active,a=e.first,s=e.last,l=(0,c.default)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:a,last:s});return u.default.createElement("div",{style:l.swatch,onClick:function(e){return i({h:t.h,s:.5,l:n,source:"hsl"},e)}})};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderPointer=void 0;var r=o(n(0)),i=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}var a=t.SliderPointer=function(){var e=(0,i.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return r.default.createElement("div",{style:e.picker})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatches=void 0;var d=o(n(0)),r=o(n(8)),h=o(n(7)),f=o(n(58)),p=o(n(43)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(280)),v=n(14),m=o(n(629));function o(e){return e&&e.__esModule?e:{default:e}}var a=t.Swatches=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.onSwatchHover,o=e.colors,a=e.hex,s=e.className,l=void 0===s?"":s,u=(0,h.default)({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}}),c=function(e,t){p.default.isValidHex(e)&&r({hex:e,source:"hex"},t)};return d.default.createElement("div",{style:u.picker,className:"swatches-picker "+l},d.default.createElement(v.Raised,null,d.default.createElement("div",{style:u.overflow},d.default.createElement("div",{style:u.body},(0,f.default)(o,function(e){return d.default.createElement(m.default,{key:e.toString(),group:e,active:a,onClick:c,onSwatchHover:i})}),d.default.createElement("div",{style:u.clear})))))};a.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),height:r.default.oneOfType([r.default.string,r.default.number]),colors:r.default.arrayOf(r.default.arrayOf(r.default.string))},a.defaultProps={width:320,height:240,colors:[[i.red[900],i.red[700],i.red[500],i.red[300],i.red[100]],[i.pink[900],i.pink[700],i.pink[500],i.pink[300],i.pink[100]],[i.purple[900],i.purple[700],i.purple[500],i.purple[300],i.purple[100]],[i.deepPurple[900],i.deepPurple[700],i.deepPurple[500],i.deepPurple[300],i.deepPurple[100]],[i.indigo[900],i.indigo[700],i.indigo[500],i.indigo[300],i.indigo[100]],[i.blue[900],i.blue[700],i.blue[500],i.blue[300],i.blue[100]],[i.lightBlue[900],i.lightBlue[700],i.lightBlue[500],i.lightBlue[300],i.lightBlue[100]],[i.cyan[900],i.cyan[700],i.cyan[500],i.cyan[300],i.cyan[100]],[i.teal[900],i.teal[700],i.teal[500],i.teal[300],i.teal[100]],["#194D33",i.green[700],i.green[500],i.green[300],i.green[100]],[i.lightGreen[900],i.lightGreen[700],i.lightGreen[500],i.lightGreen[300],i.lightGreen[100]],[i.lime[900],i.lime[700],i.lime[500],i.lime[300],i.lime[100]],[i.yellow[900],i.yellow[700],i.yellow[500],i.yellow[300],i.yellow[100]],[i.amber[900],i.amber[700],i.amber[500],i.amber[300],i.amber[100]],[i.orange[900],i.orange[700],i.orange[500],i.orange[300],i.orange[100]],[i.deepOrange[900],i.deepOrange[700],i.deepOrange[500],i.deepOrange[300],i.deepOrange[100]],[i.brown[900],i.brown[700],i.brown[500],i.brown[300],i.brown[100]],[i.blueGrey[900],i.blueGrey[700],i.blueGrey[500],i.blueGrey[300],i.blueGrey[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]]},t.default=(0,v.ColorWrap)(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwatchesGroup=void 0;var a=r(n(0)),s=r(n(7)),l=r(n(58)),u=r(n(630));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.SwatchesGroup=function(e){var n=e.onClick,r=e.onSwatchHover,i=e.group,o=e.active,t=(0,s.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return a.default.createElement("div",{style:t.group},(0,l.default)(i,function(e,t){return a.default.createElement(u.default,{key:e,color:e,active:e.toLowerCase()===o,first:0===t,last:t===i.length-1,onClick:n,onSwatchHover:r})}))};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwatchesColor=void 0;var u=r(n(0)),c=r(n(7)),d=r(n(43)),h=n(14);function r(e){return e&&e.__esModule?e:{default:e}}var i=t.SwatchesColor=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,o=e.first,a=e.last,s=e.active,l=(0,c.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{fill:d.default.getContrastingColor(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{fill:"#333"}},transparent:{check:{fill:"#333"}}},{first:o,last:a,active:s,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return u.default.createElement(h.Swatch,{color:t,style:l.color,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},u.default.createElement("div",{style:l.check},u.default.createElement("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},u.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Twitter=void 0;var d=i(n(0)),r=i(n(8)),h=i(n(7)),f=i(n(58)),p=i(n(43)),v=n(14);function i(e){return e&&e.__esModule?e:{default:e}}var o=t.Twitter=function(e){var n=e.onChange,r=e.onSwatchHover,t=e.hex,i=e.colors,o=e.width,a=e.triangle,s=e.className,l=void 0===s?"":s,u=(0,h.default)({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},{"hide-triangle":"hide"===a,"top-left-triangle":"top-left"===a,"top-right-triangle":"top-right"===a}),c=function(e,t){p.default.isValidHex(e)&&n({hex:e,source:"hex"},t)};return d.default.createElement("div",{style:u.card,className:"twitter-picker "+l},d.default.createElement("div",{style:u.triangleShadow}),d.default.createElement("div",{style:u.triangle}),d.default.createElement("div",{style:u.body},(0,f.default)(i,function(e,t){return d.default.createElement(v.Swatch,{key:t,color:e,hex:e,style:u.swatch,onClick:c,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})}),d.default.createElement("div",{style:u.hash},"#"),d.default.createElement(v.EditableInput,{style:{input:u.input},value:t.replace("#",""),onChange:c}),d.default.createElement("div",{style:u.clear})))};o.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),triangle:r.default.oneOf(["hide","top-left","top-right"]),colors:r.default.arrayOf(r.default.string)},o.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left"},t.default=(0,v.ColorWrap)(o)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TRACKS_INFO=void 0;var r=n(269),i=t.TRACKS_INFO=[{type:"left-axis",datatype:["axis"],local:!0,orientation:"1d-vertical",name:"Left Axis",thumbnail:r.svgVertical1DAxisIcon,minWidth:100},{type:"top-axis",datatype:["axis"],local:!0,orientation:"1d-horizontal",name:"Top Axis",thumbnail:r.svg1DAxisIcon,defaultOptions:{}},{type:"horizontal-rule",datatype:["x-coord"],local:!0,orientation:"whole",name:"Horizontal Rule",thumbnail:null,defaultOptions:{}},{type:"vertical-rule",datatype:["y-coord"],local:!0,orientation:"whole",name:"Vertical Rule",thumbnail:null,defaultOptions:{}},{type:"cross-rule",datatype:["xy-coord"],local:!0,orientation:"whole",name:"Cross Rule",thumbnail:null,defaultOptions:{}},{type:"heatmap",datatype:["matrix"],local:!1,minHeight:100,minWidth:100,orientation:"2d",thumbnail:r.svg2DHeatmapIcon,defaultOptions:{backgroundColor:"#eeeeee",labelPosition:"bottomRight",colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],maxZoom:null,colorbarPosition:"topRight",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log",showMousePosition:!1,mousePositionColor:"#999999",showTooltip:!1},availableOptions:["backgroundColor","labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","colorRange","maxZoom","dataTransform","colorbarPosition","trackBorderWidth","trackBorderColor","heatmapValueScaling","showMousePosition","mousePositionColor","showTooltip"]},{type:"horizontal-heatmap",datatype:["matrix"],local:!1,minHeight:40,minWidth:100,orientation:"1d-horizontal",thumbnail:r.svg2DHeatmapIcon,defaultOptions:{backgroundColor:"#eeeeee",labelPosition:"bottomRight",labelColor:"black",colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],maxZoom:null,trackBorderWidth:0,trackBorderColor:"black"},availableOptions:["backgroundColor","labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","colorRange","maxZoom","dataTransform","oneDHeatmapFlipped","colorbarPosition","trackBorderWidth","trackBorderColor","heatmapValueScaling"]},{type:"vertical-heatmap",datatype:["matrix"],local:!1,minWidth:50,minHeight:100,orientation:"1d-vertical",thumbnail:r.svg2DHeatmapIcon,defaultOptions:{labelPosition:"bottomRight",labelColor:"black",colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],maxZoom:null,colorbarPosition:"topRight",trackBorderWidth:0,trackBorderColor:"black"},availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","colorRange","maxZoom","dataTransform","oneDHeatmapFlipped","colorbarPosition","trackBorderWidth","trackBorderColor","heatmapValueScaling"]},{type:"horizontal-line",datatype:["vector"],local:!1,orientation:"1d-horizontal",thumbnail:r.svgHorizontalLineIcon,availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","lineStrokeWidth","lineStrokeColor","valueScaling","trackBorderWidth","trackBorderColor","trackType","showMousePosition","mousePositionColor"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",axisPositionHorizontal:"right",lineStrokeColor:"blue",lineStrokeWidth:1,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,showMousePosition:!1,mousePositionColor:"#999999"}},{type:"horizontal-multivec",datatype:["multivec"],local:!1,orientation:"1d-horizontal",minHeight:100,thumbnail:null,availableOptions:["labelPosition","labelColor","valueScaling","labelTextOpacity","labelBackgroundOpacity","colorRange","trackBorderWidth","trackBorderColor","trackType","heatmapValueScaling"],defaultOptions:{labelPosition:"topLeft",labelColor:"black",labelTextOpacity:.4,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log"}},{type:"vertical-line",datatype:["vector"],local:!1,orientation:"1d-vertical",thumbnail:r.svgVerticalLineIcon,availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionVertical","lineStrokeWidth","lineStrokeColor","valueScaling","trackBorderWidth","trackBorderColor","showMousePosition","mousePositionColor"],defaultOptions:{labelColor:"black",labelPosition:"bottomLeft",axisPositionVertical:"top",lineStrokeWidth:1,lineStrokeColor:"blue",valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,showMousePosition:!1,mousePositionColor:"#999999"}},{type:"horizontal-point",datatype:["vector"],local:!1,orientation:"1d-horizontal",availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","pointColor","pointSize","valueScaling","trackBorderWidth","trackBorderColor"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",axisPositionHorizontal:"right",pointColor:"red",pointSize:3,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4}},{type:"horizontal-divergent-bar",datatype:["vector"],local:!1,orientation:"1d-horizontal",availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","barFillColorTop","barFillColorBottom","valueScaling","trackBorderWidth","trackBorderColor","barOpacity"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",axisPositionHorizontal:"right",barFillColorBottom:"red",barFillColorTop:"green",valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,barOpacity:1}},{type:"horizontal-bar",datatype:["vector"],local:!1,orientation:"1d-horizontal",availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","barFillColor","valueScaling","trackBorderWidth","trackBorderColor","barOpacity"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",axisPositionHorizontal:"right",barFillColor:"darkgreen",valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,barOpacity:1}},{type:"vertical-bar",datatype:["vector"],local:!1,orientation:"1d-vertical",availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","barFillColor","valueScaling","trackBorderWidth","trackBorderColor","barOpacity"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",axisPositionHorizontal:"right",barFillColor:"darkgreen",valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,barOpacity:1}},{type:"vertical-point",datatype:["vector"],local:!1,orientation:"1d-vertical",availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","lineStrokeWidth","lineStrokeColor","valueScaling","trackBorderWidth","trackBorderColor"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",axisPositionHorizontal:"right",lineStrokeColor:"red",lineStrokeWidth:1,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4}},{type:"2d-tiles",datatype:["matrix"],local:!1,orientation:"2d",name:"2D Tile Outlines",thumbnail:r.svg2DTilesIcon},{type:"horizontal-1d-value-interval",datatype:["bed-value"],local:!1,orientation:["1d-horizontal"],name:"1D Rectangles",availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal"],defaultOptions:{labelColor:"black",labelPosition:"bottomLeft",axisPositionHorizontal:"left",lineStrokeColor:"blue",valueScaling:"linear"}},{type:"vertical-1d-value-interval",datatype:["bed-value"],local:!1,orientation:["1d-vertical"],name:"1D Rectangles",availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionVertical"],defaultOptions:{labelColor:"black",labelPosition:"bottomLeft",axisPositionVertical:"top",lineStrokeColor:"blue",valueScaling:"linear"}},{type:"top-stacked-interval",datatype:["stacked-interval"],local:!1,orientation:"1d-horizontal",thumbnail:"horizontal-stacked-interval.png",availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity"]},{type:"left-stacked-interval",datatype:["stacked-interval"],local:!1,orientation:"1d-vertical",thumbnail:"vertical-stacked-interval.png",availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity"]},{type:"viewport-projection-vertical",datatype:["1d-projection"],local:!0,hidden:!0,orientation:"1d-vertical",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"viewport-projection-horizontal",datatype:["1d-projection"],local:!0,hidden:!0,orientation:"1d-horizontal",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"viewport-projection-center",datatype:["2d-projection"],local:!0,hidden:!0,orientation:"2d",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"horizontal-gene-annotations",datatype:["gene-annotation"],local:!1,minHeight:55,orientation:"1d-horizontal",name:"Gene Annotations",thumbnail:r.svgGeneAnnotationsIcon,availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","plusStrandColor","minusStrandColor","trackBorderWidth","trackBorderColor","showMousePosition","mousePositionColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",plusStrandColor:"blue",minusStrandColor:"red",trackBorderWidth:0,trackBorderColor:"black",showMousePosition:!1,mousePositionColor:"#999999"}},{type:"vertical-gene-annotations",datatype:["gene-annotation"],local:!1,minWidth:55,orientation:"1d-vertical",name:"Gene Annotations",thumbnail:r.svgVerticalGeneAnnotationsIcon,availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","plusStrandColor","minusStrandColor","trackBorderWidth","trackBorderColor","showMousePosition","mousePositionColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",plusStrandColor:"blue",minusStrandColor:"red",trackBorderWidth:0,trackBorderColor:"black",showMousePosition:!1,mousePositionColor:"#999999"}},{type:"arrowhead-domains",datatype:["arrowhead-domains"],local:!1,orientation:"2d",name:"Arrowhead Domains",thumbnail:r.svgArrowheadDomainsIcon,availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",trackBorderWidth:0,trackBorderColor:"black"}},{type:"vertical-2d-rectangle-domains",datatype:["2d-rectangle-domains"],local:!1,orientation:"1d-vertical",name:"Vertical 2D Rectangle Domains",thumbnail:r.svgArrowheadDomainsIcon,availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",trackBorderWidth:0,trackBorderColor:"black"}},{type:"horizontal-2d-rectangle-domains",datatype:["2d-rectangle-domains"],local:!1,orientation:"1d-horizontal",name:"Horizontal 2D Rectangle Domains",thumbnail:r.svgArrowheadDomainsIcon,availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize"],defaultOptions:{labelColor:"black",labelPosition:"bottomLeft",trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none"}},{type:"2d-rectangle-domains",datatype:["2d-rectangle-domains"],local:!1,orientation:"2d",name:"2D Rectangle Domains",thumbnail:r.svgArrowheadDomainsIcon,availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize"],defaultOptions:{labelColor:"black",labelPosition:"hidden",trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none"}},{type:"2d-annotations",datatype:["2d-annotations"],local:!1,orientation:"2d",name:"2D Annotations",thumbnail:r.svgArrowheadDomainsIcon,availableOptions:["labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize","isClickable","hoverColor","selectColor","exclude","trackBorderBgWidth","trackBorderBgColor","trackBorderBgAlpha"],defaultOptions:{labelColor:"black",labelPosition:"hidden",trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none",isClickable:!1,hoverColor:"orange",selectColor:"fuchsia",exclude:[],trackBorderBgWidth:0,trackBorderBgColor:"black",trackBorderBgAlpha:.33}},{type:"square-markers",datatype:["bedpe"],local:!1,orientation:"2d",name:"Square Markers",thumbnail:r.svgArrowheadDomainsIcon,availableOptions:["labelPosition","labelColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",trackBorderWidth:0,trackBorderColor:"black"}},{type:"combined",datatype:"any",local:!0,orientation:"any"},{type:"2d-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"2d",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey"}},{type:"2d-chromosome-annotations",datatype:["chromsizes"],local:!0,orientation:"2d",name:"2D Chromosome Annotations",thumbnail:null,hidden:!0},{type:"2d-chromosome-labels",datatype:["chromsizes"],local:!0,orientation:"2d",name:"Pairwise Chromosome Labels",thumbnail:null},{type:"horizontal-chromosome-labels",datatype:["chromsizes"],orientation:"1d-horizontal",minHeight:30,name:"Chromosome Axis",thumbnail:null,availableOptions:["showMousePosition","mousePositionColor"],defaultOptions:{showMousePosition:!1,mousePositionColor:"#999999"}},{type:"vertical-chromosome-labels",datatype:["chromsizes"],orientation:"1d-vertical",minWidth:20,minHeight:30,name:"Chromosome Axis",thumbnail:null,availableOptions:["showMousePosition","mousePositionColor"],defaultOptions:{showMousePosition:!1,mousePositionColor:"#999999"}},{type:"vertical-1d-tiles",datatype:["1d-tiles"],local:!1,orientation:"1d-vertical",name:"Vertical 1D Tile Outlines",thumbnail:r.svgVertical1DTilesIcon},{type:"horizontal-1d-tiles",datatype:["vector","stacked-interval","gene-annotation"],local:!1,orientation:"1d-horizontal",name:"Horizontal 1D Tile Outlines",thumbnail:r.svg1DTilesIcon},{type:"osm-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"OSM Tiles",thumbnail:r.svgGeoMapIcon,availableOptions:["minPos","maxPos","maxZoom","labelPosition","name"],defaultOptions:{minPos:-180,maxPos:180,maxZoom:19,labelPosition:"bottomRight"}},{type:"mapbox-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Mapbox Tiles",thumbnail:r.svgGeoMapIcon,availableOptions:["style","labelPosition","name"],defaultOptions:{style:"mapbox.streets",labelPosition:"bottomRight"}},{type:"image-tiles",datatype:["image-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Image Tiles",thumbnail:null},{type:"bedlike",datatype:["bedlike"],local:!1,minHeight:55,orientation:"1d-horizontal",name:"BED-like track",thumbnail:null,availableOptions:["fillColor","labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","valueColumn"],defaultOptions:{fillColor:"blue",axisPositionHorizontal:"right",labelColor:"black",labelPosition:"hidden",trackBorderWidth:0,trackBorderColor:"black",valueColumn:null}},{type:"vertical-bedlike",datatype:["bedlike"],local:!1,minWidth:55,orientation:"1d-vertical",name:"BED-like track",thumbnail:null,availableOptions:["fillColor","labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","valueColumn"],defaultOptions:{axisPositionHorizontal:"right",fillColor:"blue",labelColor:"black",labelPosition:"hidden",trackBorderWidth:0,trackBorderColor:"black",valueColumn:null}}];t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TRACKS_INFO_BY_TYPE=void 0;var r=n(12),i=t.TRACKS_INFO_BY_TYPE=r.TRACKS_INFO.reduce(function(e,t){return e[t.type]=t,e},{});t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.POSITIONS_BY_DATATYPE=void 0;var r,i=n(22),o=(r=i)&&r.__esModule?r:{default:r},a=n(12);var s=t.POSITIONS_BY_DATATYPE=a.TRACKS_INFO.reduce(function(e,t){for(var n=0;n<t.datatype.length;n++){var r=t.datatype[n];return e[r]?e[r].add(t.orientation):e[r]=new o.default,e}},{});t.default=s},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.USED_SERVER="52.45.229.11"},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=t.DEFAULT_TRACKS_FOR_DATATYPE={matrix:{center:"heatmap",top:"horizontal-heatmap",left:"vertical-heatmap",right:"vertical-heatmap",bottom:"horizontal-heatmap"},vector:{top:"horizontal-bar",bottom:"horizontal-bar",left:"vertical-bar",right:"vertical-bar"},multivec:{top:"horizontal-multivec",bottom:"horizontal-multivec"},"geo-json":{center:"geo-json"},"gene-annotations":{top:"horizontal-gene-annotations",bottom:"horizontal-gene-annotations",left:"vertical-gene-annotations",right:"horizontal-gene-annotations"},bedlike:{top:"bedlike",bottom:"bedlike",left:"vertical-bedlike",right:"vertical-bedlike"}};t.default=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(281);var o=(0,((r=i)&&r.__esModule?r:{default:r}).default)(function(e,t){return e.concat(t)},[]);t.default=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(t){return function(e){return Array.prototype.forEach.call(e,t)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(192),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){t.dispatchEvent((0,o.default)(e))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(6);t.default=function(e,t){return[(0,r.chrToAbs)(e[0],e[1],t),(0,r.chrToAbs)(e[2],e[3],t)]}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(24),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(t,n){var r=null;return(0,o.default)(t).map(function(e){return t[e]}).filter(function(e){return e.filter}).reduce(function(e,t){return e.concat(t)},[]).forEach(function e(t){return t.uid===n&&(r=t),"combined"===t.type.substr(0,8)&&t.contents.forEach(e),null}),r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(282),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){return(0,o.default)(e).filter(function(e){return e.uid==t})[0].position}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){for(var n=e;n&&n!==t&&"HTML"!==n.tagName;)n=n.parentNode;return n===t}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return parseInt(e.replace(/^#/,""),16)}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(24)),o=r(n(155));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function t(n,r){return r===n||r instanceof o.default&&(0,i.default)(r.createdTracks).map(function(e){return r.createdTracks[e]}).some(function(e){return t(n,e)})}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n,r,i,o){return n<=e&&e<=r&&i<=t&&t<=o}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=t.invGudermannian=function(e){return Math.log(Math.tan((e+Math.PI/2)/2))};t.default=function(e,t){var n=e*Math.PI/180;return n=r(n),Math.pow(2,t)*(Math.PI-n)/(2*Math.PI)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(6);t.default=function(e){return(0,i.objVals)(e).map(function(e){return e.chromInfoPath}).forEach(function(e){return r.chromInfo.get(e)})}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return Math.pow(2,t)*(e+180)/360}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(t){return function(e){return Array.prototype.map.call(e,t)}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return t<e?e:t}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return e<t?e:t}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return(e%t+t)%t}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(24),o=(r=i)&&r.__esModule?r:{default:r},a=n(6);t.default=function(t){return(0,a.map)(function(e){return t[e]})((0,o.default)(t))}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return e||t}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=t.pixiTextToSvg=function(e){var t=document.createElement("g"),n=document.createElement("text");return n.setAttribute("text-anchor","middle"),n.setAttribute("font-family",e.style.fontFamily),n.setAttribute("font-size",e.style.fontSize),t.setAttribute("transform","scale("+String(e.scale.x)+",1)"),n.setAttribute("fill",e.style.fill),n.innerHTML=e.text,t.appendChild(n),t.setAttribute("transform","translate("+String(e.x)+","+String(e.y)+")scale("+String(e.scale.x)+",1)"),t};t.default=n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){try{var n=e.split(".");return function(e){var t=e;return n.forEach(function(e){t=t[e]}),t}}catch(e){return}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var _=n(6);t.default=function(e,t,n,r,i,o){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,l=arguments[8],u=o?i:r,c=o?r:i,d=o?s:a,h=o?a:s,f=Math.max(0,+u[0]||0),p=Math.max(0,+u[1]||0),v=Math.max(0,+c[0]||0),m=Math.max(0,+c[1]||0),g=[];ArrayBuffer.isView(l)||console.warn("Not supported yet");try{for(var y=new l.constructor(l.length),b=0+h,w=v;w<m;w++)y.set(e.slice(w*t+f,w*t+p),d+b*n),b+=1;var x=o?(0,_.accessorTransposition)(n,n):void 0;g=(0,_.addArrays)(l,y,x)}catch(e){}return g}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n,r){return[r.chrPositions[e].pos+ +t,r.chrPositions[e].pos+ +n]}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(149),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){var n=new RegExp("(\\s|^)"+String(t)+"(\\s|$)");if("http://www.w3.org/2000/svg"===e.namespaceURI){var r=e.getAttribute("class")||"";e.setAttribute("class",r.replace(n," "))}else e.classList?e.classList.remove(t):(0,o.default)(e,t)&&(e.className=e.className.replace(n," "))}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){e.select(".selection").attr("fill",null).attr("fill-opacity",null).attr("stroke",null).classed(t,!0)}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return[e.invert((e.range()[0]+e.range()[1])/2),t.invert((t.range()[0]+t.range()[1])/2),e.invert(1)-e.invert(0)]}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.scalesToGenomeLoci=void 0;var s=r(n(37)),l=r(n(193));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.scalesToGenomeLoci=function(e,t,n){if(null!==n&&e&&t){var r=e.domain()[0],i=e.domain()[1],o=t.domain()[0],a=t.domain()[1];return[].concat((0,s.default)((0,l.default)(r,i,n)),(0,s.default)((0,l.default)(o,a,n)))}};t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(19)),p=n(9),v=n(6);t.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=t?e.pMasked:e.pMain,r=function(e,t,o,a,s,l,u){p.pubSub.publish("app.animateOnMouseMove",!0);var c=t.mousePositionColor?(0,v.hexStrToInt)(t.mousePositionColor):11184810,d=t.mousePositionAlpha||1,h=new i.Graphics,f=function(e,t,n){if(n||h.clear(),h.lineStyle(1,c,d),t){var r=u?a()[0]:0;h.moveTo(0,e),h.lineTo(s()[0]+r,e)}else{var i=u?a()[1]:0;h.moveTo(e,0),h.lineTo(e,s()[1]+i)}};return e.push(p.pubSub.subscribe("app.mouseMove",function(e){var t=e.isFromVerticalTrack?e.dataY:e.dataX,n=e.isFromVerticalTrack?e.dataY:e.isFrom2dTrack?e.dataY:e.dataX,r=u?a():[0,0],i=l()?o()[0](n)+r[1]:o()[0](t)+r[0];f(i),u&&f(o()[1](n)+r[1],!0,!0)})),h}(e.pubSubs,e.options,function(){return[e.xScale(),e.yScale()]},e.getPosition.bind(e),e.getDimensions.bind(e),e.getProp("flipText"),t);return n.addChild(r),function(){n.removeChild(r)}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return e+t}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=t.svgLine=function(e,t,n,r,i,o){var a=document.createElement("line");return a.setAttribute("x1",e),a.setAttribute("x2",n),a.setAttribute("y1",t),a.setAttribute("y2",r),i&&a.setAttribute("stroke-width",i),o&&a.setAttribute("stroke",o),a};t.default=n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:256,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:256,r=document.createElement("canvas");r.width=t,r.height=n;var i=r.getContext("2d");i.fillStyle="transparent",i.fillRect(0,0,r.width,r.height);var o=new ImageData(e,r.width,r.height);return i.putImageData(o,0,0),r}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){if(!e.tracks)return 0;var t=0;return e.tracks.top&&(t+=e.tracks.top.map(function(e){return e.height}).reduce(function(e,t){return e+t},0)),e.tracks.center&&(t+=e.tracks.center.map(function(e){return e.height}).reduce(function(e,t){return e+t},0)),e.tracks.bottom&&(t+=e.tracks.bottom.map(function(e){return e.height}).reduce(function(e,t){return e+t},0)),t}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return(e||"").replace(/\/$/,"")}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(n,r){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1e-6;return function(e){var t=255;return o<e&&(t=Math.max(0,Math.min(255,Math.floor(n(e+i))))),r[t]}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){for(var t=[],n=0;n<e.length;n++)e[n].contents?t=t.concat(e[n].contents):t.push(e[n]);return t}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(674),l=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){e.sort(function(e,t){return t.to-t.from-(e.to-e.from)});for(var t=[[]],n=[new l.default],r=0;r<e.length;r++){for(var i=!1,o=0;o<t.length;o++){var a=n[o];if(!a.intersects([e[r].from,e[r].to])){a.add([e[r].from,e[r].to]),t[o].push(e[r]),i=!0;break}}if(!i){var s=new l.default;s.add([e[r].from,e[r].to]),t.push([e[r]]),n.push(s)}}return t}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=function(e,t,n,r){this.interval=[e,t],this.max=-1/0,this.parentNode=null,this.left=n,this.right=r};function n(){this.root=null}function r(e,t,n){var r=new i(n[0],n[1]);if(r.max=n[1],(r.parentNode=e)[t]=r,e.max<n[1])for(;r;)r.max<n[1]&&(r.max=n[1]),r=r.parentNode}n.prototype.add=function(e){if(!this.root)return this.root=new i(e[0],e[1]),void(this.root.max=e[1]);!function e(t,n){t.interval[0]>n[0]?t.left?e(t.left,n):r(t,"left",n):t.right?e(t.right,n):r(t,"right",n)}(this.root,e)},n.prototype.contains=function(e){return function t(n,r){if(!r)return!1;if(r.interval[0]<=n&&r.interval[1]>=n)return!0;var i=!1,o=void 0;return["left","right"].forEach(function(e){(o=r[e])&&o.max>n&&(i=i||t(n,o))}),i}(e,this.root)},n.prototype.intersects=function(e){return function t(n,r){if(!r)return!1;if(e=r.interval,i=n,e[0]<=i[0]&&e[1]>=i[0]||e[0]<=i[1]&&e[1]>=i[1]||i[0]<=e[0]&&i[1]>=e[0]||i[0]<=e[1]&&i[1]>=e[1])return!0;var e,i,o=!1,a=void 0;return["left","right"].forEach(function(e){(a=r[e])&&a.max>=n[0]&&(o=o||t(n,a))}),o}(e,this.root)},n.prototype.height=function(){return function e(t){return t?1+Math.max(e(t.left),e(t.right)):0}(this.root)},n.prototype.findMax=function(e){for(var t=[e],n=void 0,r=-1/0,i=void 0;t.length;)(n=t.pop()).left&&t.push(n.left),n.right&&t.push(n.right),n.interval[1]>r&&(r=n.interval[1],i=n);return i},n.prototype._removeHelper=function(e,t){if(t)if(t.interval[0]===e[0]&&t.interval[1]===e[1]){if(t.left&&t.right){for(var n=t.left;n.left;)n=n.left;var r=n.interval;n.interval=t.interval,t.interval=r,this._removeHelper(n.interval,t)}else{var i="left";t.right&&(i="right");var o=t.parentNode;o?(o.left===t?o.left=t[i]:o.right=t[i],t[i]&&(t[i].parentNode=o)):(this.root=t[i],this.root&&(this.root.parentNode=null))}var a=t.parentNode;if(a)for(var s=this.findMax(a),l=s.interval[1];s;)s.max===t.interval[1]?(s.max=l,s=s.parentNode):s=!1}else this._removeHelper(e,t.left),this._removeHelper(e,t.right)},n.prototype.remove=function(e){return this._removeHelper(e,this.root)}}])}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Promise=e()}}(function(){return function o(a,s,l){function u(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof _dereq_&&_dereq_;if(!e&&t)return t(n,!0);if(c)return c(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[n]={exports:{}};a[n][0].call(i.exports,function(e){var t=a[n][1][e];return u(t||e)},i,i.exports,o,a,s,l)}return s[n].exports}for(var c="function"==typeof _dereq_&&_dereq_,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){"use strict";function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=l}function i(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function o(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function a(e){this._normalQueue._pushOne(e),this._queueTick()}var s;try{throw new Error}catch(e){s=e}var l=e("./schedule"),u=e("./queue"),c=e("./util");r.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){c.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(e,t){t?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},r.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},c.hasDevTools?(r.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?i.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},r.prototype.invoke=function(e,t,n){this._trampolineEnabled?o.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},r.prototype.settlePromises=function(e){this._trampolineEnabled?a.call(this,e):this._schedule(function(){e._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=a),r.prototype._drainQueue=function(e){for(;0<e.length();){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},t.exports=r,t.exports.firstLineError=s},{"./queue":17,"./schedule":18,"./util":21}],2:[function(e,t,n){"use strict";t.exports=function(o,a,s,l){var u=!1,n=function(e,t){this._reject(t)},c=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(n,n,null,this,e)},d=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},h=function(e,t){t.promiseRejectionQueued||this._reject(e)};o.prototype.bind=function(e){u||(u=!0,o.prototype._propagateFrom=l.propagateFromFunction(),o.prototype._boundValue=l.boundValueFunction());var t=s(e),n=new o(a);n._propagateFrom(this,1);var r=this._target();if(n._setBoundTo(t),t instanceof o){var i={promiseRejectionQueued:!1,promise:n,target:r,bindingPromise:t};r._then(a,c,void 0,n,i),t._then(d,h,void 0,n,i),n._setOnCancel(t)}else n._resolveCallback(r);return n},o.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},o.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},o.bind=function(e,t){return o.resolve(t).bind(e)}}},{}],3:[function(e,t,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=e("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(e){}return i},t.exports=i},{"./promise":15}],4:[function(l,e,t){"use strict";e.exports=function(e,t,n,r){var i=l("./util"),o=i.tryCatch,a=i.errorObj,s=e._async;e.prototype.break=e.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){0<this._length()&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(e,t){if(i.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=o(e).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),s.throwLater(r.e))}}else e._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,e)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":21}],5:[function(e,t,n){"use strict";t.exports=function(d){var h=e("./util"),f=e("./es5").keys,p=h.tryCatch,v=h.errorObj;return function(l,u,c){return function(e){var t=c._boundValue();e:for(var n=0;n<l.length;++n){var r=l[n];if(r===Error||null!=r&&r.prototype instanceof Error){if(e instanceof r)return p(u).call(t,e)}else if("function"==typeof r){var i=p(r).call(t,e);if(i===v)return i;if(i)return p(u).call(t,e)}else if(h.isObject(e)){for(var o=f(r),a=0;a<o.length;++a){var s=o[a];if(r[s]!=e[s])continue e}return p(u).call(t,e)}}return d}}}},{"./es5":10,"./util":21}],6:[function(e,t,n){"use strict";t.exports=function(o){function a(){this._trace=new a.CapturedTrace(s())}function s(){var e=n.length-1;return 0<=e?n[e]:void 0}var l=!1,n=[];return o.prototype._promiseCreated=function(){},o.prototype._pushContext=function(){},o.prototype._popContext=function(){return null},o._peekContext=o.prototype._peekContext=function(){},a.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},a.prototype._popContext=function(){if(void 0!==this._trace){var e=n.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},a.CapturedTrace=null,a.create=function(){return l?new a:void 0},a.deactivateLongStackTraces=function(){},a.activateLongStackTraces=function(){var e=o.prototype._pushContext,t=o.prototype._popContext,n=o._peekContext,r=o.prototype._peekContext,i=o.prototype._promiseCreated;a.deactivateLongStackTraces=function(){o.prototype._pushContext=e,o.prototype._popContext=t,o._peekContext=n,o.prototype._peekContext=r,o.prototype._promiseCreated=i,l=!1},l=!0,o.prototype._pushContext=a.prototype._pushContext,o.prototype._popContext=a.prototype._popContext,o._peekContext=o.prototype._peekContext=s,o.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},a}},{}],7:[function(K,e,t){"use strict";e.exports=function(a,n){function e(e,t){return{promise:t}}function r(){return!1}function i(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+E.toString(e));r._attachCancellationCallback(e)})}catch(e){return e}}function o(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?E.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function s(){return this._onCancelField}function l(e){this._onCancelField=e}function u(){this._cancellationParent=void 0,this._onCancelField=void 0}function c(e,t){if(0!=(1&t)){var n=(this._cancellationParent=e)._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function t(){var e=this._boundTo;return void 0!==e&&e instanceof a?e.isFulfilled()?e.value():void 0:e}function d(){this._trace=new x(this._peekContext())}function h(e,t){if(M(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=v(e);E.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),E.notEnumerableProp(e,"__stackCleaned__",!0)}}}function f(e,t,n){if(Z.warnings){var r,i=new O(e);if(t)n._attachExtraTrace(i);else if(Z.longStackTraces&&(r=a._peekContext()))r.attachExtraTrace(i);else{var o=v(i);i.stack=o.message+"\n"+o.stack.join("\n")}q("warning",i)||m(i,"",!0)}}function p(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||j.test(r),o=i&&G(r);i&&!o&&(L&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function v(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&0<t.length?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||j.test(r))break}return 0<n&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:p(t)}}function m(e,t,n){if("undefined"!=typeof console){var r;if(E.isObject(e)){var i=e.stack;r=t+I(i,e)}else r=t+String(e);"function"==typeof S?S(r,n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}}function g(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){C.throwLater(e)}"unhandledRejection"===e?q(e,n,r)||i||m(n,"Unhandled rejection "):q(e,r)}function y(e){var t,n;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():E.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+((n=t).length<41?n:n.substr(0,38)+"...")+">, no stack trace)"}function b(){return"function"==typeof X}function w(e){var t=e.match(Y);return t?{fileName:t[1],line:parseInt(t[2],10)}:void 0}function x(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);X(this,x),32<t&&this.uncycle()}var _,k,S,T=a._getDomain,C=a._async,O=K("./errors").Warning,E=K("./util"),M=E.canAttachTrace,P=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,A=/\((?:timers\.js):\d+:\d+\)/,R=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,j=null,I=null,L=!1,D=!(0==E.env("BLUEBIRD_DEBUG")||!E.env("BLUEBIRD_DEBUG")&&"development"!==E.env("NODE_ENV")),N=!(0==E.env("BLUEBIRD_WARNINGS")||!D&&!E.env("BLUEBIRD_WARNINGS")),B=!(0==E.env("BLUEBIRD_LONG_STACK_TRACES")||!D&&!E.env("BLUEBIRD_LONG_STACK_TRACES")),F=0!=E.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(N||!!E.env("BLUEBIRD_W_FORGOTTEN_RETURN"));a.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},a.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},a.prototype._notifyUnhandledRejectionIsHandled=function(){g("rejectionHandled",_,void 0,this)},a.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},a.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},a.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),g("unhandledRejection",k,e,this)}},a.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},a.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},a.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)},a.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},a.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},a.prototype._isRejectionUnhandled=function(){return 0<(1048576&this._bitField)},a.prototype._warn=function(e,t,n){return f(e,t,n||this)},a.onPossiblyUnhandledRejection=function(e){var t=T();k="function"==typeof e?null===t?e:E.domainBind(t,e):void 0},a.onUnhandledRejectionHandled=function(e){var t=T();_="function"==typeof e?null===t?e:E.domainBind(t,e):void 0};var V=function(){};a.longStackTraces=function(){if(C.haveItemsQueued()&&!Z.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Z.longStackTraces&&b()){var e=a.prototype._captureStackTrace,t=a.prototype._attachExtraTrace;Z.longStackTraces=!0,V=function(){if(C.haveItemsQueued()&&!Z.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");a.prototype._captureStackTrace=e,a.prototype._attachExtraTrace=t,n.deactivateLongStackTraces(),C.enableTrampoline(),Z.longStackTraces=!1},a.prototype._captureStackTrace=d,a.prototype._attachExtraTrace=h,n.activateLongStackTraces(),C.disableTrampolineIfNecessary()}},a.hasLongStackTraces=function(){return Z.longStackTraces&&b()};var z=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return E.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!E.global.dispatchEvent(n)}}if("function"==typeof Event){e=new Event("CustomEvent");return E.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!E.global.dispatchEvent(n)}}return(e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),E.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!E.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),H=E.isNode?function(){return process.emit.apply(process,arguments)}:E.global?function(e){var t="on"+e.toLowerCase(),n=E.global[t];return!!n&&(n.apply(E.global,[].slice.call(arguments,1)),!0)}:function(){return!1},U={promiseCreated:e,promiseFulfilled:e,promiseRejected:e,promiseResolved:e,promiseCancelled:e,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:e},q=function(e){var t=!1;try{t=H.apply(null,arguments)}catch(e){C.throwLater(e),t=!0}var n=!1;try{n=z(e,U[e].apply(null,arguments))}catch(e){C.throwLater(e),n=!0}return n||t};a.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?a.longStackTraces():!e.longStackTraces&&a.hasLongStackTraces()&&V()),"warnings"in e){var t=e.warnings;Z.warnings=!!t,F=Z.warnings,E.isObject(t)&&"wForgottenReturn"in t&&(F=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!Z.cancellation){if(C.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");a.prototype._clearCancellationData=u,a.prototype._propagateFrom=c,a.prototype._onCancel=s,a.prototype._setOnCancel=l,a.prototype._attachCancellationCallback=o,a.prototype._execute=i,W=c,Z.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!Z.monitoring?(Z.monitoring=!0,a.prototype._fireEvent=q):!e.monitoring&&Z.monitoring&&(Z.monitoring=!1,a.prototype._fireEvent=r)),a},a.prototype._fireEvent=r,a.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},a.prototype._onCancel=function(){},a.prototype._setOnCancel=function(e){},a.prototype._attachCancellationCallback=function(e){},a.prototype._captureStackTrace=function(){},a.prototype._attachExtraTrace=function(){},a.prototype._clearCancellationData=function(){},a.prototype._propagateFrom=function(e,t){};var W=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)},G=function(){return!1},Y=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;E.inherits(x,Error),(n.CapturedTrace=x).prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;for(r=(e=this._length=r)-1;0<=r;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<e;++r){var a=n[t[r].stack];if(void 0!==a&&a!==r){0<a&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var s=0<r?t[r-1]:this;a<e-1?(s._parent=t[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var l=s._length+1,u=r-2;0<=u;--u)t[u]._length=l,l++;return}}}},x.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=v(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(p(i.stack.split("\n"))),i=i._parent;(function(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],a=-1,s=r.length-1;0<=s;--s)if(r[s]===o){a=s;break}for(s=a;0<=s;--s){var l=r[s];if(t[i]!==l)break;t.pop(),i--}t=r}})(r),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(r),E.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,r)),E.notEnumerableProp(e,"__stackCleaned__",!0)}};var X=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():y(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,j=e,I=t;var n=Error.captureStackTrace;return G=function(e){return P.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&0<=i.stack.split("\n")[0].indexOf("stackDetection@"))return j=/@/,I=t,L=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){r="stack"in e}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(I=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?y(t):t.toString()},null):(j=e,I=t,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(S=function(e){console.warn(e)},E.isNode&&process.stderr.isTTY?S=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:E.isNode||"string"!=typeof(new Error).stack||(S=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var Z={warnings:N,longStackTraces:!1,cancellation:!1,monitoring:!1};return B&&a.longStackTraces(),{longStackTraces:function(){return Z.longStackTraces},warnings:function(){return Z.warnings},cancellation:function(){return Z.cancellation},monitoring:function(){return Z.monitoring},propagateFromFunction:function(){return W},boundValueFunction:function(){return t},checkForgottenReturns:function(e,t,n,r,i){if(void 0===e&&null!==t&&F){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),l=p(s),u=l.length-1;0<=u;--u){var c=l[u];if(!A.test(c)){var d=c.match(R);d&&(o="at "+d[1]+":"+d[2]+":"+d[3]+" ");break}}if(0<l.length){var h=l[0];for(u=0;u<s.length;++u)if(s[u]===h){0<u&&(a="\n"+s[u-1]);break}}}var f="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(f,!0,t)}},setBounds:function(e,t){if(b()){for(var n,r,i=e.stack.split("\n"),o=t.stack.split("\n"),a=-1,s=-1,l=0;l<i.length;++l)if(u=w(i[l])){n=u.fileName,a=u.line;break}for(l=0;l<o.length;++l){var u;if(u=w(o[l])){r=u.fileName,s=u.line;break}}a<0||s<0||!n||!r||n!==r||s<=a||(G=function(e){if(P.test(e))return!0;var t=w(e);return!!(t&&t.fileName===n&&a<=t.line&&t.line<=s)})}},warn:f,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),f(n)},CapturedTrace:x,fireDomEvent:z,fireGlobalEvent:H}}},{"./errors":9,"./util":21}],8:[function(e,t,n){"use strict";t.exports=function(n){function r(){return this.value}function i(){throw this.reason}n.prototype.return=n.prototype.thenReturn=function(e){return e instanceof n&&e.suppressUnhandledRejections(),this._then(r,void 0,void 0,{value:e},void 0)},n.prototype.throw=n.prototype.thenThrow=function(e){return this._then(i,void 0,void 0,{reason:e},void 0)},n.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,i,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,function(){throw t})},n.prototype.catchReturn=function(e){if(arguments.length<=1)return e instanceof n&&e.suppressUnhandledRejections(),this._then(void 0,r,void 0,{value:e},void 0);var t=arguments[1];t instanceof n&&t.suppressUnhandledRejections();return this.caught(e,function(){return t})}}},{}],9:[function(e,t,n){"use strict";function r(t,n){function r(e){return this instanceof r?(d(this,"message","string"==typeof e?e:n),d(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new r(e)}return c(r,Error),r}function i(e){return this instanceof i?(d(this,"name","OperationalError"),d(this,"message",e),this.cause=e,this.isOperational=!0,void(e instanceof Error?(d(this,"message",e.message),d(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(e)}var o,a,s=e("./es5"),l=s.freeze,u=e("./util"),c=u.inherits,d=u.notEnumerableProp,h=r("Warning","warning"),f=r("CancellationError","cancellation error"),p=r("TimeoutError","timeout error"),v=r("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(e){o=r("TypeError","type error"),a=r("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(v.prototype[m[g]]=Array.prototype[m[g]]);s.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var y=0;v.prototype.toString=function(){var e=Array(4*y+1).join(" "),t="\n"+e+"AggregateError of:\n";y++,e=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];t+=(r=i.join("\n"))+"\n"}return y--,t},c(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=l({CancellationError:f,TimeoutError:p,OperationalError:i,RejectionError:i,AggregateError:v}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5":10,"./util":21}],10:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t};t.exports={isArray:function(e){try{return"[object Array]"===o.call(e)}catch(e){return!1}},keys:s,names:s,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return a}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],11:[function(e,t,n){"use strict";t.exports=function(s,a,l){function i(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function u(e){this.finallyHandler=e}function c(e,t){return null!=e.cancelPromise&&(1<arguments.length?e.cancelPromise._reject(t):e.cancelPromise._cancel(),!(e.cancelPromise=null))}function d(){return f.call(this,this.promise._target()._settledValue())}function h(e){return c(this,e)?void 0:(m.e=e,m)}function f(e){var t=this.promise,n=this.handler;if(!this.called){this.called=!0;var r=this.isFinallyHandler()?n.call(t._boundValue()):n.call(t._boundValue(),e);if(r===l)return r;if(void 0!==r){t._setReturnedNonUndefined();var i=a(r,t);if(i instanceof s){if(null!=this.cancelPromise){if(i._isCancelled()){var o=new v("late cancellation observer");return t._attachExtraTrace(o),m.e=o,m}i.isPending()&&i._attachCancellationCallback(new u(this))}return i._then(d,h,void 0,this,void 0)}}}return t.isRejected()?(c(this),m.e=e,m):(c(this),e)}var p=e("./util"),v=s.CancellationError,m=p.errorObj,g=e("./catch_filter")(l);return i.prototype.isFinallyHandler=function(){return 0===this.type},u.prototype._resultCancelled=function(){c(this.finallyHandler)},s.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new i(this,t,e),void 0)},s.prototype.lastly=s.prototype.finally=function(e){return this._passThrough(e,0,f,f)},s.prototype.tap=function(e){return this._passThrough(e,1,f)},s.prototype.tapCatch=function(e){var t=arguments.length;if(1===t)return this._passThrough(e,1,void 0,f);var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var o=arguments[n];if(!p.isObject(o))return s.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+p.classString(o)));r[i++]=o}r.length=i;var a=arguments[n];return this._passThrough(g(r,a,this),1,void 0,f)},i}},{"./catch_filter":5,"./util":21}],12:[function(s,e,t){"use strict";e.exports=function(e,i,t,n,r,o){var a=s("./util");a.canEvaluate,a.tryCatch,a.errorObj,e.join=function(){var e,t=arguments.length-1;0<t&&"function"==typeof arguments[t]&&(e=arguments[t]);var n=[].slice.call(arguments);e&&n.pop();var r=new i(n).promise();return void 0!==e?r.spread(e):r}}},{"./util":21}],13:[function(t,e,n){"use strict";e.exports=function(a,s,e,l,u){var c=t("./util"),d=c.tryCatch;a.method=function(r){if("function"!=typeof r)throw new a.TypeError("expecting a function but got "+c.classString(r));return function(){var e=new a(s);e._captureStackTrace(),e._pushContext();var t=d(r).apply(this,arguments),n=e._popContext();return u.checkForgottenReturns(t,n,"Promise.method",e),e._resolveFromSyncValue(t),e}},a.attempt=a.try=function(e){if("function"!=typeof e)return l("expecting a function but got "+c.classString(e));var t,n=new a(s);if(n._captureStackTrace(),n._pushContext(),1<arguments.length){u.deprecated("calling Promise.try with more than 1 argument");var r=arguments[1],i=arguments[2];t=c.isArray(r)?d(e).apply(i,r):d(e).call(i,r)}else t=d(e)();var o=n._popContext();return u.checkForgottenReturns(t,o,"Promise.try",n),n._resolveFromSyncValue(t),n},a.prototype._resolveFromSyncValue=function(e){e===c.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":21}],14:[function(e,t,n){"use strict";function a(e){var t,n;if((n=e)instanceof Error&&c.getPrototypeOf(n)===Error.prototype){(t=new u(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=c.keys(e),i=0;i<r.length;++i){var o=r[i];d.test(o)||(t[o]=e[o])}return t}return s.markAsOriginatingFromRejection(e),e}var s=e("./util"),l=s.maybeWrapAsError,u=e("./errors").OperationalError,c=e("./es5"),d=/^(?:name|message|stack|cause)$/;t.exports=function(i,o){return function(e,t){if(null!==i){if(e){var n=a(l(e));i._attachExtraTrace(n),i._reject(n)}else if(o){var r=[].slice.call(arguments,1);i._fulfill(r)}else i._fulfill(t);i=null}}}},{"./errors":9,"./es5":10,"./util":21}],15:[function(M,P,e){"use strict";P.exports=function(){function s(){}function f(e){e!==y&&function(e,t){if(null==e||e.constructor!==f)throw new d("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new d("expecting a function but got "+v.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function e(e){this.promise._resolveCallback(e)}function t(e){this.promise._rejectCallback(e,!1)}function n(e){var t=new f(y);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var p,l=function(){return new d("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},u=function(){return new f.PromiseInspection(this._target())},a=function(e){return f.reject(new d(e))},c={},v=M("./util");p=v.isNode?function(){var e=process.domain;return void 0===e&&(e=null),e}:function(){return null},v.notEnumerableProp(f,"_getDomain",p);var r=M("./es5"),i=M("./async"),m=new i;r.defineProperty(f,"_async",{value:m});var o=M("./errors"),d=f.TypeError=o.TypeError;f.RangeError=o.RangeError;var g=f.CancellationError=o.CancellationError;f.TimeoutError=o.TimeoutError,f.OperationalError=o.OperationalError,f.RejectionError=o.OperationalError,f.AggregateError=o.AggregateError;var y=function(){},h={},b={},w=M("./thenables")(f,y),x=M("./promise_array")(f,y,w,a,s),_=M("./context")(f),k=(_.create,M("./debuggability")(f,_)),S=(k.CapturedTrace,M("./finally")(f,w,b)),T=M("./catch_filter")(b),C=M("./nodeback"),O=v.errorObj,E=v.tryCatch;return f.prototype.toString=function(){return"[object Promise]"},f.prototype.caught=f.prototype.catch=function(e){var t=arguments.length;if(1<t){var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var o=arguments[n];if(!v.isObject(o))return a("Catch statement predicate: expecting an object but got "+v.classString(o));r[i++]=o}return r.length=i,e=arguments[n],this.then(void 0,T(r,e,this))}return this.then(void 0,e)},f.prototype.reflect=function(){return this._then(u,u,void 0,this,void 0)},f.prototype.then=function(e,t){if(k.warnings()&&0<arguments.length&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+v.classString(e);1<arguments.length&&(n+=", "+v.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},f.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},f.prototype.spread=function(e){return"function"!=typeof e?a("expecting a function but got "+v.classString(e)):this.all()._then(e,void 0,void 0,h,void 0)},f.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},f.prototype.all=function(){return 0<arguments.length&&this._warn(".all() was passed arguments but it does not take any"),new x(this).promise()},f.prototype.error=function(e){return this.caught(v.originatesFromRejection,e)},f.getNewLibraryCopy=P.exports,f.is=function(e){return e instanceof f},f.fromNode=f.fromCallback=function(e){var t=new f(y);t._captureStackTrace();var n=1<arguments.length&&!!Object(arguments[1]).multiArgs,r=E(e)(C(t,n));return r===O&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},f.all=function(e){return new x(e).promise()},f.resolve=f.fulfilled=f.cast=function(e){var t=w(e);return t instanceof f||((t=new f(y))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},f.reject=f.rejected=function(e){var t=new f(y);return t._captureStackTrace(),t._rejectCallback(e,!0),t},f.setScheduler=function(e){if("function"!=typeof e)throw new d("expecting a function but got "+v.classString(e));return m.setScheduler(e)},f.prototype._then=function(e,t,n,r,i){var o=void 0!==i,a=o?i:new f(y),s=this._target(),l=s._bitField;o||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():s===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var u=p();if(0!=(50397184&l)){var c,d,h=s._settlePromiseCtx;0!=(33554432&l)?(d=s._rejectionHandler0,c=e):0!=(16777216&l)?(d=s._fulfillmentHandler0,c=t,s._unsetRejectionIsUnhandled()):(h=s._settlePromiseLateCancellationObserver,d=new g("late cancellation observer"),s._attachExtraTrace(d),c=t),m.invoke(h,s,{handler:null===u?c:"function"==typeof c&&v.domainBind(u,c),promise:a,receiver:r,value:d})}else s._addCallbacks(e,t,a,r,u);return a},f.prototype._length=function(){return 65535&this._bitField},f.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},f.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},f.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},f.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},f.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},f.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},f.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},f.prototype._isFinal=function(){return 0<(4194304&this._bitField)},f.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},f.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},f.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},f.prototype._setAsyncGuaranteed=function(){m.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},f.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];return t===c?void 0:void 0===t&&this._isBound()?this._boundValue():t},f.prototype._promiseAt=function(e){return this[4*e-4+2]},f.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},f.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},f.prototype._boundValue=function(){},f.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=c),this._addCallbacks(t,n,r,i,null)},f.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=c),this._addCallbacks(n,r,i,o,null)},f.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(65531<=o&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:v.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:v.domainBind(i,t));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof e&&(this[a+0]=null===i?e:v.domainBind(i,e)),"function"==typeof t&&(this[a+1]=null===i?t:v.domainBind(i,t))}return this._setLength(o+1),o},f.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},f.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(l(),!1);var n=w(e,this);if(!(n instanceof f))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(l());var i=r._bitField;if(0==(50397184&i)){var o=this._length();0<o&&r._migrateCallback0(this);for(var a=1;a<o;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&i))this._fulfill(r._value());else if(0!=(16777216&i))this._reject(r._reason());else{var s=new g("late cancellation observer");r._attachExtraTrace(s),this._reject(s)}}},f.prototype._rejectCallback=function(e,t,n){var r=v.ensureErrorObject(e),i=r===e;if(!i&&!n&&k.warnings()){var o="a promise was rejected with a non-error: "+v.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},f.prototype._resolveFromExecutor=function(e){if(e!==y){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},f.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),t===h?n&&"number"==typeof n.length?o=E(e).apply(this._boundValue(),n):(o=O).e=new d("cannot .spread() a non-array: "+v.classString(n)):o=E(e).call(t,n);var a=r._popContext();0==(65536&(i=r._bitField))&&(o===b?r._reject(n):o===O?r._rejectCallback(o.e,!1):(k.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},f.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},f.prototype._followee=function(){return this._rejectionHandler0},f.prototype._setFollowee=function(e){this._rejectionHandler0=e},f.prototype._settlePromise=function(e,t,n,r){var i=e instanceof f,o=this._bitField,a=0!=(134217728&o);0!=(65536&o)?(i&&e._invokeInternalOnCancel(),n instanceof S&&n.isFinallyHandler()?(n.cancelPromise=e,E(t).call(n,r)===O&&e._reject(O.e)):t===u?e._fulfill(u.call(n)):n instanceof s?n._promiseCancelled(e):i||e instanceof x?e._cancel():n.cancel()):"function"==typeof t?i?(a&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,r,e)):t.call(n,r,e):n instanceof s?n._isResolved()||(0!=(33554432&o)?n._promiseFulfilled(r,e):n._promiseRejected(r,e)):i&&(a&&e._setAsyncGuaranteed(),0!=(33554432&o)?e._fulfill(r):e._reject(r))},f.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"==typeof t?n instanceof f?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof f&&n._reject(i)},f.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},f.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},f.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},f.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,0<(65535&t)&&(0!=(134217728&t)?this._settlePromises():m.settlePromises(this))}},f.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16))return this._setRejected(),this._fulfillmentHandler0=e,this._isFinal()?m.fatalError(e,v.isNode):void(0<(65535&t)?m.settlePromises(this):this._ensurePossibleRejectionHandled())},f.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},f.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},f.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(0<t){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},f.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},f.defer=f.pending=function(){return k.deprecated("Promise.defer","new Promise"),{promise:new f(y),resolve:e,reject:t}},v.notEnumerableProp(f,"_makeSelfResolutionError",l),M("./method")(f,y,w,a,k),M("./bind")(f,y,w,k),M("./cancel")(f,x,a,k),M("./direct_resolve")(f),M("./synchronous_inspection")(f),M("./join")(f,x,w,y,m,p),(f.Promise=f).version="3.5.1",v.toFastProperties(f),v.toFastProperties(f.prototype),n({a:1}),n({b:2}),n({c:3}),n(1),n(function(){}),n(void 0),n(!1),n(new f(y)),k.setBounds(i.firstLineError,v.lastLineError),f}},{"./async":1,"./bind":2,"./cancel":4,"./catch_filter":5,"./context":6,"./debuggability":7,"./direct_resolve":8,"./errors":9,"./es5":10,"./finally":11,"./join":12,"./method":13,"./nodeback":14,"./promise_array":16,"./synchronous_inspection":19,"./thenables":20,"./util":21}],16:[function(r,e,t){"use strict";e.exports=function(s,n,l,a,e){function t(e){var t=this._promise=new s(n);e instanceof s&&t._propagateFrom(e,3),t._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var u=r("./util");return u.isArray,u.inherits(t,e),t.prototype.length=function(){return this._length},t.prototype.promise=function(){return this._promise},t.prototype._init=function e(t,n){var r=l(this._values,this._promise);if(r instanceof s){var i=(r=r._target())._bitField;if(this._values=r,0==(50397184&i))return this._promise._setAsyncGuaranteed(),r._then(e,this._reject,void 0,this,n);if(0==(33554432&i))return 0!=(16777216&i)?this._reject(r._reason()):this._cancel();r=r._value()}if(null!==(r=u.asArray(r)))return 0===r.length?void(-5===n?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(n))):void this._iterate(r);var o=a("expecting an array or an iterable object but got "+u.classString(r)).reason();this._promise._rejectCallback(o,!1)},t.prototype._iterate=function(e){var t=this.getActualLength(e.length);this._length=t,this._values=this.shouldCopyValues()?new Array(t):this._values;for(var n=this._promise,r=!1,i=null,o=0;o<t;++o){var a=l(e[o],n);a instanceof s?i=(a=a._target())._bitField:i=null,r?null!==i&&a.suppressUnhandledRejections():null!==i?0==(50397184&i)?(a._proxy(this,o),this._values[o]=a):r=0!=(33554432&i)?this._promiseFulfilled(a._value(),o):0!=(16777216&i)?this._promiseRejected(a._reason(),o):this._promiseCancelled(o):r=this._promiseFulfilled(a,o)}r||n._setAsyncGuaranteed()},t.prototype._isResolved=function(){return null===this._values},t.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},t.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},t.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},t.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},t.prototype._promiseCancelled=function(){return this._cancel(),!0},t.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},t.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof s)e.cancel();else for(var t=0;t<e.length;++t)e[t]instanceof s&&e[t].cancel()}},t.prototype.shouldCopyValues=function(){return!0},t.prototype.getActualLength=function(e){return e},t}},{"./util":21}],17:[function(e,t,n){"use strict";function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},r.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+t],e[o+t]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=r},{}],18:[function(e,t,n){"use strict";var r,i=e("./util"),o=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var a=global.setImmediate,s=process.nextTick;r=i.isRecentNode?function(e){a.call(global,e)}:function(e){s.call(process,e)}}else if("function"==typeof o&&"function"==typeof o.resolve){var l=o.resolve();r=function(e){l.then(e)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var n=document.createElement("div"),r={attributes:!0},i=!1,o=document.createElement("div");new MutationObserver(function(){n.classList.toggle("foo"),i=!1}).observe(o,r);return function(e){var t=new MutationObserver(function(){t.disconnect(),e()});t.observe(n,r),i||(i=!0,o.classList.toggle("foo"))}}();t.exports=r},{"./util":21}],19:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],20:[function(e,t,n){"use strict";t.exports=function(s,l){var u=e("./util"),c=u.errorObj,i=u.isObject,o={}.hasOwnProperty;return function(e,t){if(i(e)){if(e instanceof s)return e;var n=function(e){try{return e.then}catch(e){return c.e=e,c}}(e);if(n===c){t&&t._pushContext();var r=s.reject(n.e);return t&&t._popContext(),r}if("function"==typeof n)return function(e){try{return o.call(e,"_promise0")}catch(e){return!1}}(e)?(r=new s(l),e._then(r._fulfill,r._reject,void 0,r,null),r):function(e,t,n){var r=new s(l),i=r;n&&n._pushContext(),r._captureStackTrace(),n&&n._popContext();var o=!0,a=u.tryCatch(t).call(e,function(e){r&&(r._resolveCallback(e),r=null)},function(e){r&&(r._rejectCallback(e,o,!0),r=null)});return o=!1,r&&a===c&&(r._rejectCallback(a.e,!0,!0),r=null),i}(e,n,t)}return e}}},{"./util":21}],21:[function(e,t,n){"use strict";function r(){try{var e=c;return c=null,e.apply(this,arguments)}catch(e){return f.e=e,f}}function i(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function o(e,t,n){if(i(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return d.defineProperty(e,t,r),e}function a(e){try{return e+""}catch(e){return"[no string representation]"}}function s(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function l(e){return s(e)&&d.propertyIsWritable(e,"stack")}function u(e){return{}.toString.call(e)}var c,d=e("./es5"),h="undefined"==typeof navigator,f={e:{}},p="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,v=function(){var i=[Array.prototype,Object.prototype,Function.prototype],s=function(e){for(var t=0;t<i.length;++t)if(i[t]===e)return!0;return!1};if(d.isES5){var l=Object.getOwnPropertyNames;return function(e){for(var t=[],n=Object.create(null);null!=e&&!s(e);){var r;try{r=l(e)}catch(e){return t}for(var i=0;i<r.length;++i){var o=r[i];if(!n[o]){n[o]=!0;var a=Object.getOwnPropertyDescriptor(e,o);null!=a&&null==a.get&&null==a.set&&t.push(o)}}e=d.getPrototypeOf(e)}return t}}var o={}.hasOwnProperty;return function(e){if(s(e))return[];var t=[];e:for(var n in e)if(o.call(e,n))t.push(n);else{for(var r=0;r<i.length;++r)if(o.call(i[r],n))continue e;t.push(n)}return t}}(),m=/this\s*\.\s*\S+\s*=/,g=/^[a-z$_][a-z$_0-9]*$/i,y="stack"in new Error?function(e){return l(e)?e:new Error(a(e))}:function(e){if(l(e))return e;try{throw new Error(a(e))}catch(e){return e}},b=function(e){return d.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var w="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};b=function(e){return d.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?w(e):null}}var x,_="undefined"!=typeof process&&"[object process]"===u(process).toLowerCase(),k="undefined"!=typeof process&&void 0!==process.env,S={isClass:function(e){try{if("function"==typeof e){var t=d.names(e.prototype),n=d.isES5&&1<t.length,r=0<t.length&&!(1===t.length&&"constructor"===t[0]),i=m.test(e+"")&&0<d.names(e).length;if(n||r||i)return!0}return!1}catch(e){return!1}},isIdentifier:function(e){return g.test(e)},inheritedDataKeys:v,getDataPropertyOrDefault:function(e,t,n){if(!d.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0},thrower:function(e){throw e},isArray:d.isArray,asArray:b,notEnumerableProp:o,isPrimitive:i,isObject:function(e){return"function"==typeof e||"object"==typeof e&&null!==e},isError:s,canEvaluate:h,errorObj:f,tryCatch:function(e){return c=e,r},inherits:function(t,n){function e(){for(var e in this.constructor=t,(this.constructor$=n).prototype)r.call(n.prototype,e)&&"$"!==e.charAt(e.length-1)&&(this[e+"$"]=n.prototype[e])}var r={}.hasOwnProperty;return e.prototype=n.prototype,t.prototype=new e,t.prototype},withAppended:function(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i},maybeWrapAsError:function(e){return i(e)?new Error(a(e)):e},toFastProperties:function(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e},filledRange:function(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r},toString:a,canAttachTrace:l,ensureErrorObject:y,originatesFromRejection:function(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)},markAsOriginatingFromRejection:function(e){try{o(e,"isOperational",!0)}catch(e){}},classString:u,copyDescriptors:function(e,t,n){for(var r=d.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{d.defineProperty(t,o,d.getDescriptor(e,o))}catch(e){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:_,hasEnvVariables:k,env:function(e){return k?process.env[e]:void 0},global:p,getNativePromise:function(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}},domainBind:function(e,t){return e.bind(t)}};S.isRecentNode=S.isNode&&(0===(x=process.versions.node.split(".").map(Number))[0]&&10<x[1]||0<x[0]),S.isNode&&S.toFastProperties(process);try{throw new Error}catch(e){S.lastLineError=e}t.exports=S},{"./es5":10}]},{},[3])(3)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise),Promise.config({warnings:{wForgottenReturn:!1}}),function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.5",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){var n;if(e)for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}function eachReverse(e,t){var n;if(e)for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(n,e,r,i){return e&&eachProp(e,function(e,t){!r&&hasProp(n,t)||(!i||"object"!=typeof e||!e||isArray(e)||isFunction(e)||e instanceof RegExp?n[t]=e:(n[t]||(n[t]={}),mixin(n[t],e,r,i)))}),n}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,r){var i,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(a=o.context),(i=getOwn(contexts,a))||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(t){req[t]=function(){var e=contexts[defContextName];return e.require[t].apply(e,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(t,n,r){var e,i=t&&t.config||{};if(isBrowser)return(e=req.createNode(i,n,r)).setAttribute("data-requirecontext",t.contextName),e.setAttribute("data-requiremodule",n),!e.attachEvent||e.attachEvent.toString&&e.attachEvent.toString().indexOf("[native code")<0||isOpera?(e.addEventListener("load",t.onScriptLoad,!1),e.addEventListener("error",t.onScriptError,!1)):(useInteractive=!0,e.attachEvent("onreadystatechange",t.onScriptLoad)),e.src=r,i.onNodeCreated&&i.onNodeCreated(e,i,n,r),currentlyAddingScript=e,baseElement?head.insertBefore(e,baseElement):head.appendChild(e),currentlyAddingScript=null,e;if(isWebWorker)try{setTimeout(function(){},0),importScripts(r),t.completeLoad(n)}catch(e){t.onError(makeError("importscripts","importScripts failed for "+n+" at "+r,e,[n]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(mainScript=(src=mainScript.split("/")).pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,n,t){var r,i;"string"!=typeof e&&(t=n,n=e,e=null),isArray(n)||(t=n,n=null),!n&&isFunction(t)&&(n=[],t.length&&(t.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,t){n.push(t)}),n=(1===t.length?["require"]:["require","exports","module"]).concat(n))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript())&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")]),i?(i.defQueue.push([e,n,t]),i.defQueueMap[e]=!0):globalDefQueue.push([e,n,t])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(l){var n,e,f,u,c,m={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},d={},h={},r={},p=[],v={},i={},g={},y=1,b=1;function w(e,t,n){var r,i,o,a,s,l,u,c,d,h,f=t&&t.split("/"),p=m.map,v=p&&p["*"];if(e&&(l=(e=e.split("/")).length-1,m.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&f&&(e=f.slice(0,f.length-1).concat(e)),function(e){var t,n;for(t=0;t<e.length;t++)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;0<t&&(e.splice(t-1,2),t-=2)}}(e),e=e.join("/")),n&&p&&(f||v)){e:for(o=(i=e.split("/")).length;0<o;o-=1){if(s=i.slice(0,o).join("/"),f)for(a=f.length;0<a;a-=1)if((r=getOwn(p,f.slice(0,a).join("/")))&&(r=getOwn(r,s))){u=r,c=o;break e}!d&&v&&getOwn(v,s)&&(d=getOwn(v,s),h=o)}!u&&d&&(u=d,c=h),u&&(i.splice(0,c,u),e=i.join("/"))}return getOwn(m.pkgs,e)||e}function x(t){isBrowser&&each(scripts(),function(e){if(e.getAttribute("data-requiremodule")===t&&e.getAttribute("data-requirecontext")===f.contextName)return e.parentNode.removeChild(e),!0})}function _(e){var t=getOwn(m.paths,e);if(t&&isArray(t)&&1<t.length)return t.shift(),f.require.undef(e),f.makeRequire(null,{skipMap:!0})([e]),!0}function k(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e,t,n,r){var i,o,a,s,l=null,u=t?t.name:null,c=e,d=!0,h="";return e||(d=!1,e="_@r"+(y+=1)),l=(s=k(e))[0],e=s[1],l&&(l=w(l,u,r),o=getOwn(v,l)),e&&(l?h=n?e:o&&o.normalize?o.normalize(e,function(e){return w(e,u,r)}):-1===e.indexOf("!")?w(e,u,r):e:(l=(s=k(h=w(e,u,r)))[0],h=s[1],n=!0,i=f.nameToUrl(h))),{prefix:l,name:h,parentMap:t,unnormalized:!!(a=!l||o||n?"":"_unnormalized"+(b+=1)),url:i,originalName:c,isDefine:d,id:(l?l+"!"+h:h)+a}}function T(e){var t=e.id,n=getOwn(d,t);return n||(n=d[t]=new f.Module(e)),n}function C(e,t,n){var r=e.id,i=getOwn(d,r);!hasProp(v,r)||i&&!i.defineEmitComplete?(i=T(e)).error&&"error"===t?n(i.error):i.on(t,n):"defined"===t&&n(v[r])}function O(n,e){var t=n.requireModules,r=!1;e?e(n):(each(t,function(e){var t=getOwn(d,e);t&&(t.error=n,t.events.error&&(r=!0,t.emit("error",n)))}),r||req.onError(n))}function E(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(f.defQueueMap[t]=!0),p.push(e)}),globalDefQueue=[])}function M(e){delete d[e],delete h[e]}function P(){var e,r,t=1e3*m.waitSeconds,i=t&&f.startTime+t<(new Date).getTime(),o=[],a=[],s=!1,l=!0;if(!n){if(n=!0,eachProp(h,function(e){var t=e.map,n=t.id;if(e.enabled&&(t.isDefine||a.push(e),!e.error))if(!e.inited&&i)_(n)?s=r=!0:(o.push(n),x(n));else if(!e.inited&&e.fetched&&t.isDefine&&(s=!0,!t.prefix))return l=!1}),i&&o.length)return(e=makeError("timeout","Load timeout for modules: "+o,null,o)).contextName=f.contextName,O(e);l&&each(a,function(e){!function i(o,a,s){var e=o.map.id;o.error?o.emit("error",o.error):(a[e]=!0,each(o.depMaps,function(e,t){var n=e.id,r=getOwn(d,n);!r||o.depMatched[t]||s[n]||(getOwn(a,n)?(o.defineDep(t,v[n]),o.check()):i(r,a,s))}),s[e]=!0)}(e,{},{})}),i&&!r||!s||!isBrowser&&!isWebWorker||c||(c=setTimeout(function(){c=0,P()},50)),n=!1}}function a(e){hasProp(v,e[0])||T(S(e[0],null,!0)).init(e[1],e[2])}function o(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function s(e){var t=e.currentTarget||e.srcElement;return o(t,f.onScriptLoad,"load","onreadystatechange"),o(t,f.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function A(){var e;for(E();p.length;){if(null===(e=p.shift())[0])return O(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));a(e)}f.defQueueMap={}}return u={require:function(e){return e.require?e.require:e.require=f.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?v[e.map.id]=e.exports:e.exports=v[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(m.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},(e=function(e){this.events=getOwn(r,e.id)||{},this.map=e,this.shim=getOwn(m.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,f.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();f.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;i[e]||(i[e]=!0,f.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var t,e,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=f.execCb(n,o,r,i)}catch(e){t=e}else i=f.execCb(n,o,r,i);if(this.map.isDefine&&void 0===i&&((e=this.module)?i=e.exports:this.usingExports&&(i=this.exports)),t)return t.requireMap=this.map,t.requireModules=this.map.isDefine?[this.map.id]:null,t.requireType=this.map.isDefine?"define":"require",O(this.error=t)}else i=o;if(this.exports=i,this.map.isDefine&&!this.ignore&&(v[n]=i,req.onResourceLoad)){var a=[];each(this.depMaps,function(e){a.push(e.normalizedMap||e)}),req.onResourceLoad(f,this.map,a)}M(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(f.defQueueMap,n)||this.fetch()}},callPlugin:function(){var l=this.map,u=l.id,e=S(l.prefix);this.depMaps.push(e),C(e,"defined",bind(this,function(e){var o,t,n,r=getOwn(g,this.map.id),i=this.map.name,a=this.map.parentMap?this.map.parentMap.name:null,s=f.makeRequire(l.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(e.normalize&&(i=e.normalize(i,function(e){return w(e,a,!0)})||""),C(t=S(l.prefix+"!"+i,this.map.parentMap,!0),"defined",bind(this,function(e){this.map.normalizedMap=t,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((n=getOwn(d,t.id))&&(this.depMaps.push(t),this.events.error&&n.on("error",bind(this,function(e){this.emit("error",e)})),n.enable()))):r?(this.map.url=f.nameToUrl(r),void this.load()):((o=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,(this.error=e).requireModules=[u],eachProp(d,function(e){0===e.map.id.indexOf(u+"_unnormalized")&&M(e.map.id)}),O(e)}),o.fromText=bind(this,function(e,t){var n=l.name,r=S(n),i=useInteractive;t&&(e=t),i&&(useInteractive=!1),T(r),hasProp(m.config,u)&&(m.config[n]=m.config[u]);try{req.exec(e)}catch(e){return O(makeError("fromtexteval","fromText eval for "+u+" failed: "+e,e,[u]))}i&&(useInteractive=!0),this.depMaps.push(r),f.completeLoad(n),s([n],o)}),void e.load(l.name,s,o,m))})),f.enable(e,this),this.pluginMaps[e.id]=e},enable:function(){(h[this.map.id]=this).enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=S(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(u,e.id))return void(this.depExports[t]=i(this));this.depCount+=1,C(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?C(e,"error",bind(this,this.errback)):this.events.error&&C(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,r=d[n],hasProp(u,n)||!r||r.enabled||f.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(d,e.id);t&&!t.enabled&&f.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},(f={config:m,contextName:l,registry:d,defined:v,urlFetched:i,defQueue:p,defQueueMap:{},Module:e,makeModuleMap:S,nextTick:req.nextTick,onError:O,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var n=e.urlArgs;e.urlArgs=function(e,t){return(-1===t.indexOf("?")?"?":"&")+n}}var r=m.shim,i={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?(m[t]||(m[t]={}),mixin(m[t],e,!0,!0)):m[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(g[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=f.makeShimExports(e)),r[t]=e}),m.shim=r),e.packages&&each(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(m.paths[t]=e.location),m.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(d,function(e,t){e.inited||e.map.unnormalized||(e.map=S(t,null,!0))}),(e.deps||e.callback)&&f.require(e.deps||[],e.callback)},makeShimExports:function(t){return function(){var e;return t.init&&(e=t.init.apply(global,arguments)),e||t.exports&&getGlobal(t.exports)}},makeRequire:function(o,a){function s(e,t,n){var r,i;return a.enableBuildCallback&&t&&isFunction(t)&&(t.__requireJsBuild=!0),"string"==typeof e?isFunction(t)?O(makeError("requireargs","Invalid require call"),n):o&&hasProp(u,e)?u[e](d[o.id]):req.get?req.get(f,e,o,s):(r=S(e,o,!1,!0).id,hasProp(v,r)?v[r]:O(makeError("notloaded",'Module name "'+r+'" has not been loaded yet for context: '+l+(o?"":". Use require([])")))):(A(),f.nextTick(function(){A(),(i=T(S(null,o))).skipMap=a.skipMap,i.init(e,t,n,{enabled:!0}),P()}),s)}return a=a||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var t,n=e.lastIndexOf("."),r=e.split("/")[0];return-1!==n&&(!("."===r||".."===r)||1<n)&&(t=e.substring(n,e.length),e=e.substring(0,n)),f.nameToUrl(w(e,o&&o.id,!0),t,!0)},defined:function(e){return hasProp(v,S(e,o,!1,!0).id)},specified:function(e){return e=S(e,o,!1,!0).id,hasProp(v,e)||hasProp(d,e)}}),o||(s.undef=function(n){E();var e=S(n,o,!0),t=getOwn(d,n);t.undefed=!0,x(n),delete v[n],delete i[e.url],delete r[n],eachReverse(p,function(e,t){e[0]===n&&p.splice(t,1)}),delete f.defQueueMap[n],t&&(t.events.defined&&(r[n]=t.events),M(n))}),s},enable:function(e){getOwn(d,e.id)&&T(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(m.shim,e)||{},o=i.exports;for(E();p.length;){if(null===(n=p.shift())[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);a(n)}if(f.defQueueMap={},r=getOwn(d,e),!t&&!hasProp(v,e)&&r&&!r.inited){if(!(!m.enforceDefine||o&&getGlobal(o)))return _(e)?void 0:O(makeError("nodefine","No define call for "+e,null,[e]));a([e,i.deps||[],i.exportsFn])}P()},nameToUrl:function(e,t,n){var r,i,o,a,s,l,u=getOwn(m.pkgs,e);if(u&&(e=u),l=getOwn(g,e))return f.nameToUrl(l,t,n);if(req.jsExtRegExp.test(e))a=e+(t||"");else{for(r=m.paths,o=(i=e.split("/")).length;0<o;o-=1)if(s=getOwn(r,i.slice(0,o).join("/"))){isArray(s)&&(s=s[0]),i.splice(0,o,s);break}a=i.join("/"),a=("/"===(a+=t||(/^data\:|^blob\:|\?/.test(a)||n?"":".js")).charAt(0)||a.match(/^[\w\+\.\-]+:/)?"":m.baseUrl)+a}return m.urlArgs&&!/^blob\:/.test(a)?a+m.urlArgs(e,a):a},load:function(e,t){req.load(f,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=s(e);f.completeLoad(t.id)}},onScriptError:function(e){var n=s(e);if(!_(n.id)){var r=[];return eachProp(d,function(e,t){0!==t.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===n.id)return r.push(t),!0})}),O(makeError("scripterror",'Script error for "'+n.id+(r.length?'", needed by: '+r.join(", "):'"'),e,[n.id]))}}}).require=f.makeRequire(),f}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),_aureliaConfigureModuleLoader(),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("redux/redux.min",["exports"],t):t(e.Redux=e.Redux||{})}(this,function(e){"use strict";function p(e){return null==e?void 0===e?g:m:y&&y in Object(e)?function(e){var t=d.call(e,f),n=e[f];try{var r=!(e[f]=void 0)}catch(e){}var i=h.call(e);return r&&(t?e[f]=n:delete e[f]),i}(e):(t=e,v.call(t));var t}function s(e,t){return function(){return t(e.apply(void 0,arguments))}}function u(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var t,n,r,i,o="object"==typeof global&&global&&global.Object===Object&&global,a="object"==typeof self&&self&&self.Object===Object&&self,l=(o||a||Function("return this")()).Symbol,c=Object.prototype,d=c.hasOwnProperty,h=c.toString,f=l?l.toStringTag:void 0,v=Object.prototype.toString,m="[object Null]",g="[object Undefined]",y=l?l.toStringTag:void 0,b=(r=Object.getPrototypeOf,i=Object,function(e){return r(i(e))}),w="[object Object]",x=Function.prototype,_=Object.prototype,k=x.toString,S=_.hasOwnProperty,T=k.call(Object),C=("function"==typeof(n=("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()).Symbol)?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t),O={INIT:"@@redux/INIT"},E=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};e.createStore=function e(t,n,r){function i(){h===d&&(h=d.slice())}function o(){return c}function a(t){if("function"!=typeof t)throw Error("Expected listener to be a function.");var n=!0;return i(),h.push(t),function(){if(n){n=!1,i();var e=h.indexOf(t);h.splice(e,1)}}}function s(e){if(!function(e){if(null==(t=e)||"object"!=typeof t||p(e)!=w)return!1;var t,n=b(e);if(null===n)return!0;var r=S.call(n,"constructor")&&n.constructor;return"function"==typeof r&&r instanceof r&&k.call(r)==T}(e))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw Error("Reducers may not dispatch actions.");try{f=!0,c=u(c,e)}finally{f=!1}for(var t=d=h,n=0;t.length>n;n++)(0,t[n])();return e}var l;if("function"==typeof n&&void 0===r&&(r=n,n=void 0),void 0!==r){if("function"!=typeof r)throw Error("Expected the enhancer to be a function.");return r(e)(t,n)}if("function"!=typeof t)throw Error("Expected the reducer to be a function.");var u=t,c=n,d=[],h=d,f=!1;return s({type:O.INIT}),(l={dispatch:s,subscribe:a,getState:o,replaceReducer:function(e){if("function"!=typeof e)throw Error("Expected the nextReducer to be a function.");u=e,s({type:O.INIT})}})[C]=function(){var e,n=a;return(e={subscribe:function(e){function t(){e.next&&e.next(o())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return t(),{unsubscribe:n(t)}}})[C]=function(){return this},e},l},e.combineReducers=function(e){for(var t=Object.keys(e),f={},n=0;t.length>n;n++){var r=t[n];"function"==typeof e[r]&&(f[r]=e[r])}var i,p=Object.keys(f),v=void 0;try{i=f,Object.keys(i).forEach(function(e){var t=i[e];if(void 0===t(void 0,{type:O.INIT}))throw Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===t(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+O.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}catch(e){v=e}return function(){var e,t,n,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];if(v)throw v;for(var o=!1,a={},s=0;p.length>s;s++){var l=p[s],u=f[l],c=r[l],d=u(c,i);if(void 0===d){var h=(e=l,void 0,"Given action "+((n=(t=i)&&t.type)&&'"'+n+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');throw Error(h)}a[l]=d,o=o||d!==c}return o?a:r}},e.bindActionCreators=function(e,t){if("function"==typeof e)return s(e,t);if("object"!=typeof e||null===e)throw Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},i=0;n.length>i;i++){var o=n[i],a=e[o];"function"==typeof a&&(r[o]=s(a,t))}return r},e.applyMiddleware=function(){for(var e=arguments.length,l=Array(e),t=0;t<e;t++)l[t]=arguments[t];return function(s){return function(e,t,n){var r,i=s(e,t,n),o=i.dispatch,a={getState:i.getState,dispatch:function(e){return o(e)}};return r=l.map(function(e){return e(a)}),o=u.apply(void 0,r)(i.dispatch),E({},i,{dispatch:o})}}},e.compose=u,Object.defineProperty(e,"__esModule",{value:!0})}),define("redux",["redux/redux.min"],function(e){return e}),define("redux-undo/reducer",["require","exports","module","./debug","./actions","./helpers"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(v){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};b.set(e.debug);var m={initTypes:(0,x.parseActions)(e.initTypes,["@@redux-undo/INIT"]),limit:e.limit,filter:e.filter||function(){return!0},groupBy:e.groupBy||function(){return null},undoType:e.undoType||w.ActionTypes.UNDO,redoType:e.redoType||w.ActionTypes.REDO,jumpToPastType:e.jumpToPastType||w.ActionTypes.JUMP_TO_PAST,jumpToFutureType:e.jumpToFutureType||w.ActionTypes.JUMP_TO_FUTURE,jumpType:e.jumpType||w.ActionTypes.JUMP,clearHistoryType:Array.isArray(e.clearHistoryType)?e.clearHistoryType:[e.clearHistoryType||w.ActionTypes.CLEAR_HISTORY],neverSkipReducer:e.neverSkipReducer||!1,ignoreInitialState:e.ignoreInitialState||!1,syncFilter:e.syncFilter||!1},g=m.history;return function(){for(var e=arguments.length,t=Array(2<e?e-2:0),n=2;n<e;n++)t[n-2]=arguments[n];var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:g,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};b.start(i,r);var o=r;if(!g)if(b.log("history is uninitialized"),void 0===r){var a={type:w.ActionTypes.CLEAR_HISTORY},s=v.apply(void 0,[r,a].concat(t));o=k(s,m.ignoreInitialState),b.log("do not set initialState on probe actions")}else(0,x.isHistory)(r)?(o=g=m.ignoreInitialState?r:(0,x.newHistory)(r.past,r.present,r.future),b.log("initialHistory initialized: initialState is a history",g)):(o=g=k(r,m.ignoreInitialState),b.log("initialHistory initialized: initialState is not a history",g));var l,u=function(e){return m.neverSkipReducer?y({},e,{present:v.apply(void 0,[e.present,i].concat(t))}):e},c=void 0;switch(i.type){case void 0:return o;case m.undoType:return c=O(o,-1),b.log("perform undo"),b.end(c),u(c);case m.redoType:return c=O(o,1),b.log("perform redo"),b.end(c),u(c);case m.jumpToPastType:return c=C(o,i.index),b.log("perform jumpToPast to "+i.index),b.end(c),u(c);case m.jumpToFutureType:return c=T(o,i.index),b.log("perform jumpToFuture to "+i.index),b.end(c),u(c);case m.jumpType:return c=O(o,i.index),b.log("perform jump to "+i.index),b.end(c),u(c);case l=i.type,-1<m.clearHistoryType.indexOf(l)?l:!l:return c=k(o.present),b.log("perform clearHistory"),b.end(c),u(c);default:if(c=v.apply(void 0,[o.present,i].concat(t)),m.initTypes.some(function(e){return e===i.type}))return b.log("reset history due to init action"),b.end(g),g;if(o._latestUnfiltered===c)return o;var d="function"==typeof m.filter&&!m.filter(i,c,o),h=m.groupBy(i,c,o);if(d){var f=(0,x.newHistory)(o.past,c,o.future,o.group);return m.syncFilter||(f._latestUnfiltered=o._latestUnfiltered),b.log("filter ignored action, not storing it in past"),b.end(f),f}if(null!=h&&h===o.group){var p=(0,x.newHistory)(o.past,c,o.future,o.group);return b.log("groupBy grouped the action with the previous action"),b.end(p),p}return o=function(e,t,n,r){b.log("inserting",t),b.log("new free: ",n-S(e));var i=e.past,o=e._latestUnfiltered,a=n&&S(e)>=n,s=i.slice(a?1:0),l=null!=o?[].concat(_(s),[o]):s;return(0,x.newHistory)(l,t,[],r)}(o,c,m.limit,h),b.log("inserted new state into history"),b.end(o),o}}};var b=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("./debug")),w=e("./actions"),x=e("./helpers");function _(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function k(e,t){var n=(0,x.newHistory)([],e,[]);return t&&(n._latestUnfiltered=null),n}function S(e){return e.past.length+1}function T(e,t){if(t<0||t>=e.future.length)return e;var n=e.past,r=e.future,i=e._latestUnfiltered,o=[].concat(_(n),[i],_(r.slice(0,t))),a=r[t],s=r.slice(t+1);return(0,x.newHistory)(o,a,s)}function C(e,t){if(t<0||t>=e.past.length)return e;var n=e.past,r=e.future,i=e._latestUnfiltered,o=n.slice(0,t),a=[].concat(_(n.slice(t+1)),[i],_(r)),s=n[t];return(0,x.newHistory)(o,s,a)}function O(e,t){return 0<t?T(e,t-1):t<0?C(e,e.past.length+t):e}n.exports=t.default}),define("redux-undo/index",["require","exports","module","./actions","./helpers","./reducer"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("./actions");Object.defineProperty(t,"ActionTypes",{enumerable:!0,get:function(){return r.ActionTypes}}),Object.defineProperty(t,"ActionCreators",{enumerable:!0,get:function(){return r.ActionCreators}});var i=e("./helpers");Object.defineProperty(t,"parseActions",{enumerable:!0,get:function(){return i.parseActions}}),Object.defineProperty(t,"isHistory",{enumerable:!0,get:function(){return i.isHistory}}),Object.defineProperty(t,"distinctState",{enumerable:!0,get:function(){return i.distinctState}}),Object.defineProperty(t,"includeAction",{enumerable:!0,get:function(){return i.includeAction}}),Object.defineProperty(t,"excludeAction",{enumerable:!0,get:function(){return i.excludeAction}}),Object.defineProperty(t,"combineFilters",{enumerable:!0,get:function(){return i.combineFilters}}),Object.defineProperty(t,"groupByActionTypes",{enumerable:!0,get:function(){return i.groupByActionTypes}}),Object.defineProperty(t,"newHistory",{enumerable:!0,get:function(){return i.newHistory}});var o=e("./reducer");Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=o,e&&e.__esModule?e:{default:e}).default;var e}})}),define("redux-undo",["redux-undo/index"],function(e){return e}),define("redux-undo/helpers",["require","exports","module"],function(e,t,n){"use strict";function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(e)?e:"string"==typeof e?[e]:t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseActions=r,t.isHistory=function(e){return void 0!==e.present&&void 0!==e.future&&void 0!==e.past&&Array.isArray(e.future)&&Array.isArray(e.past)},t.distinctState=function(){return console.warn("distinctState is deprecated in beta4 and newer. The distinctState behavior is now default, which means only actions resulting in a new state are recorded. See https://github.com/omnidan/redux-undo#filtering-actions for more details."),function(){return!0}},t.includeAction=function(e){var t=r(e);return function(e){return 0<=t.indexOf(e.type)}},t.excludeAction=function(e){var t=r(e);return function(e){return t.indexOf(e.type)<0}},t.combineFilters=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(r,i){return function(e,t,n){return r(e,t,n)&&i(e,t,n)}},function(){return!0})},t.groupByActionTypes=function(e){var t=r(e);return function(e){return 0<=t.indexOf(e.type)?e.type:null}},t.newHistory=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{past:e,present:t,future:n,group:r,_latestUnfiltered:t,index:e.length,limit:e.length+n.length+1}}}),define("redux-undo/debug",["require","exports","module"],function(e,t,n){"use strict";function g(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var y=void 0,b=void 0,r="#9E9E9E",i="#03A9F4",w="#4CAF50";function x(e,t,n){return["%c"+e,"color: "+t+"; font-weight: bold",n]}t.set=function(e){y=e},t.start=function(e,t){b={header:[],prev:[],action:[],next:[],msgs:[]},y&&(console.group?(b.header=["%credux-undo","font-style: italic","action",e.type],b.action=x("action",i,e),b.prev=x("prev history",r,t)):(b.header=["redux-undo action",e.type],b.action=["action",e],b.prev=["prev history",t]))},t.end=function(e){var t,n,r,i,o,a,s,l,u,c,d,h,f,p,v,m;y&&(console.group?b.next=x("next history",w,e):b.next=["next history",e],h=(d=b).header,f=d.prev,p=d.next,v=d.action,m=d.msgs,console.group?((t=console).groupCollapsed.apply(t,g(h)),(n=console).log.apply(n,g(f)),(r=console).log.apply(r,g(v)),(i=console).log.apply(i,g(p)),(o=console).log.apply(o,g(m)),console.groupEnd()):((a=console).log.apply(a,g(h)),(s=console).log.apply(s,g(f)),(l=console).log.apply(l,g(v)),(u=console).log.apply(u,g(p)),(c=console).log.apply(c,g(m))))},t.log=function(){if(y){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];b.msgs=b.msgs.concat([].concat(t,["\n"]))}}}),define("redux-undo/actions",["require","exports","module"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.ActionTypes={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"};t.ActionCreators={undo:function(){return{type:r.UNDO}},redo:function(){return{type:r.REDO}},jumpToFuture:function(e){return{type:r.JUMP_TO_FUTURE,index:e}},jumpToPast:function(e){return{type:r.JUMP_TO_PAST,index:e}},jump:function(e){return{type:r.JUMP,index:e}},clearHistory:function(){return{type:r.CLEAR_HISTORY}}}}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("redux-thunk/redux-thunk",[],t):"object"==typeof exports?exports.ReduxThunk=t():e.ReduxThunk=t()}(this,function(){return function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,i),t.loaded=!0,t.exports}return i.m=n,i.c=r,i.p="",i(0)}([function(e,t,n){e.exports=n(1)},function(e,t){"use strict";function n(i){return function(e){var n=e.dispatch,r=e.getState;return function(t){return function(e){return"function"==typeof e?e(n,r,i):t(e)}}}}t.__esModule=!0;var r=n();r.withExtraArgument=n,t.default=r}])}),define("redux-thunk",["redux-thunk/redux-thunk"],function(e){return e}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("redux-persist/redux-persist",["exports"],t):t(e.ReduxPersist=e.ReduxPersist||{})}(this,function(e){"use strict";var r="reduxPersist:",w="persist/REHYDRATE",t="object"==typeof global&&global&&global.Object===Object&&global,n="object"==typeof self&&self&&self.Object===Object&&self,i=(t||n||Function("return this")()).Symbol,o=Object.prototype,a=o.hasOwnProperty,s=o.toString,l=i?i.toStringTag:void 0;var u=Object.prototype.toString;var c="[object Null]",d="[object Undefined]",h=i?i.toStringTag:void 0;function f(e){return null==e?void 0===e?d:c:h&&h in Object(e)?function(e){var t=a.call(e,l),n=e[l];try{var r=!(e[l]=void 0)}catch(e){}var i=s.call(e);return r&&(t?e[l]=n:delete e[l]),i}(e):(t=e,u.call(t));var t}var p,v,m=(p=Object.getPrototypeOf,v=Object,function(e){return p(v(e))});var g="[object Object]",y=Function.prototype,b=Object.prototype,x=y.toString,_=b.hasOwnProperty,k=x.call(Object);var S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function C(e){return!!e&&("object"===(void 0===e?"undefined":S(e))&&("function"!=typeof e.asMutable&&!!function(e){if(null==(t=e)||"object"!=typeof t||f(e)!=g)return!1;var t,n=m(e);if(null===n)return!0;var r=_.call(n,"constructor")&&n.constructor;return"function"==typeof r&&r instanceof r&&x.call(r)==k}(e)))}function O(t,n,r,i){var o=T({},r);return Object.keys(n).forEach(function(e){if(t.hasOwnProperty(e))if("object"!==S(t[e])||n[e]){if(t[e]!==r[e])return i&&console.log("redux-persist/autoRehydrate: sub state for key `%s` modified, skipping autoRehydrate.",e),void(o[e]=r[e]);C(n[e])&&C(t[e])?o[e]=T({},t[e],n[e]):o[e]=n[e],i&&console.log("redux-persist/autoRehydrate: key `%s`, rehydrated to ",e,o[e])}else i&&console.log("redux-persist/autoRehydrate: sub state for key `%s` is falsy but initial state is an object, skipping autoRehydrate.",e)}),o}var E,M="undefined"!=typeof global&&void 0!==global.setImmediate?function(e,t){return global.setImmediate(e,t)}:function(e,t){return setTimeout(e,t)};function P(t){if("object"!==("undefined"==typeof window?"undefined":S(window))||!(t in window))return!1;try{var e=window[t],n="redux-persist "+t+" test";e.setItem(n,"test"),e.getItem(n),e.removeItem(n)}catch(e){return console.warn("redux-persist "+t+" test failed, persistence will be disabled."),!1}return!0}function A(e){return"local"===e?P("localStorage")?window.localStorage:{getItem:E,setItem:E,removeItem:E,getAllKeys:E}:"session"===e?P("sessionStorage")?window.sessionStorage:{getItem:E,setItem:E,removeItem:E,getAllKeys:E}:void 0}E=function(){return console.error("redux-persist asyncLocalStorage requires a global localStorage object. Either use a different storage backend or if this is a universal redux application you probably should conditionally persist like so: https://gist.github.com/rt2zz/ac9eb396793f95ff3c3b"),null};var R=function(e,t){var o=A(e);return{getAllKeys:function(i){return new Promise(function(e,t){try{for(var n=[],r=0;r<o.length;r++)n.push(o.key(r));M(function(){i&&i(null,n),e(n)})}catch(e){i&&i(e),t(e)}})},getItem:function(r,i){return new Promise(function(e,t){try{var n=o.getItem(r);M(function(){i&&i(null,n),e(n)})}catch(e){i&&i(e),t(e)}})},setItem:function(n,r,i){return new Promise(function(e,t){try{o.setItem(n,r),M(function(){i&&i(null),e()})}catch(e){i&&i(e),t(e)}})},removeItem:function(n,r){return new Promise(function(e,t){try{o.removeItem(n),M(function(){r&&r(null),e()})}catch(e){r&&r(e),t(e)}})}}};function j(i,e){var o=i.storage,a=void 0!==i.keyPrefix?i.keyPrefix:r;if(Array.isArray(i))throw new Error("redux-persist: purgeStoredState requires config as a first argument (found array). An array of keys is the optional second argument.");if(!o)throw new Error("redux-persist: config.storage required in purgeStoredState");return void 0===e?new Promise(function(n,r){o.getAllKeys(function(e,t){e?(console.warn("redux-persist: error during purgeStoredState in storage.getAllKeys"),r(e)):n(j(i,t.filter(function(e){return 0===e.indexOf(a)}).map(function(e){return e.slice(a.length)})))})}):Promise.all(e.map(function(e){return o.removeItem(""+a+e,(t=e,function(e){e&&console.warn("Error storing data for key:",t,e)}));var t}))}var I,L=(function(e,t){function i(r,i){var o=[],a=[];return null==i&&(i=function(e,t){return o[0]===t?"[Circular ~]":"[Circular ~."+a.slice(0,o.indexOf(t)).join(".")+"]"}),function(e,t){if(0<o.length){var n=o.indexOf(this);~n?o.splice(n+1):o.push(this),~n?a.splice(n,1/0,e):a.push(e),~o.indexOf(t)&&(t=i.call(this,e,t))}else o.push(t);return null==r?t:r.call(this,e,t)}}(e.exports=function(e,t,n,r){return JSON.stringify(e,i(t,r),n)}).getSerialize=i}(I={exports:{}},I.exports),I.exports);function D(o,e){var a=!1===e.serialize?function(e){return e}:N,s=!1===e.serialize?function(e){return e}:B,l=e.blacklist||[],u=e.whitelist||!1,c=e.transforms||[],t=e.debounce||!1,d=void 0!==e.keyPrefix?e.keyPrefix:r,n=e._stateInit||{},h=e._stateIterator||F,f=e._stateGetter||V,p=e._stateSetter||z,v=e.storage||R("local");v.keys&&!v.getAllKeys&&(v.getAllKeys=v.keys);var m=n,g=!1,y=[],b=null;return o.subscribe(function(){if(!g){var r=o.getState();h(r,function(e,t){var n;(n=t,u&&-1===u.indexOf(n)||-1!==l.indexOf(n))||f(m,t)!==f(r,t)&&-1===y.indexOf(t)&&y.push(t)});var i=y.length;null===b&&(b=setInterval(function(){if(g&&i===y.length||0===y.length)return clearInterval(b),void(b=null);var t,n=y.shift(),e=""+d+n,r=c.reduce(function(e,t){return t.in(e,n)},f(o.getState(),n));void 0!==r&&v.setItem(e,a(r),(t=n,function(e){e&&console.warn("Error storing data for key:",t,e)}))},t)),m=r}}),{rehydrate:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i={};return t.serial?h(e,function(t,n){try{var e=s(t),r=c.reduceRight(function(e,t){return t.out(e,n)},e);i=p(i,n,r)}catch(e){console.warn('Error rehydrating data for key "'+n+'"',t,e)}}):i=e,o.dispatch({type:w,payload:i}),i},pause:function(){g=!0},resume:function(){g=!1},purge:function(e){return j({storage:v,keyPrefix:d},e)}}}function N(e){return L(e,null,null,function(e,t){return null})}function B(e){return JSON.parse(e)}function F(t,n){return Object.keys(t).forEach(function(e){return n(t[e],e)})}function V(e,t){return e[t]}function z(e,t,n){return e[t]=n,e}function H(e,i){var o=e.storage||R("local"),a=!1===e.serialize?function(e){return e}:U,t=e.blacklist||[],n=e.whitelist||!1,s=e.transforms||[],l=void 0!==e.keyPrefix?e.keyPrefix:r;o.keys&&!o.getAllKeys&&(o=T({},o,{getAllKeys:o.keys}));var u={},c=0;function d(e,t){i(e,t)}function h(e){return(!n||-1!==n.indexOf(e))&&-1===t.indexOf(e)}if(o.getAllKeys(function(e,t){e&&(console.warn("redux-persist/getStoredState: Error in storage.getAllKeys"),d(e));var n=t.filter(function(e){return 0===e.indexOf(l)}).map(function(e){return e.slice(l.length)}).filter(h),r=n.length;0===r&&d(null,u),n.forEach(function(n){o.getItem(""+l+n,function(e,t){e?console.warn("redux-persist/getStoredState: Error restoring data for key:",n,e):u[n]=function(n,e){var t=null;try{var r=a(e);t=s.reduceRight(function(e,t){return t.out(e,n)},r)}catch(e){console.warn("redux-persist/getStoredState: Error restoring data for key:",n,e)}return t}(n,t),(c+=1)===r&&d(null,u)})})}),"function"!=typeof i&&Promise)return new Promise(function(n,r){i=function(e,t){e?r(e):n(t)}})}function U(e){return JSON.parse(e)}var q=function(e,t,n){console.error('redux-persist: this method of importing storages has been removed. instead use `import { asyncLocalStorage } from "redux-persist/storages"`'),"function"==typeof e&&e(),"function"==typeof t&&t(),"function"==typeof n&&n()},W={getAllKeys:q,getItem:q,setItem:q,removeItem:q},G={asyncLocalStorage:W,asyncSessionStorage:W};e.autoRehydrate=function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},u=l.stateReconciler||O;return function(i){return function(e,t,n){var r=i(o(e),t,n);return T({},r,{replaceReducer:function(e){return r.replaceReducer(o(e))}})}};function o(o){var a=!1,s=[];return function(e,t){if(t.type!==w)return l.log&&!a&&s.push(t),o(e,t);l.log&&!a&&0<(n=s.slice(1)).length&&console.log("\n      redux-persist/autoRehydrate: %d actions were fired before rehydration completed. This can be a symptom of a race\n      condition where the rehydrate action may overwrite the previously affected state. Consider running these actions\n      after rehydration:\n    ",n.length,n),a=!0;var n,r=t.payload,i=o(e,t);return u(e,r,i,l.log)}}},e.createPersistor=D,e.createTransform=function(n,r){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=e.whitelist||null,i=e.blacklist||null;function o(e){return!(!t||-1!==t.indexOf(e))||!(!i||-1===i.indexOf(e))}return{in:function(e,t){return!o(t)&&n?n(e,t):e},out:function(e,t){return!o(t)&&r?r(e,t):e}}},e.getStoredState=H,e.persistStore=function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],t=!e.skipRestore;e.skipRestore&&console.warn("redux-persist: config.skipRestore has been deprecated. If you want to skip restoration use `createPersistor` instead");var i=null,o=D(n,e);function a(e,t){o.resume(),r&&r(e,t)}return o.pause(),M(t?function(){H(e,function(e,t){if(e)a(e);else{i&&("*"===i?t={}:i.forEach(function(e){return delete t[e]}));try{n.dispatch(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return{type:w,payload:e,error:t}}(t,e))}finally{a(e,t)}}})}:a),T({},o,{purge:function(e){return i=e||"*",o.purge(e)}})},e.purgeStoredState=j,e.storages=G,Object.defineProperty(e,"__esModule",{value:!0})}),define("redux-persist",["redux-persist/redux-persist"],function(e){return e}),define("redux-batched-actions/index",["require","exports","module"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.batchActions=function(e){return{type:1<arguments.length&&void 0!==arguments[1]?arguments[1]:r,meta:{batch:!0},payload:e}},t.enableBatching=function(r){return function e(t,n){return n&&n.meta&&n.meta.batch?n.payload.reduce(e,t):r(t,n)}},t.batchDispatchMiddleware=function(n){return function(t){return function(e){return e&&e.meta&&e.meta.batch&&function t(n,e){e.meta&&e.meta.batch?e.payload.forEach(function(e){t(n,e)}):n.dispatch(e)}(n,e),t(e)}}};var r=t.BATCH="BATCHING_REDUCER.BATCH"}),define("redux-batched-actions",["redux-batched-actions/index"],function(e){return e}),function(e,t){"function"==typeof define&&define.amd?define("papaparse/papaparse",[],t):"object"==typeof module&&"undefined"!=typeof exports?module.exports=t():e.Papa=t()}(this,function(){"use strict";var o,e,c="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==c?c:{},i=!c.document&&!!c.postMessage,s=i&&/(\?|&)papaworker(=|&|$)/.test(c.location.search),a=!1,l={},u=0,m={parse:function(e,t){var n=(t=t||{}).dynamicTyping||!1;D(n)&&(t.dynamicTypingFunction=n,n={});if(t.dynamicTyping=n,t.worker&&m.WORKERS_SUPPORTED){var r=function(){if(!m.WORKERS_SUPPORTED)return!1;if(!a&&null===m.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var e=m.SCRIPT_PATH||o;e+=(-1!==e.indexOf("?")?"&":"?")+"papaworker";var t=new c.Worker(e);return t.onmessage=b,t.id=u++,l[t.id]=t}();return r.userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=D(t.step),t.chunk=D(t.chunk),t.complete=D(t.complete),t.error=D(t.error),delete t.worker,void r.postMessage({input:e,config:t,workerId:r.id})}var i=null;"string"==typeof e?i=t.download?new f(t):new v(t):!0===e.readable&&D(e.read)&&D(e.on)?i=new g(t):(c.File&&e instanceof File||e instanceof Object)&&(i=new p(t));return i.stream(e)},unparse:function(e,t){var r=!1,c=!0,d=",",h="\r\n",i='"';!function(){if("object"!=typeof t)return;"string"==typeof t.delimiter&&1===t.delimiter.length&&-1===m.BAD_DELIMITERS.indexOf(t.delimiter)&&(d=t.delimiter);("boolean"==typeof t.quotes||t.quotes instanceof Array)&&(r=t.quotes);"string"==typeof t.newline&&(h=t.newline);"string"==typeof t.quoteChar&&(i=t.quoteChar);"boolean"==typeof t.header&&(c=t.header)}();var o=new RegExp(i,"g");"string"==typeof e&&(e=JSON.parse(e));if(e instanceof Array){if(!e.length||e[0]instanceof Array)return a(null,e);if("object"==typeof e[0])return a(n(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=e.data[0]instanceof Array?e.fields:n(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),a(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input";function n(e){if("object"!=typeof e)return[];var t=[];for(var n in e)t.push(n);return t}function a(e,t){var n="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var r=e instanceof Array&&0<e.length,i=!(t[0]instanceof Array);if(r&&c){for(var o=0;o<e.length;o++)0<o&&(n+=d),n+=f(e[o],o);0<t.length&&(n+=h)}for(var a=0;a<t.length;a++){for(var s=r?e.length:t[a].length,l=0;l<s;l++){0<l&&(n+=d);var u=r&&i?e[l]:l;n+=f(t[a][u],l)}a<t.length-1&&(n+=h)}return n}function f(e,t){if(null==e)return"";e=e.toString().replace(o,i+i);var n="boolean"==typeof r&&r||r instanceof Array&&r[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(e,m.BAD_DELIMITERS)||-1<e.indexOf(d)||" "===e.charAt(0)||" "===e.charAt(e.length-1);return n?i+e+i:e}}};if(m.RECORD_SEP=String.fromCharCode(30),m.UNIT_SEP=String.fromCharCode(31),m.BYTE_ORDER_MARK="\ufeff",m.BAD_DELIMITERS=["\r","\n",'"',m.BYTE_ORDER_MARK],m.WORKERS_SUPPORTED=!i&&!!c.Worker,m.SCRIPT_PATH=null,m.LocalChunkSize=10485760,m.RemoteChunkSize=5242880,m.DefaultDelimiter=",",m.Parser=y,m.ParserHandle=n,m.NetworkStreamer=f,m.FileStreamer=p,m.StringStreamer=v,m.ReadableStreamStreamer=g,c.jQuery){var d=c.jQuery;d.fn.parse=function(s){var n=s.config||{},l=[];return this.each(function(e){if(!("INPUT"===d(this).prop("tagName").toUpperCase()&&"file"===d(this).attr("type").toLowerCase()&&c.FileReader)||!this.files||0===this.files.length)return!0;for(var t=0;t<this.files.length;t++)l.push({file:this.files[t],inputElem:this,instanceConfig:d.extend({},n)})}),e(),this;function e(){if(0!==l.length){var e,t,n,r,i=l[0];if(D(s.before)){var o=s.before(i.file,i.inputElem);if("object"==typeof o){if("abort"===o.action)return e="AbortError",t=i.file,n=i.inputElem,r=o.reason,void(D(s.error)&&s.error({name:e},t,n,r));if("skip"===o.action)return void u();"object"==typeof o.config&&(i.instanceConfig=d.extend(i.instanceConfig,o.config))}else if("skip"===o)return void u()}var a=i.instanceConfig.complete;i.instanceConfig.complete=function(e){D(a)&&a(e,i.file,i.inputElem),u()},m.parse(i.file,i.instanceConfig)}else D(s.complete)&&s.complete()}function u(){l.splice(0,1),e()}}}function h(e){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=_(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null);this._handle=new n(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){if(this.isFirstChunk&&D(this._config.beforeFirstChunk)){var n=this._config.beforeFirstChunk(e);void 0!==n&&(e=n)}this.isFirstChunk=!1;var r=this._partialLine+e;this._partialLine="";var i=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var o=i.meta.cursor;this._finished||(this._partialLine=r.substring(o-this._baseIndex),this._baseIndex=o),i&&i.data&&(this._rowCount+=i.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)c.postMessage({results:i,workerId:m.WORKER_ID,finished:a});else if(D(this._config.chunk)&&!t){if(this._config.chunk(i,this._handle),this._handle.paused()||this._handle.aborted())return;i=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),this._completed||!a||!D(this._config.complete)||i&&i.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||i&&i.meta.paused||this._nextChunk(),i}},this._sendError=function(e){D(this._config.error)?this._config.error(e):s&&this._config.error&&c.postMessage({workerId:m.WORKER_ID,error:e,finished:!1})}}function f(e){var r;(e=e||{}).chunkSize||(e.chunkSize=m.RemoteChunkSize),h.call(this,e),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),i||(r.onload=k(this._chunkLoaded,this),r.onerror=k(this._chunkError,this)),r.open("GET",this._input,!i),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var t in e)r.setRequestHeader(t,e[t])}if(this._config.chunkSize){var n=this._start+this._config.chunkSize-1;r.setRequestHeader("Range","bytes="+this._start+"-"+n),r.setRequestHeader("If-None-Match","webkit-no-cache")}try{r.send()}catch(e){this._chunkError(e.message)}i&&0===r.status?this._chunkError():this._start+=this._config.chunkSize}},this._chunkLoaded=function(){4===r.readyState&&(r.status<200||400<=r.status?this._chunkError():(this._finished=!this._config.chunkSize||this._start>function(e){var t=e.getResponseHeader("Content-Range");if(null===t)return-1;return parseInt(t.substr(t.lastIndexOf("/")+1))}(r),this.parseChunk(r.responseText)))},this._chunkError=function(e){var t=r.statusText||e;this._sendError(new Error(t))}}function p(e){var r,i;(e=e||{}).chunkSize||(e.chunkSize=m.LocalChunkSize),h.call(this,e);var o="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,i=e.slice||e.webkitSlice||e.mozSlice,o?((r=new FileReader).onload=k(this._chunkLoaded,this),r.onerror=k(this._chunkError,this)):r=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var t=Math.min(this._start+this._config.chunkSize,this._input.size);e=i.call(e,this._start,t)}var n=r.readAsText(e,this._config.encoding);o||this._chunkLoaded({target:{result:n}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(r.error)}}function v(e){var n;h.call(this,e=e||{}),this.stream=function(e){return n=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e=this._config.chunkSize,t=e?n.substr(0,e):n;return n=e?n.substr(e):"",this._finished=!n,this.parseChunk(t)}}}function g(e){h.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=k(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=k(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=k(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=k(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function n(v){var o,a,s,r=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,t=this,n=0,l=!1,e=!1,u=[],c={data:[],errors:[],meta:{}};if(D(v.step)){var i=v.step;v.step=function(e){if(c=e,h())d();else{if(d(),0===c.data.length)return;n+=e.data.length,v.preview&&n>v.preview?a.abort():i(c,t)}}}function d(){if(c&&s&&(p("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+m.DefaultDelimiter+"'"),s=!1),v.skipEmptyLines)for(var e=0;e<c.data.length;e++)1===c.data[e].length&&""===c.data[e][0]&&c.data.splice(e--,1);return h()&&function(){if(!c)return;for(var e=0;h()&&e<c.data.length;e++)for(var t=0;t<c.data[e].length;t++){var n=c.data[e][t];v.trimHeaders&&(n=n.trim()),u.push(n)}c.data.splice(0,1)}(),function(){if(!c||!v.header&&!v.dynamicTyping)return c;for(var e=0;e<c.data.length;e++){var t,n=v.header?{}:[];for(t=0;t<c.data[e].length;t++){var r=t,i=c.data[e][t];v.header&&(r=t>=u.length?"__parsed_extra":u[t]),i=f(r,i),"__parsed_extra"===r?(n[r]=n[r]||[],n[r].push(i)):n[r]=i}c.data[e]=n,v.header&&(t>u.length?p("FieldMismatch","TooManyFields","Too many fields: expected "+u.length+" fields but parsed "+t,e):t<u.length&&p("FieldMismatch","TooFewFields","Too few fields: expected "+u.length+" fields but parsed "+t,e))}v.header&&c.meta&&(c.meta.fields=u);return c}()}function h(){return v.header&&0===u.length}function f(e,t){return n=e,v.dynamicTypingFunction&&void 0===v.dynamicTyping[n]&&(v.dynamicTyping[n]=v.dynamicTypingFunction(n)),!0===(v.dynamicTyping[n]||v.dynamicTyping)?"true"===t||"TRUE"===t||"false"!==t&&"FALSE"!==t&&(r.test(t)?parseFloat(t):""===t?null:t):t;var n}function p(e,t,n,r){c.errors.push({type:e,code:t,message:n,row:r})}this.parse=function(e,t,n){if(v.newline||(v.newline=function(e){var t=(e=e.substr(0,1048576)).split("\r"),n=e.split("\n"),r=1<n.length&&n[0].length<t[0].length;if(1===t.length||r)return"\n";for(var i=0,o=0;o<t.length;o++)"\n"===t[o][0]&&i++;return i>=t.length/2?"\r\n":"\r"}(e)),s=!1,v.delimiter)D(v.delimiter)&&(v.delimiter=v.delimiter(e),c.meta.delimiter=v.delimiter);else{var r=function(e,t,n){for(var r,i,o,a=[",","\t","|",";",m.RECORD_SEP,m.UNIT_SEP],s=0;s<a.length;s++){var l=a[s],u=0,c=0,d=0;o=void 0;for(var h=new y({delimiter:l,newline:t,preview:10}).parse(e),f=0;f<h.data.length;f++)if(n&&1===h.data[f].length&&0===h.data[f][0].length)d++;else{var p=h.data[f].length;c+=p,void 0!==o?1<p&&(u+=Math.abs(p-o),o=p):o=p}0<h.data.length&&(c/=h.data.length-d),(void 0===i||u<i)&&1.99<c&&(i=u,r=l)}return{successful:!!(v.delimiter=r),bestDelimiter:r}}(e,v.newline,v.skipEmptyLines);r.successful?v.delimiter=r.bestDelimiter:(s=!0,v.delimiter=m.DefaultDelimiter),c.meta.delimiter=v.delimiter}var i=_(v);return v.preview&&v.header&&i.preview++,o=e,a=new y(i),c=a.parse(o,t,n),d(),l?{meta:{paused:!0}}:c||{meta:{paused:!1}}},this.paused=function(){return l},this.pause=function(){l=!0,a.abort(),o=o.substr(a.getCharIndex())},this.resume=function(){l=!1,t.streamer.parseChunk(o,!0)},this.aborted=function(){return e},this.abort=function(){e=!0,a.abort(),c.meta.aborted=!0,D(v.complete)&&v.complete(c),o=""}}function y(e){var C,O=(e=e||{}).delimiter,E=e.newline,M=e.comments,P=e.step,A=e.preview,R=e.fastMode,j=C=void 0===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(j=e.escapeChar),("string"!=typeof O||-1<m.BAD_DELIMITERS.indexOf(O))&&(O=","),M===O)throw"Comment character same as delimiter";!0===M?M="#":("string"!=typeof M||-1<m.BAD_DELIMITERS.indexOf(M))&&(M=!1),"\n"!==E&&"\r"!==E&&"\r\n"!==E&&(E="\n");var I=0,L=!1;this.parse=function(r,t,n){if("string"!=typeof r)throw"Input must be a string";var i=r.length,e=O.length,o=E.length,a=M.length,s=D(P),l=[],u=[],c=[],d=I=0;if(!r)return S();if(R||!1!==R&&-1===r.indexOf(C)){for(var h=r.split(E),f=0;f<h.length;f++){if(c=h[f],I+=c.length,f!==h.length-1)I+=E.length;else if(n)return S();if(!M||c.substr(0,a)!==M){if(s){if(l=[],w(c.split(O)),T(),L)return S()}else w(c.split(O));if(A&&A<=f)return l=l.slice(0,A),S(!0)}}return S()}for(var p,v=r.indexOf(O,I),m=r.indexOf(E,I),g=new RegExp(j.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")+C,"g");;)if(r[I]!==C)if(M&&0===c.length&&r.substr(I,a)===M){if(-1===m)return S();I=m+o,m=r.indexOf(E,I),v=r.indexOf(O,I)}else if(-1!==v&&(v<m||-1===m))c.push(r.substring(I,v)),I=v+e,v=r.indexOf(O,I);else{if(-1===m)break;if(c.push(r.substring(I,m)),k(m+o),s&&(T(),L))return S();if(A&&l.length>=A)return S(!0)}else for(p=I,I++;;){if(-1===(p=r.indexOf(C,p+1)))return n||u.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:l.length,index:I}),_();if(p===i-1)return _(r.substring(I,p).replace(g,C));if(C!==j||r[p+1]!==j){if(C===j||0===p||r[p-1]!==j){var y=x(v);if(r[p+1+y]===O){c.push(r.substring(I,p).replace(g,C)),I=p+1+y+e,v=r.indexOf(O,I),m=r.indexOf(E,I);break}var b=x(m);if(r.substr(p+1+b,o)===E){if(c.push(r.substring(I,p).replace(g,C)),k(p+1+b+o),v=r.indexOf(O,I),s&&(T(),L))return S();if(A&&l.length>=A)return S(!0);break}u.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:l.length,index:I}),p++}}else p++}return _();function w(e){l.push(e),d=I}function x(e){var t=0;if(-1!==e){var n=r.substring(p+1,e);n&&""===n.trim()&&(t=n.length)}return t}function _(e){return n||(void 0===e&&(e=r.substr(I)),c.push(e),I=i,w(c),s&&T()),S()}function k(e){I=e,w(c),c=[],m=r.indexOf(E,I)}function S(e){return{data:l,errors:u,meta:{delimiter:O,linebreak:E,aborted:L,truncated:!!e,cursor:d+(t||0)}}}function T(){P(S()),l=[],u=[]}},this.abort=function(){L=!0},this.getCharIndex=function(){return I}}function b(e){var t=e.data,n=l[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){r=!0,w(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:x,resume:x};if(D(n.userStep)){for(var o=0;o<t.results.data.length&&(n.userStep({data:[t.results.data[o]],errors:t.results.errors,meta:t.results.meta},i),!r);o++);delete t.results}else D(n.userChunk)&&(n.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!r&&w(t.workerId,t.results)}function w(e,t){var n=l[e];D(n.userComplete)&&n.userComplete(t),n.terminate(),delete l[e]}function x(){throw"Not implemented."}function _(e){if("object"!=typeof e)return e;var t=e instanceof Array?[]:{};for(var n in e)t[n]=_(e[n]);return t}function k(e,t){return function(){e.apply(t,arguments)}}function D(e){return"function"==typeof e}return s?c.onmessage=function(e){var t=e.data;void 0===m.WORKER_ID&&t&&(m.WORKER_ID=t.workerId);if("string"==typeof t.input)c.postMessage({workerId:m.WORKER_ID,results:m.parse(t.input,t.config),finished:!0});else if(c.File&&t.input instanceof File||t.input instanceof Object){var n=m.parse(t.input,t.config);n&&c.postMessage({workerId:m.WORKER_ID,results:n,finished:!0})}}:m.WORKERS_SUPPORTED&&(e=document.getElementsByTagName("script"),o=e.length?e[e.length-1].src:"",document.body?document.addEventListener("DOMContentLoaded",function(){a=!0},!0):a=!0),(f.prototype=Object.create(h.prototype)).constructor=f,(p.prototype=Object.create(h.prototype)).constructor=p,(v.prototype=Object.create(v.prototype)).constructor=v,(g.prototype=Object.create(h.prototype)).constructor=g,m}),define("papaparse",["papaparse/papaparse"],function(e){return e}),define("object-assign/index",["require","exports","module"],function(e,t,n){"use strict";var r=Object.prototype.propertyIsEnumerable;function s(t){var e=Object.getOwnPropertyNames(t);return Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t))),e.filter(function(e){return r.call(t,e)})}n.exports=Object.assign||function(e,t){for(var n,r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){n=arguments[o],r=s(Object(n));for(var a=0;a<r.length;a++)i[r[a]]=n[r[a]]}return i}}),define("object-assign",["object-assign/index"],function(e){return e}),define("normalize-wheel/normalizeWheel",["require","exports","module","./UserAgent_DEPRECATED","./isEventSupported"],function(e,t,n){"use strict";var r=e("./UserAgent_DEPRECATED"),i=e("./isEventSupported");function o(e){var t=0,n=0,r=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=10*t,i=10*n,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||i)&&e.deltaMode&&(1==e.deltaMode?(r*=40,i*=40):(r*=800,i*=800)),r&&!t&&(t=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:i}}o.getEventType=function(){return r.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},n.exports=o}),define("normalize-wheel",["normalize-wheel/normalizeWheel"],function(e){return e}),define("normalize-wheel/isEventSupported",["require","exports","module","./ExecutionEnvironment"],function(e,t,n){"use strict";var o,a=e("./ExecutionEnvironment");a.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),n.exports=function(e,t){if(!a.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r="function"==typeof i[n]}return!r&&o&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}}),define("normalize-wheel/UserAgent_DEPRECATED",["require","exports","module"],function(e,t,n){var o,a,s,l,u,c,d,h,f,p,v,m,g,y,b,w=!1;function r(){if(!w){w=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),n=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(m=/\b(iPhone|iP[ao]d)/.exec(e),g=/\b(iP[ao]d)/.exec(e),p=/Android/i.exec(e),y=/FBAN\/\w+;/i.exec(e),b=/Mobile/i.exec(e),v=!!/Win64/.exec(e),t){(o=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN)&&document&&document.documentMode&&(o=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(e);c=r?parseFloat(r[1])+4:o,a=t[2]?parseFloat(t[2]):NaN,s=t[3]?parseFloat(t[3]):NaN,(l=t[4]?parseFloat(t[4]):NaN)?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),u=t&&t[1]?parseFloat(t[1]):NaN):u=NaN}else o=a=s=u=l=NaN;if(n){if(n[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);d=!i||parseFloat(i[1].replace("_","."))}else d=!1;h=!!n[2],f=!!n[3]}else d=h=f=!1}}var i={ie:function(){return r()||o},ieCompatibilityMode:function(){return r()||o<c},ie64:function(){return i.ie()&&v},firefox:function(){return r()||a},opera:function(){return r()||s},webkit:function(){return r()||l},safari:function(){return i.webkit()},chrome:function(){return r()||u},windows:function(){return r()||h},osx:function(){return r()||d},linux:function(){return r()||f},iphone:function(){return r()||m},mobile:function(){return r()||m||g||p||b},nativeApp:function(){return r()||y},android:function(){return r()||p},ipad:function(){return r()||g}};n.exports=i}),define("normalize-wheel/ExecutionEnvironment",["require","exports","module"],function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};n.exports=i}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("localForage/localforage",[],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).localforage=e()}}(function(){return function o(a,s,l){function u(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(c)return c(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[n]={exports:{}};a[n][0].call(i.exports,function(e){var t=a[n][1][e];return u(t||e)},i,i.exports,o,a,s,l)}return s[n].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,c,t){(function(t){"use strict";var n,r,e=t.MutationObserver||t.WebKitMutationObserver;if(e){var i=0,o=new e(u),a=t.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var s=new t.MessageChannel;s.port1.onmessage=u,n=function(){s.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}c.exports=function(e){1!==l.push(e)||r||n()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var i=e(1);function u(){}var c={},o=["REJECTED"],a=["FULFILLED"],r=["PENDING"];function s(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,e!==u&&f(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(t,n,r){i(function(){var e;try{e=n(r)}catch(e){return c.reject(t,e)}e===t?c.reject(t,new TypeError("Cannot resolve promise with itself")):c.resolve(t,e)})}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(t,e){var n=!1;function r(e){n||(n=!0,c.reject(t,e))}function i(e){n||(n=!0,c.resolve(t,e))}var o=p(function(){e(i,r)});"error"===o.status&&r(o.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=s).prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(u);this.state!==r?d(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t));return n},l.prototype.callFulfilled=function(e){c.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){c.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},c.resolve=function(e,t){var n=p(h,t);if("error"===n.status)return c.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},c.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},s.resolve=function(e){if(e instanceof this)return e;return c.resolve(new this(u),e)},s.reject=function(e){var t=new this(u);return c.reject(t,e)},s.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);var o=new Array(r),a=0,t=-1,s=new this(u);for(;++t<r;)l(e[t],t);return s;function l(e,t){n.resolve(e).then(function(e){o[t]=e,++a!==r||i||(i=!0,c.resolve(s,o))},function(e){i||(i=!0,c.reject(s,e))})}},s.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var i=-1,o=new this(u);for(;++i<n;)a=e[i],t.resolve(a).then(function(e){r||(r=!0,c.resolve(o,e))},function(e){r||(r=!0,c.reject(o,e))});var a;return o}},{1:1}],3:[function(t,e,n){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var s=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function a(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(n.type)}}"undefined"==typeof Promise&&e(3);var d=Promise;function h(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function l(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function f(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function o(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var u="local-forage-detect-blob-support",i=void 0,c={},p=Object.prototype.toString,v="readonly",m="readwrite";function g(e){return"boolean"==typeof i?d.resolve(i):(r=e,new d(function(n){var e=r.transaction(u,m),t=a([""]);e.objectStore(u).put(t,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||43<=parseInt(e[1],10))}}).catch(function(){return!1})).then(function(e){return i=e});var r}function y(e){var t=c[e.name],n={};n.promise=new d(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function b(e){var t=c[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function w(e,t){var n=c[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function x(i,o){return new d(function(e,t){if(c[i.name]=c[i.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},i.db){if(!o)return e(i.db);y(i),i.db.close()}var n=[i.name];o&&n.push(i.version);var r=s.open.apply(s,n);o&&(r.onupgradeneeded=function(t){var e=r.result;try{e.createObjectStore(i.storeName),t.oldVersion<=1&&e.createObjectStore(u)}catch(e){if("ConstraintError"!==e.name)throw e;console.warn('The database "'+i.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+i.storeName+'" already exists.')}}),r.onerror=function(e){e.preventDefault(),t(r.error)},r.onsuccess=function(){e(r.result),b(i)}})}function _(e){return x(e,!1)}function k(e){return x(e,!0)}function S(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function T(e){return a([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(atob(e.data))],{type:e.type})}function C(e){return e&&e.__local_forage_encoded_blob}function O(e){var t=this,n=t._initReady().then(function(){var e=c[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return l(n,e,e),n}function E(t,n,r,i){void 0===i&&(i=1);try{var e=t.db.transaction(t.storeName,n);r(null,e)}catch(e){if(0<i&&(!t.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return d.resolve().then(function(){if(!t.db||"NotFoundError"===e.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),k(t)}).then(function(){return function(n){y(n);for(var r=c[n.name],i=r.forages,e=0;e<i.length;e++){var t=i[e];t._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null)}return n.db=null,_(n).then(function(e){return n.db=e,S(n)?k(n):e}).then(function(e){n.db=r.db=e;for(var t=0;t<i.length;t++)i[t]._dbInfo.db=e}).catch(function(e){throw w(n,e),e})}(t).then(function(){E(t,n,r,i-1)})}).catch(r);r(e)}}var M={_driver:"asyncStorage",_initStorage:function(e){var r=this,i={db:null};if(e)for(var t in e)i[t]=e[t];var o=c[i.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},c[i.name]=o),o.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=O);var n=[];function a(){return d.resolve()}for(var s=0;s<o.forages.length;s++){var l=o.forages[s];l!==r&&n.push(l._initReady().catch(a))}var u=o.forages.slice(0);return d.all(n).then(function(){return i.db=o.db,_(i)}).then(function(e){return i.db=e,S(i,r._defaultConfig.version)?k(i):e}).then(function(e){i.db=o.db=e,r._dbInfo=i;for(var t=0;t<u.length;t++){var n=u[t];n!==r&&(n._dbInfo.db=i.db,n._dbInfo.version=i.version)}})},_support:function(){try{if(!s)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(a,e){var s=this,t=new d(function(o,n){s.ready().then(function(){E(s._dbInfo,v,function(e,t){if(e)return n(e);try{var r=t.objectStore(s._dbInfo.storeName).openCursor(),i=1;r.onsuccess=function(){var e=r.result;if(e){var t=e.value;C(t)&&(t=T(t));var n=a(t,e.key,i++);void 0!==n?o(n):e.continue()}else o()},r.onerror=function(){n(r.error)}}catch(e){n(e)}})}).catch(n)});return h(t,e),t},getItem:function(o,e){var a=this;o=f(o);var t=new d(function(r,i){a.ready().then(function(){E(a._dbInfo,v,function(e,t){if(e)return i(e);try{var n=t.objectStore(a._dbInfo.storeName).get(o);n.onsuccess=function(){var e=n.result;void 0===e&&(e=null),C(e)&&(e=T(e)),r(e)},n.onerror=function(){i(n.error)}}catch(e){i(e)}})}).catch(i)});return h(t,e),t},setItem:function(s,t,e){var l=this;s=f(s);var n=new d(function(o,a){var e;l.ready().then(function(){return e=l._dbInfo,"[object Blob]"===p.call(t)?g(e.db).then(function(e){return e?t:(r=t,new d(function(n,e){var t=new FileReader;t.onerror=e,t.onloadend=function(e){var t=btoa(e.target.result||"");n({__local_forage_encoded_blob:!0,data:t,type:r.type})},t.readAsBinaryString(r)}));var r}):t}).then(function(i){E(l._dbInfo,m,function(e,t){if(e)return a(e);try{var n=t.objectStore(l._dbInfo.storeName);null===i&&(i=void 0);var r=n.put(i,s);t.oncomplete=function(){void 0===i&&(i=null),o(i)},t.onabort=t.onerror=function(){var e=r.error?r.error:r.transaction.error;a(e)}}catch(e){a(e)}})}).catch(a)});return h(n,e),n},removeItem:function(o,e){var a=this;o=f(o);var t=new d(function(r,i){a.ready().then(function(){E(a._dbInfo,m,function(e,t){if(e)return i(e);try{var n=t.objectStore(a._dbInfo.storeName).delete(o);t.oncomplete=function(){r()},t.onerror=function(){i(n.error)},t.onabort=function(){var e=n.error?n.error:n.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return h(t,e),t},clear:function(e){var o=this,t=new d(function(r,i){o.ready().then(function(){E(o._dbInfo,m,function(e,t){if(e)return i(e);try{var n=t.objectStore(o._dbInfo.storeName).clear();t.oncomplete=function(){r()},t.onabort=t.onerror=function(){var e=n.error?n.error:n.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return h(t,e),t},length:function(e){var o=this,t=new d(function(r,i){o.ready().then(function(){E(o._dbInfo,v,function(e,t){if(e)return i(e);try{var n=t.objectStore(o._dbInfo.storeName).count();n.onsuccess=function(){r(n.result)},n.onerror=function(){i(n.error)}}catch(e){i(e)}})}).catch(i)});return h(t,e),t},key:function(s,e){var l=this,t=new d(function(o,a){s<0?o(null):l.ready().then(function(){E(l._dbInfo,v,function(e,t){if(e)return a(e);try{var n=t.objectStore(l._dbInfo.storeName),r=!1,i=n.openCursor();i.onsuccess=function(){var e=i.result;e?0===s?o(e.key):r?o(e.key):(r=!0,e.advance(s)):o(null)},i.onerror=function(){a(i.error)}}catch(e){a(e)}})}).catch(a)});return h(t,e),t},keys:function(e){var a=this,t=new d(function(i,o){a.ready().then(function(){E(a._dbInfo,v,function(e,t){if(e)return o(e);try{var n=t.objectStore(a._dbInfo.storeName).openCursor(),r=[];n.onsuccess=function(){var e=n.result;e?(r.push(e.key),e.continue()):i(r)},n.onerror=function(){o(n.error)}}catch(e){o(e)}})}).catch(o)});return h(t,e),t},dropInstance:function(a,e){e=o.apply(this,arguments);var t,n=this.config();if((a="function"!=typeof a&&a||{}).name||(a.name=a.name||n.name,a.storeName=a.storeName||n.storeName),a.name){var r=a.name===n.name&&this._dbInfo.db?d.resolve(this._dbInfo.db):_(a).then(function(e){var t=c[a.name],n=t.forages;t.db=e;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=e;return e});t=a.storeName?r.then(function(e){if(e.objectStoreNames.contains(a.storeName)){var i=e.version+1;y(a);var r=c[a.name],o=r.forages;e.close();for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=null,n._dbInfo.version=i}return new d(function(t,n){var r=s.open(a.name,i);r.onerror=function(e){r.result.close(),n(e)},r.onupgradeneeded=function(){r.result.deleteObjectStore(a.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,b(n._dbInfo)}}).catch(function(e){throw(w(a,e)||d.resolve()).catch(function(){}),e})}}):r.then(function(e){y(a);var n=c[a.name],r=n.forages;e.close();for(var t=0;t<r.length;t++)r[t]._dbInfo.db=null;return new d(function(t,n){var r=s.deleteDatabase(a.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)b(r[t]._dbInfo)}).catch(function(e){throw(w(a,e)||d.resolve()).catch(function(){}),e})})}else t=d.reject("Invalid arguments");return h(t,e),t}};var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=/^~~local_forage_type~([^~]+)~/,R="__lfsc__:",j=R.length,I=j+"arbf".length,L=Object.prototype.toString;function D(e){var t,n,r,i,o,a=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(t=0;t<s;t+=4)n=P.indexOf(e[t]),r=P.indexOf(e[t+1]),i=P.indexOf(e[t+2]),o=P.indexOf(e[t+3]),c[l++]=n<<2|r>>4,c[l++]=(15&r)<<4|i>>2,c[l++]=(3&i)<<6|63&o;return u}function N(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=P[n[t]>>2],r+=P[(3&n[t])<<4|n[t+1]>>4],r+=P[(15&n[t+1])<<2|n[t+2]>>6],r+=P[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var B={serialize:function(t,n){var e="";if(t&&(e=L.call(t)),t&&("[object ArrayBuffer]"===e||t.buffer&&"[object ArrayBuffer]"===L.call(t.buffer))){var r,i=R;t instanceof ArrayBuffer?(r=t,i+="arbf"):(r=t.buffer,"[object Int8Array]"===e?i+="si08":"[object Uint8Array]"===e?i+="ui08":"[object Uint8ClampedArray]"===e?i+="uic8":"[object Int16Array]"===e?i+="si16":"[object Uint16Array]"===e?i+="ur16":"[object Int32Array]"===e?i+="si32":"[object Uint32Array]"===e?i+="ui32":"[object Float32Array]"===e?i+="fl32":"[object Float64Array]"===e?i+="fl64":n(new Error("Failed to get type for BinaryArray"))),n(i+N(r))}else if("[object Blob]"===e){var o=new FileReader;o.onload=function(){var e="~~local_forage_type~"+t.type+"~"+N(this.result);n(R+"blob"+e)},o.readAsArrayBuffer(t)}else try{n(JSON.stringify(t))}catch(e){console.error("Couldn't convert value into a JSON string: ",t),n(null,e)}},deserialize:function(e){if(e.substring(0,j)!==R)return JSON.parse(e);var t,n=e.substring(I),r=e.substring(j,I);if("blob"===r&&A.test(n)){var i=n.match(A);t=i[1],n=n.substring(i[0].length)}var o=D(n);switch(r){case"arbf":return o;case"blob":return a([o],{type:t});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:D,bufferToString:N};function F(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function V(e,r,i,o,a,s){e.executeSql(i,o,a,function(e,n){n.code===n.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[name],function(e,t){t.rows.length?s(e,n):F(e,r,function(){e.executeSql(i,o,a,s)},s)},s):s(e,n)},s)}var z={_driver:"webSQLStorage",_initStorage:function(e){var r=this,i={db:null};if(e)for(var t in e)i[t]="string"!=typeof e[t]?e[t].toString():e[t];var n=new d(function(t,n){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(e){return n(e)}i.db.transaction(function(e){F(e,i,function(){r._dbInfo=i,t()},function(e,t){n(t)})},n)});return i.serializer=B,n},_support:"function"==typeof openDatabase,iterate:function(u,e){var t=this,n=new d(function(l,n){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(e){V(e,s,"SELECT * FROM "+s.storeName,[],function(e,t){for(var n=t.rows,r=n.length,i=0;i<r;i++){var o=n.item(i),a=o.value;if(a&&(a=s.serializer.deserialize(a)),void 0!==(a=u(a,o.key,i+1)))return void l(a)}l()},function(e,t){n(t)})})}).catch(n)});return h(n,e),n},getItem:function(t,e){var o=this;t=f(t);var n=new d(function(i,n){o.ready().then(function(){var r=o._dbInfo;r.db.transaction(function(e){V(e,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],function(e,t){var n=t.rows.length?t.rows.item(0).value:null;n&&(n=r.serializer.deserialize(n)),i(n)},function(e,t){n(t)})})}).catch(n)});return h(n,e),n},setItem:function(e,t,n){return function a(s,e,l,u){var c=this;s=f(s);var t=new d(function(i,o){c.ready().then(function(){void 0===e&&(e=null);var n=e,r=c._dbInfo;r.serializer.serialize(e,function(t,e){e?o(e):r.db.transaction(function(e){V(e,r,"INSERT OR REPLACE INTO "+r.storeName+" (key, value) VALUES (?, ?)",[s,t],function(){i(n)},function(e,t){o(t)})},function(e){if(e.code===e.QUOTA_ERR){if(0<u)return void i(a.apply(c,[s,n,l,u-1]));o(e)}})})}).catch(o)});return h(t,l),t}.apply(this,[e,t,n,1])},removeItem:function(i,e){var o=this;i=f(i);var t=new d(function(n,r){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){V(e,t,"DELETE FROM "+t.storeName+" WHERE key = ?",[i],function(){n()},function(e,t){r(t)})})}).catch(r)});return h(t,e),t},clear:function(e){var i=this,t=new d(function(n,r){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){V(e,t,"DELETE FROM "+t.storeName,[],function(){n()},function(e,t){r(t)})})}).catch(r)});return h(t,e),t},length:function(e){var i=this,t=new d(function(r,n){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){V(e,t,"SELECT COUNT(key) as c FROM "+t.storeName,[],function(e,t){var n=t.rows.item(0).c;r(n)},function(e,t){n(t)})})}).catch(n)});return h(t,e),t},key:function(i,e){var o=this,t=new d(function(r,n){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){V(e,t,"SELECT key FROM "+t.storeName+" WHERE id = ? LIMIT 1",[i+1],function(e,t){var n=t.rows.length?t.rows.item(0).key:null;r(n)},function(e,t){n(t)})})}).catch(n)});return h(t,e),t},keys:function(e){var r=this,t=new d(function(i,n){r.ready().then(function(){var t=r._dbInfo;t.db.transaction(function(e){V(e,t,"SELECT key FROM "+t.storeName,[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).key);i(n)},function(e,t){n(t)})})}).catch(n)});return h(t,e),t},dropInstance:function(n,e){e=o.apply(this,arguments);var r=this.config();(n="function"!=typeof n&&n||{}).name||(n.name=n.name||r.name,n.storeName=n.storeName||r.storeName);var t,i=this;return h(t=n.name?new d(function(e){var t,o;t=n.name===r.name?i._dbInfo.db:openDatabase(n.name,"","",0),n.storeName?e({db:t,storeNames:[n.storeName]}):e((o=t,new d(function(i,n){o.transaction(function(e){e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).name);i({db:o,storeNames:n})},function(e,t){n(t)})},function(e){n(e)})})))}).then(function(s){return new d(function(o,a){s.db.transaction(function(r){function e(t){return new d(function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(e,t){n(t)})})}for(var t=[],n=0,i=s.storeNames.length;n<i;n++)t.push(e(s.storeNames[n]));d.all(t).then(function(){o()}).catch(function(e){a(e)})},function(e){a(e)})})}):d.reject("Invalid arguments"),e),t}};function H(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function U(){return!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||0<localStorage.length}var q={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=H(e,this._defaultConfig),U()?((this._dbInfo=t).serializer=B,d.resolve()):d.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(l,e){var u=this,t=u.ready().then(function(){for(var e=u._dbInfo,t=e.keyPrefix,n=t.length,r=localStorage.length,i=1,o=0;o<r;o++){var a=localStorage.key(o);if(0===a.indexOf(t)){var s=localStorage.getItem(a);if(s&&(s=e.serializer.deserialize(s)),void 0!==(s=l(s,a.substring(n),i++)))return s}}});return h(t,e),t},getItem:function(n,e){var r=this;n=f(n);var t=r.ready().then(function(){var e=r._dbInfo,t=localStorage.getItem(e.keyPrefix+n);return t&&(t=e.serializer.deserialize(t)),t});return h(t,e),t},setItem:function(a,e,t){var s=this;a=f(a);var n=s.ready().then(function(){void 0===e&&(e=null);var o=e;return new d(function(n,r){var i=s._dbInfo;i.serializer.serialize(e,function(e,t){if(t)r(t);else try{localStorage.setItem(i.keyPrefix+a,e),n(o)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||r(e),r(e)}})})});return h(n,t),n},removeItem:function(t,e){var n=this;t=f(t);var r=n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return h(r,e),r},clear:function(e){var r=this,t=r.ready().then(function(){for(var e=r._dbInfo.keyPrefix,t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}});return h(t,e),t},length:function(e){var t=this.keys().then(function(e){return e.length});return h(t,e),t},key:function(n,e){var r=this,t=r.ready().then(function(){var t,e=r._dbInfo;try{t=localStorage.key(n)}catch(e){t=null}return t&&(t=t.substring(e.keyPrefix.length)),t});return h(t,e),t},keys:function(e){var o=this,t=o.ready().then(function(){for(var e=o._dbInfo,t=localStorage.length,n=[],r=0;r<t;r++){var i=localStorage.key(r);0===i.indexOf(e.keyPrefix)&&n.push(i.substring(e.keyPrefix.length))}return n});return h(t,e),t},dropInstance:function(t,e){if(e=o.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,i=this;return h(r=t.name?new d(function(e){t.storeName?e(H(t,i._defaultConfig)):e(t.name+"/")}).then(function(e){for(var t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):d.reject("Invalid arguments"),e),r}},W=function(e,t){for(var n,r,i=e.length,o=0;o<i;){if((n=e[o])===(r=t)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;o++}return!1},G=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Y={},X={},Z={INDEXEDDB:M,WEBSQL:z,LOCALSTORAGE:q},K=[Z.INDEXEDDB._driver,Z.WEBSQL._driver,Z.LOCALSTORAGE._driver],$=["dropInstance"],Q=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat($),J={description:"",driver:K.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ee(t,n){t[n]=function(){var e=arguments;return t.ready().then(function(){return t[n].apply(t,e)})}}function te(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(G(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ne=new(function(){function i(e){for(var t in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Z)if(Z.hasOwnProperty(t)){var n=Z[t],r=n._driver;this[t]=r,Y[r]||this.defineDriver(n)}this._defaultConfig=te({},J),this._config=te({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return i.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},i.prototype.defineDriver=function(u,e,t){var n=new d(function(t,n){try{var r=u._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!u._driver)return void n(e);for(var i=Q.concat("_initStorage"),o=0,a=i.length;o<a;o++){var s=i[o];if((!W($,s)||u[s])&&"function"!=typeof u[s])return void n(e)}!function(){for(var e=function(n){return function(){var e=new Error("Method "+n+" is not implemented by the current driver"),t=d.reject(e);return h(t,arguments[arguments.length-1]),t}},t=0,n=$.length;t<n;t++){var r=$[t];u[r]||(u[r]=e(r))}}();var l=function(e){Y[r]&&console.info("Redefining LocalForage driver: "+r),Y[r]=u,X[r]=e,t()};"_support"in u?u._support&&"function"==typeof u._support?u._support().then(l,n):l(!!u._support):l(!0)}catch(e){n(e)}});return l(n,e,t),n},i.prototype.driver=function(){return this._driver||null},i.prototype.getDriver=function(e,t,n){var r=Y[e]?d.resolve(Y[e]):d.reject(new Error("Driver not found."));return l(r,t,n),r},i.prototype.getSerializer=function(e){var t=d.resolve(B);return l(t,e),t},i.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return l(n,e,e),n},i.prototype.setDriver=function(e,t,n){var o=this;G(e)||(e=[e]);var r=this._getSupportedDrivers(e);function a(){o._config.driver=o.driver()}function s(e){return o._extend(e),a(),o._ready=o._initStorage(o._config),o._ready}var i=null!==this._driverSet?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=i.then(function(){var e=r[0];return o._dbInfo=null,o._ready=null,o.getDriver(e).then(function(e){var i;o._driver=e._driver,a(),o._wrapLibraryMethodsWithReady(),o._initDriver=(i=r,function(){var r=0;return function e(){for(;r<i.length;){var t=i[r];return r++,o._dbInfo=null,o._ready=null,o.getDriver(t).then(s).catch(e)}a();var n=new Error("No available storage method found.");return o._driverSet=d.reject(n),o._driverSet}()})})}).catch(function(){a();var e=new Error("No available storage method found.");return o._driverSet=d.reject(e),o._driverSet}),l(this._driverSet,t,n),this._driverSet},i.prototype.supports=function(e){return!!X[e]},i.prototype._extend=function(e){te(this,e)},i.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},i.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=Q.length;e<t;e++)ee(this,Q[e])},i.prototype.createInstance=function(e){return new i(e)},i}());t.exports=ne},{3:3}]},{},[4])(4)}),define("localForage",["localForage/localforage"],function(e){return e}),define("json-stringify-safe",["require","exports","module"],function(e,t,n){function i(r,i){var o=[],a=[];return null==i&&(i=function(e,t){return o[0]===t?"[Circular ~]":"[Circular ~."+a.slice(0,o.indexOf(t)).join(".")+"]"}),function(e,t){if(0<o.length){var n=o.indexOf(this);~n?o.splice(n+1):o.push(this),~n?a.splice(n,1/0,e):a.push(e),~o.indexOf(t)&&(t=i.call(this,e,t))}else o.push(t);return null==r?t:r.call(this,e,t)}}(n.exports=function(e,t,n,r){return JSON.stringify(e,i(t,r),n)}).getSerialize=i}),define("inherits/inherits_browser",["require","exports","module"],function(e,t,n){"function"==typeof Object.create?n.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),define("inherits",["inherits/inherits_browser"],function(e){return e}),function(){var E,i,s,M,l,a,f,v,u,c,d,h,ie,P,p,r,e,n,t,oe,m,o,A,g,y,b,w,ae,x,_,k,S,T,C,O,R,j,I,L,D,N,B,F,V,z,H,U,se,q,W,le,G,Y,X,ue,Z,K,$,Q,J,ee,te,ne,re,ce,de,he,fe,pe,ve,ge,ye,be,we,xe,_e,ke,Se,Te,Ce,Oe=[].slice;_e=function(){var n,e,t,r,i;for(n={},r=0,e=(i="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;r<e;r++)t=i[r],n["[object "+t+"]"]=t.toLowerCase();return function(e){var t;return t=Object.prototype.toString.call(e),n[t]||"object"}}(),U=function(e,t,n){return null==t&&(t=0),null==n&&(n=1),e<t&&(e=t),n<e&&(e=n),e},ke=function(e){return 3<=e.length?Array.prototype.slice.call(e):e[0]},m=function(e){var t,n;for(e._clipped=!1,e._unclipped=e.slice(0),t=n=0;n<3;t=++n)t<3?((e[t]<0||255<e[t])&&(e._clipped=!0),e[t]<0&&(e[t]=0),255<e[t]&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),1<e[t]&&(e[t]=1));return e._clipped||delete e._unclipped,e},M=Math.PI,ge=Math.round,A=Math.cos,ae=Math.floor,ue=Math.pow,se=Math.log,be=Math.sin,we=Math.sqrt,P=Math.atan2,le=Math.max,ie=Math.abs,f=2*M,l=M/3,i=M/180,a=180/M,(oe=function(){return arguments[0]instanceof E?arguments[0]:function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(E,arguments,function(){})}).default=oe,h=[],"undefined"!=typeof module&&null!==module&&null!=module.exports&&(module.exports=oe),"function"==typeof define&&define.amd?define("chroma/chroma",[],function(){return oe}):("undefined"!=typeof exports&&null!==exports?exports:this).chroma=oe,oe.version="1.3.7",d={},c=!(u=[]),E=function(){function e(){var e,t,n,r,i,o,a,s;for(this,t=[],a=0,r=arguments.length;a<r;a++)null!=(e=arguments[a])&&t.push(e);if(1<t.length&&(o=t[t.length-1]),null!=d[o])this._rgb=m(d[o](ke(t.slice(0,-1))));else{for(c||(u=u.sort(function(e,t){return t.p-e.p}),c=!0),s=0,i=u.length;s<i&&!(o=(n=u[s]).test.apply(n,t));s++);o&&(this._rgb=m(d[o].apply(d,t)))}null==this._rgb&&console.warn("unknown format: "+t),null==this._rgb&&(this._rgb=[0,0,0]),3===this._rgb.length&&this._rgb.push(1)}return e.prototype.toString=function(){return this.hex()},e.prototype.clone=function(){return oe(me._rgb)},e}(),oe._input=d,oe.brewer=n={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var e,t;for(e in t=[],n)t.push(n[e.toLowerCase()]=n[e])}(),oe.colors=Se={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},B=function(){var e,t,n,r,i,o,a;return r=(t=ke(arguments))[0],e=t[1],n=t[2],o=(r+16)/116,i=isNaN(e)?o:o+e/500,a=isNaN(n)?o:o-n/200,o=s.Yn*F(o),i=s.Xn*F(i),a=s.Zn*F(a),[Ce(3.2404542*i-1.5371385*o-.4985314*a),Ce(-.969266*i+1.8760108*o+.041556*a),n=Ce(.0556434*i-.2040259*o+1.0572252*a),3<t.length?t[3]:1]},Ce=function(e){return 255*(e<=.00304?12.92*e:1.055*ue(e,1/2.4)-.055)},F=function(e){return e>s.t1?e*e*e:s.t2*(e-s.t0)},s={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ne=function(){var e,t,n,r,i,o,a;return n=(r=ke(arguments))[0],t=r[1],e=r[2],o=(i=fe(n,t,e))[0],[116*(a=i[1])-16,500*(o-a),200*(a-i[2])]},pe=function(e){return(e/=255)<=.04045?e/12.92:ue((e+.055)/1.055,2.4)},Te=function(e){return e>s.t3?ue(e,1/3):e/s.t2+s.t0},fe=function(){var e,t,n,r;return n=(r=ke(arguments))[0],t=r[1],e=r[2],n=pe(n),t=pe(t),e=pe(e),[Te((.4124564*n+.3575761*t+.1804375*e)/s.Xn),Te((.2126729*n+.7151522*t+.072175*e)/s.Yn),Te((.0193339*n+.119192*t+.9503041*e)/s.Zn)]},oe.lab=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(E,Oe.call(arguments).concat(["lab"]),function(){})},d.lab=B,E.prototype.lab=function(){return ne(this._rgb)},p=function(r){var e,t,n,i,o,a,s,l,u,c,d;return 2===(r=function(){var e,t,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(oe(i));return n}()).length?(u=function(){var e,t,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(i.lab());return n}(),o=u[0],a=u[1],e=function(n){var r,e;return e=function(){var e,t;for(t=[],r=e=0;e<=2;r=++e)t.push(o[r]+n*(a[r]-o[r]));return t}(),oe.lab.apply(oe,e)}):3===r.length?(c=function(){var e,t,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(i.lab());return n}(),o=c[0],a=c[1],s=c[2],e=function(n){var r,e;return e=function(){var e,t;for(t=[],r=e=0;e<=2;r=++e)t.push((1-n)*(1-n)*o[r]+2*(1-n)*n*a[r]+n*n*s[r]);return t}(),oe.lab.apply(oe,e)}):4===r.length?(d=function(){var e,t,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(i.lab());return n}(),o=d[0],a=d[1],s=d[2],l=d[3],e=function(n){var r,e;return e=function(){var e,t;for(t=[],r=e=0;e<=2;r=++e)t.push((1-n)*(1-n)*(1-n)*o[r]+3*(1-n)*(1-n)*n*a[r]+3*(1-n)*n*n*s[r]+n*n*n*l[r]);return t}(),oe.lab.apply(oe,e)}):5===r.length&&(t=p(r.slice(0,3)),n=p(r.slice(2,5)),e=function(e){return e<.5?t(2*e):n(2*(e-.5))}),e},oe.bezier=function(e){var t;return(t=p(e)).scale=function(){return oe.scale(t)},t},oe.cubehelix=function(a,s,l,u,c){var d,h,t;return null==a&&(a=300),null==s&&(s=-1.5),null==l&&(l=1),null==u&&(u=1),null==c&&(c=[0,1]),d=0,"array"===_e(c)?h=c[1]-c[0]:(h=0,c=[c,c]),(t=function(e){var t,n,r,i,o;return t=f*((a+120)/360+s*e),i=ue(c[0]+h*e,u),n=(0!==d?l[0]+e*d:l)*i*(1-i)/2,r=A(t),o=be(t),oe(m([255*(i+n*(-.14861*r+1.78277*o)),255*(i+n*(-.29227*r-.90649*o)),255*(i+n*(1.97294*r))]))}).start=function(e){return null==e?a:(a=e,t)},t.rotations=function(e){return null==e?s:(s=e,t)},t.gamma=function(e){return null==e?u:(u=e,t)},t.hue=function(e){return null==e?l:("array"===_e(l=e)?0===(d=l[1]-l[0])&&(l=l[1]):d=0,t)},t.lightness=function(e){return null==e?c:("array"===_e(e)?h=(c=e)[1]-e[0]:(c=[e,e],h=0),t)},t.scale=function(){return oe.scale(t)},t.hue(l),t},oe.random=function(){var e,t;for("0123456789abcdef",e="#",t=0;t<6;++t)e+="0123456789abcdef".charAt(ae(16*Math.random()));return new E(e)},h=[],O=function(e,t,n,r){var i,o,a,s;for(null==n&&(n=.5),null==r&&(r="rgb"),"object"!==_e(e)&&(e=oe(e)),"object"!==_e(t)&&(t=oe(t)),a=0,o=h.length;a<o;a++)if(r===(i=h[a])[0]){s=i[1](e,t,n,r);break}if(null==s)throw"color mode "+r+" is not supported";return s.alpha(e.alpha()+n*(t.alpha()-e.alpha()))},oe.interpolate=O,E.prototype.interpolate=function(e,t,n){return O(this,e,t,n)},oe.mix=O,E.prototype.mix=E.prototype.interpolate,d.rgb=function(){var e,t,n,r;for(e in n=[],t=ke(arguments))r=t[e],n.push(r);return n},oe.rgb=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(E,Oe.call(arguments).concat(["rgb"]),function(){})},E.prototype.rgb=function(e){return null==e&&(e=!0),e?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},E.prototype.rgba=function(e){return null==e&&(e=!0),e?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},u.push({p:3,test:function(e){var t;return t=ke(arguments),"array"===_e(t)&&3===t.length?"rgb":4===t.length&&"number"===_e(t[3])&&0<=t[3]&&t[3]<=1?"rgb":void 0}}),d.lrgb=d.rgb,I=function(e,t,n,r){var i,o;return i=e._rgb,o=t._rgb,new E(we(ue(i[0],2)*(1-n)+ue(o[0],2)*n),we(ue(i[1],2)*(1-n)+ue(o[1],2)*n),we(ue(i[2],2)*(1-n)+ue(o[2],2)*n),r)},v=function(e){var t,n,r,i,o;for(t=1/e.length,o=[0,0,0,0],r=0,n=e.length;r<n;r++)i=e[r]._rgb,o[0]+=ue(i[0],2)*t,o[1]+=ue(i[1],2)*t,o[2]+=ue(i[2],2)*t,o[3]+=i[3]*t;return o[0]=we(o[0]),o[1]=we(o[1]),o[2]=we(o[2]),new E(o)},h.push(["lrgb",I]),oe.average=function(e,t){var n,r,i,o,a,s,l,u,c,d,h,f,p;if(null==t&&(t="rgb"),c=e.length,l=(e=e.map(function(e){return oe(e)})).splice(0,1)[0],"lrgb"===t)return v(e);for(u in o=[],s=a=0,f=l.get(t))f[u]=f[u]||0,o.push(isNaN(f[u])?0:1),"h"!==t.charAt(u)||isNaN(f[u])||(n=f[u]/180*M,a+=A(n),s+=be(n));for(r=l.alpha(),h=0,d=e.length;h<d;h++)for(u in p=(i=e[h]).get(t),r+=i.alpha(),f)isNaN(p[u])||(o[u]+=1,"h"===t.charAt(u)?(n=p[u]/180*M,a+=A(n),s+=be(n)):f[u]+=p[u]);for(u in f)if("h"===t.charAt(u)){for(n=P(s/o[u],a/o[u])/M*180;n<0;)n+=360;for(;360<=n;)n-=360;f[u]=n}else f[u]=f[u]/o[u];return oe(f,t).alpha(r/c)},_=function(e){var t,n;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[(n=parseInt(e,16))>>16,n>>8&255,255&n,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),[(n=parseInt(e,16))>>24&255,n>>16&255,n>>8&255,ge((255&n)/255*100)/100];if(null!=d.css&&(t=d.css(e)))return t;throw"unknown color: "+e},Q=function(e,t){var n,r,i,o,a,s;return null==t&&(t="rgb"),a=e[0],i=e[1],r=e[2],n=e[3],a=Math.round(a),i=Math.round(i),r=Math.round(r),s=(s="000000"+(a<<16|i<<8|r).toString(16)).substr(s.length-6),o=(o="0"+ge(255*n).toString(16)).substr(o.length-2),"#"+function(){switch(t.toLowerCase()){case"rgba":return s+o;case"argb":return o+s;default:return s}}()},d.hex=function(e){return _(e)},oe.hex=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(E,Oe.call(arguments).concat(["hex"]),function(){})},E.prototype.hex=function(e){return null==e&&(e="rgb"),Q(this._rgb,e)},u.push({p:4,test:function(e){if(1===arguments.length&&"string"===_e(e))return"hex"}}),T=function(){var e,t,n,r,i,o,a,s,l,u,c,d,h,f;if(i=(e=ke(arguments))[0],c=e[1],a=e[2],0===c)l=r=t=255*a;else{for(n=[0,0,0],d=2*a-(h=a<.5?a*(1+c):a+c-a*c),(f=[0,0,0])[0]=(i/=360)+1/3,f[1]=i,f[2]=i-1/3,o=s=0;s<=2;o=++s)f[o]<0&&(f[o]+=1),1<f[o]&&(f[o]-=1),6*f[o]<1?n[o]=d+6*(h-d)*f[o]:2*f[o]<1?n[o]=h:3*f[o]<2?n[o]=d+(h-d)*(2/3-f[o])*6:n[o]=d;l=(u=[ge(255*n[0]),ge(255*n[1]),ge(255*n[2])])[0],r=u[1],t=u[2]}return 3<e.length?[l,r,t,e[3]]:[l,r,t]},ee=function(e,t,n){var r,i,o,a,s;return void 0!==e&&3<=e.length&&(e=(a=e)[0],t=a[1],n=a[2]),e/=255,t/=255,n/=255,o=Math.min(e,t,n),i=((le=Math.max(e,t,n))+o)/2,le===o?(s=0,r=Number.NaN):s=i<.5?(le-o)/(le+o):(le-o)/(2-le-o),e===le?r=(t-n)/(le-o):t===le?r=2+(n-e)/(le-o):n===le&&(r=4+(e-t)/(le-o)),(r*=60)<0&&(r+=360),[r,s,i]},oe.hsl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(E,Oe.call(arguments).concat(["hsl"]),function(){})},d.hsl=T,E.prototype.hsl=function(){return ee(this._rgb)},C=function(){var e,t,n,r,i,o,a,s,l,u,c,d,h,f,p,v,m,g;if(i=(e=ke(arguments))[0],v=e[1],g=e[2],g*=255,0===v)l=r=t=g;else switch(360===i&&(i=0),360<i&&(i-=360),i<0&&(i+=360),a=g*(1-v),s=g*(1-v*(n=(i/=60)-(o=ae(i)))),m=g*(1-v*(1-n)),o){case 0:l=(u=[g,m,a])[0],r=u[1],t=u[2];break;case 1:l=(c=[s,g,a])[0],r=c[1],t=c[2];break;case 2:l=(d=[a,g,m])[0],r=d[1],t=d[2];break;case 3:l=(h=[a,s,g])[0],r=h[1],t=h[2];break;case 4:l=(f=[m,a,g])[0],r=f[1],t=f[2];break;case 5:l=(p=[g,a,s])[0],r=p[1],t=p[2]}return[l,r,t,3<e.length?e[3]:1]},te=function(){var e,t,n,r,i,o,a,s,l;return o=(a=ke(arguments))[0],n=a[1],e=a[2],i=Math.min(o,n,e),t=(le=Math.max(o,n,e))-i,l=le/255,0===le?(r=Number.NaN,s=0):(s=t/le,o===le&&(r=(n-e)/t),n===le&&(r=2+(e-o)/t),e===le&&(r=4+(o-n)/t),(r*=60)<0&&(r+=360)),[r,s,l]},oe.hsv=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(E,Oe.call(arguments).concat(["hsv"]),function(){})},d.hsv=C,E.prototype.hsv=function(){return te(this._rgb)},Y=function(e){return"number"===_e(e)&&0<=e&&e<=16777215?[e>>16,e>>8&255,255&e,1]:(console.warn("unknown num color: "+e),[0,0,0,1])},de=function(){var e;return((e=ke(arguments))[0]<<16)+(e[1]<<8)+e[2]},oe.num=function(e){return new E(e,"num")},E.prototype.num=function(e){return null==e&&(e="rgb"),de(this._rgb,e)},d.num=Y,u.push({p:1,test:function(e){if(1===arguments.length&&"number"===_e(e)&&0<=e&&e<=16777215)return"num"}}),x=function(){var e,t,n,r,i,o,a,s,l,u,c,d,h,f,p,v,m,g,y,b;if(s=(n=ke(arguments))[0],i=n[1],t=n[2],a=a/100*255,e=255*(i/=100),0===i)d=a=r=t;else switch(360===s&&(s=0),360<s&&(s-=360),s<0&&(s+=360),c=(u=t*(1-i))+e*(1-(o=(s/=60)-(l=ae(s)))),y=u+e*o,b=u+e,l){case 0:d=(h=[b,y,u])[0],a=h[1],r=h[2];break;case 1:d=(f=[c,b,u])[0],a=f[1],r=f[2];break;case 2:d=(p=[u,b,y])[0],a=p[1],r=p[2];break;case 3:d=(v=[u,c,b])[0],a=v[1],r=v[2];break;case 4:d=(m=[y,u,b])[0],a=m[1],r=m[2];break;case 5:d=(g=[b,u,c])[0],a=g[1],r=g[2]}return[d,a,r,3<n.length?n[3]:1]},$=function(){var e,t,n,r,i,o,a,s,l;return s=(l=ke(arguments))[0],i=l[1],t=l[2],a=Math.min(s,i,t),n=100*(r=(le=Math.max(s,i,t))-a)/255,e=a/(255-r)*100,0===r?o=Number.NaN:(s===le&&(o=(i-t)/r),i===le&&(o=2+(t-s)/r),t===le&&(o=4+(s-i)/r),(o*=60)<0&&(o+=360)),[o,n,e]},oe.hcg=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(E,Oe.call(arguments).concat(["hcg"]),function(){})},d.hcg=x,E.prototype.hcg=function(){return $(this._rgb)},g=function(e){var t,n,r,i,o,a,s,l;if(e=e.toLowerCase(),null!=oe.colors&&oe.colors[e])return _(oe.colors[e]);if(o=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=o.slice(1,4),i=a=0;a<=2;i=++a)s[i]=+s[i];s[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=o.slice(1,5),i=l=0;l<=3;i=++l)s[i]=+s[i];else if(o=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=o.slice(1,4),i=t=0;t<=2;i=++t)s[i]=ge(2.55*s[i]);s[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=o.slice(1,5),i=n=0;n<=2;i=++n)s[i]=ge(2.55*s[i]);s[3]=+s[3]}else(o=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((r=o.slice(1,4))[1]*=.01,r[2]*=.01,(s=T(r))[3]=1):(o=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((r=o.slice(1,4))[1]*=.01,r[2]*=.01,(s=T(r))[3]=+o[4]);return s},K=function(e){var t;return"rgb"===(t=e[3]<1?"rgba":"rgb")?t+"("+e.slice(0,3).map(ge).join(",")+")":"rgba"===t?t+"("+e.slice(0,3).map(ge).join(",")+","+e[3]+")":void 0},ve=function(e){return ge(100*e)/100},S=function(e,t){var n;return n=t<1?"hsla":"hsl",e[0]=ve(e[0]||0),e[1]=ve(100*e[1])+"%",e[2]=ve(100*e[2])+"%","hsla"===n&&(e[3]=t),n+"("+e.join(",")+")"},d.css=function(e){return g(e)},oe.css=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(E,Oe.call(arguments).concat(["css"]),function(){})},E.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?K(this._rgb):"hsl"===e.slice(0,3)?S(this.hsl(),this.alpha()):void 0},d.named=function(e){return _(Se[e])},u.push({p:5,test:function(e){if(1===arguments.length&&null!=Se[e])return"named"}}),E.prototype.name=function(e){var t,n;for(n in arguments.length&&(Se[e]&&(this._rgb=_(Se[e])),this._rgb[3]=1),t=this.hex(),Se)if(t===Se[n])return n;return t},V=function(){var e,t,n,r;return n=(r=ke(arguments))[0],e=r[1],t=r[2],[n,A(t*=i)*e,be(t)*e]},z=function(){var e,t,n,r,i,o,a,s,l;return a=(n=ke(arguments))[0],i=n[1],o=n[2],e=(s=V(a,i,o))[0],t=s[1],r=s[2],[(l=B(e,t,r))[0],l[1],r=l[2],3<n.length?n[3]:1]},N=function(){var e,t,n,r,i,o;return i=(o=ke(arguments))[0],e=o[1],t=o[2],n=we(e*e+t*t),r=(P(t,e)*a+360)%360,0===ge(1e4*n)&&(r=Number.NaN),[i,n,r]},re=function(){var e,t,n,r,i,o,a;return i=(o=ke(arguments))[0],n=o[1],t=o[2],r=(a=ne(i,n,t))[0],e=a[1],t=a[2],N(r,e,t)},oe.lch=function(){var e;return e=ke(arguments),new E(e,"lch")},oe.hcl=function(){var e;return e=ke(arguments),new E(e,"hcl")},d.lch=z,d.hcl=function(){var e,t,n,r;return t=(r=ke(arguments))[0],e=r[1],n=r[2],z([n,e,t])},E.prototype.lch=function(){return re(this._rgb)},E.prototype.hcl=function(){return re(this._rgb).reverse()},Z=function(e){var t,n,r,i,o,a;return null==e&&(e="rgb"),o=(a=ke(arguments))[0],r=a[1],t=a[2],r/=255,t/=255,[(1-(o/=255)-(i=1-Math.max(o,Math.max(r,t))))*(n=i<1?1/(1-i):0),(1-r-i)*n,(1-t-i)*n,i]},o=function(){var e,t,n,r,i,o;return n=(t=ke(arguments))[0],i=t[1],o=t[2],r=t[3],e=4<t.length?t[4]:1,1===r?[0,0,0,e]:[1<=n?0:255*(1-n)*(1-r),1<=i?0:255*(1-i)*(1-r),1<=o?0:255*(1-o)*(1-r),e]},d.cmyk=function(){return o(ke(arguments))},oe.cmyk=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(E,Oe.call(arguments).concat(["cmyk"]),function(){})},E.prototype.cmyk=function(){return Z(this._rgb)},d.gl=function(){var e,n,t,r,i;for(r=function(){var e,t;for(n in t=[],e=ke(arguments))i=e[n],t.push(i);return t}.apply(this,arguments),e=t=0;t<=2;e=++t)r[e]*=255;return r},oe.gl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(E,Oe.call(arguments).concat(["gl"]),function(){})},E.prototype.gl=function(){var e;return[(e=this._rgb)[0]/255,e[1]/255,e[2]/255,e[3]]},ce=function(e,t,n){var r;return e=(r=ke(arguments))[0],t=r[1],n=r[2],.2126*(e=q(e))+.7152*(t=q(t))+.0722*(n=q(n))},q=function(e){return(e/=255)<=.03928?e/12.92:ue((e+.055)/1.055,2.4)},D=function(e,t,n,r){var i,o;return i=e._rgb,o=t._rgb,new E(i[0]+n*(o[0]-i[0]),i[1]+n*(o[1]-i[1]),i[2]+n*(o[2]-i[2]),r)},h.push(["rgb",D]),E.prototype.luminance=function(i,o){var e,a,t,s;return null==o&&(o="rgb"),arguments.length?(t=this._rgb,0===i?t=[0,0,0,this._rgb[3]]:1===i?t=[255,255,255,this[3]]:(e=ce(this._rgb),1e-7,a=20,s=function(e,t){var n,r;return n=(r=e.interpolate(t,.5,o)).luminance(),Math.abs(i-n)<1e-7||!a--?r:i<n?s(e,r):s(r,t)},t=i<e?s(oe("black"),this).rgba():s(this,oe("white")).rgba()),oe(t).alpha(this.alpha())):ce(this._rgb)},xe=function(e){var t,n,r,i;return(i=e/100)<66?(r=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*se(n),t=i<20?0:.8274096064007395*(t=i-10)-254.76935184120902+115.67994401066147*se(t)):(r=351.97690566805693+.114206453784165*(r=i-55)-40.25366309332127*se(r),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*se(n),t=255),[r,n,t]},he=function(){var e,t,n,r,i,o,a;for(r=(i=ke(arguments))[0],i[1],e=i[2],n=1e3,t=4e4,.4;.4<t-n;)(o=xe(a=.5*(t+n)))[2]/o[0]>=e/r?t=a:n=a;return ge(a)},oe.temperature=oe.kelvin=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(E,Oe.call(arguments).concat(["temperature"]),function(){})},d.temperature=d.kelvin=d.K=xe,E.prototype.temperature=function(){return he(this._rgb)},E.prototype.kelvin=E.prototype.temperature,oe.contrast=function(e,t){var n,r,i,o;return"string"!==(i=_e(e))&&"number"!==i||(e=new E(e)),"string"!==(o=_e(t))&&"number"!==o||(t=new E(t)),n=e.luminance(),(r=t.luminance())<n?(n+.05)/(r+.05):(r+.05)/(n+.05)},oe.distance=function(e,t,n){var r,i,o,a,s,l,u;for(i in null==n&&(n="lab"),"string"!==(s=_e(e))&&"number"!==s||(e=new E(e)),"string"!==(l=_e(t))&&"number"!==l||(t=new E(t)),o=e.get(n),a=t.get(n),u=0,o)u+=(r=(o[i]||0)-(a[i]||0))*r;return Math.sqrt(u)},oe.deltaE=function(e,t,n,r){var i,o,a,s,l,u,c,d,h,f,p,v,m,g,y,b,w,x,_,k,S,T,C,O;for(null==n&&(n=1),null==r&&(r=1),"string"!==(y=_e(e))&&"number"!==y||(e=new E(e)),"string"!==(b=_e(t))&&"number"!==b||(t=new E(t)),i=(w=e.lab())[0],a=w[1],l=w[2],o=(x=t.lab())[0],s=x[1],u=x[2],c=we(a*a+l*l),d=we(s*s+u*u),k=i<16?.511:.040975*i/(1+.01765*i),_=.0638*c/(1+.0131*c)+.638,g=c<1e-6?0:180*P(l,a)/M;g<0;)g+=360;for(;360<=g;)g-=360;return S=164<=g&&g<=345?.56+ie(.2*A(M*(g+168)/180)):.36+ie(.4*A(M*(g+35)/180)),m=we((h=c*c*c*c)/(h+1900)),we((T=(i-o)/(n*k))*T+(C=(v=c-d)/(r*_))*C+((f=a-s)*f+(p=l-u)*p-v*v)/((O=_*(m*S+1-m))*O))},E.prototype.get=function(e){var t,n,r,i,o;return this,r=(i=e.split("."))[0],t=i[1],o=this[r](),t?-1<(n=r.indexOf(t))?o[n]:console.warn("unknown channel "+t+" in mode "+r):o},E.prototype.set=function(e,t){var n,r,i,o,a;if(this,i=(o=e.split("."))[0],n=o[1])if(a=this[i](),-1<(r=i.indexOf(n)))if("string"===_e(t))switch(t.charAt(0)){case"+":case"-":a[r]+=+t;break;case"*":a[r]*=+t.substr(1);break;case"/":a[r]/=+t.substr(1);break;default:a[r]=+t}else a[r]=t;else console.warn("unknown channel "+n+" in mode "+i);else a=t;return oe(a,i).alpha(this.alpha())},E.prototype.clipped=function(){return this._rgb._clipped||!1},E.prototype.alpha=function(e){return arguments.length?oe.rgb([this._rgb[0],this._rgb[1],this._rgb[2],e]):this._rgb[3]},E.prototype.darken=function(e){var t;return null==e&&(e=1),(t=this.lab())[0]-=s.Kn*e,oe.lab(t).alpha(this.alpha())},E.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},E.prototype.darker=E.prototype.darken,E.prototype.brighter=E.prototype.brighten,E.prototype.saturate=function(e){var t;return null==e&&(e=1),(t=this.lch())[1]+=e*s.Kn,t[1]<0&&(t[1]=0),oe.lch(t).alpha(this.alpha())},E.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},E.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),oe(t[0]*e,t[1]*e,t[2]*e,e)},G=function(e,t){return e*t/255},y=function(e,t){return t<e?t:e},H=function(e,t){return t<e?e:t},ye=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},X=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},t=function(e,t){return 255*(1-(1-t/255)/(e/255))},b=function(e,t){return 255===e?255:255<(e=t/255*255/(1-e/255))?255:e},(r=function(e,t,n){if(!r[n])throw"unknown blend mode "+n;return r[n](e,t)}).normal=(e=function(i){return function(e,t){var n,r;return n=oe(t).rgb(),r=oe(e).rgb(),oe(i(n,r),"rgb")}})((w=function(o){return function(e,t){var n,r,i;for(i=[],n=r=0;r<=3;n=++r)i[n]=o(e[n],t[n]);return i}})(function(e,t){return e})),r.multiply=e(w(G)),r.screen=e(w(ye)),r.overlay=e(w(X)),r.darken=e(w(y)),r.lighten=e(w(H)),r.dodge=e(w(b)),r.burn=e(w(t)),oe.blend=r,oe.analyze=function(e){var t,n,r,i;for(r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},n=0,t=e.length;n<t;n++)null==(i=e[n])||isNaN(i)||(r.values.push(i),r.sum+=i,i<r.min&&(r.min=i),i>r.max&&(r.max=i),r.count+=1);return r.domain=[r.min,r.max],r.limits=function(e,t){return oe.limits(r,e,t)},r},oe.scale=function(c,e){var d,u,h,t,f,p,v,m,g,y,n,b,w,a,x,_,k,S,s,r,T;return g="rgb",y=oe("#ccc"),!1,f=[a=0,1],w=[],d=!(b=[0,0]),n=!(h=[]),m=0,u={},x=!(t=!(v=1)),p=1,r=function(e){var t,n,r,i,o,a;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===_e(e)&&null!=oe.brewer&&(e=oe.brewer[e]||oe.brewer[e.toLowerCase()]||e),"array"===_e(e)){for(t=r=0,i=(e=e.slice(0)).length-1;0<=i?r<=i:i<=r;t=0<=i?++r:--r)n=e[t],"string"===_e(n)&&(e[t]=oe(n));for(t=a=w.length=0,o=e.length-1;0<=o?a<=o:o<=a;t=0<=o?++a:--a)w.push(t/(e.length-1))}return s(),h=e},k=function(e){var t,n;if(null!=d){for(n=d.length-1,t=0;t<n&&e>=d[t];)t++;return t-1}return 0},T=function(e){return e},function(e){var t,n,r,i,o;return o=e,2<d.length&&(i=d.length-1,t=k(e),r=d[0]+(d[1]-d[0])*(0+.5*a),n=d[i-1]+(d[i]-d[i-1])*(1-.5*a),o=m+(d[t]+.5*(d[t+1]-d[t])-r)/(n-r)*(v-m)),o},S=function(e,t){var n,r,i,o,a,s,l;if(null==t&&(t=!1),isNaN(e))return y;if(l=t?e:d&&2<d.length?k(e)/(d.length-2):v!==m?(e-m)/(v-m):1,t||(l=T(l)),1!==p&&(l=ue(l,p)),l=b[0]+l*(1-b[0]-b[1]),l=Math.min(1,Math.max(0,l)),i=Math.floor(1e4*l),x&&u[i])n=u[i];else{if("array"===_e(h))for(r=o=0,s=w.length-1;0<=s?o<=s:s<=o;r=0<=s?++o:--o){if(l<=(a=w[r])){n=h[r];break}if(a<=l&&r===w.length-1){n=h[r];break}if(a<l&&l<w[r+1]){l=(l-a)/(w[r+1]-a),n=oe.interpolate(h[r],h[r+1],l,g);break}}else"function"===_e(h)&&(n=h(l));x&&(u[i]=n)}return n},s=function(){return u={}},r(c),(_=function(e){var t;return t=oe(S(e)),n&&t[n]?t[n]():t}).classes=function(e){var t;return null!=e?("array"===_e(e)?f=[(d=e)[0],e[e.length-1]]:(t=oe.analyze(f),d=0===e?[t.min,t.max]:oe.limits(t,"e",e)),_):d},_.domain=function(e){var t,n,r,i,o,a,s;if(!arguments.length)return f;if(m=e[0],v=e[e.length-1],w=[],r=h.length,e.length===r&&m!==v)for(o=0,i=e.length;o<i;o++)n=e[o],w.push((n-m)/(v-m));else for(t=s=0,a=r-1;0<=a?s<=a:a<=s;t=0<=a?++s:--s)w.push(t/(r-1));return f=[m,v],_},_.mode=function(e){return arguments.length?(g=e,s(),_):g},_.range=function(e,t){return r(e),_},_.out=function(e){return n=e,_},_.spread=function(e){return arguments.length?(a=e,_):a},_.correctLightness=function(e){return null==e&&(e=!0),t=e,s(),T=t?function(e){var t,n,r,i,o,a,s,l,u;for(t=S(0,!0).lab()[0],n=S(1,!0).lab()[0],s=n<t,r=S(e,!0).lab()[0],i=r-(o=t+(n-t)*e),l=0,u=1,a=20;.01<Math.abs(i)&&0<a--;)s&&(i*=-1),e+=i<0?.5*(u-(l=e)):.5*(l-(u=e)),r=S(e,!0).lab()[0],i=r-o;return e}:function(e){return e},_},_.padding=function(e){return null!=e?("number"===_e(e)&&(e=[e,e]),b=e,_):b},_.colors=function(t,n){var r,i,e,o,a,s,l,u;if(arguments.length<2&&(n="hex"),a=[],0===arguments.length)a=h.slice(0);else if(1===t)a=[_(.5)];else if(1<t)i=f[0],r=f[1]-i,a=function(){s=[];for(var e=0;0<=t?e<t:t<e;0<=t?e++:e--)s.push(e);return s}.apply(this).map(function(e){return _(i+e/(t-1)*r)});else{if(c=[],l=[],d&&2<d.length)for(e=u=1,o=d.length;1<=o?u<o:o<u;e=1<=o?++u:--u)l.push(.5*(d[e-1]+d[e]));else l=f;a=l.map(function(e){return _(e)})}return oe[n]&&(a=a.map(function(e){return e[n]()})),a},_.cache=function(e){return null!=e?(x=e,_):x},_.gamma=function(e){return null!=e?(p=e,_):p},_},null==oe.scales&&(oe.scales={}),oe.scales.cool=function(){return oe.scale([oe.hsl(180,1,.9),oe.hsl(250,.7,.4)])},oe.scales.hot=function(){return oe.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},oe.analyze=function(e,n,r){var i,t,o,a,s,l;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==r&&(r=function(){return!0}),i=function(e){null==e||isNaN(e)||(s.values.push(e),s.sum+=e,e<s.min&&(s.min=e),e>s.max&&(s.max=e),s.count+=1)},l=function(e,t){if(r(e,t))return null!=n&&"function"===_e(n)?i(n(e)):null!=n&&"string"===_e(n)||"number"===_e(n)?i(e[n]):i(e)},"array"===_e(e))for(a=0,o=e.length;a<o;a++)l(e[a]);else for(t in e)l(e[t],t);return s.domain=[s.min,s.max],s.limits=function(e,t){return oe.limits(s,e,t)},s},oe.limits=function(e,t,n){var r,i,o,a,s,l,u,c,d,h,f,p,v,m,g,y,b,w,x,_,k,S,T,C,O,E,M,P,A,R,j,I,L,D,N,B,F,V,z,H,U,q,W,G,Y,X,Z,K,$,Q,J,ee,te,ne,re;if(null==t&&(t="equal"),null==n&&(n=7),"array"===_e(e)&&(e=oe.analyze(e)),O=e.min,le=e.max,e.sum,ne=e.values.sort(function(e,t){return e-t}),1===n)return[O,le];if(T=[],"c"===t.substr(0,1)&&(T.push(O),T.push(le)),"e"===t.substr(0,1)){for(T.push(O),_=j=1,N=n-1;1<=N?j<=N:N<=j;_=1<=N?++j:--j)T.push(O+_/n*(le-O));T.push(le)}else if("l"===t.substr(0,1)){if(O<=0)throw"Logarithmic scales are only possible for values > 0";for(E=Math.LOG10E*se(O),C=Math.LOG10E*se(le),T.push(O),_=re=1,B=n-1;1<=B?re<=B:B<=re;_=1<=B?++re:--re)T.push(ue(10,E+_/n*(C-E)));T.push(le)}else if("q"===t.substr(0,1)){for(T.push(O),_=r=1,q=n-1;1<=q?r<=q:q<=r;_=1<=q?++r:--r)I=(ne.length-1)*_/n,(L=ae(I))===I?T.push(ne[L]):(D=I-L,T.push(ne[L]*(1-D)+ne[L+1]*D));T.push(le)}else if("k"===t.substr(0,1)){for(P=ne.length,m=new Array(P),w=new Array(n),Q=!0,A=0,y=null,(y=[]).push(O),_=i=1,W=n-1;1<=W?i<=W:W<=i;_=1<=W?++i:--i)y.push(O+_/n*(le-O));for(y.push(le);Q;){for(k=o=0,G=n-1;0<=G?o<=G:G<=o;k=0<=G?++o:--o)w[k]=0;for(_=a=0,Y=P-1;0<=Y?a<=Y:Y<=a;_=0<=Y?++a:--a){for(te=ne[_],M=Number.MAX_VALUE,k=s=0,X=n-1;0<=X?s<=X:X<=s;k=0<=X?++s:--s)(x=ie(y[k]-te))<M&&(M=x,g=k);w[g]++,m[_]=g}for(R=new Array(n),k=l=0,Z=n-1;0<=Z?l<=Z:Z<=l;k=0<=Z?++l:--l)R[k]=null;for(_=u=0,K=P-1;0<=K?u<=K:K<=u;_=0<=K?++u:--u)null===R[b=m[_]]?R[b]=ne[_]:R[b]+=ne[_];for(k=c=0,$=n-1;0<=$?c<=$:$<=c;k=0<=$?++c:--c)R[k]*=1/w[k];for(Q=!1,k=d=0,F=n-1;0<=F?d<=F:F<=d;k=0<=F?++d:--d)if(R[k]!==y[_]){Q=!0;break}y=R,200<++A&&(Q=!1)}for(S={},k=h=0,V=n-1;0<=V?h<=V:V<=h;k=0<=V?++h:--h)S[k]=[];for(_=f=0,z=P-1;0<=z?f<=z:z<=f;_=0<=z?++f:--f)S[b=m[_]].push(ne[_]);for(J=[],k=p=0,H=n-1;0<=H?p<=H:H<=p;k=0<=H?++p:--p)J.push(S[k][0]),J.push(S[k][S[k].length-1]);for(J=J.sort(function(e,t){return e-t}),T.push(J[0]),_=v=1,U=J.length-1;v<=U;_=v+=2)ee=J[_],isNaN(ee)||-1!==T.indexOf(ee)||T.push(ee)}return T},k=function(e,t,n){var r,i,o,a;return e=(r=ke(arguments))[0],t=r[1],n=r[2],isNaN(e)&&(e=0),(e/=360)<1/3?o=1-((i=(1-t)/3)+(a=(1+t*A(f*e)/A(l-f*e))/3)):e<2/3?i=1-((a=(1-t)/3)+(o=(1+t*A(f*(e-=1/3))/A(l-f*e))/3)):a=1-((o=(1-t)/3)+(i=(1+t*A(f*(e-=2/3))/A(l-f*e))/3)),[255*(a=U(n*a*3)),255*(o=U(n*o*3)),255*(i=U(n*i*3)),3<r.length?r[3]:1]},J=function(){var e,t,n,r,i,o,a;return i=(o=ke(arguments))[0],t=o[1],e=o[2],f=2*Math.PI,i/=255,t/=255,e/=255,0===(a=1-Math.min(i,t,e)/(r=(i+t+e)/3))?n=0:(n=(i-t+(i-e))/2,n/=Math.sqrt((i-t)*(i-t)+(i-e)*(t-e)),n=Math.acos(n),t<e&&(n=f-n),n/=f),[360*n,a,r]},oe.hsi=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(E,Oe.call(arguments).concat(["hsi"]),function(){})},d.hsi=k,E.prototype.hsi=function(){return J(this._rgb)},R=function(e,t,n,r){var i,o,a,s,l,u,c,d,h,f;return"hsl"===r?(h=e.hsl(),f=t.hsl()):"hsv"===r?(h=e.hsv(),f=t.hsv()):"hcg"===r?(h=e.hcg(),f=t.hcg()):"hsi"===r?(h=e.hsi(),f=t.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",h=e.hcl(),f=t.hcl()),"h"===r.substr(0,1)&&(o=h[0],c=h[1],s=h[2],a=f[0],d=f[1],l=f[2]),isNaN(o)||isNaN(a)?isNaN(o)?isNaN(a)?i=Number.NaN:(i=a,1!==s&&0!==s||"hsv"===r||(u=d)):(i=o,1!==l&&0!==l||"hsv"===r||(u=c)):i=o+n*(o<a&&180<a-o?a-(o+360):a<o&&180<o-a?a+360-o:a-o),null==u&&(u=c+n*(d-c)),oe[r](i,u,s+n*(l-s))},L=function(e,t,n,r){var i,o;return i=e.num(),o=t.num(),oe.num(i+(o-i)*n,"num")},(h=h.concat(function(){var e,t,n,r;for(r=[],t=0,e=(n=["hsv","hsl","hsi","hcl","lch","hcg"]).length;t<e;t++)W=n[t],r.push([W,R]);return r}())).push(["num",L]),j=function(e,t,n,r){var i,o;return i=e.lab(),o=t.lab(),new E(i[0]+n*(o[0]-i[0]),i[1]+n*(o[1]-i[1]),i[2]+n*(o[2]-i[2]),r)},h.push(["lab",j])}.call(this),define("chroma",["chroma/chroma"],function(e){return e}),define("aurelia-validation/validator",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.Validator=n}),define("aurelia-validation/validation-renderer-custom-attribute",["require","exports","./validation-controller"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.created=function(e){this.container=e.container},e.prototype.bind=function(){this.controller=this.container.get(n.ValidationController),this.renderer=this.container.get(this.value),this.controller.addRenderer(this.renderer)},e.prototype.unbind=function(){this.controller.removeRenderer(this.renderer),this.controller=null,this.renderer=null},e}();t.ValidationRendererCustomAttribute=r});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,n,a):i(t,n))||a);return 3<o&&a&&Object.defineProperty(t,n,a),a};define("aurelia-validation/validation-errors-custom-attribute",["require","exports","aurelia-binding","aurelia-dependency-injection","aurelia-templating","./validation-controller","aurelia-pal"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){this.boundaryElement=e,this.controllerAccessor=t,this.controller=null,this.errors=[],this.errorsInternal=[]}return e.prototype.sort=function(){this.errorsInternal.sort(function(e,t){return e.targets[0]===t.targets[0]?0:2&e.targets[0].compareDocumentPosition(t.targets[0])?1:-1})},e.prototype.interestingElements=function(e){var t=this;return e.filter(function(e){return t.boundaryElement.contains(e)})},e.prototype.render=function(e){for(var t=function(t){var e=n.errorsInternal.findIndex(function(e){return e.error===t});-1!==e&&n.errorsInternal.splice(e,1)},n=this,r=0,i=e.unrender;r<i.length;r++){t(l=i[r].result)}for(var o=0,a=e.render;o<a.length;o++){var s=a[o],l=s.result,u=s.elements;if(!l.valid){var c=this.interestingElements(u);c.length&&this.errorsInternal.push({error:l,targets:c})}}this.sort(),this.errors=this.errorsInternal},e.prototype.bind=function(){this.controller||(this.controller=this.controllerAccessor()),this.controller.addRenderer(this)},e.prototype.unbind=function(){this.controller&&this.controller.removeRenderer(this)},e.inject=[a.DOM.Element,r.Lazy.of(o.ValidationController)],__decorate([i.bindable({defaultBindingMode:n.bindingMode.oneWay})],e.prototype,"controller",void 0),__decorate([i.bindable({primaryProperty:!0,defaultBindingMode:n.bindingMode.twoWay})],e.prototype,"errors",void 0),e=__decorate([i.customAttribute("validation-errors")],e)}();t.ValidationErrorsCustomAttribute=s}),define("aurelia-validation/validation-controller",["require","exports","./validator","./validate-trigger","./property-info","./validate-result","./property-accessor-parser","./validate-event"],function(e,t,n,r,h,o,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){this.validator=e,this.propertyParser=t,this.bindings=new Map,this.renderers=[],this.results=[],this.errors=[],this.validating=!1,this.elements=new Map,this.objects=new Map,this.validateTrigger=r.validateTrigger.blur,this.finishValidating=Promise.resolve(),this.eventCallbacks=[]}return e.prototype.subscribe=function(t){var n=this;return this.eventCallbacks.push(t),{dispose:function(){var e=n.eventCallbacks.indexOf(t);-1!==e&&n.eventCallbacks.splice(e,1)}}},e.prototype.addObject=function(e,t){this.objects.set(e,t)},e.prototype.removeObject=function(t){this.objects.delete(t),this.processResultDelta("reset",this.results.filter(function(e){return e.object===t}),[])},e.prototype.addError=function(e,t,n){var r;void 0===n&&(n=null),r=null===n?n:this.propertyParser.parse(n);var i=new o.ValidateResult({__manuallyAdded__:!0},t,r,!1,e);return this.processResultDelta("validate",[],[i]),i},e.prototype.removeError=function(e){-1!==this.results.indexOf(e)&&this.processResultDelta("reset",[e],[])},e.prototype.addRenderer=function(e){var t=this;this.renderers.push(e),e.render({kind:"validate",render:this.results.map(function(e){return{result:e,elements:t.elements.get(e)}}),unrender:[]})},e.prototype.removeRenderer=function(e){var t=this;this.renderers.splice(this.renderers.indexOf(e),1),e.render({kind:"reset",render:[],unrender:this.results.map(function(e){return{result:e,elements:t.elements.get(e)}})})},e.prototype.registerBinding=function(e,t,n){this.bindings.set(e,{target:t,rules:n,propertyInfo:null})},e.prototype.unregisterBinding=function(e){this.resetBinding(e),this.bindings.delete(e)},e.prototype.getInstructionPredicate=function(e){var t=this;if(e){var n,r=e.object,i=e.propertyName,o=e.rules;return n=e.propertyName?function(e){return e.object===r&&e.propertyName===i}:function(e){return e.object===r},o?function(e){return n(e)&&t.validator.ruleExists(o,e.rule)}:n}return function(){return!0}},e.prototype.validate=function(i){var e,d=this;if(i){var t=i.object,n=i.propertyName,r=i.rules;r=r||this.objects.get(t),e=void 0===i.propertyName?function(){return d.validator.validateObject(t,r)}:function(){return d.validator.validateProperty(t,n,r)}}else e=function(){for(var e=[],t=0,n=Array.from(d.objects);t<n.length;t++){var r=n[t],i=r[0],o=r[1];e.push(d.validator.validateObject(i,o))}for(var a=0,s=Array.from(d.bindings);a<s.length;a++){var l=s[a],u=l[0],c=(o=l[1].rules,h.getPropertyInfo(u.sourceExpression,u.source));c&&!d.objects.has(c.object)&&e.push(d.validator.validateProperty(c.object,c.propertyName,o))}return Promise.all(e).then(function(e){return e.reduce(function(e,t){return e.concat(t)},[])})};this.validating=!0;var o=this.finishValidating.then(e).then(function(e){var t=d.getInstructionPredicate(i),n=d.results.filter(t);d.processResultDelta("validate",n,e),o===d.finishValidating&&(d.validating=!1);var r={instruction:i,valid:void 0===e.find(function(e){return!e.valid}),results:e};return d.invokeCallbacks(i,r),r}).catch(function(e){return d.validating=!1,d.finishValidating=Promise.resolve(),Promise.reject(e)});return this.finishValidating=o},e.prototype.reset=function(e){var t=this.getInstructionPredicate(e),n=this.results.filter(t);this.processResultDelta("reset",n,[]),this.invokeCallbacks(e,null)},e.prototype.getAssociatedElements=function(e){for(var t=e.object,n=e.propertyName,r=[],i=0,o=Array.from(this.bindings);i<o.length;i++){var a=o[i],s=a[0],l=a[1].target,u=h.getPropertyInfo(s.sourceExpression,s.source);u&&u.object===t&&u.propertyName===n&&r.push(l)}return r},e.prototype.processResultDelta=function(e,t,o){var a={kind:e,render:[],unrender:[]};o=o.slice(0);for(var n=function(t){var e=s.elements.get(t);s.elements.delete(t),a.unrender.push({result:t,elements:e});var n=o.findIndex(function(e){return e.rule===t.rule&&e.object===t.object&&e.propertyName===t.propertyName});if(-1===n)s.results.splice(s.results.indexOf(t),1),t.valid||s.errors.splice(s.errors.indexOf(t),1);else{var r=o.splice(n,1)[0],i=s.getAssociatedElements(r);s.elements.set(r,i),a.render.push({result:r,elements:i}),s.results.splice(s.results.indexOf(t),1,r),!t.valid&&r.valid?s.errors.splice(s.errors.indexOf(t),1):t.valid||r.valid?r.valid||s.errors.push(r):s.errors.splice(s.errors.indexOf(t),1,r)}},s=this,r=0,i=t;r<i.length;r++){n(i[r])}for(var l=0,u=o;l<u.length;l++){var c=u[l],d=this.getAssociatedElements(c);a.render.push({result:c,elements:d}),this.elements.set(c,d),this.results.push(c),c.valid||this.errors.push(c)}for(var h=0,f=this.renderers;h<f.length;h++){f[h].render(a)}},e.prototype.validateBinding=function(e){if(e.isBound){var t,n=h.getPropertyInfo(e.sourceExpression,e.source),r=this.bindings.get(e);if(r&&(t=r.rules,r.propertyInfo=n),n){var i=n.object,o=n.propertyName;this.validate({object:i,propertyName:o,rules:t})}}},e.prototype.resetBinding=function(e){var t=this.bindings.get(e),n=h.getPropertyInfo(e.sourceExpression,e.source);if(!n&&t&&(n=t.propertyInfo),t&&(t.propertyInfo=null),n){var r=n.object,i=n.propertyName;this.reset({object:r,propertyName:i})}},e.prototype.changeTrigger=function(e){this.validateTrigger=e;for(var t=0,n=Array.from(this.bindings.keys());t<n.length;t++){var r=n[t],i=r.source;r.unbind(),r.bind(i)}},e.prototype.revalidateErrors=function(){for(var e=0,t=this.errors;e<t.length;e++){var n=t[e],r=n.object,i=n.propertyName,o=n.rule;if(!o.__manuallyAdded__){var a=[[o]];this.validate({object:r,propertyName:i,rules:a})}}},e.prototype.invokeCallbacks=function(e,t){if(0!==this.eventCallbacks.length)for(var n=new a.ValidateEvent(t?"validate":"reset",this.errors,this.results,e||null,t),r=0;r<this.eventCallbacks.length;r++)this.eventCallbacks[r](n)},e.inject=[n.Validator,i.PropertyAccessorParser],e}();t.ValidationController=s}),define("aurelia-validation/validation-controller-factory",["require","exports","./validation-controller","./validator","./property-accessor-parser"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function t(e){this.container=e}return t.get=function(e){return new t(e)},t.prototype.create=function(e){e||(e=this.container.get(r.Validator));var t=this.container.get(i.PropertyAccessorParser);return new n.ValidationController(e,t)},t.prototype.createForCurrentScope=function(e){var t=this.create(e);return this.container.registerInstance(n.ValidationController,t),t},t}();(t.ValidationControllerFactory=o)["protocol:aurelia:resolver"]=!0}),define("aurelia-validation/validate-trigger",["require","exports"],function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.validateTrigger||(t.validateTrigger={}))[n.manual=0]="manual",n[n.blur=1]="blur",n[n.change=2]="change",n[n.changeOrBlur=3]="changeOrBlur"}),define("aurelia-validation/validate-result",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function o(e,t,n,r,i){void 0===i&&(i=null),this.rule=e,this.object=t,this.propertyName=n,this.valid=r,this.message=i,this.id=o.nextId++}return o.prototype.toString=function(){return this.valid?"Valid.":this.message},o.nextId=0,o}();t.ValidateResult=n}),define("aurelia-validation/validate-event",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,n,r,i){this.type=e,this.errors=t,this.results=n,this.instruction=r,this.controllerValidateResult=i};t.ValidateEvent=n});var __extends=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();define("aurelia-validation/validate-binding-behavior",["require","exports","aurelia-task-queue","./validate-trigger","./validate-binding-behavior-base"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getValidateTrigger=function(e){return e.validateTrigger},t.inject=[n.TaskQueue],t}(i.ValidateBindingBehaviorBase);t.ValidateBindingBehavior=o;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getValidateTrigger=function(){return r.validateTrigger.manual},t.inject=[n.TaskQueue],t}(i.ValidateBindingBehaviorBase);t.ValidateManuallyBindingBehavior=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getValidateTrigger=function(){return r.validateTrigger.blur},t.inject=[n.TaskQueue],t}(i.ValidateBindingBehaviorBase);t.ValidateOnBlurBindingBehavior=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getValidateTrigger=function(){return r.validateTrigger.change},t.inject=[n.TaskQueue],t}(i.ValidateBindingBehaviorBase);t.ValidateOnChangeBindingBehavior=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getValidateTrigger=function(){return r.validateTrigger.changeOrBlur},t.inject=[n.TaskQueue],t}(i.ValidateBindingBehaviorBase);t.ValidateOnChangeOrBlurBindingBehavior=u}),define("aurelia-validation/validate-binding-behavior-base",["require","exports","aurelia-dependency-injection","./validation-controller","./validate-trigger","./get-target-dom-element"],function(e,t,l,u,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.taskQueue=e}return e.prototype.bind=function(e,t,n,r){var i,o=this,a=d.getTargetDOMElement(e,t);if(n instanceof u.ValidationController?i=n:(i=t.container.get(l.Optional.of(u.ValidationController)),r=n),null===i)throw new Error("A ValidationController has not been registered.");i.registerBinding(e,a,r),e.validationController=i;var s=this.getValidateTrigger(i);s&c.validateTrigger.change&&(e.vbbUpdateSource=e.updateSource,e.updateSource=function(e){this.vbbUpdateSource(e),this.validationController.validateBinding(this)}),s&c.validateTrigger.blur&&(e.validateBlurHandler=function(){o.taskQueue.queueMicroTask(function(){return i.validateBinding(e)})},(e.validateTarget=a).addEventListener("blur",e.validateBlurHandler)),s!==c.validateTrigger.manual&&(e.standardUpdateTarget=e.updateTarget,e.updateTarget=function(e){this.standardUpdateTarget(e),this.validationController.resetBinding(this)})},e.prototype.unbind=function(e){e.vbbUpdateSource&&(e.updateSource=e.vbbUpdateSource,e.vbbUpdateSource=null),e.standardUpdateTarget&&(e.updateTarget=e.standardUpdateTarget,e.standardUpdateTarget=null),e.validateBlurHandler&&(e.validateTarget.removeEventListener("blur",e.validateBlurHandler),e.validateBlurHandler=null,e.validateTarget=null),e.validationController.unregisterBinding(e),e.validationController=null},e}();t.ValidateBindingBehaviorBase=n}),define("aurelia-validation/util",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)}}),define("aurelia-validation/property-info",["require","exports","aurelia-binding"],function(e,t,o){"use strict";function a(e,t,n){var r=t.evaluate(n,null);if(null==r||r instanceof Object)return r;throw new Error("The '"+t+"' part of '"+e+"' evaluates to "+r+" instead of an object, null or undefined.")}Object.defineProperty(t,"__esModule",{value:!0}),t.getPropertyInfo=function(e,t){for(var n,r,i=e;e instanceof o.BindingBehavior||e instanceof o.ValueConverter;)e=e.expression;if(e instanceof o.AccessScope)n=o.getContextFor(e.name,t,e.ancestor),r=e.name;else if(e instanceof o.AccessMember)n=a(i,e.object,t),r=e.name;else{if(!(e instanceof o.AccessKeyed))throw new Error("Expression '"+i+"' is not compatible with the validate binding-behavior.");n=a(i,e.object,t),r=e.key.evaluate(t)}return null==n?null:{object:n,propertyName:r}}}),define("aurelia-validation/property-accessor-parser",["require","exports","aurelia-binding","./util"],function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.parser=e}return e.prototype.parse=function(e){if(i.isString(e))return e;var t=o(e.toString()),n=this.parser.parse(t);if(n instanceof r.AccessScope||n instanceof r.AccessMember&&n.object instanceof r.AccessScope)return n.name;throw new Error('Invalid property expression: "'+n+'"')},e.inject=[r.Parser],e}();function o(e){var t=/^function\s*\([$_\w\d]+\)\s*\{(?:\s*"use strict";)?\s*(?:[$_\w\d.['"\]+;]+)?\s*return\s+[$_\w\d]+\.([$_\w\d]+)\s*;?\s*\}$/.exec(e)||/^\(?[$_\w\d]+\)?\s*=>\s*[$_\w\d]+\.([$_\w\d]+)$/.exec(e);if(null===t)throw new Error("Unable to parse accessor function:\n"+e);return t[1]}t.PropertyAccessorParser=n,t.getAccessorExpression=o}),define("aurelia-validation/implementation/validation-rules",["require","exports","./rules","./validation-messages","../util"],function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,n,r,i,o){void 0===n&&(n={}),this.fluentEnsure=r,this.fluentRules=i,this.parsers=o,this.rule={property:e,condition:t,config:n,when:null,messageKey:"default",message:null,sequence:i.sequence},this.fluentEnsure._addRule(this.rule)}return e.prototype.then=function(){return this.fluentRules.sequence++,this},e.prototype.withMessageKey=function(e){return this.rule.messageKey=e,this.rule.message=null,this},e.prototype.withMessage=function(e){return this.rule.messageKey="custom",this.rule.message=this.parsers.message.parse(e),this},e.prototype.when=function(e){return this.rule.when=e,this},e.prototype.tag=function(e){return this.rule.tag=e,this},e.prototype.ensure=function(e){return this.fluentEnsure.ensure(e)},e.prototype.ensureObject=function(){return this.fluentEnsure.ensureObject()},Object.defineProperty(e.prototype,"rules",{get:function(){return this.fluentEnsure.rules},enumerable:!0,configurable:!0}),e.prototype.on=function(e){return this.fluentEnsure.on(e)},e.prototype.satisfies=function(e,t){return this.fluentRules.satisfies(e,t)},e.prototype.satisfiesRule=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(t=this.fluentRules).satisfiesRule.apply(t,[e].concat(n))},e.prototype.required=function(){return this.fluentRules.required()},e.prototype.matches=function(e){return this.fluentRules.matches(e)},e.prototype.email=function(){return this.fluentRules.email()},e.prototype.minLength=function(e){return this.fluentRules.minLength(e)},e.prototype.maxLength=function(e){return this.fluentRules.maxLength(e)},e.prototype.minItems=function(e){return this.fluentRules.minItems(e)},e.prototype.maxItems=function(e){return this.fluentRules.maxItems(e)},e.prototype.equals=function(e){return this.fluentRules.equals(e)},e}();t.FluentRuleCustomizer=o;var a=function(){function a(e,t,n){this.fluentEnsure=e,this.parsers=t,this.property=n,this.sequence=0}return a.prototype.displayName=function(e){return this.property.displayName=e,this},a.prototype.satisfies=function(e,t){return new o(this.property,e,t,this.fluentEnsure,this,this.parsers)},a.prototype.satisfiesRule=function(e){for(var r=this,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];var o=a.customRules[e];if(!o){if((o=this[e])instanceof Function)return o.call.apply(o,[this].concat(i));throw new Error('Rule with name "'+e+'" does not exist.')}var n=o.argsToConfig?o.argsToConfig.apply(o,i):void 0;return this.satisfies(function(e,t){return(n=o.condition).call.apply(n,[r,e,t].concat(i));var n},n).withMessageKey(e)},a.prototype.required=function(){return this.satisfies(function(e){return null!=e&&!(r.isString(e)&&!/\S/.test(e))}).withMessageKey("required")},a.prototype.matches=function(t){return this.satisfies(function(e){return null==e||0===e.length||t.test(e)}).withMessageKey("matches")},a.prototype.email=function(){return this.matches(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/).withMessageKey("email")},a.prototype.minLength=function(t){return this.satisfies(function(e){return null==e||0===e.length||e.length>=t},{length:t}).withMessageKey("minLength")},a.prototype.maxLength=function(t){return this.satisfies(function(e){return null==e||0===e.length||e.length<=t},{length:t}).withMessageKey("maxLength")},a.prototype.minItems=function(t){return this.satisfies(function(e){return null==e||e.length>=t},{count:t}).withMessageKey("minItems")},a.prototype.maxItems=function(t){return this.satisfies(function(e){return null==e||e.length<=t},{count:t}).withMessageKey("maxItems")},a.prototype.equals=function(t){return this.satisfies(function(e){return null==e||""===e||e===t},{expectedValue:t}).withMessageKey("equals")},a.customRules={},a}();t.FluentRules=a;var s=function(){function e(e){this.parsers=e,this.rules=[]}return e.prototype.ensure=function(e){this.assertInitialized();var t=this.parsers.property.parse(e),n=new a(this,this.parsers,{name:t,displayName:null});return this.mergeRules(n,t)},e.prototype.ensureObject=function(){this.assertInitialized();var e=new a(this,this.parsers,{name:null,displayName:null});return this.mergeRules(e,null)},e.prototype.on=function(e){return n.Rules.set(e,this.rules),this},e.prototype._addRule=function(e){for(;this.rules.length<e.sequence+1;)this.rules.push([]);this.rules[e.sequence].push(e)},e.prototype.assertInitialized=function(){if(!this.parsers)throw new Error("Did you forget to add \".plugin('aurelia-validation')\" to your main.js?")},e.prototype.mergeRules=function(e,t){var n=this.rules.find(function(e){return 0<e.length&&e[0].property.name===t});if(n){var r=n[n.length-1];e.sequence=r.sequence,null!==r.property.displayName&&(e=e.displayName(r.property.displayName))}return e},e}();t.FluentEnsure=s;var l=function(){function t(){}return t.initialize=function(e,t){this.parsers={message:e,property:t}},t.ensure=function(e){return new s(t.parsers).ensure(e)},t.ensureObject=function(){return new s(t.parsers).ensureObject()},t.customRule=function(e,t,n,r){i.validationMessages[e]=n,a.customRules[e]={condition:t,argsToConfig:r}},t.taggedRules=function(e,t){return e.map(function(e){return e.filter(function(e){return e.tag===t})})},t.untaggedRules=function(e){return e.map(function(e){return e.filter(function(e){return void 0===e.tag})})},t.off=function(e){n.Rules.unset(e)},t}();t.ValidationRules=l}),define("aurelia-validation/implementation/validation-messages",["require","exports","./validation-message-parser"],function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.validationMessages={default:"${$displayName} is invalid.",required:"${$displayName} is required.",matches:"${$displayName} is not correctly formatted.",email:"${$displayName} is not a valid email.",minLength:"${$displayName} must be at least ${$config.length} character${$config.length === 1 ? '' : 's'}.",maxLength:"${$displayName} cannot be longer than ${$config.length} character${$config.length === 1 ? '' : 's'}.",minItems:"${$displayName} must contain at least ${$config.count} item${$config.count === 1 ? '' : 's'}.",maxItems:"${$displayName} cannot contain more than ${$config.count} item${$config.count === 1 ? '' : 's'}.",equals:"${$displayName} must be ${$config.expectedValue}."};var r=function(){function e(e){this.parser=e}return e.prototype.getMessage=function(e){var t;return t=e in n.validationMessages?n.validationMessages[e]:n.validationMessages.default,this.parser.parse(t)},e.prototype.getDisplayName=function(e,t){if(null!=t)return t instanceof Function?t():t;var n=e.split(/(?=[A-Z])/).join(" ");return n.charAt(0).toUpperCase()+n.slice(1)},e.inject=[t.ValidationMessageParser],e}();n.ValidationMessageProvider=r});var __extends=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();define("aurelia-validation/implementation/validation-message-parser",["require","exports","aurelia-binding","aurelia-templating","aurelia-logging","./expression-visitor"],function(e,t,i,n,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.bindinqLanguage=e,this.emptyStringExpression=new i.LiteralString(""),this.nullExpression=new i.LiteralPrimitive(null),this.undefinedExpression=new i.LiteralPrimitive(void 0),this.cache={}}return e.prototype.parse=function(e){if(void 0!==this.cache[e])return this.cache[e];var t=this.bindinqLanguage.parseInterpolation(null,e);if(null===t)return new i.LiteralString(e);for(var n=new i.LiteralString(t[0]),r=1;r<t.length;r+=2)n=new i.Binary("+",n,new i.Binary("+",this.coalesce(t[r]),new i.LiteralString(t[r+1])));return s.validate(n,e),this.cache[e]=n},e.prototype.coalesce=function(e){return new i.Conditional(new i.Binary("||",new i.Binary("===",e,this.nullExpression),new i.Binary("===",e,this.undefinedExpression)),this.emptyStringExpression,new i.CallMember(e,"toString",[]))},e.inject=[n.BindingLanguage],e}();t.ValidationMessageParser=a;var s=function(n){function r(e){var t=n.call(this)||this;return t.originalMessage=e,t}return __extends(r,n),r.validate=function(e,t){var n=new r(t);e.accept(n)},r.prototype.visitAccessScope=function(e){if(0!==e.ancestor)throw new Error("$parent is not permitted in validation message expressions.");-1!==["displayName","propertyName","value","object","config","getDisplayName"].indexOf(e.name)&&o.getLogger("aurelia-validation").warn('Did you mean to use "$'+e.name+'" instead of "'+e.name+'" in this validation message template: "'+this.originalMessage+'"?')},r}(r.ExpressionVisitor);t.MessageExpressionValidator=s});var __extends=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();function _aureliaConfigureModuleLoader(){requirejs.config({baseUrl:"src/",paths:{root:"src",resources:"resources",elements:"resources/elements",attributes:"resources/attributes",valueConverters:"resources/value-converters",bindingBehaviors:"resources/binding-behaviors","polyline-miter-util":"../node_modules/polyline-miter-util/index","aurelia-binding":"../node_modules/aurelia-binding/dist/amd/aurelia-binding","polyline-normals":"../node_modules/polyline-normals/index","aurelia-bootstrapper":"../node_modules/aurelia-bootstrapper/dist/amd/aurelia-bootstrapper","aurelia-dependency-injection":"../node_modules/aurelia-dependency-injection/dist/amd/aurelia-dependency-injection","aurelia-event-aggregator":"../node_modules/aurelia-event-aggregator/dist/amd/aurelia-event-aggregator","aurelia-framework":"../node_modules/aurelia-framework/dist/amd/aurelia-framework","aurelia-history":"../node_modules/aurelia-history/dist/amd/aurelia-history","aurelia-history-browser":"../node_modules/aurelia-history-browser/dist/amd/aurelia-history-browser","aurelia-loader":"../node_modules/aurelia-loader/dist/amd/aurelia-loader","aurelia-loader-default":"../node_modules/aurelia-loader-default/dist/amd/aurelia-loader-default","aurelia-logging":"../node_modules/aurelia-logging/dist/amd/aurelia-logging","aurelia-logging-console":"../node_modules/aurelia-logging-console/dist/amd/aurelia-logging-console","aurelia-metadata":"../node_modules/aurelia-metadata/dist/amd/aurelia-metadata","aurelia-pal":"../node_modules/aurelia-pal/dist/amd/aurelia-pal","aurelia-pal-browser":"../node_modules/aurelia-pal-browser/dist/amd/aurelia-pal-browser","aurelia-path":"../node_modules/aurelia-path/dist/amd/aurelia-path","aurelia-polyfills":"../node_modules/aurelia-polyfills/dist/amd/aurelia-polyfills","aurelia-route-recognizer":"../node_modules/aurelia-route-recognizer/dist/amd/aurelia-route-recognizer","aurelia-router":"../node_modules/aurelia-router/dist/amd/aurelia-router","aurelia-task-queue":"../node_modules/aurelia-task-queue/dist/amd/aurelia-task-queue","aurelia-templating":"../node_modules/aurelia-templating/dist/amd/aurelia-templating","aurelia-templating-binding":"../node_modules/aurelia-templating-binding/dist/amd/aurelia-templating-binding","json-stringify-safe":"../node_modules/json-stringify-safe/stringify",text:"../node_modules/text/text","app-bundle":"../dist/app-bundle-555d295b52","clusterfck-worker":"../dist/clusterfck-worker-a153985d0f","tsne-worker":"../dist/tsne-worker-46a24ad61e","exploration-bundle":"../dist/exploration-bundle-1eac0e9346"},packages:[{name:"d3",location:"../node_modules/d3/build",main:"d3"},{name:"gl-vec2",location:"../node_modules/gl-vec2",main:"index"},{name:"hull",location:"../node_modules/hull.js/dist",main:"hull"},{name:"three",location:"../node_modules/three/build",main:"three"},{name:"three-line-2d",location:"../node_modules/three-line-2d",main:"index"},{name:"three-line-2d-shader",location:"../node_modules/three-line-2d/shaders",main:"basic"},{name:"three-orbit-controls",location:"../node_modules/three-orbit-controls",main:"index"},{name:"aurelia-templating-resources",location:"../node_modules/aurelia-templating-resources/dist/amd",main:"aurelia-templating-resources"},{name:"aurelia-templating-router",location:"../node_modules/aurelia-templating-router/dist/amd",main:"aurelia-templating-router"},{name:"aurelia-validation",location:"../node_modules/aurelia-validation/dist/amd",main:"aurelia-validation"},{name:"chroma",location:"../node_modules/chroma-js",main:"chroma"},{name:"inherits",location:"../node_modules/inherits",main:"inherits_browser"},{name:"localForage",location:"../node_modules/localforage/dist",main:"localforage"},{name:"normalize-wheel",location:"../node_modules/normalize-wheel/src",main:"normalizeWheel"},{name:"object-assign",location:"../node_modules/object-assign",main:"index"},{name:"papaparse",location:"../node_modules/papaparse",main:"papaparse"},{name:"redux",location:"../node_modules/redux/dist",main:"redux.min"},{name:"redux-batched-actions",location:"../node_modules/redux-batched-actions/lib",main:"index"},{name:"redux-persist",location:"../node_modules/redux-persist/dist",main:"redux-persist"},{name:"redux-thunk",location:"../node_modules/redux-thunk/dist",main:"redux-thunk"},{name:"redux-undo",location:"../node_modules/redux-undo/lib",main:"index"}],stubModules:["text"],shim:{},bundles:{"app-bundle":["app","app-actions","app-defaults","app-reducer","assets/styles/about","assets/styles/app","assets/styles/axis","assets/styles/base","assets/styles/colors","assets/styles/columns","assets/styles/configurator","assets/styles/dialog","assets/styles/docs","assets/styles/explore","assets/styles/flexbox","assets/styles/fragments","assets/styles/grid","assets/styles/higlass","assets/styles/home","assets/styles/index","assets/styles/mixins/ratio","assets/styles/mixins/rotate","assets/styles/mixins/slide-out-in","assets/styles/mixins/truncate","assets/styles/multi-select","assets/styles/navigation","assets/styles/pile-context-menu","assets/styles/pile-details","assets/styles/range","assets/styles/range-select","assets/styles/svg-icon","assets/styles/transitions","components/chartlet/chartlet","components/chartlet/chartlet-drawing","components/dialog/dialog","components/footer-main/footer-main","components/multi-select/multi-select","components/multi-select/multi-select-defaults","components/navigation","components/range-select/range-select","components/range-select/range-select-defaults","components/spinner","components/svg-icon/svg-icon","configs/app","configs/colors","configs/examples","configs/icons","configs/nav","environment","main","resources/index","services/chrom-info","services/export","services/font","services/states","text!views/../../assets/wiki/sidebar.html","text!views/../../assets/wiki/wiki.html","utils/anchor-link","utils/arrays-equal","utils/basic-higlass-config","utils/build-config","utils/caps","utils/check-text-input-focus","utils/debounce","utils/deep-clone","utils/dom-el","utils/download-as-csv","utils/download-as-json","utils/drag-drop","utils/flatten","utils/get-url-query-params","utils/halt-resume","utils/has-parent","utils/hilbert-curve","utils/mod","utils/object-values-to-string","utils/ping","utils/query-obj","utils/read-json-file","utils/redux-logger","utils/request-animation-frame","utils/scroll-to-anchor","utils/throttle","utils/validate-config","views/about","views/configurator","views/docs","views/explore","views/explore-actions","views/explore-defaults","views/explore-reducers","views/home","views/not-found"],"clusterfck-worker":[],"tsne-worker":[],"exploration-bundle":["components/fragments/fragments","components/fragments/fragments-actions","components/fragments/fragments-defaults","components/fragments/fragments-reducers","components/fragments/fragments-state","components/fragments/fragments-utils","components/fragments/matrix","components/fragments/matrix-defaults","components/fragments/pile","components/fragments/pile-colors","components/fragments/pile-defaults","components/fragments/pile-details","components/fragments/pile-menu","components/fragments/pile-menu-commands","components/higlass/higlass","components/higlass/higlass-actions","components/higlass/higlass-defaults","components/higlass/higlass-reducers","d3","d3/d3","gl-vec2","gl-vec2/add","gl-vec2/clone","gl-vec2/copy","gl-vec2/create","gl-vec2/cross","gl-vec2/distance","gl-vec2/divide","gl-vec2/dot","gl-vec2/forEach","gl-vec2/fromValues","gl-vec2/length","gl-vec2/lerp","gl-vec2/max","gl-vec2/min","gl-vec2/multiply","gl-vec2/negate","gl-vec2/normalize","gl-vec2/random","gl-vec2/scale","gl-vec2/scaleAndAdd","gl-vec2/set","gl-vec2/squaredDistance","gl-vec2/squaredLength","gl-vec2/subtract","gl-vec2/transformMat2","gl-vec2/transformMat2d","gl-vec2/transformMat3","gl-vec2/transformMat4","hull","hull/hull","polyline-miter-util","polyline-normals","three","three-line-2d","three-line-2d-shader","three-line-2d-shader/basic","three-line-2d/index","three-orbit-controls","three/three"]}})}define("aurelia-validation/implementation/standard-validator",["require","exports","aurelia-templating","../validator","../validate-result","./rules","./validation-messages"],function(e,t,n,r,h,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(r){function e(e,t){var n=r.call(this)||this;return n.messageProvider=e,n.lookupFunctions=t.lookupFunctions,n.getDisplayName=e.getDisplayName.bind(e),n}return __extends(e,r),e.prototype.validateProperty=function(e,t,n){return this.validate(e,t,n||null)},e.prototype.validateObject=function(e,t){return this.validate(e,null,t||null)},e.prototype.ruleExists=function(e,t){for(var n=e.length;n--;)if(-1!==e[n].indexOf(t))return!0;return!1},e.prototype.getMessage=function(e,t,n){var r=e.message||this.messageProvider.getMessage(e.messageKey),i=e.property,o=i.name,a=i.displayName;null!==o&&(a=this.messageProvider.getDisplayName(o,a));var s={$displayName:a,$propertyName:o,$value:n,$object:t,$config:e.config,$getDisplayName:this.getDisplayName};return r.evaluate({bindingContext:t,overrideContext:s},this.lookupFunctions)},e.prototype.validateRuleSequence=function(i,o,e,t,a){for(var s=this,l=null==o,u=e[t],c=!0,d=[],n=function(e){var n=u[e];if(!l&&n.property.name!==o)return"continue";if(n.when&&!n.when(i))return"continue";var r=null===n.property.name?i:i[n.property.name],t=n.condition(r,i);t instanceof Promise||(t=Promise.resolve(t)),d.push(t.then(function(e){var t=e?null:s.getMessage(n,i,r);return a.push(new h.ValidateResult(n,i,n.property.name,e,t)),c=c&&e,e}))},r=0;r<u.length;r++)n(r);return Promise.all(d).then(function(){return t++,c&&t<e.length?s.validateRuleSequence(i,o,e,t,a):a})},e.prototype.validate=function(e,t,n){return n||(n=i.Rules.get(e)),n?this.validateRuleSequence(e,t,n,0,[]):Promise.resolve([])},e.inject=[o.ValidationMessageProvider,n.ViewResources],e}(r.Validator);t.StandardValidator=a}),define("aurelia-validation/implementation/rules",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(){}return n.set=function(e,t){e instanceof Function&&(e=e.prototype),Object.defineProperty(e,n.key,{enumerable:!1,configurable:!1,writable:!0,value:t})},n.unset=function(e){e instanceof Function&&(e=e.prototype),e[n.key]=null},n.get=function(e){return e[n.key]||null},n.key="__rules__",n}();t.Rules=n}),define("aurelia-validation/implementation/expression-visitor",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.visitChain=function(e){this.visitArgs(e.expressions)},e.prototype.visitBindingBehavior=function(e){e.expression.accept(this),this.visitArgs(e.args)},e.prototype.visitValueConverter=function(e){e.expression.accept(this),this.visitArgs(e.args)},e.prototype.visitAssign=function(e){e.target.accept(this),e.value.accept(this)},e.prototype.visitConditional=function(e){e.condition.accept(this),e.yes.accept(this),e.no.accept(this)},e.prototype.visitAccessThis=function(e){e.ancestor=e.ancestor},e.prototype.visitAccessScope=function(e){e.name=e.name},e.prototype.visitAccessMember=function(e){e.object.accept(this)},e.prototype.visitAccessKeyed=function(e){e.object.accept(this),e.key.accept(this)},e.prototype.visitCallScope=function(e){this.visitArgs(e.args)},e.prototype.visitCallFunction=function(e){e.func.accept(this),this.visitArgs(e.args)},e.prototype.visitCallMember=function(e){e.object.accept(this),this.visitArgs(e.args)},e.prototype.visitPrefix=function(e){e.expression.accept(this)},e.prototype.visitBinary=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitLiteralPrimitive=function(e){e.value=e.value},e.prototype.visitLiteralArray=function(e){this.visitArgs(e.elements)},e.prototype.visitLiteralObject=function(e){this.visitArgs(e.values)},e.prototype.visitLiteralString=function(e){e.value=e.value},e.prototype.visitArgs=function(e){for(var t=0;t<e.length;t++)e[t].accept(this)},e}();t.ExpressionVisitor=n}),define("aurelia-validation/get-target-dom-element",["require","exports","aurelia-pal"],function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTargetDOMElement=function(e,t){var n=e.target;if(n instanceof Element)return n;for(var r=0,i=t.controllers.length;r<i;r++){var o=t.controllers[r];if(o.viewModel===n){var a=o.container.get(s.DOM.Element);if(a)return a;throw new Error('Unable to locate target element for "'+e.sourceExpression+'".')}}throw new Error('Unable to locate target element for "'+e.sourceExpression+'".')}}),define("aurelia-validation/aurelia-validation",["require","exports","./get-target-dom-element","./property-info","./property-accessor-parser","./validate-binding-behavior","./validate-event","./validate-result","./validate-trigger","./validation-controller","./validation-controller-factory","./validation-errors-custom-attribute","./validation-renderer-custom-attribute","./validator","./implementation/rules","./implementation/standard-validator","./implementation/validation-messages","./implementation/validation-message-parser","./implementation/validation-rules","aurelia-pal","./validator","./implementation/standard-validator","./implementation/validation-message-parser","./property-accessor-parser","./implementation/validation-rules"],function(e,n,t,r,i,o,a,s,l,u,c,d,h,f,p,v,m,g,y,b,w,x,_,k,S){"use strict";function T(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),T(t),T(r),T(i),T(o),T(a),T(s),T(l),T(u),T(c),T(d),T(h),T(f),T(p),T(v),T(m),T(g),T(y);var C=function(){function e(){this.validatorType=x.StandardValidator}return e.prototype.customValidator=function(e){this.validatorType=e},e.prototype.apply=function(e){var t=e.get(this.validatorType);e.registerInstance(w.Validator,t)},e}();n.AureliaValidationConfiguration=C,n.configure=function(e,t){var n=e.container.get(_.ValidationMessageParser),r=e.container.get(k.PropertyAccessorParser);S.ValidationRules.initialize(n,r);var i=new C;t instanceof Function&&t(i),i.apply(e.container),e.globalResources&&e.globalResources(b.PLATFORM.moduleName("./validate-binding-behavior"),b.PLATFORM.moduleName("./validation-errors-custom-attribute"),b.PLATFORM.moduleName("./validation-renderer-custom-attribute"))}}),define("aurelia-validation",["aurelia-validation/aurelia-validation"],function(e){return e}),define("aurelia-templating",["exports","aurelia-logging","aurelia-metadata","aurelia-pal","aurelia-path","aurelia-loader","aurelia-dependency-injection","aurelia-binding","aurelia-task-queue"],function(e,t,v,R,m,f,o,p,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TemplatingEngine=e.ElementConfigResource=e.CompositionEngine=e.SwapStrategies=e.HtmlBehaviorResource=e.BindableProperty=e.BehaviorPropertyObserver=e.Controller=e.ViewEngine=e.ModuleAnalyzer=e.ResourceDescription=e.ResourceModule=e.ViewCompiler=e.ViewFactory=e.BoundViewFactory=e.ViewSlot=e.View=e.ViewResources=e.ShadowDOM=e.ShadowSlot=e.PassThroughSlot=e.SlotCustomAttribute=e.BindingLanguage=e.ViewLocator=e.InlineViewStrategy=e.TemplateRegistryViewStrategy=e.NoViewStrategy=e.ConventionalViewStrategy=e.RelativeViewStrategy=e.viewStrategy=e.TargetInstruction=e.BehaviorInstruction=e.ViewCompileInstruction=e.ResourceLoadContext=e.ElementEvents=e.ViewEngineHooksResource=e.CompositionTransaction=e.CompositionTransactionOwnershipToken=e.CompositionTransactionNotifier=e.Animator=e.animationEvent=void 0,e._hyphenate=B,e._isAllWhitespace=F,e.viewEngineHooks=function(e){var t=function(e){v.metadata.define(v.metadata.resource,new V,e)};return e?t(e):t},e.children=function(e){return Ve(e,!0)},e.child=function(e){return Ve(e,!1)},e.resource=function(t){return function(e){v.metadata.define(v.metadata.resource,t,e)}},e.behavior=function(n){return function(e){if(n instanceof Fe)v.metadata.define(v.metadata.resource,n,e);else{var t=v.metadata.getOrCreateOwn(v.metadata.resource,Fe,e);Object.assign(t,n)}}},e.customElement=function(n){return function(e){var t=v.metadata.getOrCreateOwn(v.metadata.resource,Fe,e);t.elementName=$e(n,"custom element")}},e.customAttribute=function(n,r,i){return function(e){var t=v.metadata.getOrCreateOwn(v.metadata.resource,Fe,e);t.attributeName=$e(n,"custom attribute"),t.attributeDefaultBindingMode=r,t.aliases=i}},e.templateController=function(e){var t=function(e){var t=v.metadata.getOrCreateOwn(v.metadata.resource,Fe,e);t.liftsContent=!0};return e?t(e):t},e.bindable=function(o,e,t){var n=function(e,t,n){var r=t?e.constructor:e,i=v.metadata.getOrCreateOwn(v.metadata.resource,Fe,r);return t&&((o=o||{}).name=t),new Le(o).registerWith(r,i,n)};if(!o)return n;if(e){var r=o;return o=null,n(r,e,t)}return n},e.dynamicOptions=function(e){var t=function(e){var t=v.metadata.getOrCreateOwn(v.metadata.resource,Fe,e);t.hasDynamicOptions=!0};return e?t(e):t},e.useShadowDOM=function(e){var n="function"!=typeof e&&e?e:Qe,t=function(e){var t=v.metadata.getOrCreateOwn(v.metadata.resource,Fe,e);t.targetShadowDOM=!0,t.shadowDOMOptions=n};return"function"==typeof e?t(e):t},e.processAttributes=function(o){return function(e){var t=v.metadata.getOrCreateOwn(v.metadata.resource,Fe,e);t.processAttributes=function(e,t,n,r,i){try{o(e,t,n,r,i)}catch(e){a.getLogger("templating").error(e)}}}},e.processContent=function(i){return function(e){var t=v.metadata.getOrCreateOwn(v.metadata.resource,Fe,e);t.processContent=i?function(e,t,n,r){try{return i(e,t,n,r)}catch(e){return a.getLogger("templating").error(e),!1}}:Je}},e.containerless=function(e){var t=function(e){var t=v.metadata.getOrCreateOwn(v.metadata.resource,Fe,e);t.containerless=!0};return e?t(e):t},e.useViewStrategy=et,e.useView=function(e){return et(new X(e))},e.inlineView=function(e,t,n){return et(new Q(e,t,n))},e.noView=function(e,t){var n=void 0,r=void 0;"function"==typeof e?n=e:(r=e,n=void 0);var i=function(e){v.metadata.define(J.viewStrategyMetadataKey,new K(r,t),e)};return n?i(n):i},e.elementConfig=function(e){var t=function(e){v.metadata.define(v.metadata.resource,new Ke,e)};return e?t(e):t},e.viewResources=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){v.metadata.define(Ae.viewModelRequireMetadataKey,t,e)}};var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(t);var n,r,i,s,l,c,d,h,g,y,b,w,x,_,k,S,T,C,O,E,M=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A=(e.animationEvent={enterBegin:"animation:enter:begin",enterActive:"animation:enter:active",enterDone:"animation:enter:done",enterTimeout:"animation:enter:timeout",leaveBegin:"animation:leave:begin",leaveActive:"animation:leave:active",leaveDone:"animation:leave:done",leaveTimeout:"animation:leave:timeout",staggerNext:"animation:stagger:next",removeClassBegin:"animation:remove-class:begin",removeClassActive:"animation:remove-class:active",removeClassDone:"animation:remove-class:done",removeClassTimeout:"animation:remove-class:timeout",addClassBegin:"animation:add-class:begin",addClassActive:"animation:add-class:active",addClassDone:"animation:add-class:done",addClassTimeout:"animation:add-class:timeout",animateBegin:"animation:animate:begin",animateActive:"animation:animate:active",animateDone:"animation:animate:done",animateTimeout:"animation:animate:timeout",sequenceBegin:"animation:sequence:begin",sequenceDone:"animation:sequence:done"},e.Animator=function(){function e(){}return e.prototype.enter=function(e){return Promise.resolve(!1)},e.prototype.leave=function(e){return Promise.resolve(!1)},e.prototype.removeClass=function(e,t){return e.classList.remove(t),Promise.resolve(!1)},e.prototype.addClass=function(e,t){return e.classList.add(t),Promise.resolve(!1)},e.prototype.animate=function(e,t){return Promise.resolve(!1)},e.prototype.runSequence=function(e){},e.prototype.registerEffect=function(e,t){},e.prototype.unregisterEffect=function(e){},e}()),j=e.CompositionTransactionNotifier=function(){function e(e){this.owner=e,this.owner._compositionCount++}return e.prototype.done=function(){this.owner._compositionCount--,this.owner._tryCompleteTransaction()},e}(),I=e.CompositionTransactionOwnershipToken=function(){function e(e){this.owner=e,(this.owner._ownershipToken=this).thenable=this._createThenable()}return e.prototype.waitForCompositionComplete=function(){return this.owner._tryCompleteTransaction(),this.thenable},e.prototype.resolve=function(){this._resolveCallback()},e.prototype._createThenable=function(){var n=this;return new Promise(function(e,t){n._resolveCallback=e})},e}(),L=e.CompositionTransaction=function(){function e(){this._ownershipToken=null,this._compositionCount=0}return e.prototype.tryCapture=function(){return null===this._ownershipToken?new I(this):null},e.prototype.enlist=function(){return new j(this)},e.prototype._tryCompleteTransaction=function(){if(this._compositionCount<=0&&(this._compositionCount=0,null!==this._ownershipToken)){var e=this._ownershipToken;this._ownershipToken=null,e.resolve()}},e}(),D=/([A-Z])/g;function N(e){return"-"+e.toLowerCase()}function B(e){return(e.charAt(0).toLowerCase()+e.slice(1)).replace(D,N)}function F(e){return!(e.auInterpolationTarget||/[^\t\n\r ]/.test(e.textContent))}var V=e.ViewEngineHooksResource=function(){function t(){}return t.prototype.initialize=function(e,t){this.instance=e.get(t)},t.prototype.register=function(e,t){e.registerViewEngineHooks(this.instance)},t.prototype.load=function(e,t){},t.convention=function(e){if(e.endsWith("ViewEngineHooks"))return new t},t}();var z=e.ElementEvents=function(){function e(e){this.element=e,this.subscriptions={}}return e.prototype._enqueueHandler=function(e){this.subscriptions[e.eventName]=this.subscriptions[e.eventName]||[],this.subscriptions[e.eventName].push(e)},e.prototype._dequeueHandler=function(e){var t=void 0,n=this.subscriptions[e.eventName];return n&&-1<(t=n.indexOf(e))&&n.splice(t,1),e},e.prototype.publish=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i=R.DOM.createCustomEvent(e,{cancelable:r,bubbles:n,detail:t});this.element.dispatchEvent(i)},e.prototype.subscribe=function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if("function"==typeof t)return new H(this,e,t,n,!1)},e.prototype.subscribeOnce=function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if("function"==typeof t)return new H(this,e,t,n,!0)},e.prototype.dispose=function(e){if(e&&"string"==typeof e){var t=this.subscriptions[e];if(t)for(;t.length;){var n=t.pop();n&&n.dispose()}}else this.disposeAll()},e.prototype.disposeAll=function(){for(var e in this.subscriptions)this.dispose(e)},e}(),H=function(){function e(e,t,n,r,i){this.owner=e,this.eventName=t,this.handler=n,this.capture="boolean"==typeof r?r:r.capture,this.bubbles=!this.capture,this.captureOrOptions=r,this.once=i,e.element.addEventListener(t,this,r),e._enqueueHandler(this)}return e.prototype.handleEvent=function(e){(0,this.handler)(e),this.once&&this.dispose()},e.prototype.dispose=function(){this.owner.element.removeEventListener(this.eventName,this,this.captureOrOptions),this.owner._dequeueHandler(this),this.owner=this.handler=null},e}(),U=e.ResourceLoadContext=function(){function e(){this.dependencies={}}return e.prototype.addDependency=function(e){this.dependencies[e]=!0},e.prototype.hasDependency=function(e){return e in this.dependencies},e}(),q=e.ViewCompileInstruction=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.targetShadowDOM=e,this.compileSurrogate=t,this.associatedModuleId=null};q.normal=new q;var W=e.BehaviorInstruction=function(){function i(){this.initiatedByBehavior=!1,this.enhance=!1,this.partReplacements=null,this.viewFactory=null,this.originalAttrName=null,this.skipContentProcessing=!1,this.contentFactory=null,this.viewModel=null,this.anchorIsContainer=!1,this.host=null,this.attributes=null,this.type=null,this.attrName=null,this.inheritBindingContext=!1}return i.enhance=function(){var e=new i;return e.enhance=!0,e},i.unitTest=function(e,t){var n=new i;return n.type=e,n.attributes=t||{},n},i.element=function(e,t){var n=new i;return n.type=t,n.attributes={},n.anchorIsContainer=!(e.hasAttribute("containerless")||t.containerless),n.initiatedByBehavior=!0,n},i.attribute=function(e,t){var n=new i;return n.attrName=e,n.type=t||null,n.attributes={},n},i.dynamic=function(e,t,n){var r=new i;return r.host=e,r.viewModel=t,r.viewFactory=n,r.inheritBindingContext=!0,r},i}();W.normal=new W;var G=e.TargetInstruction=(r=n=function(){function s(){this.injectorId=null,this.parentInjectorId=null,this.shadowSlot=!1,this.slotName=null,this.slotFallbackFactory=null,this.contentExpression=null,this.expressions=null,this.behaviorInstructions=null,this.providers=null,this.viewFactory=null,this.anchorIsContainer=!1,this.elementInstruction=null,this.lifting=!1,this.values=null}return s.shadowSlot=function(e){var t=new s;return t.parentInjectorId=e,t.shadowSlot=!0,t},s.contentExpression=function(e){var t=new s;return t.contentExpression=e,t},s.lifting=function(e,t){var n=new s;return n.parentInjectorId=e,n.expressions=s.noExpressions,n.behaviorInstructions=[t],n.viewFactory=t.viewFactory,n.providers=[t.type.target],n.lifting=!0,n},s.normal=function(e,t,n,r,i,o){var a=new s;return a.injectorId=e,a.parentInjectorId=t,a.providers=n,a.behaviorInstructions=r,a.expressions=i,a.anchorIsContainer=!o||o.anchorIsContainer,a.elementInstruction=o,a},s.surrogate=function(e,t,n,r){var i=new s;return i.expressions=n,i.behaviorInstructions=t,i.providers=e,i.values=r,i},s}(),n.noExpressions=Object.freeze([]),r),Y=e.viewStrategy=v.protocol.create("aurelia:view-strategy",{validate:function(e){return"function"==typeof e.loadViewFactory||"View strategies must implement: loadViewFactory(viewEngine: ViewEngine, compileInstruction: ViewCompileInstruction, loadContext?: ResourceLoadContext): Promise<ViewFactory>"},compose:function(e){"function"!=typeof e.makeRelativeTo&&(e.makeRelativeTo=R.PLATFORM.noop)}}),X=e.RelativeViewStrategy=Y()(i=function(){function e(e){this.path=e,this.absolutePath=null}return e.prototype.loadViewFactory=function(e,t,n,r){return null===this.absolutePath&&this.moduleId&&(this.absolutePath=(0,m.relativeToFile)(this.path,this.moduleId)),t.associatedModuleId=this.moduleId,e.loadViewFactory(this.absolutePath||this.path,t,n,r)},e.prototype.makeRelativeTo=function(e){null===this.absolutePath&&(this.absolutePath=(0,m.relativeToFile)(this.path,e))},e}())||i,Z=e.ConventionalViewStrategy=Y()(s=function(){function e(e,t){this.moduleId=t.moduleId,this.viewUrl=e.convertOriginToViewUrl(t)}return e.prototype.loadViewFactory=function(e,t,n,r){return t.associatedModuleId=this.moduleId,e.loadViewFactory(this.viewUrl,t,n,r)},e}())||s,K=e.NoViewStrategy=Y()(l=function(){function e(e,t){this.dependencies=e||null,this.dependencyBaseUrl=t||""}return e.prototype.loadViewFactory=function(e,t,n,r){var i=this.entry,o=this.dependencies;if(i&&i.factoryIsReady)return Promise.resolve(null);if(this.entry=i=new f.TemplateRegistryEntry(this.moduleId||this.dependencyBaseUrl),i.dependencies=[],i.templateIsLoaded=!0,null!==o)for(var a=0,s=o.length;a<s;++a){var l=o[a];"string"==typeof l||"function"==typeof l?i.addDependency(l):i.addDependency(l.from,l.as)}return t.associatedModuleId=this.moduleId,e.loadViewFactory(i,t,n,r)},e}())||l,$=e.TemplateRegistryViewStrategy=Y()(c=function(){function e(e,t){this.moduleId=e,this.entry=t}return e.prototype.loadViewFactory=function(e,t,n,r){var i=this.entry;return i.factoryIsReady?Promise.resolve(i.factory):(t.associatedModuleId=this.moduleId,e.loadViewFactory(i,t,n,r))},e}())||c,Q=e.InlineViewStrategy=Y()(d=function(){function e(e,t,n){this.markup=e,this.dependencies=t||null,this.dependencyBaseUrl=n||""}return e.prototype.loadViewFactory=function(e,t,n,r){var i=this.entry,o=this.dependencies;if(i&&i.factoryIsReady)return Promise.resolve(i.factory);if(this.entry=i=new f.TemplateRegistryEntry(this.moduleId||this.dependencyBaseUrl),i.template=R.DOM.createTemplateFromMarkup(this.markup),null!==o)for(var a=0,s=o.length;a<s;++a){var l=o[a];"string"==typeof l||"function"==typeof l?i.addDependency(l):i.addDependency(l.from,l.as)}return t.associatedModuleId=this.moduleId,e.loadViewFactory(i,t,n,r)},e}())||d,J=e.ViewLocator=(g=h=function(){function i(){}return i.prototype.getViewStrategy=function(e){if(!e)return null;if("object"===(void 0===e?"undefined":P(e))&&"getViewStrategy"in e){var t=v.Origin.get(e.constructor);return"string"==typeof(e=e.getViewStrategy())&&(e=new X(e)),Y.assert(e),t.moduleId&&e.makeRelativeTo(t.moduleId),e}if("string"==typeof e&&(e=new X(e)),Y.validate(e))return e;"function"!=typeof e&&(e=e.constructor);var n=v.Origin.get(e),r=v.metadata.get(i.viewStrategyMetadataKey,e);if(r)n.moduleId&&(r.moduleId=n.moduleId);else{if(!n.moduleId)throw new Error("Cannot determine default view strategy for object.",e);r=this.createFallbackViewStrategy(n)}return r},i.prototype.createFallbackViewStrategy=function(e){return new Z(this,e)},i.prototype.convertOriginToViewUrl=function(e){var t=e.moduleId;return(t.endsWith(".js")||t.endsWith(".ts")?t.substring(0,t.length-3):t)+".html"},i}(),h.viewStrategyMetadataKey="aurelia:view-strategy",g);function ee(e){throw new Error("BindingLanguage must implement "+e+"().")}var te=e.BindingLanguage=function(){function e(){}return e.prototype.inspectAttribute=function(e,t,n,r){ee("inspectAttribute")},e.prototype.createAttributeInstruction=function(e,t,n,r){ee("createAttributeInstruction")},e.prototype.inspectTextContent=function(e,t){ee("inspectTextContent")},e}(),ne=Object.freeze([]),re=e.SlotCustomAttribute=(0,o.inject)(R.DOM.Element)(y=function(){function e(e){this.element=e,this.element.auSlotAttribute=this}return e.prototype.valueChanged=function(e,t){},e}())||y,ie=e.PassThroughSlot=function(){function i(e,t,n,r){this.anchor=e,(this.anchor.viewSlot=this).name=t,this.destinationName=n,this.fallbackFactory=r,this.destinationSlot=null,this.projections=0,this.contentView=null,new re(this.anchor).value=this.destinationName}return i.prototype.renderFallbackContent=function(e,t,n,r){if(null===this.contentView){this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext);var i=Object.create(null);i[this.destinationSlot.name]=this.destinationSlot,ae.distributeView(this.contentView,i,n,r,this.destinationSlot.name)}},i.prototype.passThroughTo=function(e){this.destinationSlot=e},i.prototype.addNode=function(e,t,n,r){null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),t.viewSlot instanceof i?t.viewSlot.passThroughTo(this):(this.projections++,this.destinationSlot.addNode(e,t,n,r))},i.prototype.removeView=function(e,t){this.projections--,this.destinationSlot.removeView(e,t),this.needsFallbackRendering&&this.renderFallbackContent(null,ne,t)},i.prototype.removeAll=function(e){this.projections=0,this.destinationSlot.removeAll(e),this.needsFallbackRendering&&this.renderFallbackContent(null,ne,e)},i.prototype.projectFrom=function(e,t){this.destinationSlot.projectFrom(e,t)},i.prototype.created=function(e){this.ownerView=e},i.prototype.bind=function(e){this.contentView&&this.contentView.bind(e.bindingContext,e.overrideContext)},i.prototype.attached=function(){this.contentView&&this.contentView.attached()},i.prototype.detached=function(){this.contentView&&this.contentView.detached()},i.prototype.unbind=function(){this.contentView&&this.contentView.unbind()},M(i,[{key:"needsFallbackRendering",get:function(){return this.fallbackFactory&&0===this.projections}}]),i}(),oe=e.ShadowSlot=function(){function e(e,t,n){this.anchor=e,this.anchor.isContentProjectionSource=!0,(this.anchor.viewSlot=this).name=t,this.fallbackFactory=n,this.contentView=null,this.projections=0,this.children=[],this.projectFromAnchors=null,this.destinationSlots=null}return e.prototype.addNode=function(e,t,n,r,i){if(null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),t.viewSlot instanceof ie)t.viewSlot.passThroughTo(this);else if(null!==this.destinationSlots)ae.distributeNodes(e,[t],this.destinationSlots,this,r);else{t.auOwnerView=e,t.auProjectionSource=n;var o=(t.auAssignedSlot=this)._findAnchor(e,t,n,r);o.parentNode.insertBefore(t,o),this.children.push(t),this.projections++}},e.prototype.removeView=function(e,t){if(null!==this.destinationSlots)ae.undistributeView(e,this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)ae.undistributeView(e,this.contentView.slots,t);else{var n=this.children.find(function(e){return e.auSlotProjectFrom===t});if(n){for(var r=n.auProjectionChildren,i=0,o=r.length;i<o;++i){var a=r[i];a.auOwnerView===e&&(r.splice(i,1),e.fragment.appendChild(a),i--,o--,this.projections--)}this.needsFallbackRendering&&this.renderFallbackContent(e,ne,t)}}},e.prototype.removeAll=function(t){if(null!==this.destinationSlots)ae.undistributeAll(this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)ae.undistributeAll(this.contentView.slots,t);else{var e=this.children.find(function(e){return e.auSlotProjectFrom===t});if(e){for(var n=e.auProjectionChildren,r=0,i=n.length;r<i;++r){var o=n[r];o.auOwnerView.fragment.appendChild(o),this.projections--}e.auProjectionChildren=[],this.needsFallbackRendering&&this.renderFallbackContent(null,ne,t)}}},e.prototype._findAnchor=function(e,t,n,r){if(n){var i=this.children.find(function(e){return e.auSlotProjectFrom===n});if(i){if(void 0!==r)for(var o=i.auProjectionChildren,a=-1,s=void 0,l=0,u=o.length;l<u;++l){var c=o[l];if(c.auOwnerView!==s&&(a++,s=c.auOwnerView,r<=a&&s!==e))return o.splice(l,0,t),c}return i.auProjectionChildren.push(t),i}}return this.anchor},e.prototype.projectTo=function(e){this.destinationSlots=e},e.prototype.projectFrom=function(e,t){var n=R.DOM.createComment("anchor"),r=this.anchor.parentNode;n.auSlotProjectFrom=t,n.auOwnerView=e,n.auProjectionChildren=[],r.insertBefore(n,this.anchor),this.children.push(n),null===this.projectFromAnchors&&(this.projectFromAnchors=[]),this.projectFromAnchors.push(n)},e.prototype.renderFallbackContent=function(e,t,n,r){if(null===this.contentView&&(this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext),this.contentView.insertNodesBefore(this.anchor)),this.contentView.hasSlots){var i=this.contentView.slots,o=this.projectFromAnchors;if(null!==o)for(var a in i)for(var s=i[a],l=0,u=o.length;l<u;++l){var c=o[l];s.projectFrom(c.auOwnerView,c.auSlotProjectFrom)}this.fallbackSlots=i,ae.distributeNodes(e,t,i,n,r)}},e.prototype.created=function(e){this.ownerView=e},e.prototype.bind=function(e){this.contentView&&this.contentView.bind(e.bindingContext,e.overrideContext)},e.prototype.attached=function(){this.contentView&&this.contentView.attached()},e.prototype.detached=function(){this.contentView&&this.contentView.detached()},e.prototype.unbind=function(){this.contentView&&this.contentView.unbind()},M(e,[{key:"needsFallbackRendering",get:function(){return this.fallbackFactory&&0===this.projections}}]),e}(),ae=e.ShadowDOM=(w=b=function(){function p(){}return p.getSlotName=function(e){return void 0===e.auSlotAttribute?p.defaultSlotKey:e.auSlotAttribute.value},p.distributeView=function(e,t,n,r,i){var o=void 0;if(null===e)o=ne;else{var a=e.fragment.childNodes,s=a.length;o=new Array(s);for(var l=0;l<s;++l)o[l]=a[l]}p.distributeNodes(e,o,t,n,r,i)},p.undistributeView=function(e,t,n){for(var r in t)t[r].removeView(e,n)},p.undistributeAll=function(e,t){for(var n in e)e[n].removeAll(t)},p.distributeNodes=function(e,t,n,r,i,o){for(var a=0,s=t.length;a<s;++a){var l=t[a],u=l.nodeType;if(l.isContentProjectionSource){for(var c in l.viewSlot.projectTo(n),n)n[c].projectFrom(e,l.viewSlot);t.splice(a,1),s--,a--}else if(1===u||3===u||l.viewSlot instanceof ie)if(3===u&&F(l))t.splice(a,1),s--,a--;else{var d=n[o||p.getSlotName(l)];d&&(d.addNode(e,l,r,i),t.splice(a,1),s--,a--)}else t.splice(a,1),s--,a--}for(var h in n){var f=n[h];f.needsFallbackRendering&&f.renderFallbackContent(e,t,r,i)}},p}(),b.defaultSlotKey="__au-default-slot-key__",w);function se(e,t,n,r){if(t){var i=e[t];if(i){if(i!==n)throw new Error("Attempted to register "+r+" when one with the same name already exists. Name: "+t+".")}else e[t]=n}}var le=e.ViewResources=function(){function e(e,t){this.bindingLanguage=null,this.parent=e||null,this.hasParent=null!==this.parent,this.viewUrl=t||"",this.lookupFunctions={valueConverters:this.getValueConverter.bind(this),bindingBehaviors:this.getBindingBehavior.bind(this)},this.attributes=Object.create(null),this.elements=Object.create(null),this.valueConverters=Object.create(null),this.bindingBehaviors=Object.create(null),this.attributeMap=Object.create(null),this.values=Object.create(null),this.beforeCompile=this.afterCompile=this.beforeCreate=this.afterCreate=this.beforeBind=this.beforeUnbind=!1}return e.prototype._tryAddHook=function(e,t){if("function"==typeof e[t]){for(var n=e[t].bind(e),r=1,i=void 0;void 0!==this[i=t+r.toString()];)r++;this[t]=!0,this[i]=n}},e.prototype._invokeHook=function(e,t,n,r,i){if(this.hasParent&&this.parent._invokeHook(e,t,n,r,i),this[e]){this[e+"1"](t,n,r,i);var o=e+"2";if(this[o]&&(this[o](t,n,r,i),this[o=e+"3"])){this[o](t,n,r,i);for(var a=4;void 0!==this[o=e+a.toString()];)this[o](t,n,r,i),a++}}},e.prototype.registerViewEngineHooks=function(e){this._tryAddHook(e,"beforeCompile"),this._tryAddHook(e,"afterCompile"),this._tryAddHook(e,"beforeCreate"),this._tryAddHook(e,"afterCreate"),this._tryAddHook(e,"beforeBind"),this._tryAddHook(e,"beforeUnbind")},e.prototype.getBindingLanguage=function(e){return this.bindingLanguage||(this.bindingLanguage=e)},e.prototype.patchInParent=function(e){var t=this.parent;this.parent=e||null,this.hasParent=null!==this.parent,null===e.parent&&(e.parent=t,e.hasParent=null!==t)},e.prototype.relativeToView=function(e){return(0,m.relativeToFile)(e,this.viewUrl)},e.prototype.registerElement=function(e,t){se(this.elements,e,t,"an Element")},e.prototype.getElement=function(e){return this.elements[e]||(this.hasParent?this.parent.getElement(e):null)},e.prototype.mapAttribute=function(e){return this.attributeMap[e]||(this.hasParent?this.parent.mapAttribute(e):null)},e.prototype.registerAttribute=function(e,t,n){this.attributeMap[e]=n,se(this.attributes,e,t,"an Attribute")},e.prototype.getAttribute=function(e){return this.attributes[e]||(this.hasParent?this.parent.getAttribute(e):null)},e.prototype.registerValueConverter=function(e,t){se(this.valueConverters,e,t,"a ValueConverter")},e.prototype.getValueConverter=function(e){return this.valueConverters[e]||(this.hasParent?this.parent.getValueConverter(e):null)},e.prototype.registerBindingBehavior=function(e,t){se(this.bindingBehaviors,e,t,"a BindingBehavior")},e.prototype.getBindingBehavior=function(e){return this.bindingBehaviors[e]||(this.hasParent?this.parent.getBindingBehavior(e):null)},e.prototype.registerValue=function(e,t){se(this.values,e,t,"a value")},e.prototype.getValue=function(e){return this.values[e]||(this.hasParent?this.parent.getValue(e):null)},e}(),ue=e.View=function(){function e(e,t,n,r,i,o,a){for(var s in this.container=e,this.viewFactory=t,this.resources=t.resources,this.fragment=n,this.firstChild=n.firstChild,this.lastChild=n.lastChild,this.controllers=r,this.bindings=i,this.children=o,this.slots=a,this.hasSlots=!1,this.fromCache=!1,this.isBound=!1,this.isAttached=!1,this.bindingContext=null,this.overrideContext=null,this.controller=null,this.viewModelScope=null,this.animatableElement=void 0,this._isUserControlled=!1,this.contentView=null,a){this.hasSlots=!0;break}}return e.prototype.returnToCache=function(){this.viewFactory.returnViewToCache(this)},e.prototype.created=function(){var e,t=void 0,n=this.controllers;for(t=0,e=n.length;t<e;++t)n[t].created(this)},e.prototype.bind=function(e,t,n){var r=void 0,i=void 0,o=void 0,a=void 0,s=void 0;if(!n||!this._isUserControlled){if(this.isBound){if(this.bindingContext===e)return;this.unbind()}for(this.isBound=!0,this.bindingContext=e,this.overrideContext=t||(0,p.createOverrideContext)(e),this.resources._invokeHook("beforeBind",this),a=0,s=(i=this.bindings).length;a<s;++a)i[a].bind(this);for(null!==this.viewModelScope&&(e.bind(this.viewModelScope.bindingContext,this.viewModelScope.overrideContext),this.viewModelScope=null),a=0,s=(r=this.controllers).length;a<s;++a)r[a].bind(this);for(a=0,s=(o=this.children).length;a<s;++a)o[a].bind(e,t,!0);this.hasSlots&&ae.distributeView(this.contentView,this.slots)}},e.prototype.addBinding=function(e){this.bindings.push(e),this.isBound&&e.bind(this)},e.prototype.unbind=function(){var e=void 0,t=void 0,n=void 0,r=void 0,i=void 0;if(this.isBound){for(this.isBound=!1,this.resources._invokeHook("beforeUnbind",this),null!==this.controller&&this.controller.unbind(),r=0,i=(t=this.bindings).length;r<i;++r)t[r].unbind();for(r=0,i=(e=this.controllers).length;r<i;++r)e[r].unbind();for(r=0,i=(n=this.children).length;r<i;++r)n[r].unbind();this.bindingContext=null,this.overrideContext=null}},e.prototype.insertNodesBefore=function(e){e.parentNode.insertBefore(this.fragment,e)},e.prototype.appendNodesTo=function(e){e.appendChild(this.fragment)},e.prototype.removeNodes=function(){for(var e=this.fragment,t=this.firstChild,n=this.lastChild,r=void 0;t&&(r=t.nextSibling,e.appendChild(t),t!==n);)t=r},e.prototype.attached=function(){var e=void 0,t=void 0,n=void 0,r=void 0;if(!this.isAttached){for(this.isAttached=!0,null!==this.controller&&this.controller.attached(),n=0,r=(e=this.controllers).length;n<r;++n)e[n].attached();for(n=0,r=(t=this.children).length;n<r;++n)t[n].attached()}},e.prototype.detached=function(){var e=void 0,t=void 0,n=void 0,r=void 0;if(this.isAttached){for(this.isAttached=!1,null!==this.controller&&this.controller.detached(),n=0,r=(e=this.controllers).length;n<r;++n)e[n].detached();for(n=0,r=(t=this.children).length;n<r;++n)t[n].detached()}},e}();var ce=e.ViewSlot=function(){function e(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:A.instance;this.anchor=e,this.anchorIsContainer=t,this.bindingContext=null,this.overrideContext=null,this.animator=n,this.children=[],this.isBound=!1,this.isAttached=!1,this.contentSelectors=null,e.viewSlot=this,e.isContentProjectionSource=!1}return e.prototype.animateView=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"enter",n=function(e){if(void 0!==e.animatableElement)return e.animatableElement;for(var t=e.firstChild;t&&1!==t.nodeType;)t=t.nextSibling;return t&&1===t.nodeType?e.animatableElement=t.classList.contains("au-animate")?t:null:e.animatableElement=null}(e);if(null!==n)switch(t){case"enter":return this.animator.enter(n);case"leave":return this.animator.leave(n);default:throw new Error("Invalid animation direction: "+t)}},e.prototype.transformChildNodesIntoView=function(){var t=this.anchor;this.children.push({fragment:t,firstChild:t.firstChild,lastChild:t.lastChild,returnToCache:function(){},removeNodes:function(){for(var e=void 0;e=t.lastChild;)t.removeChild(e)},created:function(){},bind:function(){},unbind:function(){},attached:function(){},detached:function(){}})},e.prototype.bind=function(e,t){var n,r=void 0,i=void 0;if(this.isBound){if(this.bindingContext===e)return;this.unbind()}for(this.isBound=!0,this.bindingContext=e=e||this.bindingContext,this.overrideContext=t=t||this.overrideContext,r=0,n=(i=this.children).length;r<n;++r)i[r].bind(e,t,!0)},e.prototype.unbind=function(){if(this.isBound){var e,t=void 0,n=this.children;for(this.isBound=!1,this.bindingContext=null,this.overrideContext=null,t=0,e=n.length;t<e;++t)n[t].unbind()}},e.prototype.add=function(e){if(this.anchorIsContainer?e.appendNodesTo(this.anchor):e.insertNodesBefore(this.anchor),this.children.push(e),this.isAttached)return e.attached(),this.animateView(e,"enter")},e.prototype.insert=function(e,t){var n=this.children,r=n.length;return 0===e&&0===r||r<=e?this.add(t):(t.insertNodesBefore(n[e].firstChild),n.splice(e,0,t),this.isAttached?(t.attached(),this.animateView(t,"enter")):void 0)},e.prototype.move=function(e,t){if(e!==t){var n=this.children,r=n[e];r.removeNodes(),r.insertNodesBefore(n[t].firstChild),n.splice(e,1),n.splice(t,0,r)}},e.prototype.remove=function(e,t,n){return this.removeAt(this.children.indexOf(e),t,n)},e.prototype.removeMany=function(t,n,r){var i=this,o=this.children,a=t.length,s=void 0,l=[];t.forEach(function(e){if(r)e.removeNodes();else{var t=i.animateView(e,"leave");t?l.push(t.then(function(){return e.removeNodes()})):e.removeNodes()}});var e=function(){if(i.isAttached)for(s=0;s<a;++s)t[s].detached();if(n)for(s=0;s<a;++s)t[s].returnToCache();for(s=0;s<a;++s){var e=o.indexOf(t[s]);0<=e&&o.splice(e,1)}};return 0<l.length?Promise.all(l).then(function(){return e()}):e()},e.prototype.removeAt=function(e,t,n){var r=this,i=this.children[e],o=function(){return e=r.children.indexOf(i),i.removeNodes(),r.children.splice(e,1),r.isAttached&&i.detached(),t&&i.returnToCache(),i};if(!n){var a=this.animateView(i,"leave");if(a)return a.then(function(){return o()})}return o()},e.prototype.removeAll=function(t,n){var r=this,i=this.children,o=i.length,a=void 0,s=[];i.forEach(function(e){if(n)e.removeNodes();else{var t=r.animateView(e,"leave");t?s.push(t.then(function(){return e.removeNodes()})):e.removeNodes()}});var e=function(){if(r.isAttached)for(a=0;a<o;++a)i[a].detached();if(t)for(a=0;a<o;++a){var e=i[a];e&&e.returnToCache()}r.children=[]};return 0<s.length?Promise.all(s).then(function(){return e()}):e()},e.prototype.attached=function(){var e,t,n=void 0,r=void 0;if(!this.isAttached)for(this.isAttached=!0,n=0,e=(t=this.children).length;n<e;++n)(r=t[n]).attached(),this.animateView(r,"enter")},e.prototype.detached=function(){var e=void 0,t=void 0,n=void 0;if(this.isAttached)for(this.isAttached=!1,e=0,t=(n=this.children).length;e<t;++e)n[e].detached()},e.prototype.projectTo=function(t){var n=this;this.projectToSlots=t,this.add=this._projectionAdd,this.insert=this._projectionInsert,this.move=this._projectionMove,this.remove=this._projectionRemove,this.removeAt=this._projectionRemoveAt,this.removeMany=this._projectionRemoveMany,this.removeAll=this._projectionRemoveAll,this.children.forEach(function(e){return ae.distributeView(e,t,n)})},e.prototype._projectionAdd=function(e){ae.distributeView(e,this.projectToSlots,this),this.children.push(e),this.isAttached&&e.attached()},e.prototype._projectionInsert=function(e,t){0===e&&!this.children.length||e>=this.children.length?this.add(t):(ae.distributeView(t,this.projectToSlots,this,e),this.children.splice(e,0,t),this.isAttached&&t.attached())},e.prototype._projectionMove=function(e,t){if(e!==t){var n=this.children,r=n[e];ae.undistributeView(r,this.projectToSlots,this),ae.distributeView(r,this.projectToSlots,this,t),n.splice(e,1),n.splice(t,0,r)}},e.prototype._projectionRemove=function(e,t){ae.undistributeView(e,this.projectToSlots,this),this.children.splice(this.children.indexOf(e),1),this.isAttached&&e.detached()},e.prototype._projectionRemoveAt=function(e,t){var n=this.children[e];ae.undistributeView(n,this.projectToSlots,this),this.children.splice(e,1),this.isAttached&&n.detached()},e.prototype._projectionRemoveMany=function(e,t){var n=this;e.forEach(function(e){return n.remove(e,t)})},e.prototype._projectionRemoveAll=function(e){ae.undistributeAll(this.projectToSlots,this);var t=this.children;if(this.isAttached)for(var n=0,r=t.length;n<r;++n)t[n].detached();this.children=[]},e}(),de=new((0,o.resolver)(x=function(){function e(){}return e.prototype.get=function(e,t){var n=t.__providerId__;return n in e?e[n]:e[n]=e.invoke(t)},e}())||x);function he(e){if(e===R.DOM.Element)return this.element;if(e===be){if(this.boundViewFactory)return this.boundViewFactory;var t=this.instruction.viewFactory,n=this.partReplacements;return n&&(t=n[t.part]||t),this.boundViewFactory=new be(this,t,n),this.boundViewFactory}return e===ce?(void 0===this.viewSlot&&(this.viewSlot=new ce(this.element,this.instruction.anchorIsContainer),this.element.isContentProjectionSource=this.instruction.lifting,this.children.push(this.viewSlot)),this.viewSlot):e===z?this.elementEvents||(this.elementEvents=new z(this.element)):e===L?this.compositionTransaction||(this.compositionTransaction=this.parent.get(e)):e===le?this.viewResources:e===G?this.instruction:this.superGet(e)}function fe(e){return this._element.hasAttribute(e)}function pe(e){return this._element.getAttribute(e)}function ve(e,t){this._element.setAttribute(e,t)}function me(e,t,n,r,i,o,a,s,l){var u=n.behaviorInstructions,c=n.expressions,d=void 0,h=void 0,f=void 0,p=void 0,v=void 0;if(n.contentExpression)return i.push(n.contentExpression.createBinding(t.nextSibling)),t.nextSibling.auInterpolationTarget=!0,void t.parentNode.removeChild(t);if(n.shadowSlot){var m=R.DOM.createComment("slot"),g=void 0;return g=n.slotDestination?new ie(m,n.slotName,n.slotDestination,n.slotFallbackFactory):new oe(m,n.slotName,n.slotFallbackFactory),R.DOM.replaceNode(m,t),a[n.slotName]=g,void r.push(g)}if(u.length)for(n.anchorIsContainer||(t=function(e,t){var n=R.DOM.createComment("anchor");if(t){var r=e.firstChild;r&&"AU-CONTENT"===r.tagName&&(n.contentElement=r),n._element=e,n.hasAttribute=fe,n.getAttribute=pe,n.setAttribute=ve}return R.DOM.replaceNode(n,e),n}(t,n.elementInstruction)),e[n.injectorId]=d=function(e,t,n,r,i,o){var a,s=e.createChild(),l=void 0;for(s.element=t,s.instruction=n,s.children=r,s.viewResources=o,s.partReplacements=i,l=(a=n.providers).length;l--;)s._resolvers.set(a[l],de);return s.superGet=s.get,s.get=he,s}(e[n.parentInjectorId],t,n,o,s,l),h=0,f=u.length;h<f;++h)v=(p=u[h]).type.create(d,p,t,i),r.push(v);for(h=0,f=c.length;h<f;++h)i.push(c[h].createBinding(t))}function ge(e,t){var n=e.split(";"),r=void 0,i=void 0,o=void 0,a=void 0,s=void 0;for(t=t||{},i=0;i<n.length;i++)r=(o=n[i]).indexOf(":"),a=o.substring(0,r).trim(),s=o.substring(r+1).trim(),t[a]=s;return t}function ye(e){var t="";for(var n in e)t+=n+":"+e[n]+";";return t}var be=e.BoundViewFactory=function(){function e(e,t,n){this.parentContainer=e,this.viewFactory=t,this.factoryCreateInstruction={partReplacements:n}}return e.prototype.create=function(){var e=this.viewFactory.create(this.parentContainer.createChild(),this.factoryCreateInstruction);return e._isUserControlled=!0,e},e.prototype.setCacheSize=function(e,t){this.viewFactory.setCacheSize(e,t)},e.prototype.getCachedView=function(){return this.viewFactory.getCachedView()},e.prototype.returnViewToCache=function(e){this.viewFactory.returnViewToCache(e)},M(e,[{key:"isCaching",get:function(){return this.viewFactory.isCaching}}]),e}(),we=e.ViewFactory=function(){function e(e,t,n){this.isCaching=!1,this.template=e,this.instructions=t,this.resources=n,this.cacheSize=-1,this.cache=null}return e.prototype.setCacheSize=function(e,t){e&&("*"===e?e=Number.MAX_VALUE:"string"==typeof e&&(e=parseInt(e,10))),-1!==this.cacheSize&&t||(this.cacheSize=e),0<this.cacheSize?this.cache=[]:this.cache=null,this.isCaching=0<this.cacheSize},e.prototype.getCachedView=function(){return null!==this.cache&&this.cache.pop()||null},e.prototype.returnViewToCache=function(e){e.isAttached&&e.detached(),e.isBound&&e.unbind(),null!==this.cache&&this.cache.length<this.cacheSize&&(e.fromCache=!0,this.cache.push(e))},e.prototype.create=function(e,t,n){t=t||W.normal;var r=this.getCachedView();if(null!==r)return r;var i,o=t.enhance?this.template:this.template.cloneNode(!0),a=o.querySelectorAll(".au-target"),s=this.instructions,l=this.resources,u=[],c=[],d=[],h=Object.create(null),f={root:e},p=t.partReplacements,v=void 0,m=void 0,g=void 0;for(this.resources._invokeHook("beforeCreate",this,e,o,t),n&&null!==this.surrogateInstruction&&function(e,t,n,r,i,o){var a=n.behaviorInstructions,s=n.expressions,l=n.providers,u=n.values,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0;for(c=l.length;c--;)e._resolvers.set(l[c],de);for(var v in u)if(p=t.getAttribute(v)){if("class"===v)t.setAttribute("class",p+" "+u[v]);else if("style"===v){var m=ge(u[v]);ge(p,m),t.setAttribute("style",ye(m))}}else t.setAttribute(v,u[v]);if(a.length)for(c=0,d=a.length;c<d;++c)(f=(h=a[c]).type.create(e,h,t,i)).contentView&&o.push(f.contentView),r.push(f);for(c=0,d=s.length;c<d;++c)i.push(s[c].createBinding(t))}(e,n,this.surrogateInstruction,u,c,d),t.enhance&&o.hasAttribute("au-target-id")&&me(f,g=o,s[g.getAttribute("au-target-id")],u,c,d,h,p,l),v=0,i=a.length;v<i;++v)me(f,g=a[v],s[g.getAttribute("au-target-id")],u,c,d,h,p,l);return m=new ue(e,this,o,u,c,d,h),t.initiatedByBehavior||m.created(),this.resources._invokeHook("afterCreate",m),m},e}(),xe=0;var _e=0;function ke(e){var t=e.getAttribute("class"),n=(++_e).toString();return e.setAttribute("class",t?t+" au-target":"au-target"),e.setAttribute("au-target-id",n),n}var Se=e.ViewCompiler=(0,o.inject)(te,le)(_=function(){function e(e,t){this.bindingLanguage=e,this.resources=t}return e.prototype.compile=function(e,t,n){t=t||this.resources,n=n||q.normal;var r=void 0,i=void 0,o=void 0;(e="string"==typeof e?R.DOM.createTemplateFromMarkup(e):e).content?(i=e.getAttribute("part"),o=e.getAttribute("view-cache"),r=R.DOM.adoptNode(e.content)):r=e,n.targetShadowDOM=n.targetShadowDOM&&R.FEATURE.shadowDOM,t._invokeHook("beforeCompile",r,t,n);var a={};this._compileNode(r,t,a,e,"root",!n.targetShadowDOM);var s=r.firstChild;if(s&&1===s.nodeType){var l=s.getAttribute("au-target-id");if(l){var u=a[l];(u.shadowSlot||u.lifting||u.elementInstruction&&!u.elementInstruction.anchorIsContainer)&&r.insertBefore(R.DOM.createComment("view"),s)}}var c=new we(r,a,t);return c.surrogateInstruction=n.compileSurrogate?this._compileSurrogate(e,t):null,c.part=i,o&&c.setCacheSize(o),t._invokeHook("afterCompile",c),c},e.prototype._compileNode=function(e,t,n,r,i,o){switch(e.nodeType){case 1:return this._compileElement(e,t,n,r,i,o);case 3:var a=t.getBindingLanguage(this.bindingLanguage).inspectTextContent(t,e.wholeText);if(a){var s=R.DOM.createElement("au-marker"),l=ke(s);for((e.parentNode||r).insertBefore(s,e),e.textContent=" ",n[l]=G.contentExpression(a);e.nextSibling&&3===e.nextSibling.nodeType;)(e.parentNode||r).removeChild(e.nextSibling)}else for(;e.nextSibling&&3===e.nextSibling.nodeType;)e=e.nextSibling;return e.nextSibling;case 11:for(var u=e.firstChild;u;)u=this._compileNode(u,t,n,e,i,o)}return e.nextSibling},e.prototype._compileSurrogate=function(e,t){var n=e.tagName.toLowerCase(),r=e.attributes,i=t.getBindingLanguage(this.bindingLanguage),o=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,v=[],m=void 0,g=[],y={},b=!1,w=[];for(l=0,u=r.length;l<u;++l){if(d=(c=r[l]).name,h=c.value,f=i.inspectAttribute(t,n,d,h),(p=t.getAttribute(f.attrName))&&(o=t.mapAttribute(f.attrName))&&(a=p.attributes[o])&&(f.defaultBindingMode=a.defaultBindingMode,f.command||f.expression||(f.command=a.hasOptions?"options":null),f.command&&"options"!==f.command&&p.primaryProperty)){var x=p.primaryProperty;d=f.attrName=x.attribute,f.defaultBindingMode=x.defaultBindingMode}if(s=i.createAttributeInstruction(t,e,f,void 0,p))if(s.alteredAttr&&(p=t.getAttribute(s.attrName)),s.discrete)v.push(s);else if(p){if(s.type=p,this._configureProperties(s,t),p.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");g.push(s)}else v.push(s.attributes[s.attrName]);else if(p){if((s=W.attribute(d,p)).attributes[t.mapAttribute(d)]=h,p.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");g.push(s)}else"id"!==d&&"part"!==d&&"replace-part"!==d&&(b=!0,y[d]=h)}if(v.length||g.length||b){for(l=0,u=g.length;l<u;++l)(s=g[l]).type.compile(this,t,e,s),w.push(s.type.target);for(l=0,u=v.length;l<u;++l)void 0!==(m=v[l]).attrToRemove&&e.removeAttribute(m.attrToRemove);return G.surrogate(w,g,v,y)}return null},e.prototype._compileElement=function(e,t,n,r,i,o){var a=e.tagName.toLowerCase(),s=e.attributes,l=[],u=void 0,c=[],d=[],h=t.getBindingLanguage(this.bindingLanguage),f=void 0,p=void 0,v=void 0,m=void 0,g=void 0,y=void 0,b=void 0,w=void 0,x=void 0,_=void 0,k=void 0,S=void 0,T=void 0,C=void 0,O=void 0,E=void 0;if("slot"===a)return o&&(e=function(e,t,n,r,i){var o=R.DOM.createElement("au-shadow-slot");R.DOM.replaceNode(o,n);var a=ke(o),s=G.shadowSlot(i);if(s.slotName=n.getAttribute("name")||ae.defaultSlotKey,s.slotDestination=n.getAttribute("slot"),n.innerHTML.trim()){for(var l=R.DOM.createDocumentFragment(),u=void 0;u=n.firstChild;)l.appendChild(u);s.slotFallbackFactory=e.compile(l,t)}return r[a]=s,o}(this,t,e,n,i)),e.nextSibling;if("template"===a){if(!("content"in e))throw new Error("You cannot place a template element within "+e.namespaceURI+" namespace");(p=this.compile(e,t)).part=e.getAttribute("part")}else(v=t.getElement(e.getAttribute("as-element")||a))&&(m=W.element(e,v),v.processAttributes(this,t,e,s,m),c.push(m));for(y=0,b=s.length;y<b;++y){if(k=x=(w=s[y]).name,_=w.value,T=h.inspectAttribute(t,a,x,_),o&&"slot"===T.attrName&&(T.attrName=x="au-slot"),g=null,v=t.getAttribute(T.attrName)){if((O=t.mapAttribute(T.attrName))&&(C=v.attributes[O])&&(T.defaultBindingMode=C.defaultBindingMode,T.command||T.expression||(T.command=C.hasOptions?"options":null),T.command&&"options"!==T.command&&v.primaryProperty)){var M=v.primaryProperty;x=T.attrName=M.attribute,T.defaultBindingMode=M.defaultBindingMode}}else m&&(g=m.type.attributes[T.attrName])&&(T.defaultBindingMode=g.defaultBindingMode);if(S=g?h.createAttributeInstruction(t,e,T,m):h.createAttributeInstruction(t,e,T,void 0,v))if(S.alteredAttr&&(v=t.getAttribute(S.attrName)),S.discrete)l.push(S);else if(v){if(S.type=v,this._configureProperties(S,t),v.liftsContent){S.originalAttrName=k,f=S;break}c.push(S)}else g?m.attributes[T.attrName].targetProperty=g.name:l.push(S.attributes[S.attrName]);else if(v){if((S=W.attribute(x,v)).attributes[t.mapAttribute(x)]=_,v.liftsContent){S.originalAttrName=k,f=S;break}c.push(S)}else g&&(m.attributes[x]=_)}if(f)f.viewFactory=p,n[ke(e=f.type.compile(this,t,e,f,r))]=G.lifting(i,f);else{var P=!1;if(l.length||c.length){for(E=!!c.length&&++xe,y=0,b=c.length;y<b;++y)(S=c[y]).type.compile(this,t,e,S,r),d.push(S.type.target),P=P||S.skipContentProcessing;for(y=0,b=l.length;y<b;++y)void 0!==(u=l[y]).attrToRemove&&e.removeAttribute(u.attrToRemove);n[ke(e)]=G.normal(E,i,d,c,l,m)}if(P)return e.nextSibling;for(var A=e.firstChild;A;)A=this._compileNode(A,t,n,e,E||i,o)}return e.nextSibling},e.prototype._configureProperties=function(e,t){var n=e.type,r=e.attrName,i=e.attributes,o=void 0,a=void 0,s=void 0,l=t.mapAttribute(r);for(a in l&&r in i&&l!==r&&(i[l]=i[r],delete i[r]),i)null!==(s=i[a])&&"object"===(void 0===s?"undefined":P(s))&&(o=n.attributes[a],s.targetProperty=void 0!==o?o.name:a)},e}())||_,Te=e.ResourceModule=function(){function e(e){this.id=e,this.moduleInstance=null,this.mainResource=null,this.resources=null,this.viewStrategy=null,this.isInitialized=!1,this.onLoaded=null,this.loadContext=null}return e.prototype.initialize=function(e){var t=this.mainResource,n=this.resources,r=this.viewStrategy;if(!this.isInitialized){this.isInitialized=!0,void 0!==t&&(t.metadata.viewStrategy=r,t.initialize(e));for(var i=0,o=n.length;i<o;++i)(t=n[i]).metadata.viewStrategy=r,t.initialize(e)}},e.prototype.register=function(e,t){var n=this.mainResource,r=this.resources;void 0!==n&&(n.register(e,t),t=null);for(var i=0,o=r.length;i<o;++i)r[i].register(e,t),t=null},e.prototype.load=function(e,t){if(null!==this.onLoaded)return this.loadContext===t?Promise.resolve():this.onLoaded;var n=this.mainResource,r=this.resources,i=void 0;if(void 0!==n){(i=new Array(r.length+1))[0]=n.load(e,t);for(var o=0,a=r.length;o<a;++o)i[o+1]=r[o].load(e,t)}else{i=new Array(r.length);for(var s=0,l=r.length;s<l;++s)i[s]=r[s].load(e,t)}return this.loadContext=t,this.onLoaded=Promise.all(i),this.onLoaded},e}(),Ce=e.ResourceDescription=function(){function e(e,t,n){n||(n=v.metadata.get(v.metadata.resource,t))||((n=new Fe).elementName=B(e),v.metadata.define(v.metadata.resource,n,t)),n instanceof Fe?void 0===n.elementName?n.elementName=B(e):void 0===n.attributeName?n.attributeName=B(e):null===n.attributeName&&null===n.elementName&&Fe.convention(e,n):n.name||(n.name=B(e)),this.metadata=n,this.value=t}return e.prototype.initialize=function(e){this.metadata.initialize(e,this.value)},e.prototype.register=function(e,t){this.metadata.register(e,t)},e.prototype.load=function(e,t){return this.metadata.load(e,this.value,t)},e}(),Oe=e.ModuleAnalyzer=function(){function e(){this.cache=Object.create(null)}return e.prototype.getAnalysis=function(e){return this.cache[e]},e.prototype.analyze=function(e,t,n){var r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=[],c=void 0,d=void 0,h=void 0;if(h=this.cache[e])return h;for(s in h=new Te(e),this.cache[e]=h,"function"==typeof t&&(t={default:t}),n&&(r=new Ce(n,t[n])),t)l=t[s],s!==n&&"function"==typeof l&&((a=v.metadata.get(v.metadata.resource,l))?(null===a.attributeName&&null===a.elementName&&Fe.convention(s,a),null===a.attributeName&&null===a.elementName&&(a.elementName=B(s)),!r&&a instanceof Fe&&null!==a.elementName?r=new Ce(s,l,a):u.push(new Ce(s,l,a))):Y.decorates(l)?d=l:l instanceof f.TemplateRegistryEntry?d=new $(e,l):(c=Fe.convention(s))?(null===c.elementName||r?u.push(new Ce(s,l,c)):r=new Ce(s,l,c),v.metadata.define(v.metadata.resource,c,l)):(c=p.ValueConverterResource.convention(s)||p.BindingBehaviorResource.convention(s)||V.convention(s))?(u.push(new Ce(s,l,c)),v.metadata.define(v.metadata.resource,c,l)):i||(i=l,o=s));return!r&&i&&(r=new Ce(o,i)),h.moduleInstance=t,h.mainResource=r,h.resources=u,h.viewStrategy=d,h},e}(),Ee=a.getLogger("templating");var Me=function(){function e(e){var t=this;e.then(function(e){return t.viewFactory=e})}return e.prototype.create=function(e,t,n,r){return this.viewFactory.create(e,t,n,r)},e.prototype.setCacheSize=function(e,t){this.viewFactory.setCacheSize(e,t)},e.prototype.getCachedView=function(){return this.viewFactory.getCachedView()},e.prototype.returnViewToCache=function(e){this.viewFactory.returnViewToCache(e)},M(e,[{key:"isCaching",get:function(){return this.viewFactory.isCaching}}]),e}(),Pe=null,Ae=e.ViewEngine=(0,o.inject)(f.Loader,o.Container,Se,Oe,le)((T=S=function(){function p(e,t,n,r,i){this.loader=e,this.container=t,this.viewCompiler=n,this.moduleAnalyzer=r,this.appResources=i,this._pluginMap={},null===Pe&&((Pe=new Fe).attributeName="au-slot",v.metadata.define(v.metadata.resource,Pe,re)),Pe.initialize(t,re),Pe.register(i)}return p.prototype.addResourcePlugin=function(e,t){var n=e.replace(".","")+"-resource-plugin";this._pluginMap[e]=n,this.loader.addPlugin(n,t)},p.prototype.loadViewFactory=function(e,r,t,i){var n,o,a=this;return t=t||new U,(n=this.loader,o=e,o instanceof f.TemplateRegistryEntry?Promise.resolve(o):n.loadTemplate(o)).then(function(n){var e=n.address;return n.onReady?t.hasDependency(e)?null===n.template?n.onReady:Promise.resolve(new Me(n.onReady)):(t.addDependency(e),n.onReady):(t.addDependency(e),n.onReady=a.loadTemplateResources(n,r,t,i).then(function(e){if(n.resources=e,null===n.template)return n.factory=null;var t=a.viewCompiler.compile(n.template,e,r);return n.factory=t}),n.onReady)})},p.prototype.loadTemplateResources=function(e,t,n,r){var i=new le(this.appResources,e.address),o=e.dependencies,a=void 0,s=void 0;if(t=t||q.normal,0===o.length&&!t.associatedModuleId)return Promise.resolve(i);if(a=o.map(function(e){return e.src}),s=o.map(function(e){return e.name}),Ee.debug("importing resources for "+e.address,a),r){var l=v.metadata.get(p.viewModelRequireMetadataKey,r);if(l){for(var u=a.length,c=0,d=l.length;c<d;++c){var h=l[c],f="function"==typeof h?v.Origin.get(h).moduleId:(0,m.relativeToFile)(h.src||h,e.address);-1===a.indexOf(f)&&(a.push(f),s.push(h.as))}Ee.debug("importing ViewModel resources for "+t.associatedModuleId,a.slice(u))}}return this.importViewResources(a,s,i,t,n)},p.prototype.importViewModelResource=function(r,i){var o=this;return this.loader.loadModule(r).then(function(e){var t=v.Origin.get(e).moduleId,n=o.moduleAnalyzer.analyze(t,e,i);if(!n.mainResource)throw new Error('No view model found in module "'+r+'".');return n.initialize(o.container),n.mainResource})},p.prototype.importViewResources=function(e,c,d,h,f){var p=this;return f=f||new U,h=h||q.normal,e=e.map(function(e){return p._applyLoaderPlugin(e)}),this.loader.loadAllModules(e).then(function(e){var t=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=p.container,l=p.moduleAnalyzer,u=new Array(e.length);for(t=0,n=e.length;t<n;++t)o=e[t],i=v.Origin.get(o).moduleId,(r=l.analyze(i,o)).initialize(s),r.register(d,c[t]),u[t]=r;for(h.associatedModuleId&&(a=l.getAnalysis(h.associatedModuleId))&&a.register(d),t=0,n=u.length;t<n;++t)u[t]=u[t].load(s,f);return Promise.all(u).then(function(){return d})})},p.prototype._applyLoaderPlugin=function(e){var t=e.lastIndexOf(".");if(-1!==t){var n=e.substring(t),r=this._pluginMap[n];return void 0===r?e:this.loader.applyPluginToUrl(e,r)}return e},p}(),S.viewModelRequireMetadataKey="aurelia:view-model-require",k=T))||k,Re=e.Controller=function(){function e(e,t,n,r){this.behavior=e,this.instruction=t,this.viewModel=n,this.isAttached=!1,this.view=null,this.isBound=!1,this.scope=null,this.container=r,this.elementEvents=r.elementEvents||null;var i,o=e.observerLocator.getOrCreateObserversLookup(n),a=e.handlesBind,s=t.attributes,l=this.boundProperties=[],u=e.properties,c=void 0;for(e._ensurePropertiesDefined(n,o),c=0,i=u.length;c<i;++c)u[c]._initialize(n,o,s,a,l)}return e.prototype.created=function(e){this.behavior.handlesCreated&&this.viewModel.created(e,this.view)},e.prototype.automate=function(e,t){this.view.bindingContext=this.viewModel,this.view.overrideContext=e||(0,p.createOverrideContext)(this.viewModel),this.view._isUserControlled=!0,this.behavior.handlesCreated&&this.viewModel.created(t||null,this.view),this.bind(this.view)},e.prototype.bind=function(e){var t,n=this.behavior.handlesBind,r=this.boundProperties,i=void 0,o=void 0,a=void 0,s=void 0;if(this.isBound){if(this.scope===e)return;this.unbind()}for(this.isBound=!0,this.scope=e,i=0,t=r.length;i<t;++i)s=(a=(o=r[i]).observer).selfSubscriber,a.publishing=!1,n&&(a.selfSubscriber=null),o.binding.bind(e),a.call(),a.publishing=!0,a.selfSubscriber=s;var l=void 0;null!==this.view?(n&&(this.view.viewModelScope=e),this.viewModel===e.overrideContext.bindingContext?l=e.overrideContext:this.instruction.inheritBindingContext?l=(0,p.createOverrideContext)(this.viewModel,e.overrideContext):(l=(0,p.createOverrideContext)(this.viewModel)).__parentOverrideContext=e.overrideContext,this.view.bind(this.viewModel,l)):n&&(l=e.overrideContext,void 0!==e.overrideContext.__parentOverrideContext&&this.viewModel.viewFactory&&this.viewModel.viewFactory.factoryCreateInstruction.partReplacements&&((l=Object.assign({},e.overrideContext)).parentOverrideContext=e.overrideContext.__parentOverrideContext),this.viewModel.bind(e.bindingContext,l))},e.prototype.unbind=function(){if(this.isBound){var e,t=this.boundProperties,n=void 0;for(this.isBound=!1,(this.scope=null)!==this.view&&this.view.unbind(),this.behavior.handlesUnbind&&this.viewModel.unbind(),null!==this.elementEvents&&this.elementEvents.disposeAll(),n=0,e=t.length;n<e;++n)t[n].binding.unbind()}},e.prototype.attached=function(){this.isAttached||(this.isAttached=!0,this.behavior.handlesAttached&&this.viewModel.attached(),null!==this.view&&this.view.attached())},e.prototype.detached=function(){this.isAttached&&(this.isAttached=!1,null!==this.view&&this.view.detached(),this.behavior.handlesDetached&&this.viewModel.detached())},e}(),je=e.BehaviorPropertyObserver=(0,p.subscriberCollection)()(C=function(){function e(e,t,n,r,i){this.taskQueue=e,this.obj=t,this.propertyName=n,this.notqueued=!0,this.publishing=!1,this.selfSubscriber=r,this.currentValue=this.oldValue=i}return e.prototype.getValue=function(){return this.currentValue},e.prototype.setValue=function(e){var t=this.currentValue;t!==e&&(this.oldValue=t,this.currentValue=e,this.publishing&&this.notqueued&&(this.taskQueue.flushing?this.call():(this.notqueued=!1,this.taskQueue.queueMicroTask(this))))},e.prototype.call=function(){var e=this.oldValue,t=this.currentValue;this.notqueued=!0,t!==e&&(this.selfSubscriber&&this.selfSubscriber(t,e),this.callSubscribers(t,e),this.oldValue=t)},e.prototype.subscribe=function(e,t){this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},e}())||C;function Ie(e,t){var n=e.__observers__;if(void 0===n){var r=Object.getPrototypeOf(e).constructor,i=v.metadata.get(v.metadata.resource,r);i.isInitialized||i.initialize(o.Container.instance||new o.Container,e.constructor),n=i.observerLocator.getOrCreateObserversLookup(e),i._ensurePropertiesDefined(e,n)}return n[t]}var Le=e.BindableProperty=function(){function e(e){"string"==typeof e?this.name=e:Object.assign(this,e),this.attribute=this.attribute||B(this.name),null!==this.defaultBindingMode&&void 0!==this.defaultBindingMode||(this.defaultBindingMode=p.bindingMode.oneWay),this.changeHandler=this.changeHandler||null,this.owner=null,this.descriptor=null}return e.prototype.registerWith=function(e,t,n){if(t.properties.push(this),(t.attributes[this.attribute]=this).owner=t,n)return this.descriptor=n,this._configureDescriptor(n)},e.prototype._configureDescriptor=function(e){var t=this.name;return e.configurable=!0,e.enumerable=!0,"initializer"in e&&(this.defaultValue=e.initializer,delete e.initializer,delete e.writable),"value"in e&&(this.defaultValue=e.value,delete e.value,delete e.writable),e.get=function(){return Ie(this,t).getValue()},e.set=function(e){Ie(this,t).setValue(e)},e.get.getObserver=function(e){return Ie(e,t)},e},e.prototype.defineOn=function(e,t){var n=this.name,r=void 0;null===this.changeHandler&&(r=n+"Changed")in e.prototype&&(this.changeHandler=r),null===this.descriptor&&Object.defineProperty(e.prototype,n,this._configureDescriptor(t,{}))},e.prototype.createObserver=function(n){var e=null,t=this.defaultValue,r=this.changeHandler,i=this.name,o=void 0;if(!this.hasOptions){if(r in n)e="propertyChanged"in n?function(e,t){n[r](e,t),n.propertyChanged(i,e,t)}:function(e,t){return n[r](e,t)};else if("propertyChanged"in n)e=function(e,t){return n.propertyChanged(i,e,t)};else if(null!==r)throw new Error("Change handler "+r+" was specified but not declared on the class.");return void 0!==t&&(o="function"==typeof t?t.call(n):t),new je(this.owner.taskQueue,n,this.name,e,o)}},e.prototype._initialize=function(e,t,n,r,i){var o=void 0,a=void 0,s=void 0,l=this.defaultValue;if(this.isDynamic)for(var u in n)this._createDynamicProperty(e,t,r,u,n[u],i);else this.hasOptions||(a=t[this.name],null!==n&&(o=a.selfSubscriber,s=n[this.attribute],r&&(a.selfSubscriber=null),"string"==typeof s?(e[this.name]=s,a.call()):s?i.push({observer:a,binding:s.createBinding(e)}):void 0!==l&&a.call(),a.selfSubscriber=o),a.publishing=!0)},e.prototype._createDynamicProperty=function(n,e,t,r,i,o){var a=r+"Changed",s=null,l=void 0,u=void 0;a in n?s="propertyChanged"in n?function(e,t){n[a](e,t),n.propertyChanged(r,e,t)}:function(e,t){return n[a](e,t)}:"propertyChanged"in n&&(s=function(e,t){return n.propertyChanged(r,e,t)}),l=e[r]=new je(this.owner.taskQueue,n,r,s),Object.defineProperty(n,r,{configurable:!0,enumerable:!0,get:l.getValue.bind(l),set:l.setValue.bind(l)}),t&&(l.selfSubscriber=null),"string"==typeof i?(n[r]=i,l.call()):i&&(u={observer:l,binding:i.createBinding(n)},o.push(u)),l.publishing=!0,l.selfSubscriber=s},e}(),De=0;function Ne(){return!0}function Be(){}var Fe=e.HtmlBehaviorResource=function(){function r(){this.elementName=null,this.attributeName=null,this.attributeDefaultBindingMode=void 0,this.liftsContent=!1,this.targetShadowDOM=!1,this.shadowDOMOptions=null,this.processAttributes=Be,this.processContent=Ne,this.usesShadowDOM=!1,this.childBindings=null,this.hasDynamicOptions=!1,this.containerless=!1,this.properties=[],this.attributes={},this.isInitialized=!1,this.primaryProperty=null}return r.convention=function(e,t){var n=void 0;return e.endsWith("CustomAttribute")&&((n=t||new r).attributeName=B(e.substring(0,e.length-15))),e.endsWith("CustomElement")&&((n=t||new r).elementName=B(e.substring(0,e.length-13))),n},r.prototype.addChildBinding=function(e){null===this.childBindings&&(this.childBindings=[]),this.childBindings.push(e)},r.prototype.initialize=function(e,t){var n=t.prototype,r=this.properties,i=this.attributeName,o=this.attributeDefaultBindingMode,a=void 0,s=void 0,l=void 0;if(!this.isInitialized)if(this.isInitialized=!0,t.__providerId__=++De,this.observerLocator=e.get(p.ObserverLocator),this.taskQueue=e.get(u.TaskQueue),this.target=t,this.usesShadowDOM=this.targetShadowDOM&&R.FEATURE.shadowDOM,this.handlesCreated="created"in n,this.handlesBind="bind"in n,this.handlesUnbind="unbind"in n,this.handlesAttached="attached"in n,this.handlesDetached="detached"in n,this.htmlName=this.elementName||this.attributeName,null!==i)if(0===r.length&&new Le({name:"value",changeHandler:"valueChanged"in n?"valueChanged":null,attribute:i,defaultBindingMode:o}).registerWith(t,this),l=r[0],1===r.length&&"value"===l.name)l.isDynamic=l.hasOptions=this.hasDynamicOptions,l.defineOn(t,this);else{for(a=0,s=r.length;a<s;++a)if(r[a].defineOn(t,this),r[a].primaryProperty){if(this.primaryProperty)throw new Error("Only one bindable property on a custom element can be defined as the default");this.primaryProperty=r[a]}(l=new Le({name:"value",changeHandler:"valueChanged"in n?"valueChanged":null,attribute:i,defaultBindingMode:o})).hasOptions=!0,l.registerWith(t,this)}else{for(a=0,s=r.length;a<s;++a)r[a].defineOn(t,this);this._copyInheritedProperties(e,t)}},r.prototype.register=function(t,e){var n=this;null!==this.attributeName&&(t.registerAttribute(e||this.attributeName,this,this.attributeName),Array.isArray(this.aliases)&&this.aliases.forEach(function(e){t.registerAttribute(e,n,n.attributeName)})),null!==this.elementName&&t.registerElement(e||this.elementName,this)},r.prototype.load=function(e,t,n,r,i){var o=this,a=void 0;return null!==this.elementName?(r=e.get(J).getViewStrategy(r||this.viewStrategy||t),a=new q(this.targetShadowDOM,!0),r.moduleId||(r.moduleId=v.Origin.get(t).moduleId),r.loadViewFactory(e.get(Ae),a,n,t).then(function(e){return i&&o.viewFactory||(o.viewFactory=e),e})):Promise.resolve(this)},r.prototype.compile=function(e,t,n,r,i){if(this.liftsContent){if(!r.viewFactory){var o=R.DOM.createElement("template"),a=R.DOM.createDocumentFragment(),s=n.getAttribute("view-cache"),l=n.getAttribute("part");n.removeAttribute(r.originalAttrName),R.DOM.replaceNode(o,n,i),a.appendChild(n),r.viewFactory=e.compile(a,t),l&&(r.viewFactory.part=l,n.removeAttribute("part")),s&&(r.viewFactory.setCacheSize(s),n.removeAttribute("view-cache")),n=o}}else if(null!==this.elementName){var u={};if(this.processContent(e,t,n,r)&&n.hasChildNodes()){for(var c=n.firstChild,d=this.usesShadowDOM?null:R.DOM.createElement("au-content"),h=void 0,f=void 0;c;)h=c.nextSibling,"TEMPLATE"===c.tagName&&(f=c.getAttribute("replace-part"))?(u[f]=e.compile(c,t),R.DOM.removeNode(c,i),r.partReplacements=u):null!==d&&(3===c.nodeType&&F(c)?R.DOM.removeNode(c,i):d.appendChild(c)),c=h;null!==d&&d.hasChildNodes()&&n.appendChild(d),r.skipContentProcessing=!1}else r.skipContentProcessing=!0}else this.processContent(e,t,n,r)||(r.skipContentProcessing=!0);return n},r.prototype.create=function(e,t,n,r){var i=void 0,o=null;t=t||W.normal,n=n||null,r=r||null,null!==this.elementName&&n&&(this.usesShadowDOM?(i=n.attachShadow(this.shadowDOMOptions),e.registerInstance(R.DOM.boundary,i)):(i=n,this.targetShadowDOM&&e.registerInstance(R.DOM.boundary,i))),null!==n&&(n.au=o=n.au||{});var a=t.viewModel||e.get(this.target),s=new Re(this,t,a,e),l=this.childBindings,u=void 0;if(this.liftsContent)o.controller=s;else if(null!==this.elementName){if(u=t.viewFactory||this.viewFactory,e.viewModel=a,u&&(s.view=u.create(e,t,n)),null!==n){if((o.controller=s).view){if(!this.usesShadowDOM&&(1===n.childNodes.length||n.contentElement)){var c=n.childNodes[0]||n.contentElement;s.view.contentView={fragment:c},c.parentNode&&R.DOM.removeNode(c)}if(t.anchorIsContainer){if(null!==l)for(var d=0,h=l.length;d<h;++d)s.view.addBinding(l[d].create(n,a,s));s.view.appendNodesTo(i)}else s.view.insertNodesBefore(i)}else if(null!==l)for(var f=0,p=l.length;f<p;++f)r.push(l[f].create(n,a,s))}else if(s.view){if(s.view.controller=s,null!==l)for(var v=0,m=l.length;v<m;++v)s.view.addBinding(l[v].create(t.host,a,s))}else if(null!==l)for(var g=0,y=l.length;g<y;++g)r.push(l[g].create(t.host,a,s))}else if(null!==l)for(var b=0,w=l.length;b<w;++b)r.push(l[b].create(n,a,s));return null!==o&&(o[this.htmlName]=s),t.initiatedByBehavior&&u&&s.view.created(),s},r.prototype._ensurePropertiesDefined=function(e,t){var n,r=void 0,i=void 0,o=void 0;if(!("__propertiesDefined__"in t))for(t.__propertiesDefined__=!0,i=0,n=(r=this.properties).length;i<n;++i)void 0!==(o=r[i].createObserver(e))&&(t[o.propertyName]=o)},r.prototype._copyInheritedProperties=function(e,t){for(var r=this,i=void 0,o=t;;){var n=Object.getPrototypeOf(t.prototype);if(!(t=n&&n.constructor))return;if(i=v.metadata.getOwn(v.metadata.resource,t))break}i.initialize(e,t);for(var a=function(e,t){var n=i.properties[e];if(r.properties.some(function(e){return e.name===n.name}))return"continue";new Le(n).registerWith(o,r)},s=0,l=i.properties.length;s<l;++s)a(s)},r}();function Ve(o,a){return function(e,t,n){var r="string"==typeof t?e.constructor:e,i=v.metadata.getOrCreateOwn(v.metadata.resource,Fe,r);"string"==typeof o&&(o={selector:o,name:t}),n&&(n.writable=!0,n.configurable=!0),o.all=a,i.addChildBinding(new ze(o))}}var ze=function(){function e(e){this.name=e.name,this.changeHandler=e.changeHandler||this.name+"Changed",this.selector=e.selector,this.all=e.all}return e.prototype.create=function(e,t,n){return new We(this.selector,e,this.name,t,n,this.changeHandler,this.all)},e}(),He=[];function Ue(e,t,n){var r=e.get(t);r||(r=[],e.set(t,r)),r.push(n)}function qe(e,t){for(var n=t.binders,r=n.length,i=new Map,o=0,a=e.length;o<a;++o){for(var s=e[o],l=s.addedNodes,u=s.removedNodes,c=0,d=u.length;c<d;++c){var h=u[c];if(1===h.nodeType)for(var f=0;f<r;++f){var p=n[f];p.onRemove(h)&&Ue(i,p,s)}}for(var v=0,m=l.length;v<m;++v){var g=l[v];if(1===g.nodeType)for(var y=0;y<r;++y){var b=n[y];b.onAdd(g)&&Ue(i,b,s)}}}i.forEach(function(e,t){null!==t.changeHandler&&t.viewModel[t.changeHandler](e)})}var We=function(){function e(e,t,n,r,i,o,a){this.selector=e,this.viewHost=t,this.property=n,this.viewModel=r,this.controller=i,this.changeHandler=o in r?o:null,this.usesShadowDOM=i.behavior.usesShadowDOM,this.all=a,!this.usesShadowDOM&&i.view&&i.view.contentView?this.contentView=i.view.contentView:this.contentView=null}return e.prototype.matches=function(e){if(e.matches(this.selector)){if(null===this.contentView)return!0;var t=this.contentView,n=e.auAssignedSlot;if(n&&n.projectFromAnchors){for(var r=n.projectFromAnchors,i=0,o=r.length;i<o;++i)if(r[i].auOwnerView===t)return!0;return!1}return e.auOwnerView===t}return!1},e.prototype.bind=function(e){var t=this.viewHost,n=this.viewModel,r=t.__childObserver__;if(!r){r=t.__childObserver__=R.DOM.createMutationObserver(qe);var i={childList:!0,subtree:!this.usesShadowDOM};r.observe(t,i),r.binders=[]}if(r.binders.push(this),this.usesShadowDOM){var o=t.firstElementChild;if(this.all){var a=n[this.property];for(a?a.length=0:a=n[this.property]=[];o;)this.matches(o)&&a.push(o.au&&o.au.controller?o.au.controller.viewModel:o),o=o.nextElementSibling;null!==this.changeHandler&&this.viewModel[this.changeHandler](He)}else for(;o;){if(this.matches(o)){var s=o.au&&o.au.controller?o.au.controller.viewModel:o;this.viewModel[this.property]=s,null!==this.changeHandler&&this.viewModel[this.changeHandler](s);break}o=o.nextElementSibling}}},e.prototype.onRemove=function(e){if(this.matches(e)){var t=e.au&&e.au.controller?e.au.controller.viewModel:e;if(this.all){var n=this.viewModel[this.property]||(this.viewModel[this.property]=[]),r=n.indexOf(t);return-1!==r&&n.splice(r,1),!0}return!1}return!1},e.prototype.onAdd=function(e){if(this.matches(e)){var t=e.au&&e.au.controller?e.au.controller.viewModel:e;if(this.all){var n=this.viewModel[this.property]||(this.viewModel[this.property]=[]);if("*"===this.selector)return n.push(t),!0;for(var r=0,i=e.previousElementSibling;i;)this.matches(i)&&r++,i=i.previousElementSibling;return n.splice(r,0,t),!0}this.viewModel[this.property]=t,null!==this.changeHandler&&this.viewModel[this.changeHandler](t)}return!1},e.prototype.unbind=function(){this.viewHost.__childObserver__&&(this.viewHost.__childObserver__.disconnect(),this.viewHost.__childObserver__=null)},e}();function Ge(e,t){return Array.isArray(t)?e.removeMany(t,!0):e.remove(t,!0)}var Ye=e.SwapStrategies={before:function(e,t,n){return void 0===t?n():n().then(function(){return Ge(e,t)})},with:function(e,t,n){return void 0===t?n():Promise.all([Ge(e,t),n()])},after:function(e,t,n){return Promise.resolve(e.removeAll(!0)).then(n)}};function Xe(e){return e.skipActivation||"function"!=typeof e.viewModel.activate?Promise.resolve():e.viewModel.activate(e.model)||Promise.resolve()}var Ze=e.CompositionEngine=(0,o.inject)(Ae,J)(O=function(){function e(e,t){this.viewEngine=e,this.viewLocator=t}return e.prototype._swap=function(e,t){var n=Ye[e.swapOrder]||Ye.after,r=e.viewSlot.children.slice();return n(e.viewSlot,r,function(){return Promise.resolve(e.viewSlot.add(t)).then(function(){e.currentController&&e.currentController.unbind()})}).then(function(){e.compositionTransactionNotifier&&e.compositionTransactionNotifier.done()})},e.prototype._createControllerAndSwap=function(t){var n=this;return this.createController(t).then(function(e){return e.automate(t.overrideContext,t.owningView),t.compositionTransactionOwnershipToken?t.compositionTransactionOwnershipToken.waitForCompositionComplete().then(function(){return n._swap(t,e.view)}).then(function(){return e}):n._swap(t,e.view).then(function(){return e})})},e.prototype.createController=function(t){var n=this,r=void 0,i=void 0,o=void 0,a=void 0;return this.ensureViewModel(t).then(Xe).then(function(){r=t.childContainer,i=t.viewModel,o=t.viewModelResource,a=o.metadata;var e=n.viewLocator.getViewStrategy(t.view||i);return t.viewResources&&e.makeRelativeTo(t.viewResources.viewUrl),a.load(r,o.value,null,e,!0)}).then(function(e){return a.create(r,W.dynamic(t.host,i,e))})},e.prototype.ensureViewModel=function(t){var n=t.childContainer=t.childContainer||t.container.createChild();if("string"==typeof t.viewModel)return t.viewModel=t.viewResources?t.viewResources.relativeToView(t.viewModel):t.viewModel,this.viewEngine.importViewModelResource(t.viewModel).then(function(e){return n.autoRegister(e.value),t.host&&n.registerInstance(R.DOM.Element,t.host),t.viewModel=n.viewModel=n.get(e.value),t.viewModelResource=e,t});var e=v.metadata.getOrCreateOwn(v.metadata.resource,Fe,t.viewModel.constructor);return e.elementName=e.elementName||"dynamic-element",e.initialize(t.container||n,t.viewModel.constructor),t.viewModelResource={metadata:e,value:t.viewModel.constructor},n.viewModel=t.viewModel,Promise.resolve(t)},e.prototype.compose=function(n){var r=this;n.childContainer=n.childContainer||n.container.createChild(),n.view=this.viewLocator.getViewStrategy(n.view);var e=n.childContainer.get(L),t=e.tryCapture();return t?n.compositionTransactionOwnershipToken=t:n.compositionTransactionNotifier=e.enlist(),n.viewModel?this._createControllerAndSwap(n):n.view?(n.viewResources&&n.view.makeRelativeTo(n.viewResources.viewUrl),n.view.loadViewFactory(this.viewEngine,new q).then(function(e){var t=e.create(n.childContainer);return t.bind(n.bindingContext,n.overrideContext),n.compositionTransactionOwnershipToken?n.compositionTransactionOwnershipToken.waitForCompositionComplete().then(function(){return r._swap(n,t)}).then(function(){return t}):r._swap(n,t).then(function(){return t})})):(n.viewSlot&&(n.viewSlot.removeAll(),n.compositionTransactionNotifier&&n.compositionTransactionNotifier.done()),Promise.resolve(null))},e}())||O,Ke=e.ElementConfigResource=function(){function e(){}return e.prototype.initialize=function(e,t){},e.prototype.register=function(e,t){},e.prototype.load=function(e,t){var n=new t;e.get(p.EventManager).registerElementConfig(n)},e}();function $e(e,t){if(/[A-Z]/.test(e)){var n=B(e);return a.getLogger("templating").warn("'"+e+"' is not a valid "+t+" name and has been converted to '"+n+"'. Upper-case letters are not allowed because the DOM is not case-sensitive."),n}return e}var Qe={mode:"open"};function Je(){return!1}function et(t){return function(e){v.metadata.define(J.viewStrategyMetadataKey,t,e)}}e.TemplatingEngine=(0,o.inject)(o.Container,Oe,Se,Ze)(E=function(){function e(e,t,n,r){this._container=e,this._moduleAnalyzer=t,this._viewCompiler=n,this._compositionEngine=r,e.registerInstance(A,A.instance=new A)}return e.prototype.configureAnimator=function(e){this._container.unregister(A),this._container.registerInstance(A,A.instance=e)},e.prototype.compose=function(e){return this._compositionEngine.compose(e)},e.prototype.enhance=function(e){e instanceof R.DOM.Element&&(e={element:e});var t={},n=e.resources||this._container.get(le);this._viewCompiler._compileNode(e.element,n,t,e.element.parentNode,"root",!0);var r=new we(e.element,t,n),i=e.container||this._container.createChild(),o=r.create(i,W.enhance());return o.bind(e.bindingContext||{},e.overrideContext),o.firstChild=o.lastChild=o.fragment,o.fragment=R.DOM.createDocumentFragment(),o.attached(),o},e}())||E}),define("aurelia-templating-router/router-view",["exports","aurelia-dependency-injection","aurelia-binding","aurelia-templating","aurelia-router","aurelia-metadata","aurelia-pal"],function(e,t,s,h,n,f,r){"use strict";function l(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function i(n,r,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(n,r,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(n,r,o),o=null),o}var o,a,u,c,d,p,v,m;Object.defineProperty(e,"__esModule",{value:!0}),e.RouterViewLocator=e.RouterView=void 0;e.RouterView=(o=(0,h.customElement)("router-view"),a=(0,t.inject)(r.DOM.Element,t.Container,h.ViewSlot,n.Router,h.ViewLocator,h.CompositionTransaction,h.CompositionEngine),o(u=(0,h.noView)(u=a((c=function(){function e(e,t,n,r,i,o,a){l(this,"swapOrder",d,this),l(this,"layoutView",p,this),l(this,"layoutViewModel",v,this),l(this,"layoutModel",m,this),this.element=e,this.container=t,this.viewSlot=n,this.router=r,this.viewLocator=i,this.compositionTransaction=o,this.compositionEngine=a,this.router.registerViewPort(this,this.element.getAttribute("name")),"initialComposition"in o||(o.initialComposition=!0,this.compositionTransactionNotifier=o.enlist())}return e.prototype.created=function(e){this.owningView=e},e.prototype.bind=function(e,t){this.container.viewModel=e,this.overrideContext=t},e.prototype.process=function(t,n){var r=this,e=t.component,i=e.childContainer,o=e.viewModel,a=e.viewModelResource,s=a.metadata,l=e.router.currentInstruction.config,u=l.viewPorts&&l.viewPorts[t.name]||{};i.get(g)._notify(this);var c={viewModel:u.layoutViewModel||l.layoutViewModel||this.layoutViewModel,view:u.layoutView||l.layoutView||this.layoutView,model:u.layoutModel||l.layoutModel||this.layoutModel,router:t.component.router,childContainer:i,viewSlot:this.viewSlot},d=this.viewLocator.getViewStrategy(e.view||o);return d&&e.view&&d.makeRelativeTo(f.Origin.get(e.router.container.viewModel.constructor).moduleId),s.load(i,a.value,null,d,!0).then(function(e){if(r.compositionTransactionNotifier||(r.compositionTransactionOwnershipToken=r.compositionTransaction.tryCapture()),(c.viewModel||c.view)&&(t.layoutInstruction=c),t.controller=s.create(i,h.BehaviorInstruction.dynamic(r.element,o,e)),n)return null;r.swap(t)})},e.prototype.swap=function(t){var n=this,r=t.layoutInstruction,i=this.view,o=function(){var e=h.SwapStrategies[n.swapOrder]||h.SwapStrategies.after,t=n.viewSlot;e(t,i,function(){return Promise.resolve(t.add(n.view))}).then(function(){n._notify()})},a=function(e){return t.controller.automate(n.overrideContext,e),n.compositionTransactionOwnershipToken?n.compositionTransactionOwnershipToken.waitForCompositionComplete().then(function(){return n.compositionTransactionOwnershipToken=null,o()}):o()};return r?(r.viewModel||(r.viewModel={}),this.compositionEngine.createController(r).then(function(e){return h.ShadowDOM.distributeView(t.controller.view,e.slots||e.view.slots),e.automate((0,s.createOverrideContext)(r.viewModel),n.owningView),e.view.children.push(t.controller.view),e.view||e}).then(function(e){return n.view=e,a(e)})):(this.view=t.controller.view,a(this.owningView))},e.prototype._notify=function(){this.compositionTransactionNotifier&&(this.compositionTransactionNotifier.done(),this.compositionTransactionNotifier=null)},e}(),d=i(c.prototype,"swapOrder",[h.bindable],{enumerable:!0,initializer:null}),p=i(c.prototype,"layoutView",[h.bindable],{enumerable:!0,initializer:null}),v=i(c.prototype,"layoutViewModel",[h.bindable],{enumerable:!0,initializer:null}),m=i(c.prototype,"layoutModel",[h.bindable],{enumerable:!0,initializer:null}),u=c))||u)||u)||u);var g=e.RouterViewLocator=function(){function e(){var t=this;this.promise=new Promise(function(e){return t.resolve=e})}return e.prototype.findNearest=function(){return this.promise},e.prototype._notify=function(e){this.resolve(e)},e}()}),define("aurelia-templating-router/route-loader",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-router","aurelia-path","aurelia-metadata","./router-view"],function(e,t,c,d,h,f,p){"use strict";var n,r;Object.defineProperty(e,"__esModule",{value:!0}),e.TemplatingRouteLoader=void 0;var v=(0,c.inlineView)("<template></template>")(n=function(){})||n;e.TemplatingRouteLoader=(0,t.inject)(c.CompositionEngine)(r=function(n){function e(e){var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this));return t.compositionEngine=e,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,n),e.prototype.loadRoute=function(n,e){var t,r,i,o,a,s=n.container.createChild(),l=void 0;null===e.moduleId?l=v:/\.html/i.test(e.moduleId)?(t=e.moduleId,a=/([^\/^\?]+)\.html/i.exec(t)[1],r=(0,c.customElement)(a),i=(0,c.useView)(t),l=r(o=i(o=function(){function e(){}return e.prototype.bind=function(e){this.$parent=e},e}())||o)||o):l=(0,h.relativeToFile)(e.moduleId,f.Origin.get(n.container.viewModel.constructor).moduleId);var u={viewModel:l,childContainer:s,view:(e=e||{}).view||e.viewStrategy,router:n};return s.registerSingleton(p.RouterViewLocator),s.getChildRouter=function(){var t=void 0;return s.registerHandler(d.Router,function(e){return t||(t=n.createChild(s))}),s.get(d.Router)},this.compositionEngine.ensureViewModel(u)},e}(d.RouteLoader))||r}),define("aurelia-templating-router/route-href",["exports","aurelia-templating","aurelia-dependency-injection","aurelia-router","aurelia-pal","aurelia-logging"],function(e,t,n,r,i,o){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.RouteHref=void 0;var s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(o).getLogger("route-href");e.RouteHref=(0,t.customAttribute)("route-href")(a=(0,t.bindable)({name:"route",changeHandler:"processChange",primaryProperty:!0})(a=(0,t.bindable)({name:"params",changeHandler:"processChange"})(a=(0,t.bindable)({name:"attribute",defaultValue:"href"})(a=(0,n.inject)(r.Router,i.DOM.Element)(a=function(){function e(e,t){this.router=e,this.element=t}return e.prototype.bind=function(){this.isActive=!0,this.processChange()},e.prototype.unbind=function(){this.isActive=!1},e.prototype.attributeChanged=function(e,t){t&&this.element.removeAttribute(t),this.processChange()},e.prototype.processChange=function(){var t=this;return this.router.ensureConfigured().then(function(){if(!t.isActive)return null;var e=t.router.generate(t.route,t.params);return t.element.au.controller?t.element.au.controller.viewModel[t.attribute]=e:t.element.setAttribute(t.attribute,e),null}).catch(function(e){s.error(e)})},e}())||a)||a)||a)||a)||a}),define("aurelia-templating-router/aurelia-templating-router",["exports","aurelia-pal","aurelia-router","./route-loader","./router-view","./route-href"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.configure=e.RouteHref=e.RouterView=e.TemplatingRouteLoader=void 0,e.TemplatingRouteLoader=r.TemplatingRouteLoader,e.RouterView=i.RouterView,e.RouteHref=o.RouteHref,e.configure=function(e){e.singleton(n.RouteLoader,r.TemplatingRouteLoader).singleton(n.Router,n.AppRouter).globalResources(t.PLATFORM.moduleName("./router-view"),t.PLATFORM.moduleName("./route-href")),e.container.registerAlias(n.Router,n.AppRouter)}}),define("aurelia-templating-router",["aurelia-templating-router/aurelia-templating-router"],function(e){return e}),define("aurelia-templating-resources/with",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-binding"],function(e,t,n,r){"use strict";var i,o,a;Object.defineProperty(e,"__esModule",{value:!0}),e.With=void 0;e.With=(i=(0,n.customAttribute)("with"),o=(0,t.inject)(n.BoundViewFactory,n.ViewSlot),i(a=(0,n.templateController)(a=o(a=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.parentOverrideContext=null,this.view=null}return e.prototype.bind=function(e,t){this.parentOverrideContext=t,this.valueChanged(this.value)},e.prototype.valueChanged=function(e){var t=(0,r.createOverrideContext)(e,this.parentOverrideContext);this.view?this.view.bind(e,t):(this.view=this.viewFactory.create(),this.view.bind(e,t),this.viewSlot.add(this.view))},e.prototype.unbind=function(){this.parentOverrideContext=null,this.view&&this.view.unbind()},e}())||a)||a)||a)}),define("aurelia-templating-resources/update-trigger-binding-behavior",["exports","aurelia-binding"],function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateTriggerBindingBehavior=void 0;var l="The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements.";e.UpdateTriggerBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,t){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(0===r.length)throw new Error("The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">");if(e.mode!==s.bindingMode.twoWay&&e.mode!==s.bindingMode.fromView)throw new Error(l);var o=e.observerLocator.getObserver(e.target,e.targetProperty);if(!o.handler)throw new Error(l);(e.targetObserver=o).originalHandler=e.targetObserver.handler;var a=new s.EventSubscriber(r);o.handler=a},e.prototype.unbind=function(e,t){e.targetObserver.handler.dispose(),e.targetObserver.handler=e.targetObserver.originalHandler,e.targetObserver.originalHandler=null},e}()}),define("aurelia-templating-resources/throttle-binding-behavior",["exports","aurelia-binding"],function(e,i){"use strict";function o(e){var t=this,n=this.throttleState,r=+new Date-n.last;if(r>=n.delay)return clearTimeout(n.timeoutId),n.timeoutId=null,n.last=+new Date,void this.throttledMethod(e);n.newValue=e,null===n.timeoutId&&(n.timeoutId=setTimeout(function(){n.timeoutId=null,n.last=+new Date,t.throttledMethod(n.newValue)},n.delay-r))}Object.defineProperty(e,"__esModule",{value:!0}),e.ThrottleBindingBehavior=void 0;e.ThrottleBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:200,r="updateTarget";e.callSource?r="callSource":e.updateSource&&e.mode===i.bindingMode.twoWay&&(r="updateSource"),e.throttledMethod=e[r],e.throttledMethod.originalName=r,e[r]=o,e.throttleState={delay:n,last:0,timeoutId:null}},e.prototype.unbind=function(e,t){e[e.throttledMethod.originalName]=e.throttledMethod,e.throttledMethod=null,clearTimeout(e.throttleState.timeoutId),e.throttleState=null},e}()}),define("aurelia-templating-resources/signal-binding-behavior",["exports","./binding-signaler"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SignalBindingBehavior=void 0;e.SignalBindingBehavior=function(){function e(e){this.signals=e.signals}return e.inject=function(){return[t.BindingSignaler]},e.prototype.bind=function(e,t){if(!e.updateTarget)throw new Error("Only property bindings and string interpolation bindings can be signaled.  Trigger, delegate and call bindings cannot be signaled.");if(3===arguments.length){var n=arguments[2];(this.signals[n]||(this.signals[n]=[])).push(e),e.signalName=n}else{if(!(3<arguments.length))throw new Error("Signal name is required.");for(var r=Array.prototype.slice.call(arguments,2),i=r.length;i--;){var o=r[i];(this.signals[o]||(this.signals[o]=[])).push(e)}e.signalName=r}},e.prototype.unbind=function(e,t){var n=e.signalName;if(e.signalName=null,Array.isArray(n))for(var r=n,i=r.length;i--;){var o=r[i],a=this.signals[o];a.splice(a.indexOf(e),1)}else{var s=this.signals[n];s.splice(s.indexOf(e),1)}},e}()}),define("aurelia-templating-resources/show",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-pal","./aurelia-hide-style"],function(e,t,n,r,i){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.Show=void 0;e.Show=(0,n.customAttribute)("show")(o=(0,t.inject)(r.DOM.Element,n.Animator,t.Optional.of(r.DOM.boundary,!0))(o=function(){function e(e,t,n){this.element=e,this.animator=t,this.domBoundary=n}return e.prototype.created=function(){(0,i.injectAureliaHideStyleAtBoundary)(this.domBoundary)},e.prototype.valueChanged=function(e){e?this.animator.removeClass(this.element,i.aureliaHideClassName):this.animator.addClass(this.element,i.aureliaHideClassName)},e.prototype.bind=function(e){this.valueChanged(this.value)},e}())||o)||o}),define("aurelia-templating-resources/set-repeat-strategy",["exports","./repeat-utilities"],function(e,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SetRepeatStrategy=void 0;e.SetRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getSetObserver(t)},e.prototype.instanceChanged=function(e,t){var n=this,r=e.removeAllViews(!0,!e.viewsRequireLifecycle);r instanceof Promise?r.then(function(){return n._standardProcessItems(e,t)}):this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(t,n){var r=0,i=void 0;n.forEach(function(e){i=(0,h.createFullOverrideContext)(t,e,r,n.size),t.addView(i.bindingContext,i),++r})},e.prototype.instanceMutated=function(e,t,n){var r,i=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=[],c=void 0;for(o=0,r=n.length;o<r;++o)switch(i=(l=n[o]).value,l.type){case"add":var d=Math.max(t.size-1,0);a=(0,h.createFullOverrideContext)(e,i,d,t.size),e.insertView(d,a.bindingContext,a);break;case"delete":s=this._getViewIndexByValue(e,i),(c=e.removeView(s,!0,!e.viewsRequireLifecycle))instanceof Promise&&u.push(c);break;case"clear":e.removeAllViews(!0,!e.viewsRequireLifecycle);break;default:continue}0<u.length?Promise.all(u).then(function(){(0,h.updateOverrideContexts)(e.views(),0)}):(0,h.updateOverrideContexts)(e.views(),0)},e.prototype._getViewIndexByValue=function(e,t){var n,r=void 0;for(r=0,n=e.viewCount();r<n;++r)if(e.view(r).bindingContext[e.local]===t)return r},e}()}),define("aurelia-templating-resources/self-binding-behavior",["exports"],function(e){"use strict";function n(e){var t,n=(t=e).path&&t.path[0]||t.deepPath&&t.deepPath[0]||t.target;this.target===n&&this.selfEventCallSource(e)}Object.defineProperty(e,"__esModule",{value:!0});e.SelfBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,t){if(!e.callSource||!e.targetEvent)throw new Error("Self binding behavior only supports event.");e.selfEventCallSource=e.callSource,e.callSource=n},e.prototype.unbind=function(e,t){e.callSource=e.selfEventCallSource,e.selfEventCallSource=null},e}()}),define("aurelia-templating-resources/sanitize-html",["exports","aurelia-binding","aurelia-dependency-injection","./html-sanitizer"],function(e,t,n,r){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.SanitizeHTMLValueConverter=void 0;e.SanitizeHTMLValueConverter=(0,t.valueConverter)("sanitizeHTML")(i=(0,n.inject)(r.HTMLSanitizer)(i=function(){function e(e){this.sanitizer=e}return e.prototype.toView=function(e){return null==e?null:this.sanitizer.sanitize(e)},e}())||i)||i}),define("aurelia-templating-resources/replaceable",["exports","aurelia-dependency-injection","aurelia-templating"],function(e,t,n){"use strict";var r,i,o;Object.defineProperty(e,"__esModule",{value:!0}),e.Replaceable=void 0;e.Replaceable=(r=(0,n.customAttribute)("replaceable"),i=(0,t.inject)(n.BoundViewFactory,n.ViewSlot),r(o=(0,n.templateController)(o=i(o=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.view=null}return e.prototype.bind=function(e,t){null===this.view&&(this.view=this.viewFactory.create(),this.viewSlot.add(this.view)),this.view.bind(e,t)},e.prototype.unbind=function(){this.view.unbind()},e}())||o)||o)||o)}),define("aurelia-templating-resources/repeat",["exports","aurelia-dependency-injection","aurelia-binding","aurelia-templating","./repeat-strategy-locator","./repeat-utilities","./analyze-view-factory","./abstract-repeater"],function(e,t,n,r,i,l,u,o){"use strict";function c(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function a(n,r,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(n,r,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(n,r,o),o=null),o}var s,d,h,f,p,v,m,g;Object.defineProperty(e,"__esModule",{value:!0}),e.Repeat=void 0;e.Repeat=(s=(0,r.customAttribute)("repeat"),d=(0,t.inject)(r.BoundViewFactory,r.TargetInstruction,r.ViewSlot,r.ViewResources,n.ObserverLocator,i.RepeatStrategyLocator),s(h=(0,r.templateController)(h=d((f=function(s){function e(e,t,n,r,i,o){var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,{local:"item",viewsRequireLifecycle:(0,u.viewsRequireLifecycle)(e)}));return c(a,"items",p,a),c(a,"local",v,a),c(a,"key",m,a),c(a,"value",g,a),a.viewFactory=e,a.instruction=t,a.viewSlot=n,a.lookupFunctions=r.lookupFunctions,a.observerLocator=i,a.key="key",a.value="value",a.strategyLocator=o,a.ignoreMutation=!1,a.sourceExpression=(0,l.getItemsSourceExpression)(a.instruction,"repeat.for"),a.isOneTime=(0,l.isOneTime)(a.sourceExpression),a.viewsRequireLifecycle=(0,u.viewsRequireLifecycle)(e),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s),e.prototype.call=function(e,t){this[e](this.items,t)},e.prototype.bind=function(e,t){this.scope={bindingContext:e,overrideContext:t},this.matcherBinding=this._captureAndRemoveMatcherBinding(),this.itemsChanged()},e.prototype.unbind=function(){this.scope=null,this.items=null,this.matcherBinding=null,this.viewSlot.removeAll(!0,!0),this._unsubscribeCollection()},e.prototype._unsubscribeCollection=function(){this.collectionObserver&&(this.collectionObserver.unsubscribe(this.callContext,this),this.collectionObserver=null,this.callContext=null)},e.prototype.itemsChanged=function(){if(this._unsubscribeCollection(),this.scope){var e=this.items;if(this.strategy=this.strategyLocator.getStrategy(e),!this.strategy)throw new Error("Value for '"+this.sourceExpression+"' is non-repeatable");this.isOneTime||this._observeInnerCollection()||this._observeCollection(),this.strategy.instanceChanged(this,e)}},e.prototype._getInnerCollection=function(){var e=(0,l.unwrapExpression)(this.sourceExpression);return e?e.evaluate(this.scope,null):null},e.prototype.handleCollectionMutated=function(e,t){this.collectionObserver&&this.strategy.instanceMutated(this,e,t)},e.prototype.handleInnerCollectionMutated=function(e,t){var n=this;if(this.collectionObserver&&!this.ignoreMutation){this.ignoreMutation=!0;var r=this.sourceExpression.evaluate(this.scope,this.lookupFunctions);this.observerLocator.taskQueue.queueMicroTask(function(){return n.ignoreMutation=!1}),r===this.items?this.itemsChanged():this.items=r}},e.prototype._observeInnerCollection=function(){var e=this._getInnerCollection(),t=this.strategyLocator.getStrategy(e);return!!t&&(this.collectionObserver=t.getCollectionObserver(this.observerLocator,e),!!this.collectionObserver&&(this.callContext="handleInnerCollectionMutated",this.collectionObserver.subscribe(this.callContext,this),!0))},e.prototype._observeCollection=function(){var e=this.items;this.collectionObserver=this.strategy.getCollectionObserver(this.observerLocator,e),this.collectionObserver&&(this.callContext="handleCollectionMutated",this.collectionObserver.subscribe(this.callContext,this))},e.prototype._captureAndRemoveMatcherBinding=function(){if(this.viewFactory.viewFactory)for(var e=this.viewFactory.viewFactory.instructions,t=Object.keys(e),n=0;n<t.length;n++){var r=e[t[n]].expressions;if(r)for(;n<r.length;n++)if("matcher"===r[0].targetProperty){var i=r[0];return r.splice(0,1),i}}},e.prototype.viewCount=function(){return this.viewSlot.children.length},e.prototype.views=function(){return this.viewSlot.children},e.prototype.view=function(e){return this.viewSlot.children[e]},e.prototype.matcher=function(){return this.matcherBinding?this.matcherBinding.sourceExpression.evaluate(this.scope,this.matcherBinding.lookupFunctions):null},e.prototype.addView=function(e,t){var n=this.viewFactory.create();n.bind(e,t),this.viewSlot.add(n)},e.prototype.insertView=function(e,t,n){var r=this.viewFactory.create();r.bind(t,n),this.viewSlot.insert(e,r)},e.prototype.moveView=function(e,t){this.viewSlot.move(e,t)},e.prototype.removeAllViews=function(e,t){return this.viewSlot.removeAll(e,t)},e.prototype.removeViews=function(e,t,n){return this.viewSlot.removeMany(e,t,n)},e.prototype.removeView=function(e,t,n){return this.viewSlot.removeAt(e,t,n)},e.prototype.updateBindings=function(e){for(var t=e.bindings.length;t--;)(0,l.updateOneTimeBinding)(e.bindings[t]);for(t=e.controllers.length;t--;)for(var n=e.controllers[t].boundProperties.length;n--;){var r=e.controllers[t].boundProperties[n].binding;(0,l.updateOneTimeBinding)(r)}},e}(o.AbstractRepeater),p=a(f.prototype,"items",[r.bindable],{enumerable:!0,initializer:null}),v=a(f.prototype,"local",[r.bindable],{enumerable:!0,initializer:null}),m=a(f.prototype,"key",[r.bindable],{enumerable:!0,initializer:null}),g=a(f.prototype,"value",[r.bindable],{enumerable:!0,initializer:null}),h=f))||h)||h)||h)}),define("aurelia-templating-resources/repeat-utilities",["exports","aurelia-binding"],function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateOverrideContexts=function(e,t){var n=e.length;0<t&&(t-=1);for(;t<n;++t)l(e[t].overrideContext,t,n)},e.createFullOverrideContext=function(e,t,n,r,i){var o={},a=(0,s.createOverrideContext)(o,e.scope.overrideContext);void 0!==i?(o[e.key]=i,o[e.value]=t):o[e.local]=t;return l(a,n,r),a},e.updateOverrideContext=l,e.getItemsSourceExpression=function(e,t){return e.behaviorInstructions.filter(function(e){return e.originalAttrName===t})[0].attributes.items.sourceExpression},e.unwrapExpression=function(e){var t=!1;for(;e instanceof s.BindingBehavior;)e=e.expression;for(;e instanceof s.ValueConverter;)e=e.expression,t=!0;return t?e:null},e.isOneTime=function(e){for(;e instanceof s.BindingBehavior;){if("oneTime"===e.name)return!0;e=e.expression}return!1},e.updateOneTimeBinding=function(e){e.call&&e.mode===t?e.call(s.sourceContext):e.updateOneTimeBindings&&e.updateOneTimeBindings()},e.indexOf=function(e,t,n,r){if(!n)return e.indexOf(t);for(var i=e.length,o=r||0;o<i;o++)if(n(e[o],t))return o;return-1};var t=s.bindingMode.oneTime;function l(e,t,n){var r=0===t,i=t===n-1,o=t%2==0;e.$index=t,e.$first=r,e.$last=i,e.$middle=!(r||i),e.$odd=!o,e.$even=o}}),define("aurelia-templating-resources/repeat-strategy-locator",["exports","./null-repeat-strategy","./array-repeat-strategy","./map-repeat-strategy","./set-repeat-strategy","./number-repeat-strategy"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RepeatStrategyLocator=void 0;e.RepeatStrategyLocator=function(){function e(){this.matchers=[],this.strategies=[],this.addStrategy(function(e){return null==e},new t.NullRepeatStrategy),this.addStrategy(function(e){return e instanceof Array},new n.ArrayRepeatStrategy),this.addStrategy(function(e){return e instanceof Map},new r.MapRepeatStrategy),this.addStrategy(function(e){return e instanceof Set},new i.SetRepeatStrategy),this.addStrategy(function(e){return"number"==typeof e},new o.NumberRepeatStrategy)}return e.prototype.addStrategy=function(e,t){this.matchers.push(e),this.strategies.push(t)},e.prototype.getStrategy=function(e){for(var t=this.matchers,n=0,r=t.length;n<r;++n)if(t[n](e))return this.strategies[n];return null},e}()}),define("aurelia-templating-resources/number-repeat-strategy",["exports","./repeat-utilities"],function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberRepeatStrategy=void 0;e.NumberRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(){return null},e.prototype.instanceChanged=function(e,t){var n=this,r=e.removeAllViews(!0,!e.viewsRequireLifecycle);r instanceof Promise?r.then(function(){return n._standardProcessItems(e,t)}):this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,t){var n=e.viewCount(),r=void 0,i=void 0,o=void 0,a=void 0;if(0<(a=n-(t=Math.floor(t))))for(n<a&&(a=n),r=0,i=a;r<i;++r)e.removeView(n-(r+1),!0,!e.viewsRequireLifecycle);else{for(r=n,i=t;r<i;++r)o=(0,s.createFullOverrideContext)(e,r,r,i),e.addView(o.bindingContext,o);(0,s.updateOverrideContexts)(e.views(),0)}},e}()}),define("aurelia-templating-resources/null-repeat-strategy",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.NullRepeatStrategy=function(){function e(){}return e.prototype.instanceChanged=function(e,t){e.removeAllViews(!0)},e.prototype.getCollectionObserver=function(e,t){},e}()}),define("aurelia-templating-resources/map-repeat-strategy",["exports","./repeat-utilities"],function(e,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapRepeatStrategy=void 0;e.MapRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getMapObserver(t)},e.prototype.instanceChanged=function(e,t){var n=this,r=e.removeAllViews(!0,!e.viewsRequireLifecycle);r instanceof Promise?r.then(function(){return n._standardProcessItems(e,t)}):this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(n,r){var i=0,o=void 0;r.forEach(function(e,t){o=(0,h.createFullOverrideContext)(n,e,i,r.size,t),n.addView(o.bindingContext,o),++i})},e.prototype.instanceMutated=function(e,t,n){var r,i=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c=[],d=void 0;for(o=0,r=n.length;o<r;++o)switch(i=(u=n[o]).key,u.type){case"update":s=this._getViewIndexByKey(e,i),(d=e.removeView(s,!0,!e.viewsRequireLifecycle))instanceof Promise&&c.push(d),a=(0,h.createFullOverrideContext)(e,t.get(i),s,t.size,i),e.insertView(s,a.bindingContext,a);break;case"add":l=e.viewCount()<=t.size-1?e.viewCount():t.size-1,a=(0,h.createFullOverrideContext)(e,t.get(i),l,t.size,i),e.insertView(t.size-1,a.bindingContext,a);break;case"delete":if(void 0===u.oldValue)return;s=this._getViewIndexByKey(e,i),(d=e.removeView(s,!0,!e.viewsRequireLifecycle))instanceof Promise&&c.push(d);break;case"clear":e.removeAllViews(!0,!e.viewsRequireLifecycle);break;default:continue}0<c.length?Promise.all(c).then(function(){(0,h.updateOverrideContexts)(e.views(),0)}):(0,h.updateOverrideContexts)(e.views(),0)},e.prototype._getViewIndexByKey=function(e,t){var n,r=void 0;for(r=0,n=e.viewCount();r<n;++r)if(e.view(r).bindingContext[e.key]===t)return r},e}()}),define("aurelia-templating-resources/if",["exports","aurelia-templating","aurelia-dependency-injection","./if-core"],function(e,t,n,r){"use strict";function a(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(n,r,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(n,r,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(n,r,o),o=null),o}var o,l,u,c,d,h,f;Object.defineProperty(e,"__esModule",{value:!0}),e.If=void 0;e.If=(o=(0,t.customAttribute)("if"),l=(0,n.inject)(t.BoundViewFactory,t.ViewSlot),u=(0,t.bindable)({primaryProperty:!0}),o(c=(0,t.templateController)(c=l((d=function(o){function e(){for(var e,t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return a(e=t=s(this,o.call.apply(o,[this].concat(r))),"condition",h,t),a(t,"swapOrder",f,t),s(t,e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,o),e.prototype.bind=function(e,t){o.prototype.bind.call(this,e,t),this.condition?this._show():this._hide()},e.prototype.conditionChanged=function(e){this._update(e)},e.prototype._update=function(e){var t=this;if(!this.animating){var n=void 0;(n=this.elseVm?e?this._swap(this.elseVm,this):this._swap(this,this.elseVm):e?this._show():this._hide())&&(this.animating=!0,n.then(function(){t.animating=!1,t.condition!==t.showing&&t._update(t.condition)}))}},e.prototype._swap=function(e,t){switch(this.swapOrder){case"before":return Promise.resolve(t._show()).then(function(){return e._hide()});case"with":return Promise.all([e._hide(),t._show()]);default:var n=e._hide();return n?n.then(function(){return t._show()}):t._show()}},e}(r.IfCore),h=i(d.prototype,"condition",[u],{enumerable:!0,initializer:null}),f=i(d.prototype,"swapOrder",[t.bindable],{enumerable:!0,initializer:null}),c=d))||c)||c)||c)}),define("aurelia-templating-resources/if-core",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.IfCore=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.view=null,this.bindingContext=null,this.overrideContext=null,this.showing=!1}return e.prototype.bind=function(e,t){this.bindingContext=e,this.overrideContext=t},e.prototype.unbind=function(){null!==this.view&&(this.view.unbind(),this.viewFactory.isCaching&&(this.showing?(this.showing=!1,this.viewSlot.remove(this.view,!0,!0)):this.view.returnToCache(),this.view=null))},e.prototype._show=function(){if(!this.showing)return null===this.view&&(this.view=this.viewFactory.create()),this.view.isBound||this.view.bind(this.bindingContext,this.overrideContext),this.showing=!0,this.viewSlot.add(this.view);this.view.isBound||this.view.bind(this.bindingContext,this.overrideContext)},e.prototype._hide=function(){var e=this;if(this.showing){this.showing=!1;var t=this.viewSlot.remove(this.view);if(t instanceof Promise)return t.then(function(){return e.view.unbind()});this.view.unbind()}},e}()}),define("aurelia-templating-resources/html-sanitizer",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;e.HTMLSanitizer=function(){function e(){}return e.prototype.sanitize=function(e){return e.replace(t,"")},e}()}),define("aurelia-templating-resources/html-resource-plugin",["exports","aurelia-templating","./dynamic-element"],function(e,r,o){"use strict";function a(e){return/([^\/^\?]+)\.html/i.exec(e)[1].toLowerCase()}Object.defineProperty(e,"__esModule",{value:!0}),e.getElementName=a,e.configure=function(e){var t=e.container.get(r.ViewEngine),n=e.aurelia.loader;t.addResourcePlugin(".html",{fetch:function(i){return n.loadTemplate(i).then(function(e){var t,n=e.template.getAttribute("bindable"),r=a(i);return n?(n=n.split(",").map(function(e){return e.trim()}),e.template.removeAttribute("bindable")):n=[],(t={})[r]=(0,o._createDynamicElement)(r,i,n),t})}})}}),define("aurelia-templating-resources/hide",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-pal","./aurelia-hide-style"],function(e,t,n,r,i){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.Hide=void 0;e.Hide=(0,n.customAttribute)("hide")(o=(0,t.inject)(r.DOM.Element,n.Animator,t.Optional.of(r.DOM.boundary,!0))(o=function(){function e(e,t,n){this.element=e,this.animator=t,this.domBoundary=n}return e.prototype.created=function(){(0,i.injectAureliaHideStyleAtBoundary)(this.domBoundary)},e.prototype.valueChanged=function(e){e?this.animator.addClass(this.element,i.aureliaHideClassName):this.animator.removeClass(this.element,i.aureliaHideClassName)},e.prototype.bind=function(e){this.valueChanged(this.value)},e}())||o)||o}),define("aurelia-templating-resources/focus",["exports","aurelia-templating","aurelia-binding","aurelia-dependency-injection","aurelia-task-queue","aurelia-pal"],function(e,t,n,r,i,o){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.Focus=void 0;e.Focus=(0,t.customAttribute)("focus",n.bindingMode.twoWay)(a=(0,r.inject)(o.DOM.Element,i.TaskQueue)(a=function(){function e(e,t){this.element=e,this.taskQueue=t,this.isAttached=!1,this.needsApply=!1}return e.prototype.valueChanged=function(e){this.isAttached?this._apply():this.needsApply=!0},e.prototype._apply=function(){var e=this;this.value?this.taskQueue.queueMicroTask(function(){e.value&&e.element.focus()}):this.element.blur()},e.prototype.attached=function(){this.isAttached=!0,this.needsApply&&(this.needsApply=!1,this._apply()),this.element.addEventListener("focus",this),this.element.addEventListener("blur",this)},e.prototype.detached=function(){this.isAttached=!1,this.element.removeEventListener("focus",this),this.element.removeEventListener("blur",this)},e.prototype.handleEvent=function(e){"focus"===e.type?this.value=!0:o.DOM.activeElement!==this.element&&(this.value=!1)},e}())||a)||a}),define("aurelia-templating-resources/else",["exports","aurelia-templating","aurelia-dependency-injection","./if-core"],function(e,t,n,r){"use strict";var i,o,a;Object.defineProperty(e,"__esModule",{value:!0}),e.Else=void 0;e.Else=(i=(0,t.customAttribute)("else"),o=(0,n.inject)(t.BoundViewFactory,t.ViewSlot),i(a=(0,t.templateController)(a=o(a=function(r){function e(e,t){var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,t));return n._registerInIf(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,r),e.prototype.bind=function(e,t){r.prototype.bind.call(this,e,t),this.ifVm.condition?this._hide():this._show()},e.prototype._registerInIf=function(){for(var e=this.viewSlot.anchor.previousSibling;e&&!e.au;)e=e.previousSibling;if(!e||!e.au.if)throw new Error("Can't find matching If for Else custom attribute.");this.ifVm=e.au.if.viewModel,this.ifVm.elseVm=this},e}(r.IfCore))||a)||a)||a)}),define("aurelia-templating-resources/dynamic-element",["exports","aurelia-templating"],function(e,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._createDynamicElement=function(e,t,n){for(var r,i,o,a=(r=(0,u.customElement)(e),i=(0,u.useView)(t),r(o=i(o=function(){function e(){}return e.prototype.bind=function(e){this.$parent=e},e}())||o)||o),s=0,l=n.length;s<l;++s)(0,u.bindable)(n[s])(a);return a}}),define("aurelia-templating-resources/debounce-binding-behavior",["exports","aurelia-binding"],function(e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DebounceBindingBehavior=void 0;var u={};function c(e){var t=this,n=this.debounceState;clearTimeout(n.timeoutId),n.timeoutId=setTimeout(function(){return t.debouncedMethod(e)},n.delay)}function d(t,n,e){var r=this,i=this.debounceState;if(clearTimeout(i.timeoutId),t!==i.callContextToDebounce)return i.oldValue=u,void this.debouncedMethod(t,n,e);i.oldValue===u&&(i.oldValue=e),i.timeoutId=setTimeout(function(){var e=i.oldValue;i.oldValue=u,r.debouncedMethod(t,n,e)},i.delay)}e.DebounceBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:200,r=void 0!==e.callSource,i=r?"callSource":"call",o=r?c:d,a=e.mode,s=a===l.bindingMode.twoWay||a===l.bindingMode.fromView?l.targetContext:l.sourceContext;e.debouncedMethod=e[i],e.debouncedMethod.originalName=i,e[i]=o,e.debounceState={callContextToDebounce:s,delay:n,timeoutId:0,oldValue:u}},e.prototype.unbind=function(e,t){e[e.debouncedMethod.originalName]=e.debouncedMethod,e.debouncedMethod=null,clearTimeout(e.debounceState.timeoutId),e.debounceState=null},e}()}),define("aurelia-templating-resources/css-resource",["exports","aurelia-templating","aurelia-loader","aurelia-dependency-injection","aurelia-path","aurelia-pal"],function(e,n,r,t,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._createCSSResource=function(e){var t;return(0,n.resource)(new s(e))(t=function(e){function t(){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(l))||t};var a=/url\((?!['"]data)([^)]+)\)/gi;var s=function(){function e(e){this.address=e,this._scoped=null,this._global=!1,this._alreadyGloballyInjected=!1}return e.prototype.initialize=function(e,t){this._scoped=new t(this)},e.prototype.register=function(e,t){"scoped"===t?e.registerViewEngineHooks(this._scoped):this._global=!0},e.prototype.load=function(e){var t=this;return e.get(r.Loader).loadText(this.address).catch(function(e){return null}).then(function(e){e=function(r,e){if("string"!=typeof e)throw new Error("Failed loading required CSS file: "+r);return e.replace(a,function(e,t){var n=t.charAt(0);return"'"!==n&&'"'!==n||(t=t.substr(1,t.length-2)),"url('"+(0,i.relativeToFile)(t,r)+"')"})}(t.address,e),t._scoped.css=e,t._global&&(t._alreadyGloballyInjected=!0,o.DOM.injectStyles(e))})},e}(),l=function(){function e(e){this.owner=e,this.css=null}return e.prototype.beforeCompile=function(e,t,n){if(n.targetShadowDOM)o.DOM.injectStyles(this.css,e,!0);else if(o.FEATURE.scopedCSS){o.DOM.injectStyles(this.css,e,!0).setAttribute("scoped","scoped")}else this._global&&!this.owner._alreadyGloballyInjected&&(o.DOM.injectStyles(this.css),this.owner._alreadyGloballyInjected=!0)},e}()}),define("aurelia-templating-resources/compose",["exports","aurelia-dependency-injection","aurelia-logging","aurelia-task-queue","aurelia-templating","aurelia-pal"],function(e,t,n,r,i,o){"use strict";var a,s,l,u,c,d,h,f;function p(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function v(n,r,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(n,r,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(n,r,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.Compose=void 0;var m=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n).getLogger("templating-resources");e.Compose=(a=(0,i.customElement)("compose"),s=(0,t.inject)(o.DOM.Element,t.Container,i.CompositionEngine,i.ViewSlot,i.ViewResources,r.TaskQueue),a(l=(0,i.noView)(l=s((u=function(){function e(e,t,n,r,i,o){p(this,"model",c,this),p(this,"view",d,this),p(this,"viewModel",h,this),p(this,"swapOrder",f,this),this.element=e,this.container=t,this.compositionEngine=n,this.viewSlot=r,this.viewResources=i,this.taskQueue=o,this.currentController=null,this.currentViewModel=null,this.changes=Object.create(null)}return e.prototype.created=function(e){this.owningView=e},e.prototype.bind=function(e,t){this.bindingContext=e,this.overrideContext=t,this.changes.view=this.view,this.changes.viewModel=this.viewModel,this.changes.model=this.model,g(this)},e.prototype.unbind=function(){this.changes=Object.create(null),this.pendingTask=null,this.bindingContext=null;this.overrideContext=null;this.viewSlot.removeAll(!0,!0)},e.prototype.modelChanged=function(e,t){this.changes.model=e,y(this)},e.prototype.viewChanged=function(e,t){this.changes.view=e,y(this)},e.prototype.viewModelChanged=function(e,t){this.changes.viewModel=e,y(this)},e}(),c=v(u.prototype,"model",[i.bindable],{enumerable:!0,initializer:null}),d=v(u.prototype,"view",[i.bindable],{enumerable:!0,initializer:null}),h=v(u.prototype,"viewModel",[i.bindable],{enumerable:!0,initializer:null}),f=v(u.prototype,"swapOrder",[i.bindable],{enumerable:!0,initializer:null}),l=u))||l)||l)||l);function g(t){var e,n,r=t.changes;if(t.changes=Object.create(null),"view"in r||"viewModel"in r||!("model"in r)){var i={view:t.view,viewModel:t.currentViewModel||t.viewModel,model:t.model};i=Object.assign(i,r),e=t,n=i,i=Object.assign(n,{bindingContext:e.bindingContext,overrideContext:e.overrideContext,owningView:e.owningView,container:e.container,viewSlot:e.viewSlot,viewResources:e.viewResources,currentController:e.currentController,host:e.element,swapOrder:e.swapOrder}),t.pendingTask=t.compositionEngine.compose(i).then(function(e){t.currentController=e,t.currentViewModel=e?e.viewModel:null})}else if(t.pendingTask=function(e,t){if(e&&"function"==typeof e.activate)return Promise.resolve(e.activate(t))}(t.currentViewModel,r.model),!t.pendingTask)return;t.pendingTask=t.pendingTask.catch(function(e){m.error(e)}).then(function(){t.pendingTask&&(t.pendingTask=null,function(e){for(var t in e)return!1;return!0}(t.changes)||g(t))})}function y(e){e.pendingTask||e.updateRequested||(e.updateRequested=!0,e.taskQueue.queueMicroTask(function(){e.updateRequested=!1,g(e)}))}}),define("aurelia-templating-resources/binding-signaler",["exports","aurelia-binding"],function(e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingSignaler=void 0;e.BindingSignaler=function(){function e(){this.signals={}}return e.prototype.signal=function(e){var t=this.signals[e];if(t)for(var n=t.length;n--;)t[n].call(r.sourceContext)},e}()}),define("aurelia-templating-resources/binding-mode-behaviors",["exports","aurelia-binding","aurelia-metadata"],function(e,t,n){"use strict";var r,i,o;Object.defineProperty(e,"__esModule",{value:!0}),e.TwoWayBindingBehavior=e.OneWayBindingBehavior=e.OneTimeBindingBehavior=void 0;var a={bind:function(e,t,n){e.originalMode=e.mode,e.mode=this.mode},unbind:function(e,t){e.mode=e.originalMode,e.originalMode=null}};e.OneTimeBindingBehavior=(0,n.mixin)(a)(r=function(){this.mode=t.bindingMode.oneTime})||r,e.OneWayBindingBehavior=(0,n.mixin)(a)(i=function(){this.mode=t.bindingMode.oneWay})||i,e.TwoWayBindingBehavior=(0,n.mixin)(a)(o=function(){this.mode=t.bindingMode.twoWay})||o}),define("aurelia-templating-resources/aurelia-templating-resources",["exports","aurelia-pal","./compose","./if","./else","./with","./repeat","./show","./hide","./sanitize-html","./replaceable","./focus","aurelia-templating","./css-resource","./html-sanitizer","./attr-binding-behavior","./binding-mode-behaviors","./throttle-binding-behavior","./debounce-binding-behavior","./self-binding-behavior","./signal-binding-behavior","./binding-signaler","./update-trigger-binding-behavior","./abstract-repeater","./repeat-strategy-locator","./html-resource-plugin","./null-repeat-strategy","./array-repeat-strategy","./map-repeat-strategy","./set-repeat-strategy","./number-repeat-strategy","./repeat-utilities","./analyze-view-factory","./aurelia-hide-style"],function(e,r,t,n,i,o,a,s,l,u,c,d,h,f,p,v,m,g,y,b,w,x,_,k,S,T,C,O,E,M,P,A,R,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.viewsRequireLifecycle=e.unwrapExpression=e.updateOneTimeBinding=e.isOneTime=e.getItemsSourceExpression=e.updateOverrideContext=e.createFullOverrideContext=e.NumberRepeatStrategy=e.SetRepeatStrategy=e.MapRepeatStrategy=e.ArrayRepeatStrategy=e.NullRepeatStrategy=e.RepeatStrategyLocator=e.AbstractRepeater=e.UpdateTriggerBindingBehavior=e.BindingSignaler=e.SignalBindingBehavior=e.SelfBindingBehavior=e.DebounceBindingBehavior=e.ThrottleBindingBehavior=e.TwoWayBindingBehavior=e.OneWayBindingBehavior=e.OneTimeBindingBehavior=e.AttrBindingBehavior=e.configure=e.Focus=e.Replaceable=e.SanitizeHTMLValueConverter=e.HTMLSanitizer=e.Hide=e.Show=e.Repeat=e.With=e.Else=e.If=e.Compose=void 0,e.Compose=t.Compose,e.If=n.If,e.Else=i.Else,e.With=o.With,e.Repeat=a.Repeat,e.Show=s.Show,e.Hide=l.Hide,e.HTMLSanitizer=p.HTMLSanitizer,e.SanitizeHTMLValueConverter=u.SanitizeHTMLValueConverter,e.Replaceable=c.Replaceable,e.Focus=d.Focus,e.configure=function(e){(0,j.injectAureliaHideStyleAtHead)(),e.globalResources(r.PLATFORM.moduleName("./compose"),r.PLATFORM.moduleName("./if"),r.PLATFORM.moduleName("./else"),r.PLATFORM.moduleName("./with"),r.PLATFORM.moduleName("./repeat"),r.PLATFORM.moduleName("./show"),r.PLATFORM.moduleName("./hide"),r.PLATFORM.moduleName("./replaceable"),r.PLATFORM.moduleName("./sanitize-html"),r.PLATFORM.moduleName("./focus"),r.PLATFORM.moduleName("./binding-mode-behaviors"),r.PLATFORM.moduleName("./self-binding-behavior"),r.PLATFORM.moduleName("./throttle-binding-behavior"),r.PLATFORM.moduleName("./debounce-binding-behavior"),r.PLATFORM.moduleName("./signal-binding-behavior"),r.PLATFORM.moduleName("./update-trigger-binding-behavior"),r.PLATFORM.moduleName("./attr-binding-behavior")),(0,T.configure)(e);var t=e.container.get(h.ViewEngine),n={fetch:function(e){var t;return(t={})[e]=(0,f._createCSSResource)(e),t}};[".css",".less",".sass",".scss",".styl"].forEach(function(e){return t.addResourcePlugin(e,n)})},e.AttrBindingBehavior=v.AttrBindingBehavior,e.OneTimeBindingBehavior=m.OneTimeBindingBehavior,e.OneWayBindingBehavior=m.OneWayBindingBehavior,e.TwoWayBindingBehavior=m.TwoWayBindingBehavior,e.ThrottleBindingBehavior=g.ThrottleBindingBehavior,e.DebounceBindingBehavior=y.DebounceBindingBehavior,e.SelfBindingBehavior=b.SelfBindingBehavior,e.SignalBindingBehavior=w.SignalBindingBehavior,e.BindingSignaler=x.BindingSignaler,e.UpdateTriggerBindingBehavior=_.UpdateTriggerBindingBehavior,e.AbstractRepeater=k.AbstractRepeater,e.RepeatStrategyLocator=S.RepeatStrategyLocator,e.NullRepeatStrategy=C.NullRepeatStrategy,e.ArrayRepeatStrategy=O.ArrayRepeatStrategy,e.MapRepeatStrategy=E.MapRepeatStrategy,e.SetRepeatStrategy=M.SetRepeatStrategy,e.NumberRepeatStrategy=P.NumberRepeatStrategy,e.createFullOverrideContext=A.createFullOverrideContext,e.updateOverrideContext=A.updateOverrideContext,e.getItemsSourceExpression=A.getItemsSourceExpression,e.isOneTime=A.isOneTime,e.updateOneTimeBinding=A.updateOneTimeBinding,e.unwrapExpression=A.unwrapExpression,e.viewsRequireLifecycle=R.viewsRequireLifecycle}),define("aurelia-templating-resources",["aurelia-templating-resources/aurelia-templating-resources"],function(e){return e}),define("aurelia-templating-resources/aurelia-hide-style",["exports","aurelia-pal"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.aureliaHideClassName=void 0,e.injectAureliaHideStyleAtHead=function(){t.DOM.injectStyles(n)},e.injectAureliaHideStyleAtBoundary=function(e){t.FEATURE.shadowDOM&&e&&!e.hasAureliaHideStyle&&(e.hasAureliaHideStyle=!0,t.DOM.injectStyles(n,e))};var n="."+(e.aureliaHideClassName="aurelia-hide")+" { display:none !important; }"}),define("aurelia-templating-resources/attr-binding-behavior",["exports","aurelia-binding"],function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttrBindingBehavior=void 0;e.AttrBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,t){e.targetObserver=new n.DataAttributeObserver(e.target,e.targetProperty)},e.prototype.unbind=function(e,t){},e}()}),define("aurelia-templating-resources/array-repeat-strategy",["exports","./repeat-utilities","aurelia-binding"],function(e,m,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayRepeatStrategy=void 0;e.ArrayRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getArrayObserver(t)},e.prototype.instanceChanged=function(o,a){var s=this,l=a.length;if(a&&0!==l){var u=o.views(),e=u.length;if(0!==e)if(o.viewsRequireLifecycle){for(var t=u.slice(0),n=o.local,c=o.matcher(),d=[],r=[],i=0;i<e;i++){var h=t[i],f=h.bindingContext[n];-1===(0,m.indexOf)(a,f,c)?r.push(h):d.push(f)}var p=void 0,v=void 0;0<d.length?(v=o.removeViews(r,!0,!o.viewsRequireLifecycle),p=function(){for(var e=0;e<l;e++){var t=a[e],n=(0,m.indexOf)(d,t,c,e),r=void 0;if(-1===n){var i=(0,m.createFullOverrideContext)(o,a[e],e,l);o.insertView(e,i.bindingContext,i),d.splice(e,0,void 0)}else n===e?(r=u[n],d[n]=void 0):(r=u[n],o.moveView(n,e),d.splice(n,1),d.splice(e,0,void 0));r&&(0,m.updateOverrideContext)(r.overrideContext,e,l)}s._inPlaceProcessItems(o,a)}):(v=o.removeAllViews(!0,!o.viewsRequireLifecycle),p=function(){return s._standardProcessInstanceChanged(o,a)}),v instanceof Promise?v.then(p):p()}else this._inPlaceProcessItems(o,a);else this._standardProcessInstanceChanged(o,a)}else o.removeAllViews(!0,!o.viewsRequireLifecycle)},e.prototype._standardProcessInstanceChanged=function(e,t){for(var n=0,r=t.length;n<r;n++){var i=(0,m.createFullOverrideContext)(e,t[n],n,r);e.addView(i.bindingContext,i)}},e.prototype._inPlaceProcessItems=function(e,t){for(var n=t.length,r=e.viewCount();n<r;)r--,e.removeView(r,!0,!e.viewsRequireLifecycle);for(var i=e.local,o=0;o<r;o++){var a=e.view(o),s=o===n-1,l=0!==o&&!s;a.bindingContext[i]===t[o]&&a.overrideContext.$middle===l&&a.overrideContext.$last===s||(a.bindingContext[i]=t[o],a.overrideContext.$middle=l,a.overrideContext.$last=s,e.updateBindings(a))}for(var u=r;u<n;u++){var c=(0,m.createFullOverrideContext)(e,t[u],u,n);e.addView(c.bindingContext,c)}},e.prototype.instanceMutated=function(n,e,t){var r=this;if(n.__queuedSplices){for(var i=0,o=t.length;i<o;++i){var a=t[i],s=a.index,l=a.removed,u=a.addedCount;(0,h.mergeSplice)(n.__queuedSplices,s,l,u)}n.__array=e.slice(0)}else{var c=this._runSplices(n,e.slice(0),t);if(c instanceof Promise){var d=n.__queuedSplices=[];c.then(function e(){if(!d.length)return n.__queuedSplices=void 0,void(n.__array=void 0);var t=r._runSplices(n,n.__array,d)||Promise.resolve();d=n.__queuedSplices=[],t.then(e)})}}},e.prototype._runSplices=function(t,n,r){for(var i=this,e=0,o=[],a=0,s=r.length;a<s;++a){for(var l=r[a],u=0,c=l.removed.length;u<c;++u){var d=t.removeView(l.index+e+o.length,!0);d instanceof Promise&&o.push(d)}e-=l.addedCount}if(0<o.length)return Promise.all(o).then(function(){var e=i._handleAddedSplices(t,n,r);(0,m.updateOverrideContexts)(t.views(),e)});var h=this._handleAddedSplices(t,n,r);(0,m.updateOverrideContexts)(t.views(),h)},e.prototype._handleAddedSplices=function(e,t,n){for(var r=void 0,i=void 0,o=t.length,a=0,s=n.length;a<s;++a){var l=n[a],u=r=l.index,c=l.index+l.addedCount;for((null==i||i>l.index)&&(i=r);u<c;++u){var d=(0,m.createFullOverrideContext)(e,t[u],u,o);e.insertView(u,d.bindingContext,d)}}return i},e}()}),define("aurelia-templating-resources/analyze-view-factory",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.viewsRequireLifecycle=s;var a=e.lifecycleOptionalBehaviors=["focus","if","else","repeat","show","hide","with"];function n(e){var t,n,r,i=e.behaviorInstructions;if(i)for(var o=i.length;o--;)if(t=i[o],void 0,n=t.type,r=null!==n.elementName?n.elementName:n.attributeName,-1===a.indexOf(r)&&(n.handlesAttached||n.handlesBind||n.handlesCreated||n.handlesDetached||n.handlesUnbind)||n.viewFactory&&s(n.viewFactory)||t.viewFactory&&s(t.viewFactory))return!0;return e.viewFactory&&s(e.viewFactory)}function s(e){if("_viewsRequireLifecycle"in e)return e._viewsRequireLifecycle;if(e._viewsRequireLifecycle=!1,e.viewFactory)return e._viewsRequireLifecycle=s(e.viewFactory),e._viewsRequireLifecycle;if(e.template.querySelector(".au-animate"))return e._viewsRequireLifecycle=!0;for(var t in e.instructions)if(n(e.instructions[t]))return e._viewsRequireLifecycle=!0;return e._viewsRequireLifecycle=!1}}),define("aurelia-templating-resources/abstract-repeater",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.AbstractRepeater=function(){function e(e){Object.assign(this,{local:"items",viewsRequireLifecycle:!0},e)}return e.prototype.viewCount=function(){throw new Error("subclass must implement `viewCount`")},e.prototype.views=function(){throw new Error("subclass must implement `views`")},e.prototype.view=function(e){throw new Error("subclass must implement `view`")},e.prototype.matcher=function(){throw new Error("subclass must implement `matcher`")},e.prototype.addView=function(e,t){throw new Error("subclass must implement `addView`")},e.prototype.insertView=function(e,t,n){throw new Error("subclass must implement `insertView`")},e.prototype.moveView=function(e,t){throw new Error("subclass must implement `moveView`")},e.prototype.removeAllViews=function(e,t){throw new Error("subclass must implement `removeAllViews`")},e.prototype.removeViews=function(e,t,n){throw new Error("subclass must implement `removeView`")},e.prototype.removeView=function(e,t,n){throw new Error("subclass must implement `removeView`")},e.prototype.updateBindings=function(e){throw new Error("subclass must implement `updateBindings`")},e}()}),define("aurelia-templating-binding",["exports","aurelia-logging","aurelia-binding","aurelia-templating"],function(e,t,u,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TemplatingBindingLanguage=e.SyntaxInterpreter=e.ChildInterpolationBinding=e.InterpolationBinding=e.InterpolationBindingExpression=e.AttributeMap=void 0,e.configure=function(e){e.container.registerSingleton(m.BindingLanguage,b),e.container.registerAlias(m.BindingLanguage,b)};var n,r,i,o,a,s,l,c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(t);var d=e.AttributeMap=(r=n=function(){function e(e){this.elements=Object.create(null),this.allElements=Object.create(null),this.svg=e,this.registerUniversal("accesskey","accessKey"),this.registerUniversal("contenteditable","contentEditable"),this.registerUniversal("tabindex","tabIndex"),this.registerUniversal("textcontent","textContent"),this.registerUniversal("innerhtml","innerHTML"),this.registerUniversal("scrolltop","scrollTop"),this.registerUniversal("scrollleft","scrollLeft"),this.registerUniversal("readonly","readOnly"),this.register("label","for","htmlFor"),this.register("img","usemap","useMap"),this.register("input","maxlength","maxLength"),this.register("input","minlength","minLength"),this.register("input","formaction","formAction"),this.register("input","formenctype","formEncType"),this.register("input","formmethod","formMethod"),this.register("input","formnovalidate","formNoValidate"),this.register("input","formtarget","formTarget"),this.register("textarea","maxlength","maxLength"),this.register("td","rowspan","rowSpan"),this.register("td","colspan","colSpan"),this.register("th","rowspan","rowSpan"),this.register("th","colspan","colSpan")}return e.prototype.register=function(e,t,n){e=e.toLowerCase(),t=t.toLowerCase(),(this.elements[e]=this.elements[e]||Object.create(null))[t]=n},e.prototype.registerUniversal=function(e,t){e=e.toLowerCase(),this.allElements[e]=t},e.prototype.map=function(e,t){if(this.svg.isStandardSvgAttribute(e,t))return t;e=e.toLowerCase(),t=t.toLowerCase();var n=this.elements[e];return void 0!==n&&t in n?n[t]:t in this.allElements?this.allElements[t]:/(?:^data-)|(?:^aria-)|:/.test(t)?t:(0,u.camelCase)(t)},e}(),n.inject=[u.SVGAnalyzer],r),h=e.InterpolationBindingExpression=function(){function e(e,t,n,r,i,o){this.observerLocator=e,this.targetProperty=t,this.parts=n,this.mode=r,this.lookupFunctions=i,this.attribute=this.attrToRemove=o,this.discrete=!1}return e.prototype.createBinding=function(e){return 3===this.parts.length?new v(e,this.observerLocator,this.parts[1],this.mode,this.lookupFunctions,this.targetProperty,this.parts[0],this.parts[2]):new p(this.observerLocator,this.parts,e,this.targetProperty,this.mode,this.lookupFunctions)},e}();function f(e,t){if("style"===t)c.getLogger("templating-binding").info('Internet Explorer does not support interpolation in "style" attributes.  Use the style attribute\'s alias, "css" instead.');else if(e.parentElement&&"TEXTAREA"===e.parentElement.nodeName&&"textContent"===t)throw new Error('Interpolation binding cannot be used in the content of a textarea element.  Use <textarea value.bind="expression"></textarea> instead.')}var p=e.InterpolationBinding=function(){function e(e,t,n,r,i,o){f(n,r),this.observerLocator=e,this.parts=t,this.target=n,this.targetProperty=r,this.targetAccessor=e.getAccessor(n,r),this.mode=i,this.lookupFunctions=o}return e.prototype.interpolate=function(){if(this.isBound){for(var e="",t=this.parts,n=0,r=t.length;n<r;n++)e+=n%2==0?t[n]:this["childBinding"+n].value;this.targetAccessor.setValue(e,this.target,this.targetProperty)}},e.prototype.updateOneTimeBindings=function(){for(var e=1,t=this.parts.length;e<t;e+=2){var n=this["childBinding"+e];n.mode===u.bindingMode.oneTime&&n.call()}},e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.source=e;for(var t=this.parts,n=1,r=t.length;n<r;n+=2){var i=new v(this,this.observerLocator,t[n],this.mode,this.lookupFunctions);i.bind(e),this["childBinding"+n]=i}this.isBound=!0,this.interpolate()},e.prototype.unbind=function(){if(this.isBound){this.isBound=!1,this.source=null;for(var e=1,t=this.parts.length;e<t;e+=2){this["childBinding"+e].unbind()}}},e}(),v=e.ChildInterpolationBinding=(0,u.connectable)()(i=function(){function e(e,t,n,r,i,o,a,s){e instanceof p?this.parent=e:(f(e,o),this.target=e,this.targetProperty=o,this.targetAccessor=t.getAccessor(e,o)),this.observerLocator=t,this.sourceExpression=n,this.mode=r,this.lookupFunctions=i,this.left=a,this.right=s}return e.prototype.updateTarget=function(e){(e=null==e?"":e.toString())!==this.value&&(this.value=e,this.parent?this.parent.interpolate():this.targetAccessor.setValue(this.left+e+this.right,this.target,this.targetProperty))},e.prototype.call=function(){this.isBound&&(this.rawValue=this.sourceExpression.evaluate(this.source,this.lookupFunctions),this.updateTarget(this.rawValue),this.mode!==u.bindingMode.oneTime&&(this._version++,this.sourceExpression.connect(this,this.source),this.rawValue instanceof Array&&this.observeArray(this.rawValue),this.unobserve(!1)))},e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e;var t=this.sourceExpression;t.bind&&t.bind(this,e,this.lookupFunctions),this.rawValue=t.evaluate(e,this.lookupFunctions),this.updateTarget(this.rawValue),this.mode===u.bindingMode.oneWay&&(0,u.enqueueBindingConnect)(this)},e.prototype.unbind=function(){if(this.isBound){this.isBound=!1;var e=this.sourceExpression;e.unbind&&e.unbind(this,this.source),this.source=null,this.value=null,this.rawValue=null,this.unobserve(!0)}},e.prototype.connect=function(e){this.isBound&&(e&&(this.rawValue=this.sourceExpression.evaluate(this.source,this.lookupFunctions),this.updateTarget(this.rawValue)),this.sourceExpression.connect(this,this.source),this.rawValue instanceof Array&&this.observeArray(this.rawValue))},e}())||i,g=e.SyntaxInterpreter=(a=o=function(){function e(e,t,n,r){this.parser=e,this.observerLocator=t,this.eventManager=n,this.attributeMap=r}return e.prototype.interpret=function(e,t,n,r,i){return n.command in this?this[n.command](e,t,n,r,i):this.handleUnknownCommand(e,t,n,r,i)},e.prototype.handleUnknownCommand=function(e,t,n,r,i){return c.getLogger("templating-binding").warn("Unknown binding command.",n),r},e.prototype.determineDefaultBindingMode=function(e,t,n){var r=e.tagName.toLowerCase();return"input"===r&&("value"===t||"files"===t)&&"checkbox"!==e.type&&"radio"!==e.type||"input"===r&&"checked"===t&&("checkbox"===e.type||"radio"===e.type)||("textarea"===r||"select"===r)&&"value"===t||("textcontent"===t||"innerhtml"===t)&&"true"===e.contentEditable||"scrolltop"===t||"scrollleft"===t?u.bindingMode.twoWay:n&&t in n.attributes&&n.attributes[t]&&n.attributes[t].defaultBindingMode>=u.bindingMode.oneTime?n.attributes[t].defaultBindingMode:u.bindingMode.oneWay},e.prototype.bind=function(e,t,n,r,i){var o=r||m.BehaviorInstruction.attribute(n.attrName);return o.attributes[n.attrName]=new u.BindingExpression(this.observerLocator,this.attributeMap.map(t.tagName,n.attrName),this.parser.parse(n.attrValue),void 0===n.defaultBindingMode||null===n.defaultBindingMode?this.determineDefaultBindingMode(t,n.attrName,i):n.defaultBindingMode,e.lookupFunctions),o},e.prototype.trigger=function(e,t,n){return new u.ListenerExpression(this.eventManager,n.attrName,this.parser.parse(n.attrValue),u.delegationStrategy.none,!0,e.lookupFunctions)},e.prototype.capture=function(e,t,n){return new u.ListenerExpression(this.eventManager,n.attrName,this.parser.parse(n.attrValue),u.delegationStrategy.capturing,!0,e.lookupFunctions)},e.prototype.delegate=function(e,t,n){return new u.ListenerExpression(this.eventManager,n.attrName,this.parser.parse(n.attrValue),u.delegationStrategy.bubbling,!0,e.lookupFunctions)},e.prototype.call=function(e,t,n,r){var i=r||m.BehaviorInstruction.attribute(n.attrName);return i.attributes[n.attrName]=new u.CallExpression(this.observerLocator,n.attrName,this.parser.parse(n.attrValue),e.lookupFunctions),i},e.prototype.options=function(e,t,n,r,i){var o,a=r||m.BehaviorInstruction.attribute(n.attrName),s=n.attrValue,l=this.language,u=null,c="",d=void 0,h=void 0,f=!1,p=!1,v=!1;for(h=0,o=s.length;h<o;++h){if(";"!==(d=s[h])||f)if(":"===d&&null===u)v=!0,u=c.trim(),c="";else{if("\\"===d){c+=d,p=!0;continue}c+=d,null!==u&&!1===p&&"'"===d&&(f=!f)}else v||(u=this._getPrimaryPropertyName(e,i)),n=l.inspectAttribute(e,"?",u,c.trim()),l.createAttributeInstruction(e,t,n,a,i),a.attributes[n.attrName]||(a.attributes[n.attrName]=n.attrValue),c="",u=null;p=!1}return v||(u=this._getPrimaryPropertyName(e,i)),null!==u&&(n=l.inspectAttribute(e,"?",u,c.trim()),l.createAttributeInstruction(e,t,n,a,i),a.attributes[n.attrName]||(a.attributes[n.attrName]=n.attrValue)),a},e.prototype._getPrimaryPropertyName=function(e,t){var n=e.getAttribute(t.attributeName);return n&&n.primaryProperty?n.primaryProperty.attribute:null},e.prototype.for=function(e,t,n,r){var i,o=void 0,a=void 0,s=void 0,l=void 0;if(2!==(o=(i=(l=n.attrValue).match(/^ *[[].+[\]]/))?l.split("of "):l.split(" of ")).length)throw new Error('Incorrect syntax for "for". The form is: "$local of $items" or "[$key, $value] of $items".');return s=r||m.BehaviorInstruction.attribute(n.attrName),i?(a=o[0].replace(/[[\]]/g,"").replace(/,/g," ").replace(/\s+/g," ").trim().split(" "),s.attributes.key=a[0],s.attributes.value=a[1]):s.attributes.local=o[0],s.attributes.items=new u.BindingExpression(this.observerLocator,"items",this.parser.parse(o[1]),u.bindingMode.oneWay,e.lookupFunctions),s},e.prototype["two-way"]=function(e,t,n,r){var i=r||m.BehaviorInstruction.attribute(n.attrName);return i.attributes[n.attrName]=new u.BindingExpression(this.observerLocator,this.attributeMap.map(t.tagName,n.attrName),this.parser.parse(n.attrValue),u.bindingMode.twoWay,e.lookupFunctions),i},e.prototype["to-view"]=function(e,t,n,r){var i=r||m.BehaviorInstruction.attribute(n.attrName);return i.attributes[n.attrName]=new u.BindingExpression(this.observerLocator,this.attributeMap.map(t.tagName,n.attrName),this.parser.parse(n.attrValue),u.bindingMode.toView,e.lookupFunctions),i},e.prototype["from-view"]=function(e,t,n,r){var i=r||m.BehaviorInstruction.attribute(n.attrName);return i.attributes[n.attrName]=new u.BindingExpression(this.observerLocator,this.attributeMap.map(t.tagName,n.attrName),this.parser.parse(n.attrValue),u.bindingMode.fromView,e.lookupFunctions),i},e.prototype["one-time"]=function(e,t,n,r){var i=r||m.BehaviorInstruction.attribute(n.attrName);return i.attributes[n.attrName]=new u.BindingExpression(this.observerLocator,this.attributeMap.map(t.tagName,n.attrName),this.parser.parse(n.attrValue),u.bindingMode.oneTime,e.lookupFunctions),i},e}(),o.inject=[u.Parser,u.ObserverLocator,u.EventManager,d],a);g.prototype["one-way"]=g.prototype["to-view"];var y={},b=e.TemplatingBindingLanguage=(l=s=function(o){function e(e,t,n,r){var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this));return i.parser=e,i.observerLocator=t,i.syntaxInterpreter=n,i.emptyStringExpression=i.parser.parse("''"),(n.language=i).attributeMap=r,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,o),e.prototype.inspectAttribute=function(e,t,n,r){var i=n.split(".");if(y.defaultBindingMode=null,2===i.length)y.attrName=i[0].trim(),y.attrValue=r,y.command=i[1].trim(),"ref"===y.command?(y.expression=new u.NameExpression(this.parser.parse(r),y.attrName,e.lookupFunctions),y.command=null,y.attrName="ref"):y.expression=null;else if("ref"===n)y.attrName=n,y.attrValue=r,y.command=null,y.expression=new u.NameExpression(this.parser.parse(r),"element",e.lookupFunctions);else{y.attrName=n,y.attrValue=r,y.command=null;var o=this.parseInterpolation(e,r);y.expression=null===o?null:new h(this.observerLocator,this.attributeMap.map(t,n),o,u.bindingMode.oneWay,e.lookupFunctions,n)}return y},e.prototype.createAttributeInstruction=function(e,t,n,r,i){var o=void 0;if(n.expression){if("ref"===n.attrName)return n.expression;(o=r||m.BehaviorInstruction.attribute(n.attrName)).attributes[n.attrName]=n.expression}else n.command&&(o=this.syntaxInterpreter.interpret(e,t,n,r,i));return o},e.prototype.inspectTextContent=function(e,t){var n=this.parseInterpolation(e,t);return null===n?null:new h(this.observerLocator,"textContent",n,u.bindingMode.oneWay,e.lookupFunctions,"textContent")},e.prototype.parseInterpolation=function(e,t){for(var n=t.indexOf("${",0),r=t.length,i=void 0,o=0,a=0,s=null,l=void 0,u=void 0,c=0;0<=n&&n<r-2;){for(a=1,l=n,n+=2;i=t[n],n++,"'"!==i&&'"'!==i?"\\"!==i?null===s&&("{"===i?a++:"}"===i&&a--):n++:null===s?s=i:s===i&&(s=null),0<a&&n<r;);if(0!==a)break;u=u||[],"\\"===t[l-1]&&"\\"!==t[l-2]?(u[c]=t.substring(o,l-1)+t.substring(l,n),u[++c]=this.emptyStringExpression):(u[c]=t.substring(o,l),u[++c]=this.parser.parse(t.substring(l+2,n-1))),c++,o=n,n=t.indexOf("${",n)}return 0===c?null:(u[c]=t.substr(o),u)},e}(m.BindingLanguage),s.inject=[u.Parser,u.ObserverLocator,g,d],l)}),define("aurelia-task-queue",["exports","aurelia-pal"],function(e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskQueue=void 0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u="function"==typeof setImmediate;function a(r){return function(){var e=setTimeout(n,0),t=setInterval(n,50);function n(){clearTimeout(e),clearInterval(t),r()}}}e.TaskQueue=function(){function e(){var e,t,n,r,i=this;this.flushing=!1,this.longStacks=!1,this.microTaskQueue=[],this.microTaskQueueCapacity=1024,this.taskQueue=[],o.FEATURE.mutationObserver?this.requestFlushMicroTaskQueue=(e=function(){return i.flushMicroTaskQueue()},t=1,n=o.DOM.createMutationObserver(e),r=o.DOM.createTextNode(""),n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}):this.requestFlushMicroTaskQueue=a(function(){return i.flushMicroTaskQueue()}),this.requestFlushTaskQueue=a(function(){return i.flushTaskQueue()})}return e.prototype._flushQueue=function(e,t){var n,r,i=0,o=void 0;try{for(this.flushing=!0;i<e.length;)if(o=e[i],this.longStacks&&(this.stack="string"==typeof o.stack?o.stack:void 0),o.call(),t<++i){for(var a=0,s=e.length-i;a<s;a++)e[a]=e[a+i];e.length-=i,i=0}}catch(e){n=e,r=o,this.longStacks&&r.stack&&"object"===(void 0===n?"undefined":l(n))&&null!==n&&(n.stack=c(n.stack)+r.stack),"onError"in r?r.onError(n):u?setImmediate(function(){throw n}):setTimeout(function(){throw n},0)}finally{this.flushing=!1}},e.prototype.queueMicroTask=function(e){this.microTaskQueue.length<1&&this.requestFlushMicroTaskQueue(),this.longStacks&&(e.stack=this.prepareQueueStack("\nEnqueued in MicroTaskQueue by:\n")),this.microTaskQueue.push(e)},e.prototype.queueTask=function(e){this.taskQueue.length<1&&this.requestFlushTaskQueue(),this.longStacks&&(e.stack=this.prepareQueueStack("\nEnqueued in TaskQueue by:\n")),this.taskQueue.push(e)},e.prototype.flushTaskQueue=function(){var e=this.taskQueue;this.taskQueue=[],this._flushQueue(e,Number.MAX_VALUE)},e.prototype.flushMicroTaskQueue=function(){var e=this.microTaskQueue;this._flushQueue(e,this.microTaskQueueCapacity),e.length=0},e.prototype.prepareQueueStack=function(e){var t=e+function(){var e=new Error;if(e.stack)return e.stack;try{throw e}catch(e){return e.stack}}().replace(/^[\s\S]*?\bqueue(Micro)?Task\b[^\n]*\n/,"");return"string"==typeof this.stack&&(t=c(t)+this.stack),t},e}();function c(e){var t=e.lastIndexOf("flushMicroTaskQueue");return t<0&&(t=e.lastIndexOf("flushTaskQueue"))<0?e:(t=e.lastIndexOf("\n",t))<0?e:e.substr(0,t)}}),define("aurelia-router",["exports","aurelia-logging","aurelia-route-recognizer","aurelia-dependency-injection","aurelia-history","aurelia-event-aggregator"],function(e,t,r,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AppRouter=e.PipelineProvider=e.LoadRouteStep=e.RouteLoader=e.ActivateNextStep=e.DeactivatePreviousStep=e.CanActivateNextStep=e.CanDeactivatePreviousStep=e.Router=e.BuildNavigationPlanStep=e.activationStrategy=e.RouterConfiguration=e.RedirectToRoute=e.Redirect=e.NavModel=e.NavigationInstruction=e.CommitChangesStep=e.Pipeline=e.pipelineStatus=void 0,e._normalizeAbsolutePath=u,e._createRootedPath=c,e._resolveUrl=v,e.isNavigationCommand=w,e._buildNavigationPlan=T;var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(t);var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function u(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return t||"#"===e[0]||(e="#"+e),t&&n&&(e=e.substring(1,e.length)),e}function c(e,t,n,r){if(h.test(e))return e;var i="";return t.length&&"/"!==t[0]&&(i+="/"),(i+=t).length&&"/"===i[i.length-1]||"/"===e[0]||(i+="/"),i.length&&"/"===i[i.length-1]&&"/"===e[0]&&(i=i.substring(0,i.length-1)),u(i+e,n,r)}function v(e,t,n){return d.test(e)?u(e,n):c(e,t,n)}var d=/^#?\//,h=/^([a-z][a-z0-9+\-.]*:)?\/\//i,f=e.pipelineStatus={completed:"completed",canceled:"canceled",rejected:"rejected",running:"running"},p=e.Pipeline=function(){function e(){this.steps=[]}return e.prototype.addStep=function(e){var t=void 0;if("function"==typeof e)t=e;else{if("function"==typeof e.getSteps){for(var n=e.getSteps(),r=0,i=n.length;r<i;r++)this.addStep(n[r]);return this}t=e.run.bind(e)}return this.steps.push(t),this},e.prototype.run=function(t){var n=-1,r=this.steps;function i(){if(!(++n<r.length))return i.complete();var e=r[n];try{return e(t,i)}catch(e){return i.reject(e)}}return i.complete=m(i,f.completed),i.cancel=m(i,f.canceled),i.reject=m(i,f.rejected),i()},e}();function m(e,t){return function(e){return Promise.resolve({status:t,output:e,completed:t===f.completed})}}var g=e.CommitChangesStep=function(){function e(){}return e.prototype.run=function(e,t){return e._commitChanges(!0).then(function(){return e._updateTitle(),t()})},e}(),y=e.NavigationInstruction=function(){function e(e){this.plan=null,this.options={},Object.assign(this,e),this.params=this.params||{},this.viewPortInstructions={};var t=[],n=this;do{var r=Object.assign({},n.params);n.config&&n.config.hasChildRouter&&delete r[n.getWildCardName()],t.unshift(r),n=n.parentInstruction}while(n);var i=Object.assign.apply(Object,[{},this.queryParams].concat(t));this.lifecycleArgs=[i,this.config,this]}return e.prototype.getAllInstructions=function(){var e=[this];for(var t in this.viewPortInstructions){var n=this.viewPortInstructions[t].childNavigationInstruction;n&&e.push.apply(e,n.getAllInstructions())}return e},e.prototype.getAllPreviousInstructions=function(){return this.getAllInstructions().map(function(e){return e.previousInstruction}).filter(function(e){return e})},e.prototype.addViewPortInstruction=function(e,t,n,r){var i=Object.assign({},this.lifecycleArgs[1],{currentViewPort:e});return this.viewPortInstructions[e]={name:e,strategy:t,moduleId:n,component:r,childRouter:r.childRouter,lifecycleArgs:[].concat(this.lifecycleArgs[0],i,this.lifecycleArgs[2])}},e.prototype.getWildCardName=function(){var e=this.config.route.lastIndexOf("*");return this.config.route.substr(e+1)},e.prototype.getWildcardPath=function(){var e=this.getWildCardName(),t=this.params[e]||"";return this.queryString&&(t+="?"+this.queryString),t},e.prototype.getBaseUrl=function(){var t=this,e=decodeURI(this.fragment);if(""===e){var n=this.router.routes.find(function(e){return e.name===t.config.name&&""!==e.route});n&&(e=n.route)}if(!this.params)return encodeURI(e);var r=this.getWildCardName(),i=this.params[r]||"";return i?encodeURI(e.substr(0,e.lastIndexOf(i))):encodeURI(e)},e.prototype._commitChanges=function(r){var i=this,o=this.router;(o.currentInstruction=this).previousInstruction&&(this.previousInstruction.config.navModel.isActive=!1),this.config.navModel.isActive=!0,o._refreshBaseUrl(),o.refreshNavigation();var a=[],s=[],e=function(e){var t=i.viewPortInstructions[e],n=o.viewPorts[e];if(!n)throw new Error("There was no router-view found in the view for "+t.moduleId+".");t.strategy===k.replace?t.childNavigationInstruction&&t.childNavigationInstruction.parentCatchHandler?a.push(t.childNavigationInstruction._commitChanges(r)):(r&&s.push({viewPort:n,viewPortInstruction:t}),a.push(n.process(t,r).then(function(e){if(t.childNavigationInstruction)return t.childNavigationInstruction._commitChanges(r)}))):t.childNavigationInstruction&&a.push(t.childNavigationInstruction._commitChanges(r))};for(var t in this.viewPortInstructions)e(t);return Promise.all(a).then(function(){return s.forEach(function(e){return e.viewPort.swap(e.viewPortInstruction)}),null}).then(function(){return(e=i).previousInstruction=null,void(e.plan=null);var e})},e.prototype._updateTitle=function(){var e=this._buildTitle();e&&this.router.history.setTitle(e)},e.prototype._buildTitle=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:" | ",t="",n=[];for(var r in this.config.navModel.title&&(t=this.router.transformTitle(this.config.navModel.title)),this.viewPortInstructions){var i=this.viewPortInstructions[r];if(i.childNavigationInstruction){var o=i.childNavigationInstruction._buildTitle(e);o&&n.push(o)}}return n.length&&(t=n.join(e)+(t?e:"")+t),this.router.title&&(t+=(t?e:"")+this.router.transformTitle(this.router.title)),t},e}();var b=e.NavModel=function(){function e(e,t){this.isActive=!1,this.title=null,this.href=null,this.relativeHref=null,this.settings={},this.config=null,this.router=e,this.relativeHref=t}return e.prototype.setTitle=function(e){this.title=e,this.isActive&&this.router.updateTitle()},e}();function w(e){return e&&"function"==typeof e.navigate}var x=e.Redirect=function(){function e(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.options=Object.assign({trigger:!0,replace:!0},t),this.shouldContinueProcessing=!1}return e.prototype.setRouter=function(e){this.router=e},e.prototype.navigate=function(e){(this.options.useAppRouter?e:this.router||e).navigate(this.url,this.options)},e}(),_=(e.RedirectToRoute=function(){function e(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.route=e,this.params=t,this.options=Object.assign({trigger:!0,replace:!0},n),this.shouldContinueProcessing=!1}return e.prototype.setRouter=function(e){this.router=e},e.prototype.navigate=function(e){(this.options.useAppRouter?e:this.router||e).navigateToRoute(this.route,this.params,this.options)},e}(),e.RouterConfiguration=function(){function e(){this.instructions=[],this.options={},this.pipelineSteps=[]}return e.prototype.addPipelineStep=function(e,t){return this.pipelineSteps.push({name:e,step:t}),this},e.prototype.addAuthorizeStep=function(e){return this.addPipelineStep("authorize",e)},e.prototype.addPreActivateStep=function(e){return this.addPipelineStep("preActivate",e)},e.prototype.addPreRenderStep=function(e){return this.addPipelineStep("preRender",e)},e.prototype.addPostRenderStep=function(e){return this.addPipelineStep("postRender",e)},e.prototype.fallbackRoute=function(e){return this._fallbackRoute=e,this},e.prototype.map=function(e){return Array.isArray(e)?(e.forEach(this.map.bind(this)),this):this.mapRoute(e)},e.prototype.useViewPortDefaults=function(e){return this.viewPortDefaults=e,this},e.prototype.mapRoute=function(u){return this.instructions.push(function(e){var t=[];if(Array.isArray(u.route))for(var n=0,r=u.route.length;n<r;++n){var i=Object.assign({},u);i.route=u.route[n],t.push(i)}else t.push(Object.assign({},u));for(var o=void 0,a=0,s=t.length;a<s;++a){var l=t[a];l.settings=l.settings||{},o||(o=e.createNavModel(l)),e.addRoute(l,o)}}),this},e.prototype.mapUnknownRoutes=function(e){return this.unknownRouteConfig=e,this},e.prototype.exportToRouter=function(e){for(var t=this.instructions,n=0,r=t.length;n<r;++n)t[n](e);this.title&&(e.title=this.title),this.unknownRouteConfig&&e.handleUnknownRoutes(this.unknownRouteConfig),this._fallbackRoute&&(e.fallbackRoute=this._fallbackRoute),this.viewPortDefaults&&e.useViewPortDefaults(this.viewPortDefaults),e.options=this.options;var i=this.pipelineSteps;if(i.length){if(!e.isRoot)throw new Error("Pipeline steps can only be added to the root router");for(var o=e.pipelineProvider,a=0,s=i.length;a<s;++a){var l=i[a],u=l.name,c=l.step;o.addStep(u,c)}}},e}()),k=e.activationStrategy={noChange:"no-change",invokeLifecycle:"invoke-lifecycle",replace:"replace"},S=e.BuildNavigationPlanStep=function(){function e(){}return e.prototype.run=function(t,n){return T(t).then(function(e){return t.plan=e,n()}).catch(n.cancel)},e}();function T(s,l){var u=s.config;if("redirect"in u){var e=v(u.redirect,function(e){var t=[];e=e.parentInstruction;for(;e;)t.unshift(e.getBaseUrl()),e=e.parentInstruction;return t.unshift("/"),t.join("")}(s));return s.queryString&&(e+="?"+s.queryString),Promise.reject(new x(e))}var c=s.previousInstruction,d={},h=s.router.viewPortDefaults;if(c){var f=function(e,t){var n=e.params,r=t.params,i=t.config.hasChildRouter?t.getWildCardName():null;for(var o in r)if(o!==i&&n[o]!==r[o])return!0;for(var a in n)if(a!==i&&n[a]!==r[a])return!0;if(!t.options.compareQueryParams)return!1;var s=e.queryParams,l=t.queryParams;for(var u in l)if(s[u]!==l[u])return!0;for(var c in s)if(s[c]!==l[c])return!0;return!1}(c,s),p=[],t=function(e){var t=c.viewPortInstructions[e],n=e in u.viewPorts?u.viewPorts[e]:t;null===n.moduleId&&e in s.router.viewPortDefaults&&(n=h[e]);var r=d[e]={name:e,config:n,prevComponent:t.component,prevModuleId:t.moduleId};if(t.moduleId!==n.moduleId)r.strategy=k.replace;else if("determineActivationStrategy"in t.component.viewModel){var i;r.strategy=(i=t.component.viewModel).determineActivationStrategy.apply(i,s.lifecycleArgs)}else u.activationStrategy?r.strategy=u.activationStrategy:r.strategy=f||l?k.invokeLifecycle:k.noChange;if(r.strategy!==k.replace&&t.childRouter){var o=s.getWildcardPath(),a=t.childRouter._createNavigationInstruction(o,s).then(function(t){return T(r.childNavigationInstruction=t,r.strategy===k.invokeLifecycle).then(function(e){t.plan=e})});p.push(a)}};for(var n in c.viewPortInstructions)t(n);return Promise.all(p).then(function(){return d})}for(var n in u.viewPorts){var r=u.viewPorts[n];null===r.moduleId&&n in s.router.viewPortDefaults&&(r=h[n]),d[n]={name:n,strategy:k.replace,config:r}}return Promise.resolve(d)}var C=e.Router=function(){function n(e,t){var n=this;this.parent=null,this.options={},this.viewPortDefaults={},this.transformTitle=function(e){return n.parent?n.parent.transformTitle(e):e},this.container=e,this.history=t,this.reset()}return n.prototype.reset=function(){var t=this;this.viewPorts={},this.routes=[],this.baseUrl="",this.isConfigured=!1,this.isNavigating=!1,this.isExplicitNavigation=!1,this.isExplicitNavigationBack=!1,this.isNavigatingFirst=!1,this.isNavigatingNew=!1,this.isNavigatingRefresh=!1,this.isNavigatingForward=!1,this.isNavigatingBack=!1,this.navigation=[],this.currentInstruction=null,this.viewPortDefaults={},this._fallbackOrder=100,this._recognizer=new r.RouteRecognizer,this._childRecognizer=new r.RouteRecognizer,this._configuredPromise=new Promise(function(e){t._resolveConfiguredPromise=e})},n.prototype.registerViewPort=function(e,t){t=t||"default",this.viewPorts[t]=e},n.prototype.ensureConfigured=function(){return this._configuredPromise},n.prototype.configure=function(e){var t=this;this.isConfigured=!0;var n=e,r=void 0;return"function"==typeof e&&(n=e(r=new _)),Promise.resolve(n).then(function(e){e&&e.exportToRouter&&(r=e),r.exportToRouter(t),t.isConfigured=!0,t._resolveConfiguredPromise()})},n.prototype.navigate=function(e,t){return!this.isConfigured&&this.parent?this.parent.navigate(e,t):(this.isExplicitNavigation=!0,this.history.navigate(v(e,this.baseUrl,this.history._hasPushState),t))},n.prototype.navigateToRoute=function(e,t,n){var r=this.generate(e,t);return this.navigate(r,n)},n.prototype.navigateBack=function(){this.isExplicitNavigationBack=!0,this.history.navigateBack()},n.prototype.createChild=function(e){var t=new n(e||this.container.createChild(),this.history);return t.parent=this,t},n.prototype.generate=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=this._recognizer.hasRoute(e);if((!this.isConfigured||!r)&&this.parent)return this.parent.generate(e,t);if(!r)throw new Error("A route with name '"+e+"' could not be found. Check that `name: '"+e+"'` was specified in the route's config.");var i=c(this._recognizer.generate(e,t),this.baseUrl,this.history._hasPushState,n.absolute);return n.absolute?""+this.history.getAbsoluteRoot()+i:i},n.prototype.createNavModel=function(e){var t=new b(this,"href"in e?e.href:e.route);return t.title=e.title,t.order=e.nav,t.href=e.href,t.settings=e.settings,t.config=e,t},n.prototype.addRoute=function(e,t){O(e,this.routes),"viewPorts"in e||e.navigationStrategy||(e.viewPorts={default:{moduleId:e.moduleId,view:e.view}}),t||(t=this.createNavModel(e)),this.routes.push(e);var n=e.route;"/"===n.charAt(0)&&(n=n.substr(1));var r=!0===e.caseSensitive,i=this._recognizer.add({path:n,handler:e,caseSensitive:r});if(n){var o=e.settings;delete e.settings;var a=JSON.parse(JSON.stringify(e));e.settings=o,a.route=n+"/*childRoute",a.hasChildRouter=!0,this._childRecognizer.add({path:a.route,handler:a,caseSensitive:r}),a.navModel=t,a.settings=e.settings,a.navigationStrategy=e.navigationStrategy}if(((e.navModel=t).order||0===t.order)&&-1===this.navigation.indexOf(t)){if(!t.href&&""!==t.href&&(i.types.dynamics||i.types.stars))throw new Error('Invalid route config for "'+e.route+'" : dynamic routes must specify an "href:" to be included in the navigation model.');"number"!=typeof t.order&&(t.order=++this._fallbackOrder),this.navigation.push(t),this.navigation=this.navigation.sort(function(e,t){return e.order-t.order})}},n.prototype.hasRoute=function(e){return!!(this._recognizer.hasRoute(e)||this.parent&&this.parent.hasRoute(e))},n.prototype.hasOwnRoute=function(e){return this._recognizer.hasRoute(e)},n.prototype.handleUnknownRoutes=function(e){var n=this;if(!e)throw new Error("Invalid unknown route handler");this.catchAllHandler=function(t){return n._createRouteConfig(e,t).then(function(e){return t.config=e,t})}},n.prototype.updateTitle=function(){if(this.parent)return this.parent.updateTitle();this.currentInstruction&&this.currentInstruction._updateTitle()},n.prototype.refreshNavigation=function(){for(var e=this.navigation,t=0,n=e.length;t<n;t++){var r=e[t];r.config.href?r.href=u(r.config.href,this.history._hasPushState):r.href=c(r.relativeHref,this.baseUrl,this.history._hasPushState)}},n.prototype.useViewPortDefaults=function(e){for(var t in e){var n=e[t];this.viewPortDefaults[t]={moduleId:n.moduleId}}},n.prototype._refreshBaseUrl=function(){if(this.parent){var e=this.parent.currentInstruction.getBaseUrl();this.baseUrl=this.parent.baseUrl+e}},n.prototype._createNavigationInstruction=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=e,r="",i=e.indexOf("?");-1!==i&&(n=e.substr(0,i),r=e.substr(i+1));var o=this._recognizer.recognize(e);o&&o.length||(o=this._childRecognizer.recognize(e));var a={fragment:n,queryString:r,config:null,parentInstruction:t,previousInstruction:this.currentInstruction,router:this,options:{compareQueryParams:this.options.compareQueryParams}};if(o&&o.length){var s=o[0],l=new y(Object.assign({},a,{params:s.params,queryParams:s.queryParams||o.queryParams,config:s.config||s.handler}));return"function"==typeof s.handler?E(l,s.handler,s):s.handler&&"function"==typeof s.handler.navigationStrategy?E(l,s.handler.navigationStrategy,s.handler):Promise.resolve(l)}if(this.catchAllHandler)return E(new y(Object.assign({},a,{params:{path:n},queryParams:o?o.queryParams:{},config:null})),this.catchAllHandler);if(this.parent){var u=this._parentCatchAllHandler(this.parent);if(u){var c=this._findParentInstructionFromRouter(u,t);return E(new y(Object.assign({},a,{params:{path:n},queryParams:o?o.queryParams:{},router:u,parentInstruction:c,parentCatchHandler:!0,config:null})),u.catchAllHandler)}}return Promise.reject(new Error("Route not found: "+e))},n.prototype._findParentInstructionFromRouter=function(e,t){return t.router===e?(t.fragment=e.baseUrl,t):t.parentInstruction?this._findParentInstructionFromRouter(e,t.parentInstruction):void 0},n.prototype._parentCatchAllHandler=function(e){return e.catchAllHandler?e:!!e.parent&&this._parentCatchAllHandler(e.parent)},n.prototype._createRouteConfig=function(e,t){var n=this;return Promise.resolve(e).then(function(e){return"string"==typeof e?{moduleId:e}:"function"==typeof e?e(t):e}).then(function(e){return"string"==typeof e?{moduleId:e}:e}).then(function(e){return e.route=t.params.path,O(e,n.routes),e.navModel||(e.navModel=n.createNavModel(e)),e})},l(n,[{key:"isRoot",get:function(){return!this.parent}}]),n}();function O(e,t){if("object"!==(void 0===e?"undefined":s(e)))throw new Error("Invalid Route Config");if("string"!=typeof e.route){var n=e.name||"(no name)";throw new Error('Invalid Route Config for "'+n+'": You must specify a "route:" pattern.')}if(!("redirect"in e||e.moduleId||e.navigationStrategy||e.viewPorts))throw new Error('Invalid Route Config for "'+e.route+'": You must specify a "moduleId:", "redirect:", "navigationStrategy:", or "viewPorts:".')}function E(e,t,n){return Promise.resolve(t.call(n,e)).then(function(){return"viewPorts"in e.config||(e.config.viewPorts={default:{moduleId:e.config.moduleId}}),e})}var M=e.CanDeactivatePreviousStep=function(){function e(){}return e.prototype.run=function(e,t){return j(e,"canDeactivate",t)},e}(),P=e.CanActivateNextStep=function(){function e(){}return e.prototype.run=function(e,t){return L(e,"canActivate",t)},e}(),A=e.DeactivatePreviousStep=function(){function e(){}return e.prototype.run=function(e,t){return j(e,"deactivate",t,!0)},e}(),R=e.ActivateNextStep=function(){function e(){}return e.prototype.run=function(e,t){return L(e,"activate",t,!0)},e}();function j(e,t,n,r){var i=function e(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];for(var i in t){var o=t[i],a=o.prevComponent;if((o.strategy===k.invokeLifecycle||o.strategy===k.replace)&&a){var s=a.viewModel;n in s&&r.push(s)}o.strategy===k.replace&&a?I(a,n,r):o.childNavigationInstruction&&e(o.childNavigationInstruction.plan,n,r)}return r}(e.plan,t),o=i.length;function a(e){return r||D(e)?s():n.cancel(e)}function s(){if(o--)try{return B(i[o][t](e),a,n.cancel)}catch(e){return n.cancel(e)}return n()}return s()}function I(e,t,n){var r=e.childRouter;if(r&&r.currentInstruction){var i=r.currentInstruction.viewPortInstructions;for(var o in i){var a=i[o].component,s=a.viewModel;t in s&&n.push(s),I(a,t,n)}}}function L(e,t,i,o){var n=function i(o,a){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];var l=arguments[3];var u=o.plan;Object.keys(u).filter(function(e){var t=u[e],n=o.viewPortInstructions[e],r=n.component.viewModel;(t.strategy===k.invokeLifecycle||t.strategy===k.replace)&&a in r&&s.push({viewModel:r,lifecycleArgs:n.lifecycleArgs,router:l}),t.childNavigationInstruction&&i(t.childNavigationInstruction,a,s,n.component.childRouter||l)});return s}(e,t),a=n.length,s=-1;function l(){if(++s<a)try{var e,r=n[s];return B((e=r.viewModel)[t].apply(e,r.lifecycleArgs),function(e){return t=e,n=r.router,o||D(t,n)?l():i.cancel(t);var t,n},i.cancel)}catch(e){return i.cancel(e)}return i()}return l()}function D(e,t){return!(e instanceof Error)&&(w(e)?("function"==typeof e.setRouter&&e.setRouter(t),!!e.shouldContinueProcessing):void 0===e||e)}var N=function(){function e(e){this._subscribed=!0,this._subscription=e(this),this._subscribed||this.unsubscribe()}return e.prototype.unsubscribe=function(){this._subscribed&&this._subscription&&this._subscription.unsubscribe(),this._subscribed=!1},l(e,[{key:"subscribed",get:function(){return this._subscribed}}]),e}();function B(e,n,r){if(e&&"function"==typeof e.then)return Promise.resolve(e).then(n).catch(r);if(e&&"function"==typeof e.subscribe){var i=e;return new N(function(t){return i.subscribe({next:function(){t.subscribed&&(t.unsubscribe(),n(e))},error:function(e){t.subscribed&&(t.unsubscribe(),r(e))},complete:function(){t.subscribed&&(t.unsubscribe(),n(e))}})})}try{return n(e)}catch(e){return r(e)}}var F=e.RouteLoader=function(){function e(){}return e.prototype.loadRoute=function(e,t,n){throw Error('Route loaders must implement "loadRoute(router, config, navigationInstruction)".')},e}(),V=e.LoadRouteStep=function(){function e(e){this.routeLoader=e}return e.inject=function(){return[F]},e.prototype.run=function(e,t){return z(this.routeLoader,e).then(t).catch(t.cancel)},e}();function z(r,e){var t=function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];var r=t.plan;for(var i in r){var o=r[i];if(o.strategy===k.replace)n.push({viewPortPlan:o,navigationInstruction:t}),o.childNavigationInstruction&&e(o.childNavigationInstruction,n);else{var a=t.addViewPortInstruction(i,o.strategy,o.prevModuleId,o.prevComponent);o.childNavigationInstruction&&(a.childNavigationInstruction=o.childNavigationInstruction,e(o.childNavigationInstruction,n))}}return n}(e).map(function(e){return i=r,o=e.navigationInstruction,a=e.viewPortPlan,s=a.config?a.config.moduleId:null,(t=i,n=o,l=a.config,u=n.router,c=n.lifecycleArgs,t.loadRoute(u,l,n).then(function(e){var t=e.viewModel,n=e.childContainer;if(e.router=u,e.config=l,"configureRouter"in t){var r=n.getChildRouter();return(e.childRouter=r).configure(function(e){return t.configureRouter.apply(t,[e,r].concat(c))}).then(function(){return e})}return e})).then(function(e){var n=o.addViewPortInstruction(a.name,a.strategy,s,e),t=e.childRouter;if(t){var r=o.getWildcardPath();return t._createNavigationInstruction(r,o).then(function(t){return T(a.childNavigationInstruction=t).then(function(e){return t.plan=e,n.childNavigationInstruction=t,z(i,t)})})}});var i,o,a,s,t,n,l,u,c});return Promise.all(t)}var H=function(){function e(e,t,n){this.steps=[],this.container=e,this.slotName=t,this.slotAlias=n}return e.prototype.getSteps=function(){var t=this;return this.steps.map(function(e){return t.container.get(e)})},e}(),U=e.PipelineProvider=function(){function e(e){this.container=e,this.steps=[S,M,V,this._createPipelineSlot("authorize"),P,this._createPipelineSlot("preActivate","modelbind"),A,R,this._createPipelineSlot("preRender","precommit"),g,this._createPipelineSlot("postRender","postcomplete")]}return e.inject=function(){return[n.Container]},e.prototype.createPipeline=function(){var t=this,n=new p;return this.steps.forEach(function(e){return n.addStep(t.container.get(e))}),n},e.prototype._findStep=function(t){return this.steps.find(function(e){return e.slotName===t||e.slotAlias===t})},e.prototype.addStep=function(e,t){var n=this._findStep(e);if(!n)throw new Error("Invalid pipeline slot name: "+e+".");n.steps.includes(t)||n.steps.push(t)},e.prototype.removeStep=function(e,t){var n=this._findStep(e);n&&n.steps.splice(n.steps.indexOf(t),1)},e.prototype._clearSteps=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=this._findStep(e);t&&(t.steps=[])},e.prototype.reset=function(){this._clearSteps("authorize"),this._clearSteps("preActivate"),this._clearSteps("preRender"),this._clearSteps("postRender")},e.prototype._createPipelineSlot=function(e,t){return new H(this.container,e,t)},e}(),q=o.getLogger("app-router");e.AppRouter=function(o){function e(e,t,n,r){var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));return i.pipelineProvider=n,i.events=r,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,o),e.inject=function(){return[n.Container,i.History,U,a.EventAggregator]},e.prototype.reset=function(){o.prototype.reset.call(this),this.maxInstructionCount=10,this._queue?this._queue.length=0:this._queue=[]},e.prototype.loadUrl=function(e){var t=this;return this._createNavigationInstruction(e).then(function(e){return t._queueInstruction(e)}).catch(function(e){q.error(e),W(t)})},e.prototype.registerViewPort=function(e,t){var n=this;if(o.prototype.registerViewPort.call(this,e,t),this.isActive)this._dequeueInstruction();else{var r=this._findViewModel(e);if("configureRouter"in r){if(!this.isConfigured){var i=this._resolveConfiguredPromise;return this._resolveConfiguredPromise=function(){},this.configure(function(e){return r.configureRouter(e,n)}).then(function(){n.activate(),i()})}}else this.activate()}return Promise.resolve()},e.prototype.activate=function(e){this.isActive||(this.isActive=!0,this.options=Object.assign({routeHandler:this.loadUrl.bind(this)},this.options,e),this.history.activate(this.options),this._dequeueInstruction())},e.prototype.deactivate=function(){this.isActive=!1,this.history.deactivate()},e.prototype._queueInstruction=function(t){var n=this;return new Promise(function(e){t.resolve=e,n._queue.unshift(t),n._dequeueInstruction()})},e.prototype._dequeueInstruction=function(){var n=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return Promise.resolve().then(function(){if(!n.isNavigating||r){var t=n._queue.shift();if(n._queue.length=0,t){n.isNavigating=!0;var e=n.history.getState("NavigationTracker");if(e||n.currentNavigationTracker?e?n.currentNavigationTracker?n.currentNavigationTracker<e?n.isNavigatingForward=!0:n.currentNavigationTracker>e&&(n.isNavigatingBack=!0):n.isNavigatingRefresh=!0:n.isNavigatingNew=!0:(n.isNavigatingFirst=!0,n.isNavigatingNew=!0),e||(e=Date.now(),n.history.setState("NavigationTracker",e)),n.currentNavigationTracker=e,t.previousInstruction=n.currentInstruction,r){if(r===n.maxInstructionCount-1)return q.error(r+1+" navigation instructions have been attempted without success. Restoring last known good location."),W(n),n._dequeueInstruction(r+1);if(r>n.maxInstructionCount)throw new Error("Maximum navigation attempts exceeded. Giving up.")}else n.events.publish("router:navigation:processing",{instruction:t});return n.pipelineProvider.createPipeline().run(t).then(function(e){return function(e,t,n,r){t&&"completed"in t&&"output"in t||((t=t||{}).output=new Error("Expected router pipeline to return a navigation result, but got ["+JSON.stringify(t)+"] instead."));var i=null;w(t.output)?t.output.navigate(r):(i=t).completed||(t.output instanceof Error&&q.error(t.output),W(r));return r._dequeueInstruction(n+1).then(function(e){return i||e||t})}(0,e,r,n)}).catch(function(e){return{output:e instanceof Error?e:new Error(e)}}).then(function(e){return function(e,t,n,r){e.resolve(t);var i={instruction:e,result:t};if(n)r.events.publish("router:navigation:child:complete",i);else{r.isNavigating=!1,r.isExplicitNavigation=!1,r.isExplicitNavigationBack=!1,r.isNavigatingFirst=!1,r.isNavigatingNew=!1,r.isNavigatingRefresh=!1,r.isNavigatingForward=!1,r.isNavigatingBack=!1;var o=void 0;if(t.output instanceof Error)o="error";else if(t.completed){var a=e.queryString?"?"+e.queryString:"";r.history.previousLocation=e.fragment+a,o="success"}else o="canceled";r.events.publish("router:navigation:"+o,i),r.events.publish("router:navigation:complete",i)}return t}(t,e,!!r,n)})}}})},e.prototype._findViewModel=function(e){if(this.container.viewModel)return this.container.viewModel;if(e.container)for(var t=e.container;t;){if(t.viewModel)return this.container.viewModel=t.viewModel,t.viewModel;t=t.parent}},e}(C);function W(e){e.history.previousLocation?e.navigate(e.history.previousLocation,{trigger:!1,replace:!0}):e.fallbackRoute?e.navigate(e.fallbackRoute,{trigger:!0,replace:!0}):q.error("Router navigation failed, and no previous location or fallbackRoute could be restored.")}}),define("aurelia-route-recognizer",["exports","aurelia-path"],function(e,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RouteRecognizer=e.EpsilonSegment=e.StarSegment=e.DynamicSegment=e.StaticSegment=e.State=void 0;var t=e.State=function(){function n(e){this.charSpec=e,this.nextStates=[]}return n.prototype.get=function(e){var t=this.nextStates,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var o=i;if(o.charSpec.validChars===e.validChars&&o.charSpec.invalidChars===e.invalidChars)return o}},n.prototype.put=function(e){var t=this.get(e);return t||(t=new n(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},n.prototype.match=function(e){for(var t=this.nextStates,n=[],r=0,i=t.length;r<i;r++){var o=t[r],a=o.charSpec;void 0!==a.validChars?-1!==a.validChars.indexOf(e)&&n.push(o):void 0!==a.invalidChars&&-1===a.invalidChars.indexOf(e)&&n.push(o)}return n},n}(),n=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g"),k=e.StaticSegment=function(){function e(e,t){this.string=e,this.caseSensitive=t}return e.prototype.eachChar=function(e){for(var t=this.string,n=0,r=t.length;n<r;++n){var i=t[n];e({validChars:this.caseSensitive?i:i.toUpperCase()+i.toLowerCase()})}},e.prototype.regex=function(){return this.string.replace(n,"\\$1")},e.prototype.generate=function(){return this.string},e}(),S=e.DynamicSegment=function(){function e(e,t){this.name=e,this.optional=t}return e.prototype.eachChar=function(e){e({invalidChars:"/",repeat:!0})},e.prototype.regex=function(){return"([^/]+)"},e.prototype.generate=function(e,t){return t[this.name]=!0,e[this.name]},e}(),T=e.StarSegment=function(){function e(e){this.name=e}return e.prototype.eachChar=function(e){e({invalidChars:"",repeat:!0})},e.prototype.regex=function(){return"(.+)"},e.prototype.generate=function(e,t){return t[this.name]=!0,e[this.name]},e}(),C=e.EpsilonSegment=function(){function e(){}return e.prototype.eachChar=function(){},e.prototype.regex=function(){return""},e.prototype.generate=function(){return""},e}(),v=(e.RouteRecognizer=function(){function e(){this.rootState=new t,this.names={}}return e.prototype.add=function(e){var t=this;if(!Array.isArray(e)){for(var n=this.rootState,r=[],i="^",o={statics:0,dynamics:0,stars:0},a=[],s=e.handler.name,l=!0,u=function(e,t,n,r){var i=e;"/"===e.charAt(0)&&(i=e.substr(1));for(var o=[],a=i.split("/"),s=0,l=a.length;s<l;++s){var u=a[s],c=u.match(/^:([^?]+)(\?)?$/);if(c){var d=c,h=d[1],f=d[2];if(-1!==h.indexOf("="))throw new Error("Parameter "+h+" in route "+e+" has a default value, which is not supported.");o.push(new S(h,!!f)),t.push(h),n.dynamics++}else(c=u.match(/^\*(.+)$/))?(o.push(new T(c[1])),t.push(c[1]),n.stars++):""===u?o.push(new C):(o.push(new k(u,r)),n.statics++)}return o}(e.path,a,o,e.caseSensitive),c=0,d=u.length;c<d;c++){var h=u[c];if(!(h instanceof C)){for(var f=O(n,h),p=f[0],v=f[1],m=0,g=r.length;m<g;m++)r[m].nextStates.push(p);h.optional?(r.push(v),i+="(?:/"+h.regex()+")?"):(n=v,i+="/"+h.regex(),r.length=0,l=!1)}}l&&(n=n.put({validChars:"/"}),i+="/?");var y=[{handler:e.handler,names:a}];if(s)for(var b=Array.isArray(s)?s:[s],w=0;w<b.length;w++)this.names[b[w]]={segments:u,handlers:y};for(var x=0;x<r.length;x++){var _=r[x];_.handlers=y,_.regex=new RegExp(i+"$",e.caseSensitive?"":"i"),_.types=o}return n.handlers=y,n.regex=new RegExp(i+"$",e.caseSensitive?"":"i"),n.types=o,n}e.forEach(function(e){return t.add(e)})},e.prototype.handlersFor=function(e){var t=this.names[e];if(!t)throw new Error("There is no route named "+e);return[].concat(t.handlers)},e.prototype.hasRoute=function(e){return!!this.names[e]},e.prototype.generate=function(e,t){var n=this.names[e];if(!n)throw new Error("There is no route named "+e);var r=n.handlers[0].handler;if(r.generationUsesHref)return r.href;for(var i=Object.assign({},t),o=n.segments,a={},s="",l=0,u=o.length;l<u;l++){var c=o[l];if(!(c instanceof C)){var d=c.generate(i,a);if(null==d){if(!c.optional)throw new Error("A value is required for route parameter '"+c.name+"' in route '"+e+"'.")}else s+="/",s+=d}}for(var h in"/"!==s.charAt(0)&&(s="/"+s),a)delete i[h];var f=(0,p.buildQueryString)(i);return s+=f?"?"+f:""},e.prototype.recognize=function(e){var t=[this.rootState],n={},r=!1,i=e,o=i.indexOf("?");if(-1!==o){var a=i.substr(o+1,i.length);i=i.substr(0,o),n=(0,p.parseQueryString)(a)}"/"!==(i=decodeURI(i)).charAt(0)&&(i="/"+i);var s=i.length;1<s&&"/"===i.charAt(s-1)&&(i=i.substr(0,s-1),r=!0);for(var l=0,u=i.length;l<u&&(t=m(t,i.charAt(l))).length;l++);for(var c=[],d=0,h=t.length;d<h;d++)t[d].handlers&&c.push(t[d]);t=c.sort(function(e,t){if(e.types.stars!==t.types.stars)return e.types.stars-t.types.stars;if(e.types.stars){if(e.types.statics!==t.types.statics)return t.types.statics-e.types.statics;if(e.types.dynamics!==t.types.dynamics)return t.types.dynamics-e.types.dynamics}return e.types.dynamics!==t.types.dynamics?e.types.dynamics-t.types.dynamics:e.types.statics!==t.types.statics?t.types.statics-e.types.statics:0});var f=c[0];if(f&&f.handlers)return r&&"(.+)$"===f.regex.source.slice(-5)&&(i+="/"),function(e,t,n){for(var r=e.handlers,i=e.regex,o=t.match(i),a=1,s=new v(n),l=0,u=r.length;l<u;l++){for(var c=r[l],d=c.names,h={},f=0,p=d.length;f<p;f++)h[d[f]]=o[a++];s.push({handler:c.handler,params:h,isDynamic:!!d.length})}return s}(f,i,n)},e}(),function(e){this.splice=Array.prototype.splice,this.slice=Array.prototype.slice,this.push=Array.prototype.push,this.length=0,this.queryParams=e||{}});function m(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];n.push.apply(n,o.match(t))}return n}function O(e,t){var n=e.put({validChars:"/"}),r=n;return t.eachChar(function(e){r=r.put(e)}),[n,r]}}),define("aurelia-polyfills",["aurelia-pal"],function(F){"use strict";var t,n,r,i,o,a,h,f,s,l,u,c,d,p,v,V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};"undefined"==typeof FEATURE_NO_ES2015&&(function(n,e){if(!(e in n)){var o,t=F.PLATFORM.global,r=0,i=""+Math.random(),a="__symbol:",s=a.length,l="__symbol@@"+i,u="defineProperty",c="defineProperties",d="getOwnPropertyNames",h="getOwnPropertyDescriptor",f="propertyIsEnumerable",p=n[d],v=n[h],m=n.create,g=n.keys,y=n[u],b=n[c],w=v(n,d),x=n.prototype,_=x.hasOwnProperty,k=x[f],S=x.toString,T=(Array.prototype.indexOf,function(e,t,n){_.call(e,l)||y(e,l,{enumerable:!1,configurable:!1,writable:!1,value:{}}),e[l]["@@"+t]=n}),C=function(){},O=function(e){return e!=l&&!_.call(R,e)},E=function(e){return e!=l&&_.call(R,e)},M=function(e){var t=""+e;return E(t)?_.call(this,t)&&this[l]&&this[l]["@@"+t]:k.call(this,e)},P=function(t){return y(x,t,{enumerable:!1,configurable:!0,get:C,set:function(e){o(this,t,{enumerable:!1,configurable:!0,writable:!0,value:e}),T(this,t,!0)}}),R[t]=y(n(t),"constructor",j)},A=function(e){if(this&&this!==t)throw new TypeError("Symbol is not a constructor");return P(a.concat(e||"",i,++r))},R=m(null),j={value:A},I=function(e){return R[e]},L=function(e,t,n){var r,i=""+t;return E(i)?(o(e,i,n.enumerable?((r=m(n)).enumerable=!1,r):n),T(e,i,!!n.enumerable)):y(e,t,n),e},D=function(e){return e="[object String]"===S.call(e)?e.split(""):n(e),p(e).filter(E).map(I)};w.value=L,y(n,u,w),w.value=D,y(n,e,w);var N="object"===("undefined"==typeof window?"undefined":V(window))?n.getOwnPropertyNames(window):[],B=n.getOwnPropertyNames;w.value=function(e){if("[object Window]"===S.call(e))try{return B(e)}catch(e){return[].concat([],N)}return p(e).filter(O)},y(n,d,w),w.value=function(t,n){var e=D(n);return e.length?g(n).concat(e).forEach(function(e){M.call(n,e)&&L(t,e,n[e])}):b(t,n),t},y(n,c,w),w.value=M,y(x,f,w),w.value=A,y(t,"Symbol",w),w.value=function(e){var t=a.concat(a,e,i);return t in x?R[t]:P(t)},y(A,"for",w),w.value=function(e){return _.call(R,e)?e.slice(2*s,-i.length):void 0},y(A,"keyFor",w),w.value=function(e,t){var n=v(e,t);return n&&E(t)&&(n.enumerable=M.call(e,t)),n},y(n,h,w),w.value=function(e,t){return 1===arguments.length?m(e):(n=t,r=m(e),null!==n&&"object"===(void 0===n?"undefined":V(n))&&p(n).forEach(function(e){M.call(n,e)&&L(r,e,n[e])}),r);var n,r},y(n,"create",w),w.value=function(){var e=S.call(this);return"[object String]"===e&&E(this)?"[object Symbol]":e},y(x,"toString",w);try{o=m(y({},a,{get:function(){return y(this,a,{value:!1})[a]}}))[a]||y}catch(e){o=function(e,t,n){var r=v(x,t);delete x[t],y(e,t,n),y(x,t,r)}}}}(Object,"getOwnPropertySymbols"),t=Object,Symbol,r=t.defineProperty,i=t.prototype,o=i.toString,["iterator","match","replace","search","split","hasInstance","isConcatSpreadable","unscopables","species","toPrimitive",a="toStringTag"].forEach(function(e){if(!(e in Symbol))switch(r(Symbol,e,{value:Symbol(e)}),e){case a:(n=t.getOwnPropertyDescriptor(i,"toString")).value=function(){var e=o.call(this),t=null==this?void 0:this[Symbol.toStringTag];return void 0===t?e:"[object "+t+"]"},r(i,"toString",n)}}),function(a,e,t){function s(){return this}e[a]||(e[a]=function(){var t=0,n=this,e={next:function(){var e=n.length<=t;return e?{done:e}:{done:e,value:n[t++]}}};return e[a]=s,e}),t[a]||(t[a]=function(){var n=String.fromCodePoint,r=this,i=0,o=r.length,e={next:function(){var e=o<=i,t=e?"":n(r.codePointAt(i));return i+=t.length,e?{done:e}:{done:e,value:t}}};return e[a]=s,e})}(Symbol.iterator,Array.prototype,String.prototype)),"undefined"==typeof FEATURE_NO_ES2015&&(Number.isNaN=Number.isNaN||function(e){return e!=e},Number.isFinite=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)}),String.prototype.endsWith&&!function(){try{return!"ab".endsWith("a",1)}catch(e){return!0}}()||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return-1!==r&&r===t}),String.prototype.startsWith&&!function(){try{return!"ab".startsWith("b",1)}catch(e){return!0}}()||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),"undefined"==typeof FEATURE_NO_ES2015&&(Array.from||(Array.from=(h=function(e){return 0<e?Math.min((t=e,isNaN(t=+t)?0:(0<t?Math.floor:Math.ceil)(t)),9007199254740991):0;var t},f=function(t,e,n,r){try{return e(n,r)}catch(e){throw"function"==typeof t.return&&t.return(),e}},function(e){var t,n,r,i,o=Object(e),a="function"==typeof this?this:Array,s=arguments.length,l=1<s?arguments[1]:void 0,u=void 0!==l,c=0,d=o[Symbol.iterator];if(u&&(l=l.bind(2<s?arguments[2]:void 0)),null==d||Array.isArray(e))for(n=new a(t=h(o.length));c<t;c++)n[c]=u?l(o[c],c):o[c];else for(i=d.call(o),n=new a;!(r=i.next()).done;c++)n[c]=u?f(i,l,r.value,c):r.value;return n.length=c,n})),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,enumerable:!1,value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(t=n[o],e.call(i,t,o,n))return t}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{configurable:!0,writable:!0,enumerable:!1,value:function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(t=n[o],e.call(i,t,o,n))return o;return-1}})),"undefined"!=typeof FEATURE_NO_ES2016||Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,enumerable:!1,value:function(e){var t=Object(this),n=parseInt(t.length)||0;if(0===n)return!1;var r,i,o=parseInt(arguments[1])||0;for(0<=o?r=o:(r=n+o)<0&&(r=0);r<n;){if(e===(i=t[r])||e!=e&&i!=i)return!0;r++}return!1}}),"undefined"==typeof FEATURE_NO_ES2015&&(!function(){var i,o,a,s,t=!1;try{var e=Object.keys("a");t=1!==e.length||"0"!==e[0]}catch(e){t=!0}t&&(Object.keys=(i=Object.prototype.hasOwnProperty,o=!{toString:null}.propertyIsEnumerable("toString"),s=(a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if(null==e)throw TypeError("Cannot convert undefined or null to object");e=Object(e);var t,n,r=[];for(t in e)i.call(e,t)&&r.push(t);if(o)for(n=0;n<s;n++)i.call(e,a[n])&&r.push(a[n]);return r}))}(),"assign"in(s=Object)||s.defineProperty(s,"assign",{configurable:!0,writable:!0,value:(l=s.getOwnPropertySymbols,u=s.propertyIsEnumerable,c=l?function(e){return l(e).filter(u,e)}:function(){return Array.prototype},function(t){function e(e){t[e]=i[e]}!l||t instanceof s||console.warn("problematic Symbols",t);for(var n=1,r=arguments.length;n<r;++n){var i=arguments[n];null!=i&&s.keys(i).concat(c(i)).forEach(e)}return t})}),Object.is||(Object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t})),"undefined"==typeof FEATURE_NO_ES2015&&function(e){var n,t,r,i=Object.defineProperty,o=function(e,t){return e===t||e!=e&&t!=t};("undefined"==typeof WeakMap&&(e.WeakMap=a({delete:s,clear:p,get:l,has:d,set:h},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next)||(e.Map=a(((t={delete:s,has:d,get:l,set:h,keys:function(){return g(this._itp,this._keys)},values:v,entries:m,forEach:b,clear:p})[Symbol.iterator]=m,t)));"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(e.Set=a(((r={has:c,add:f,delete:s,clear:p,keys:v,values:v,entries:function(){return g(this._itp,this._values,this._values)},forEach:b})[Symbol.iterator]=v,r)));function a(e,t){function n(e){if(!this||this.constructor!==n)return new n(e);this._keys=[],this._values=[],this._itp=[],this.objectOnly=t,e&&function(e){this.add?e.forEach(this.add,this):e.forEach(function(e){this.set(e[0],e[1])},this)}.call(this,e)}return t||i(e,"size",{get:y}),(e.constructor=n).prototype=e,n}function s(e){return this.has(e)&&(this._keys.splice(n,1),this._values.splice(n,1),this._itp.forEach(function(e){n<e[0]&&e[0]--})),-1<n}function l(e){return this.has(e)?this._values[n]:void 0}function u(e,t){if(this.objectOnly&&t!==Object(t))throw new TypeError("Invalid value used as weak collection key");if(t!=t||0===t)for(n=e.length;n--&&!o(e[n],t););else n=e.indexOf(t);return-1<n}function c(e){return u.call(this,this._values,e)}function d(e){return u.call(this,this._keys,e)}function h(e,t){return this.has(e)?this._values[n]=t:this._values[this._keys.push(e)-1]=t,this}function f(e){return this.has(e)||this._values.push(e),this}function p(){(this._keys||0).length=this._values.length=0}function v(){return g(this._itp,this._values)}function m(){return g(this._itp,this._keys,this._values)}function g(n,r,i){var e,o=[0],a=!1;return n.push(o),(e={})[Symbol.iterator]=function(){return this},e.next=function(){var e,t=o[0];return!a&&t<r.length?(e=i?[r[t],i[t]]:r[t],o[0]++):(a=!0,n.splice(n.indexOf(o),1)),{done:a,value:e}},e}function y(){return this._values.length}function b(e,t){for(var n=this.entries();;){var r=n.next();if(r.done)break;e.call(t,r.value[1],r.value[0],this)}}"undefined"==typeof WeakSet&&(e.WeakSet=a({delete:s,add:f,clear:p,has:c},!0))}(F.PLATFORM.global),"undefined"==typeof FEATURE_NO_ES2015&&(d=Function.prototype.bind,void 0===F.PLATFORM.global.Reflect&&(F.PLATFORM.global.Reflect={}),"function"!=typeof Reflect.defineProperty&&(Reflect.defineProperty=function(e,t,n){if("object"===(void 0===e?"undefined":V(e))?null===e:"function"!=typeof e)throw new TypeError("Reflect.defineProperty called on non-object");try{return Object.defineProperty(e,t,n),!0}catch(e){return!1}}),"function"!=typeof Reflect.construct&&(Reflect.construct=function(e,t){if(t)switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(d.apply(e,n))}),"function"!=typeof Reflect.ownKeys&&(Reflect.ownKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))})),"undefined"==typeof FEATURE_NO_ESNEXT&&(p=Object.freeze({}),v="__metadata__","function"!=typeof Reflect.getOwnMetadata&&(Reflect.getOwnMetadata=function(e,t,n){if(t.hasOwnProperty(v))return(t[v][n]||p)[e]}),"function"!=typeof Reflect.defineMetadata&&(Reflect.defineMetadata=function(e,t,n,r){var i=n.hasOwnProperty(v)?n[v]:n[v]={};(i[r]||(i[r]={}))[e]=t}),"function"!=typeof Reflect.metadata&&(Reflect.metadata=function(n,r){return function(e,t){Reflect.defineMetadata(n,r,e,t)}}))}),define("aurelia-path",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.relativeToFile=function(e,t){var n=t&&t.split("/"),r=e.trim().split("/");if("."===r[0].charAt(0)&&n){var i=n.slice(0,n.length-1);r.unshift.apply(r,i)}return function(e){for(var t=0;t<e.length;++t){var n=e[t];if("."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;0<t&&(e.splice(t-1,2),t-=2)}}}(r),r.join("/")},e.join=function(e,t){if(!e)return t;if(!t)return e;var n=e.match(/^([^/]*?:)\//),r=n&&0<n.length?n[1]:"";e=e.substr(r.length);var i=void 0;i=0===e.indexOf("///")&&"file:"===r?"///":0===e.indexOf("//")?"//":0===e.indexOf("/")?"/":"";for(var o="/"===t.slice(-1)?"/":"",a=e.split("/"),s=t.split("/"),l=[],u=0,c=a.length;u<c;++u)if(".."===a[u])l.pop();else{if("."===a[u]||""===a[u])continue;l.push(a[u])}for(var d=0,h=s.length;d<h;++d)if(".."===s[d])l.pop();else{if("."===s[d]||""===s[d])continue;l.push(s[d])}return r+i+l.join("/")+o},e.buildQueryString=function(e,t){for(var n=[],r=Object.keys(e||{}).sort(),i=0,o=r.length;i<o;i++){var a=r[i];n=n.concat(d(a,e[a],t))}if(0===n.length)return"";return n.join("&")},e.parseQueryString=function(e){var t={};if(!e||"string"!=typeof e)return t;var n=e;"?"===n.charAt(0)&&(n=n.substr(1));for(var r=n.replace(/\+/g," ").split("&"),i=0;i<r.length;i++){var o=r[i].split("="),a=decodeURIComponent(o[0]);if(a){var s=a.split("]["),l=s.length-1;if(/\[/.test(s[0])&&/\]$/.test(s[l])?(s[l]=s[l].replace(/\]$/,""),s=s.shift().split("[").concat(s),l=s.length-1):l=0,2<=o.length){var u=o[1]?decodeURIComponent(o[1]):"";l?f(t,s,u):t[a]=h(t[a],u)}else t[a]=!0}}return t};var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var u=encodeURIComponent,c=function(e){return u(e).replace("%24","$")};function d(e,t,n){var r=[];if(null==t)return r;if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)if(n)r.push(c(e)+"="+u(t[i]));else{var a=e+"["+("object"===l(t[i])&&null!==t[i]?i:"")+"]";r=r.concat(d(a,t[i]))}else if("object"!==(void 0===t?"undefined":l(t))||n)r.push(c(e)+"="+u(t));else for(var s in t)r=r.concat(d(e+"["+s+"]",t[s]));return r}function h(e,t){return Array.isArray(e)?(e.push(t),e):void 0!==e?[e,t]:t}function f(e,t,n){for(var r=e,i=t.length-1,o=0;o<=i;o++){var a=""===t[o]?r.length:t[o];if(o<i){var s=r[a]&&"object"!==l(r[a])?[r[a]]:r[a];r=r[a]=s||(isNaN(t[o+1])?{}:[])}else r=r[a]=n}}}),define("aurelia-pal",["exports"],function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregateError=function(e,t,n){if(t){if(t.innerError&&n)return t;var r="\n------------------------------------------------\n";e+=r+"Inner Error:\n","string"==typeof t?e+="Message: "+t:(t.message?e+="Message: "+t.message:e+="Unknown Inner Error Type. Displaying Inner Error as JSON:\n "+JSON.stringify(t,null,"  "),t.stack&&(e+="\nInner Error Stack:\n"+t.stack,e+="\nEnd Inner Error Stack")),e+=r}var i=new Error(e);t&&(i.innerError=t);return i},t.initializePAL=function(e){if(o)return;t.isInitialized=o=!0,"function"!=typeof Object.getPropertyDescriptor&&(Object.getPropertyDescriptor=function(e,t){for(var n=Object.getOwnPropertyDescriptor(e,t),r=Object.getPrototypeOf(e);void 0===n&&null!==r;)n=Object.getOwnPropertyDescriptor(r,t),r=Object.getPrototypeOf(r);return n});e(r,n,i)},t.reset=function(){t.isInitialized=o=!1};var n=t.FEATURE={},r=t.PLATFORM={noop:function(){},eachModule:function(){},moduleName:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){return e})};r.global="undefined"!=typeof self?self:"undefined"!=typeof global?global:new Function("return this")();var i=t.DOM={},o=t.isInitialized=!1}),define("aurelia-pal-browser",["exports","aurelia-pal"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._DOM=e._FEATURE=e._PLATFORM=void 0,e.initialize=function(){if(t.isInitialized)return;(0,t.initializePAL)(function(e,t,n){Object.assign(e,r),Object.assign(t,T),Object.assign(n,M),Object.defineProperty(n,"title",{get:function(){return document.title},set:function(e){document.title=e}}),Object.defineProperty(n,"activeElement",{get:function(){return document.activeElement}}),Object.defineProperty(e,"XMLHttpRequest",{get:function(){return e.global.XMLHttpRequest}})})};var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e._PLATFORM={location:window.location,history:window.history,addEventListener:function(e,t,n){this.global.addEventListener(e,t,n)},removeEventListener:function(e,t,n){this.global.removeEventListener(e,t,n)},performance:window.performance,requestAnimationFrame:function(e){return this.global.requestAnimationFrame(e)}};if("undefined"==typeof FEATURE_NO_IE){void 0===function(){}.name&&Object.defineProperty(Function.prototype,"name",{get:function(){var e=this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];return Object.defineProperty(this,"name",{value:e}),e}})}if("undefined"==typeof FEATURE_NO_IE)if("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))){var i=document.createElement("_");if(i.classList.add("c1","c2"),!i.classList.contains("c2")){var o=function(e){var r=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){for(var t=0,n=arguments.length;t<n;++t)e=arguments[t],r.call(this,e)}};o("add"),o("remove")}if(i.classList.toggle("c3",!1),i.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:a.call(this,e)}}i=null}else{var s="prototype",l=String.prototype.trim,u=Array.prototype.indexOf,c=[],d=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},h=function(e,t){if(""===t)throw new d("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new d("INVALID_CHARACTER_ERR","String contains an invalid character");return u.call(e,t)},f=function(e){for(var t=l.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):c,r=0,i=n.length;r<i;++r)this.push(n[r]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},p=f[s]=[];d[s]=Error[s],p.item=function(e){return this[e]||null},p.contains=function(e){return-1!==h(this,e+="")},p.add=function(){for(var e=arguments,t=0,n=e.length,r=void 0,i=!1;r=e[t]+"",-1===h(this,r)&&(this.push(r),i=!0),++t<n;);i&&this._updateClassName()},p.remove=function(){var e=arguments,t=0,n=e.length,r=void 0,i=!1,o=void 0;do{for(r=e[t]+"",o=h(this,r);-1!==o;)this.splice(o,1),i=!0,o=h(this,r)}while(++t<n);i&&this._updateClassName()},p.toggle=function(e,t){e+="";var n=this.contains(e),r=n?!0!==t&&"remove":!1!==t&&"add";return r&&this[r](e),!0===t||!1===t?t:!n},p.toString=function(){return this.join(" ")},Object.defineProperty(Element.prototype,"classList",{get:function(){return new f(this)},enumerable:!0,configurable:!0})}if("undefined"==typeof FEATURE_NO_IE){var v=function(e,t){for(var n=0,r=y.length,i=[];n<r;n++)y[n][e]==t&&i.push(y[n]);return i},m=function(e,t){for(var n,r=y.length;r--;)(n=y[r]).entryType!=e||void 0!==t&&n.name!=t||y.splice(r,1)};if("performance"in window==!1&&(window.performance={}),"now"in window.performance==!1){var g=Date.now();performance.timing&&performance.timing.navigationStart&&(g=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-g}}Date.now?Date.now():new Date;var y=[],b={};window.performance.mark||(window.performance.mark=window.performance.webkitMark||function(e){var t={name:e,entryType:"mark",startTime:window.performance.now(),duration:0};y.push(t),b[e]=t}),window.performance.measure||(window.performance.measure=window.performance.webkitMeasure||function(e,t,n){t=b[t].startTime,n=b[n].startTime,y.push({name:e,entryType:"measure",startTime:t,duration:n-t})}),window.performance.getEntriesByType||(window.performance.getEntriesByType=window.performance.webkitGetEntriesByType||function(e){return v("entryType",e)}),window.performance.getEntriesByName||(window.performance.getEntriesByName=window.performance.webkitGetEntriesByName||function(e){return v("name",e)}),window.performance.clearMarks||(window.performance.clearMarks=window.performance.webkitClearMarks||function(e){m("mark",e)}),window.performance.clearMeasures||(window.performance.clearMeasures=window.performance.webkitClearMeasures||function(e){m("measure",e)}),r.performance=window.performance}if("undefined"==typeof FEATURE_NO_IE){var w=window.console=window.console||{},x=function(){};w.memory||(w.memory={}),"assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",").forEach(function(e){w[e]||(w[e]=x)}),"object"===n(w.log)&&"log,info,warn,error,assert,dir,clear,profile,profileEnd".split(",").forEach(function(e){console[e]=this.bind(console[e],console)},Function.prototype.call)}if("undefined"==typeof FEATURE_NO_IE&&(!window.CustomEvent||"function"!=typeof window.CustomEvent)){var _=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};_.prototype=window.Event.prototype,window.CustomEvent=_}if(Element&&!Element.prototype.matches){var k=Element.prototype;k.matches=k.matchesSelector||k.mozMatchesSelector||k.msMatchesSelector||k.oMatchesSelector||k.webkitMatchesSelector}var S,T=e._FEATURE={shadowDOM:!!HTMLElement.prototype.attachShadow,scopedCSS:"scoped"in document.createElement("style"),htmlTemplateElement:(S=document.createElement("div"),S.innerHTML="<template></template>","content"in S.children[0]),mutationObserver:!(!window.MutationObserver&&!window.WebKitMutationObserver),ensureHTMLTemplateElement:function(e){return e}};if("undefined"==typeof FEATURE_NO_IE){var C=function(e){var t=e.ownerDocument.createElement("template"),n=e.attributes,r=n.length,i=void 0;for(e.parentNode.insertBefore(t,e);0<r--;)i=n[r],t.setAttribute(i.name,i.value),e.removeAttribute(i.name);return e.parentNode.removeChild(e),O(t)},O=function(e){for(var t=e.content=document.createDocumentFragment(),n=void 0;n=e.firstChild;)t.appendChild(n);return e};T.htmlTemplateElement||(T.ensureHTMLTemplateElement=function(e){for(var t,n=O(e).content.querySelectorAll("template"),r=0,i=n.length;r<i;++r){var o=n[r];"template"===(t=o).tagName&&"http://www.w3.org/2000/svg"===t.namespaceURI?C(o):O(o)}return e})}var E=window.ShadowDOMPolyfill||null,M=e._DOM={Element:Element,NodeList:NodeList,SVGElement:SVGElement,boundary:"aurelia-dom-boundary",addEventListener:function(e,t,n){document.addEventListener(e,t,n)},removeEventListener:function(e,t,n){document.removeEventListener(e,t,n)},adoptNode:function(e){return document.adoptNode(e)},createAttribute:function(e){return document.createAttribute(e)},createElement:function(e){return document.createElement(e)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},createDocumentFragment:function(){return document.createDocumentFragment()},createTemplateElement:function(){var e=document.createElement("template");return T.ensureHTMLTemplateElement(e)},createMutationObserver:function(e){return new(window.MutationObserver||window.WebKitMutationObserver)(e)},createCustomEvent:function(e,t){return new window.CustomEvent(e,t)},dispatchEvent:function(e){document.dispatchEvent(e)},getComputedStyle:function(e){return window.getComputedStyle(e)},getElementById:function(e){return document.getElementById(e)},querySelector:function(e){return document.querySelector(e)},querySelectorAll:function(e){return document.querySelectorAll(e)},nextElementSibling:function(e){if(e.nextElementSibling)return e.nextElementSibling;for(;(e=e.nextSibling)&&1!==e.nodeType;);return e},createTemplateFromMarkup:function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.firstElementChild;if(!n||"TEMPLATE"!==n.nodeName)throw new Error("Template markup must be wrapped in a <template> element e.g. <template> \x3c!-- markup here --\x3e </template>");return T.ensureHTMLTemplateElement(n)},appendNode:function(e,t){(t||document.body).appendChild(e)},replaceNode:function(e,t,n){t.parentNode?t.parentNode.replaceChild(e,t):null!==E?E.unwrap(n).replaceChild(E.unwrap(e),E.unwrap(t)):n.replaceChild(e,t)},removeNode:function(e,t){e.parentNode?e.parentNode.removeChild(e):t&&(null!==E?E.unwrap(t).removeChild(E.unwrap(e)):t.removeChild(e))},injectStyles:function(e,t,n,r){if(r){var i=document.getElementById(r);if(i){if("style"===i.tagName.toLowerCase())return void(i.innerHTML=e);throw new Error("The provided id does not indicate a style tag.")}}var o=document.createElement("style");return o.innerHTML=e,o.type="text/css",r&&(o.id=r),t=t||document.head,n&&0<t.childNodes.length?t.insertBefore(o,t.childNodes[0]):t.appendChild(o),o}}}),define("aurelia-metadata",["exports","aurelia-pal"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Origin=e.metadata=void 0,e.decorators=function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];var n=function(e,t,n){var r=i.length;if(t){for(n=n||{value:e[t],writable:!0,configurable:!0,enumerable:!0};r--;)n=i[r](e,t,n)||n;Object.defineProperty(e,t,n)}else for(;r--;)e=i[r](e)||e;return e};return n.on=n},e.deprecated=function(a,s,e){function t(e,t,n){var r=e.constructor.name+"#"+t,i=s?{}:a||{},o="DEPRECATION - "+r;if("function"!=typeof n.value)throw new SyntaxError("Only methods can be marked as deprecated.");return i.message&&(o+=" - "+i.message),l({},n,{value:function(){if(i.error)throw new Error(o);return console.warn(o),n.value.apply(this,arguments)}})}return s?t(a,s,e):t},e.mixin=function(i){var o=Object.keys(i);return function(e){var t=function(e){for(var t="function"==typeof e?e.prototype:e,n=o.length;n--;){var r=o[n];Object.defineProperty(t,r,{value:i[r],writable:!0})}};return e?t(e):t}},e.protocol=f;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function i(e){return e&&("function"==typeof e||"object"===(void 0===e?"undefined":a(e)))}var o=e.metadata={resource:"aurelia:resource",paramTypes:"design:paramtypes",propertyType:"design:type",properties:"design:properties",get:function(e,t,n){if(i(t)){var r=o.getOwn(e,t,n);return void 0===r?o.get(e,Object.getPrototypeOf(t),n):r}},getOwn:function(e,t,n){if(i(t))return Reflect.getOwnMetadata(e,t,n)},define:function(e,t,n,r){Reflect.defineMetadata(e,t,n,r)},getOrCreateOwn:function(e,t,n,r){var i=o.getOwn(e,n,r);return void 0===i&&(i=new t,Reflect.defineMetadata(e,i,n,r)),i}},s=new Map,n=Object.freeze({moduleId:void 0,moduleMember:void 0});e.Origin=function(){function o(e,t){this.moduleId=e,this.moduleMember=t}return o.get=function(r){var i=s.get(r);return void 0===i&&t.PLATFORM.eachModule(function(e,t){if("object"===(void 0===t?"undefined":a(t)))for(var n in t){if(t[n]===r)return s.set(r,i=new o(e,n)),!0}return t===r&&(s.set(r,i=new o(e,"default")),!0)}),i||n},o.set=function(e,t){s.set(e,t)},o}();function r(){return!0}function u(){}function c(e){return void 0===e?e={}:"function"==typeof e&&(e={validate:e}),e.validate||(e.validate=r),e.compose||(e.compose=u),e}function d(t){return function(e){return!0===t(e)}}function h(n,r){return function(e){var t=r(e);if(!0!==t)throw new Error(t||n+" was not correctly implemented.")}}function f(r,i){i=c(i);var e=function e(t){var n="function"==typeof t?t.prototype:t;i.compose(n),e.assert(n),Object.defineProperty(n,"protocol:"+r,{enumerable:!1,configurable:!1,writable:!1,value:!0})};return e.validate=d(i.validate),e.assert=h(r,i.validate),e}f.create=function(n,r){r=c(r);var t="protocol:"+n,e=function(e){var t=f(n,r);return e?t(e):t};return e.decorates=function(e){return!0===e[t]},e.validate=d(r.validate),e.assert=h(n,r.validate),e}}),define("aurelia-logging",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLogger=function(e){return r[e]||new h(e)},e.addAppender=function(e){1===o.push(e)&&d()},e.removeAppender=function(t){o=o.filter(function(e){return e!==t})},e.getAppenders=function(){return[].concat(o)},e.clearAppenders=function(){o=[],function(){var e=h.prototype;for(var t in n)"none"!==t&&(e[t]=function(){})}()},e.addCustomLevel=function(e,t){if(void 0!==n[e])throw Error('Log level "'+e+'" already exists.');if(isNaN(t))throw Error("Value must be a number.");n[e]=t,0<o.length?d():h.prototype[e]=function(){}},e.removeCustomLevel=function(e){if(void 0===n[e])return;if(s(e))throw Error('Built-in log level "'+e+'" cannot be removed.');delete n[e],delete h.prototype[e]},e.setLevel=function(e){for(var t in i=e,r)r[t].setLevel(e)},e.getLevel=function(){return i};var n=e.logLevel={none:0,error:10,warn:20,info:30,debug:40},r={},o=[],i=n.none,a=["none","error","warn","info","debug"];function s(t){return 0<a.filter(function(e){return e===t}).length}function l(){return[this].concat(Array.prototype.slice.call(arguments))}function u(r){var i=n[r];return function(){if(!(this.level<i))for(var e=l.apply(this,arguments),t=o.length;t--;){var n;(n=o[t])[r].apply(n,e)}}}function c(r){var i=n[r];return function(){if(!(this.level<i))for(var e=l.apply(this,arguments),t=o.length;t--;){var n=o[t];void 0!==n[r]&&n[r].apply(n,e)}}}function d(){var e=h.prototype;for(var t in n)s(t)?"none"!==t&&(e[t]=u(t)):e[t]=c(t)}var h=e.Logger=function(){function e(e){var t=r[e];if(t)return t;(r[e]=this).id=e,this.level=i}return e.prototype.debug=function(e){},e.prototype.info=function(e){},e.prototype.warn=function(e){},e.prototype.error=function(e){},e.prototype.setLevel=function(e){this.level=e},e}()}),define("aurelia-logging-console",["exports","aurelia-logging"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleAppender=void 0;e.ConsoleAppender=function(){function e(){}return e.prototype.debug=function(e){for(var t,n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).debug.apply(t,["DEBUG ["+e.id+"]"].concat(r))},e.prototype.info=function(e){for(var t,n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).info.apply(t,["INFO ["+e.id+"]"].concat(r))},e.prototype.warn=function(e){for(var t,n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).warn.apply(t,["WARN ["+e.id+"]"].concat(r))},e.prototype.error=function(e){for(var t,n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).error.apply(t,["ERROR ["+e.id+"]"].concat(r))},e}()}),define("aurelia-loader",["exports","aurelia-path","aurelia-metadata"],function(e,l,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=e.TemplateRegistryEntry=e.TemplateDependency=void 0;var t=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=e.TemplateDependency=function(e,t){this.src=e,this.name=t},n=e.TemplateRegistryEntry=function(){function e(e){this.templateIsLoaded=!1,this.factoryIsReady=!1,this.resources=null,this.dependencies=null,this.address=e,this.onReady=null,this._template=null,this._factory=null}return e.prototype.addDependency=function(e,t){var n="string"==typeof e?(0,l.relativeToFile)(e,this.address):r.Origin.get(e).moduleId;this.dependencies.push(new u(n,t))},t(e,[{key:"template",get:function(){return this._template},set:function(e){var t,n=this.address,r=void 0,i=void 0,o=void 0;this._template=e,this.templateIsLoaded=!0,t=e.content.querySelectorAll("require"),o=this.dependencies=new Array(t.length);for(var a=0,s=t.length;a<s;++a){if(!(i=(r=t[a]).getAttribute("from")))throw new Error("<require> element in "+n+' has no "from" attribute.');o[a]=new u((0,l.relativeToFile)(i,n),r.getAttribute("as")),r.parentNode&&r.parentNode.removeChild(r)}}},{key:"factory",get:function(){return this._factory},set:function(e){this._factory=e,this.factoryIsReady=!0}}]),e}();e.Loader=function(){function e(){this.templateRegistry={}}return e.prototype.map=function(e,t){throw new Error("Loaders must implement map(id, source).")},e.prototype.normalizeSync=function(e,t){throw new Error("Loaders must implement normalizeSync(moduleId, relativeTo).")},e.prototype.normalize=function(e,t){throw new Error("Loaders must implement normalize(moduleId: string, relativeTo: string): Promise<string>.")},e.prototype.loadModule=function(e){throw new Error("Loaders must implement loadModule(id).")},e.prototype.loadAllModules=function(e){throw new Error("Loader must implement loadAllModules(ids).")},e.prototype.loadTemplate=function(e){throw new Error("Loader must implement loadTemplate(url).")},e.prototype.loadText=function(e){throw new Error("Loader must implement loadText(url).")},e.prototype.applyPluginToUrl=function(e,t){throw new Error("Loader must implement applyPluginToUrl(url, pluginName).")},e.prototype.addPlugin=function(e,t){throw new Error("Loader must implement addPlugin(pluginName, implementation).")},e.prototype.getOrCreateTemplateRegistryEntry=function(e){return this.templateRegistry[e]||(this.templateRegistry[e]=new n(e))},e}()}),define("aurelia-loader-default",["exports","aurelia-loader","aurelia-pal","aurelia-metadata"],function(e,t,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultLoader=e.TextTemplateLoader=void 0;var r=e.TextTemplateLoader=function(){function e(){}return e.prototype.loadTemplate=function(e,t){return e.loadText(t.address).then(function(e){t.template=i.DOM.createTemplateFromMarkup(e)})},e}();function a(e,t){var n=e,r=void 0,i=void 0;for(r in n.__useDefault&&(n=n.default),o.Origin.set(n,new o.Origin(t,"default")),n)"function"==typeof(i=n[r])&&o.Origin.set(i,new o.Origin(t,r));return e}var n=e.DefaultLoader=function(t){function e(){var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this));e.textPluginName="text",e.moduleRegistry=Object.create(null),e.useTemplateLoader(new r);var n=e;return e.addPlugin("template-registry-entry",{fetch:function(e){var t=n.getOrCreateTemplateRegistryEntry(e);return t.templateIsLoaded?t:n.templateLoader.loadTemplate(n,t).then(function(e){return t})}}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,t),e.prototype.useTemplateLoader=function(e){this.templateLoader=e},e.prototype.loadAllModules=function(e){for(var t=[],n=0,r=e.length;n<r;++n)t.push(this.loadModule(e[n]));return Promise.all(t)},e.prototype.loadTemplate=function(e){return this._import(this.applyPluginToUrl(e,"template-registry-entry"))},e.prototype.loadText=function(e){return this._import(this.applyPluginToUrl(e,this.textPluginName)).then(function(e){return"string"==typeof e?e:e.default})},e}(t.Loader);i.PLATFORM.Loader=n,i.PLATFORM.global.System&&i.PLATFORM.global.System.import?(i.PLATFORM.eachModule=function(e){if(System.registry)for(var t=Array.from(System.registry.keys()),n=0;n<t.length;n++)try{var r=t[n];if(e(r,System.registry.get(r)))return}catch(e){}else{var i=System._loader.modules;for(var o in i)try{if(e(o,i[o].module))return}catch(e){}}},System.set("text",System.newModule({translate:function(e){return'module.exports = "'+e.source.replace(/(["\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")+'";'}})),n.prototype._import=function(e){return System.import(e)},n.prototype.loadModule=function(e){var n=this;return System.normalize(e).then(function(t){var e=n.moduleRegistry[t];return void 0!==e?Promise.resolve(e):System.import(t).then(function(e){return a(n.moduleRegistry[t]=e,t)})})},n.prototype.map=function(e,t){var n;System.config({map:(n={},n[e]=t,n)})},n.prototype.normalizeSync=function(e,t){return System.normalizeSync(e,t)},n.prototype.normalize=function(e,t){return System.normalize(e,t)},n.prototype.applyPluginToUrl=function(e,t){return e+"!"+t},n.prototype.addPlugin=function(e,r){System.set(e,System.newModule({fetch:function(t,e){var n=r.fetch(t.address);return Promise.resolve(n).then(function(e){return t.metadata.result=e,""})},instantiate:function(e){return e.metadata.result}}))}):(i.PLATFORM.global.requirejs&&requirejs.s&&requirejs.s.contexts&&requirejs.s.contexts._&&requirejs.s.contexts._.defined?i.PLATFORM.eachModule=function(e){var t=requirejs.s.contexts._.defined;for(var n in t)try{if(e(n,t[n]))return}catch(e){}}:i.PLATFORM.eachModule=function(e){},n.prototype._import=function(n){return new Promise(function(e,t){i.PLATFORM.global.require([n],e,t)})},n.prototype.loadModule=function(n){var r=this,e=this.moduleRegistry[n];return void 0!==e?Promise.resolve(e):new Promise(function(t,e){i.PLATFORM.global.require([n],function(e){r.moduleRegistry[n]=e,t(a(e,n))},e)})},n.prototype.map=function(e,t){},n.prototype.normalize=function(e,t){return Promise.resolve(e)},n.prototype.normalizeSync=function(e,t){return e},n.prototype.applyPluginToUrl=function(e,t){return t+"!"+e},n.prototype.addPlugin=function(e,i){define(e,[],{load:function(e,t,n){var r=i.fetch(e);Promise.resolve(r).then(n)}})})}),define("aurelia-history",["exports"],function(e){"use strict";function n(e){throw new Error("History must implement "+e+"().")}Object.defineProperty(e,"__esModule",{value:!0});e.History=function(){function e(){}return e.prototype.activate=function(e){n("activate")},e.prototype.deactivate=function(){n("deactivate")},e.prototype.getAbsoluteRoot=function(){n("getAbsoluteRoot")},e.prototype.navigate=function(e,t){n("navigate")},e.prototype.navigateBack=function(){n("navigateBack")},e.prototype.setTitle=function(e){n("setTitle")},e.prototype.setState=function(e,t){n("setState")},e.prototype.getState=function(e){n("getState")},e}()}),define("aurelia-history-browser",["exports","aurelia-pal","aurelia-history"],function(e,s,t){"use strict";var n,r;function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserHistory=e.DefaultLinkHandler=e.LinkHandler=void 0,e.configure=function(e){e.singleton(t.History,u),e.transient(a,l)};var a=e.LinkHandler=function(){function e(){}return e.prototype.activate=function(e){},e.prototype.deactivate=function(){},e}(),l=e.DefaultLinkHandler=function(e){function a(){var i=o(this,e.call(this));return i.handler=function(e){var t=a.getEventInfo(e),n=t.shouldHandleEvent,r=t.href;n&&(e.preventDefault(),i.history.navigate(r))},i}return i(a,e),a.prototype.activate=function(e){e._hasPushState&&(this.history=e,s.DOM.addEventListener("click",this.handler,!0))},a.prototype.deactivate=function(){s.DOM.removeEventListener("click",this.handler)},a.getEventInfo=function(e){var t={shouldHandleEvent:!1,href:null,anchor:null},n=a.findClosestAnchor(e.target);if(!n||!a.targetIsThisWindow(n))return t;if(n.hasAttribute("download")||n.hasAttribute("router-ignore"))return t;if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return t;var r=n.getAttribute("href");t.anchor=n,t.href=r;var i=1===e.which,o=r&&!("#"===r.charAt(0)||/^[a-z]+:/i.test(r));return t.shouldHandleEvent=i&&o,t},a.findClosestAnchor=function(e){for(;e;){if("A"===e.tagName)return e;e=e.parentNode}},a.targetIsThisWindow=function(e){var t=e.getAttribute("target"),n=s.PLATFORM.global;return!t||t===n.name||"_self"===t},a}(a);var u=e.BrowserHistory=(r=n=function(n){function e(e){var t=o(this,n.call(this));return t._isActive=!1,t._checkUrlCallback=t._checkUrl.bind(t),t.location=s.PLATFORM.location,t.history=s.PLATFORM.history,t.linkHandler=e,t}return i(e,n),e.prototype.activate=function(e){if(this._isActive)throw new Error("History has already been activated.");var t=!!e.pushState;this._isActive=!0,this.options=Object.assign({},{root:"/"},this.options,e),this.root=("/"+this.options.root+"/").replace(d,"/"),this._wantsHashChange=!1!==this.options.hashChange,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=void 0;if(this._hasPushState?n="popstate":this._wantsHashChange&&(n="hashchange"),s.PLATFORM.addEventListener(n,this._checkUrlCallback),this._wantsHashChange&&t){var r=this.location,i=r.pathname.replace(/[^\/]$/,"$&/")===this.root;if(!this._hasPushState&&!i)return this.fragment=this._getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&i&&r.hash&&(this.fragment=this._getHash().replace(c,""),this.history.replaceState({},s.DOM.title,this.root+this.fragment+r.search))}if(this.fragment||(this.fragment=this._getFragment()),this.linkHandler.activate(this),!this.options.silent)return this._loadUrl()},e.prototype.deactivate=function(){s.PLATFORM.removeEventListener("popstate",this._checkUrlCallback),s.PLATFORM.removeEventListener("hashchange",this._checkUrlCallback),this._isActive=!1,this.linkHandler.deactivate()},e.prototype.getAbsoluteRoot=function(){var e,t,n;return""+(e=this.location.protocol,t=this.location.hostname,n=this.location.port,e+"//"+t+(n?":"+n:""))+this.root},e.prototype.navigate=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.trigger,r=void 0===n||n,i=t.replace,o=void 0!==i&&i;if(e&&f.test(e))return this.location.href=e,!0;if(!this._isActive)return!1;if(e=this._getFragment(e||""),this.fragment===e&&!o)return!1;this.fragment=e;var a=this.root+e;return""===e&&"/"!==a&&(a=a.slice(0,-1)),this._hasPushState?(a=a.replace("//","/"),this.history[o?"replaceState":"pushState"]({},s.DOM.title,a)):this._wantsHashChange?function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}(this.location,e,o):this.location.assign(a),!r||this._loadUrl(e)},e.prototype.navigateBack=function(){this.history.back()},e.prototype.setTitle=function(e){s.DOM.title=e},e.prototype.setState=function(e,t){var n=Object.assign({},this.history.state),r=this.location,i=r.pathname,o=r.search,a=r.hash;n[e]=t,this.history.replaceState(n,null,""+i+o+a)},e.prototype.getState=function(e){return Object.assign({},this.history.state)[e]},e.prototype._getHash=function(){return this.location.hash.substr(1)},e.prototype._getFragment=function(e,t){var n=void 0;return e||(this._hasPushState||!this._wantsHashChange||t?(e=this.location.pathname+this.location.search,n=this.root.replace(h,""),e.indexOf(n)||(e=e.substr(n.length))):e=this._getHash()),"/"+e.replace(c,"")},e.prototype._checkUrl=function(){this._getFragment()!==this.fragment&&this._loadUrl()},e.prototype._loadUrl=function(e){var t=this.fragment=this._getFragment(e);return!!this.options.routeHandler&&this.options.routeHandler(t)},e}(t.History),n.inject=[a],r),c=/^#?\/*|\s+$/g,d=/^\/+|\/+$/g,h=/\/$/,f=/^([a-z][a-z0-9+\-.]*:)?\/\//i}),define("aurelia-framework",["exports","aurelia-dependency-injection","aurelia-binding","aurelia-metadata","aurelia-templating","aurelia-loader","aurelia-task-queue","aurelia-path","aurelia-pal","aurelia-logging"],function(t,i,n,r,s,o,a,u,l,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogManager=t.FrameworkConfiguration=t.Aurelia=void 0,Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}),Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})}),Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}),Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}),Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}),Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}),Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})}),Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e);t.Aurelia=function(){function r(e,t,n){this.loader=e||new l.PLATFORM.Loader,this.container=t||(new i.Container).makeGlobal(),this.resources=n||new s.ViewResources,this.use=new g(this),this.logger=c.getLogger("aurelia"),this.hostConfigured=!1,this.host=null,this.use.instance(r,this),this.use.instance(o.Loader,this.loader),this.use.instance(s.ViewResources,this.resources)}return r.prototype.start=function(){var n=this;return this._started?this._started:(this.logger.info("Aurelia Starting"),this._started=this.use.apply().then(function(){if(l.DOM.addEventListener("submit",function(e){var t=e.target,n=t.action;"form"!==t.tagName.toLowerCase()||n||e.preventDefault()}),!n.container.hasResolver(s.BindingLanguage)){var e="You must configure Aurelia with a BindingLanguage implementation.";throw n.logger.error(e),new Error(e)}n.logger.info("Aurelia Started");var t=l.DOM.createCustomEvent("aurelia-started",{bubbles:!0,cancelable:!0});return l.DOM.dispatchEvent(t),n}))},r.prototype.enhance=function(){var n=this,r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return this._configureHost(e||l.DOM.querySelectorAll("body")[0]),new Promise(function(e){var t=n.container.get(s.TemplatingEngine);n.root=t.enhance({container:n.container,element:n.host,resources:n.resources,bindingContext:r}),n.root.attached(),n._onAureliaComposed(),e(n)})},r.prototype.setRoot=function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r={};this.root&&this.root.viewModel&&this.root.viewModel.router&&(this.root.viewModel.router.deactivate(),this.root.viewModel.router.reset()),this._configureHost(n);var i=this.container.get(s.TemplatingEngine);return delete this.container.get(s.CompositionTransaction).initialComposition,e||(e=this.configModuleId?(0,u.relativeToFile)("./app",this.configModuleId):"app"),r.viewModel=e,r.container=r.childContainer=this.container,r.viewSlot=this.hostSlot,r.host=this.host,i.compose(r).then(function(e){return t.root=e,r.viewSlot.attached(),t._onAureliaComposed(),t})},r.prototype._configureHost=function(e){if(!this.hostConfigured){if(e=e||this.host,this.host=e&&"string"!=typeof e?e:l.DOM.getElementById(e||"applicationHost"),!this.host)throw new Error("No applicationHost was specified.");this.hostConfigured=!0,(this.host.aurelia=this).hostSlot=new s.ViewSlot(this.host,!0),this.hostSlot.transformChildNodesIntoView(),this.container.registerInstance(l.DOM.boundary,this.host)}},r.prototype._onAureliaComposed=function(){var e=l.DOM.createCustomEvent("aurelia-composed",{bubbles:!0,cancelable:!0});setTimeout(function(){return l.DOM.dispatchEvent(e)},1)},r}();var d=c.getLogger("aurelia"),h=/\.[^/.]+$/;function f(t,n){var r=void 0;return function e(){return(r=n.shift())?Promise.resolve(r(t)).then(e):Promise.resolve()}()}function p(t,n,r){var i=t.container.get(s.ViewEngine);return Promise.all(Object.keys(n).map(function(e){return function(r){var e=r.moduleId,i=v(e);o(e)&&(e=a(e));return t.loader.normalize(e,r.relativeTo).then(function(e){return{name:r.moduleId,importId:o(r.moduleId)?(t=e,n=i,a(t)+"."+n):e};var t,n})}(n[e])})).then(function(e){var t=[],n=[];return e.forEach(function(e){t.push(void 0),n.push(e.importId)}),i.importViewResources(n,t,r)});function o(e){var t=v(e);return!!t&&(""!==t&&(".js"!==t&&".ts"!==t))}function a(e){return e.replace(h,"")}}function v(e){var t=e.match(h);if(t&&0<t.length)return t[0].split(".")[1]}function m(e){if(e.processed)throw new Error("This config instance has already been applied. To load more plugins or global resources, create a new FrameworkConfiguration instance.")}var g=function(){function e(e){var t=this;this.aurelia=e,this.container=e.container,this.info=[],this.processed=!1,this.preTasks=[],this.postTasks=[],this.resourcesToLoad={},this.preTask(function(){return e.loader.normalize("aurelia-bootstrapper").then(function(e){return t.bootstrapperName=e})}),this.postTask(function(){return p(e,t.resourcesToLoad,e.resources)})}return e.prototype.instance=function(e,t){return this.container.registerInstance(e,t),this},e.prototype.singleton=function(e,t){return this.container.registerSingleton(e,t),this},e.prototype.transient=function(e,t){return this.container.registerTransient(e,t),this},e.prototype.preTask=function(e){return m(this),this.preTasks.push(e),this},e.prototype.postTask=function(e){return m(this),this.postTasks.push(e),this},e.prototype.feature=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=/\/index$/i.test(e),r=n||v(e)?e:e+"/index",i=n?e.substr(0,e.length-6):e;return this.plugin({moduleId:r,resourcesRelativeTo:[i,""],config:t})},e.prototype.globalResources=function(e){m(this);for(var t=Array.isArray(e)?e:arguments,n=void 0,r=this.resourcesRelativeTo||["",""],i=0,o=t.length;i<o;++i){if("string"!=typeof(n=t[i]))throw new Error("Invalid resource path ["+n+"]. Resources must be specified as relative module IDs.");var a=r[0],s=r[1],l=n;(n.startsWith("./")||n.startsWith("../"))&&""!==a&&(l=(0,u.join)(a,n)),this.resourcesToLoad[l]={moduleId:l,relativeTo:s}}return this},e.prototype.globalName=function(e,t){return m(this),this.resourcesToLoad[e]={moduleId:t,relativeTo:""},this},e.prototype.plugin=function(e,t){return m(this),"string"==typeof e?this.plugin({moduleId:e,resourcesRelativeTo:[e,""],config:t||{}}):(this.info.push(e),this)},e.prototype._addNormalizedPlugin=function(t,e){var n=this,r={moduleId:t,resourcesRelativeTo:[t,""],config:e||{}};return this.plugin(r),this.preTask(function(){var e=[t,n.bootstrapperName];return r.moduleId=t,r.resourcesRelativeTo=e,Promise.resolve()}),this},e.prototype.defaultBindingLanguage=function(){return this._addNormalizedPlugin("aurelia-templating-binding")},e.prototype.router=function(){return this._addNormalizedPlugin("aurelia-templating-router")},e.prototype.history=function(){return this._addNormalizedPlugin("aurelia-history-browser")},e.prototype.defaultResources=function(){return this._addNormalizedPlugin("aurelia-templating-resources")},e.prototype.eventAggregator=function(){return this._addNormalizedPlugin("aurelia-event-aggregator")},e.prototype.basicConfiguration=function(){return this.defaultBindingLanguage().defaultResources().eventAggregator()},e.prototype.standardConfiguration=function(){return this.basicConfiguration().history().router()},e.prototype.developmentLogging=function(){var t=this;return this.preTask(function(){return t.aurelia.loader.normalize("aurelia-logging-console",t.bootstrapperName).then(function(e){return t.aurelia.loader.loadModule(e).then(function(e){c.addAppender(new e.ConsoleAppender),c.setLevel(c.logLevel.debug)})})}),this},e.prototype.apply=function(){var i=this;return this.processed?Promise.resolve():f(this,this.preTasks).then(function(){var t=i.aurelia.loader,n=i.info,r=void 0;return function e(){return(r=n.shift())?function(t,n,r){d.debug("Loading plugin "+r.moduleId+"."),t.resourcesRelativeTo=r.resourcesRelativeTo;var e=r.moduleId;return 1<r.resourcesRelativeTo.length?n.normalize(r.moduleId,r.resourcesRelativeTo[1]).then(function(e){return i(e)}):i(e);function i(e){return n.loadModule(e).then(function(e){if("configure"in e)return Promise.resolve(e.configure(t,r.config||{})).then(function(){t.resourcesRelativeTo=null,d.debug("Configured plugin "+r.moduleId+".")});t.resourcesRelativeTo=null,d.debug("Loaded plugin "+r.moduleId+".")})}}(i,t,r).then(e):(i.processed=!0,Promise.resolve())}().then(function(){return f(i,i.postTasks)})})},e}();t.FrameworkConfiguration=g;t.LogManager=c}),define("aurelia-event-aggregator",["exports","aurelia-logging"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventAggregator=void 0,e.includeEventsIn=n,e.configure=function(e){e.instance(s,n(e.aurelia))};var r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(t).getLogger("event-aggregator"),i=function(){function e(e,t){this.messageType=e,this.callback=t}return e.prototype.handle=function(e){e instanceof this.messageType&&this.callback.call(null,e)},e}();function o(e,t,n){try{e(t,n)}catch(e){r.error(e)}}function a(e,t){try{e.handle(t)}catch(e){r.error(e)}}var s=e.EventAggregator=function(){function e(){this.eventLookup={},this.messageHandlers=[]}return e.prototype.publish=function(e,t){var n=void 0,r=void 0;if(!e)throw new Error("Event was invalid.");if("string"==typeof e){if(n=this.eventLookup[e])for(r=(n=n.slice()).length;r--;)o(n[r],t,e)}else for(r=(n=this.messageHandlers.slice()).length;r--;)a(n[r],e)},e.prototype.subscribe=function(e,t){var n=void 0,r=void 0;if(!e)throw new Error("Event channel/type was invalid.");return"string"==typeof e?(n=t,r=this.eventLookup[e]||(this.eventLookup[e]=[])):(n=new i(e,t),r=this.messageHandlers),r.push(n),{dispose:function(){var e=r.indexOf(n);-1!==e&&r.splice(e,1)}}},e.prototype.subscribeOnce=function(e,n){var r=this.subscribe(e,function(e,t){return r.dispose(),n(e,t)});return r},e}();function n(e){var n=new s;return e.subscribeOnce=function(e,t){return n.subscribeOnce(e,t)},e.subscribe=function(e,t){return n.subscribe(e,t)},e.publish=function(e,t){n.publish(e,t)},n}}),define("aurelia-dependency-injection",["exports","aurelia-metadata","aurelia-pal"],function(e,s,i){"use strict";var t,n,r,o,a,l,u,c;Object.defineProperty(e,"__esModule",{value:!0}),e.Container=e.InvocationHandler=e._emptyParameters=e.SingletonRegistration=e.TransientRegistration=e.FactoryInvoker=e.NewInstance=e.Factory=e.StrategyResolver=e.Parent=e.Optional=e.All=e.Lazy=e.resolver=void 0,e.getDecoratorDependencies=b,e.lazy=function(i){return function(e,t,n){var r=b(e,"lazy");r[n]=h.of(i)}},e.all=function(i){return function(e,t,n){var r=b(e,"all");r[n]=f.of(i)}},e.optional=function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0],t=function(i){return function(e,t,n){var r=b(e,"optional");r[n]=p.of(r[n],i)}};if("boolean"==typeof e)return t(e);return t(!0)},e.parent=function(e,t,n){var r=b(e,"parent");r[n]=v.of(r[n])},e.factory=function(o,a){return function(e,t,n){var r=b(e,"factory"),i=g.of(o);r[n]=a?i.as(a):i}},e.newInstance=function(e){for(var t=arguments.length,o=Array(1<t?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];var r=function(i){return function(e,t,n){var r=b(e,"newInstance");r[n]=y.of.apply(y,[r[n]].concat(o)),i&&r[n].as(i)}};if(1<=arguments.length)return r(e);return r()},e.invoker=function(t){return function(e){s.metadata.define(s.metadata.invoker,t,e)}},e.invokeAsFactory=function(e){var t=function(e){s.metadata.define(s.metadata.invoker,w.instance,e)};return e?t(e):t},e.registration=x,e.transient=function(e){return x(new _(e))},e.singleton=function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return x(new k(e,t))},e.autoinject=function(e){var t=function(e){var t=e.inject?e.inject.slice():null,n=s.metadata.getOwn(s.metadata.paramTypes,e)||T;if(t){for(var r=0;r<n.length;r++)if(t[r]&&t[r]!==n[r]){var i=t.indexOf(n[r]);-1<i&&t.splice(i,1),t.splice(-1<i&&i<r?r-1:r,0,n[r])}else t[r]||(t[r]=n[r]);e.inject=t}else e.inject=n};return e?t(e):t},e.inject=function(){for(var e=arguments.length,o=Array(e),t=0;t<e;t++)o[t]=arguments[t];return function(e,t,n){if("number"==typeof n&&1===o.length){var r=e.inject;if("function"==typeof r)throw new Error('Decorator inject cannot be used with "inject()".  Please use an array instead.');return r||(r=s.metadata.getOwn(s.metadata.paramTypes,e).slice(),e.inject=r),void(r[n]=o[0])}if(n){var i=n.value;i.inject=o}else e.inject=o}};var d=e.resolver=s.protocol.create("aurelia:resolver",function(e){return"function"==typeof e.get||"Resolvers must implement: get(container: Container, key: any): any"}),h=e.Lazy=d()(t=function(){function t(e){this._key=e}return t.prototype.get=function(e){var t=this;return function(){return e.get(t._key)}},t.of=function(e){return new t(e)},t}())||t,f=e.All=d()(n=function(){function t(e){this._key=e}return t.prototype.get=function(e){return e.getAll(this._key)},t.of=function(e){return new t(e)},t}())||n,p=e.Optional=d()(r=function(){function t(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];this._key=e,this._checkParent=t}return t.prototype.get=function(e){return e.hasResolver(this._key,this._checkParent)?e.get(this._key):null},t.of=function(e){return new t(e,arguments.length<=1||void 0===arguments[1]||arguments[1])},t}())||r,v=e.Parent=d()(o=function(){function t(e){this._key=e}return t.prototype.get=function(e){return e.parent?e.parent.get(this._key):null},t.of=function(e){return new t(e)},t}())||o,m=e.StrategyResolver=d()(a=function(){function e(e,t){this.strategy=e,this.state=t}return e.prototype.get=function(e,t){switch(this.strategy){case 0:return this.state;case 1:var n=e.invoke(this.state);return this.state=n,this.strategy=0,n;case 2:return e.invoke(this.state);case 3:return this.state(e,t,this);case 4:return this.state[0].get(e,t);case 5:return e.get(this.state);default:throw new Error("Invalid strategy: "+this.strategy)}},e}())||a,g=e.Factory=d()(l=function(){function t(e){this._key=e}return t.prototype.get=function(r){var i=this;return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.invoke(i._key,t)}},t.of=function(e){return new t(e)},t}())||l,y=e.NewInstance=d()(u=function(){function i(e){this.key=e,this.asKey=e;for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.dynamicDependencies=n}return i.prototype.get=function(t){var e=0<this.dynamicDependencies.length?this.dynamicDependencies.map(function(e){return e["protocol:aurelia:resolver"]?e.get(t):t.get(e)}):void 0,n=t.invoke(this.key,e);return t.registerInstance(this.asKey,n),n},i.prototype.as=function(e){return this.asKey=e,this},i.of=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new(Function.prototype.bind.apply(i,[null].concat([e],n)))},i}())||u;function b(e,t){var n=e.inject;if("function"==typeof n)throw new Error("Decorator "+t+' cannot be used with "inject()".  Please use an array instead.');return n||(n=s.metadata.getOwn(s.metadata.paramTypes,e).slice(),e.inject=n),n}var w=e.FactoryInvoker=function(){function e(){}return e.prototype.invoke=function(e,t,n){for(var r=n.length,i=new Array(r);r--;)i[r]=e.get(n[r]);return t.apply(void 0,i)},e.prototype.invokeWithDynamicDependencies=function(e,t,n,r){for(var i=n.length,o=new Array(i);i--;)o[i]=e.get(n[i]);return void 0!==r&&(o=o.concat(r)),t.apply(void 0,o)},e}();function x(t){return function(e){s.metadata.define(s.metadata.registration,t,e)}}w.instance=new w;var _=e.TransientRegistration=function(){function e(e){this._key=e}return e.prototype.registerResolver=function(e,t,n){var r=e.getResolver(this._key||t);return void 0===r?e.registerTransient(this._key||t,n):r},e}(),k=e.SingletonRegistration=function(){function e(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];"boolean"==typeof e?this._registerInChild=e:(this._key=e,this._registerInChild=t)}return e.prototype.registerResolver=function(e,t,n){var r=this._registerInChild?e:e.root,i=r.getResolver(this._key||t);return void 0===i?r.registerSingleton(this._key||t,n):i},e}();function S(e){if(null==e)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}var T=e._emptyParameters=Object.freeze([]);s.metadata.registration="aurelia:registration",s.metadata.invoker="aurelia:invoker";var C=d.decorates,O=e.InvocationHandler=function(){function e(e,t,n){this.fn=e,this.invoker=t,this.dependencies=n}return e.prototype.invoke=function(e,t){return void 0!==t?this.invoker.invokeWithDynamicDependencies(e,this.fn,this.dependencies,t):this.invoker.invoke(e,this.fn,this.dependencies)},e}();function E(e,t,n,r){for(var i=n.length,o=new Array(i),a=void 0;i--;){if(null==(a=n[i]))throw new Error("Constructor Parameter with index "+i+" cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?");o[i]=e.get(a)}return void 0!==r&&(o=o.concat(r)),Reflect.construct(t,o)}var M=((c={})[0]={invoke:function(e,t){return new t},invokeWithDynamicDependencies:E},c[1]={invoke:function(e,t,n){return new t(e.get(n[0]))},invokeWithDynamicDependencies:E},c[2]={invoke:function(e,t,n){return new t(e.get(n[0]),e.get(n[1]))},invokeWithDynamicDependencies:E},c[3]={invoke:function(e,t,n){return new t(e.get(n[0]),e.get(n[1]),e.get(n[2]))},invokeWithDynamicDependencies:E},c[4]={invoke:function(e,t,n){return new t(e.get(n[0]),e.get(n[1]),e.get(n[2]),e.get(n[3]))},invokeWithDynamicDependencies:E},c[5]={invoke:function(e,t,n){return new t(e.get(n[0]),e.get(n[1]),e.get(n[2]),e.get(n[3]),e.get(n[4]))},invokeWithDynamicDependencies:E},c.fallback={invoke:E,invokeWithDynamicDependencies:E},c);e.Container=function(){function r(e){void 0===e&&(e={}),this._configuration=e,this._onHandlerCreated=e.onHandlerCreated,this._handlers=e.handlers||(e.handlers=new Map),this._resolvers=new Map,(this.root=this).parent=null}return r.prototype.makeGlobal=function(){return r.instance=this},r.prototype.setHandlerCreatedCallback=function(e){this._onHandlerCreated=e,this._configuration.onHandlerCreated=e},r.prototype.registerInstance=function(e,t){return this.registerResolver(e,new m(0,void 0===t?e:t))},r.prototype.registerSingleton=function(e,t){return this.registerResolver(e,new m(1,void 0===t?e:t))},r.prototype.registerTransient=function(e,t){return this.registerResolver(e,new m(2,void 0===t?e:t))},r.prototype.registerHandler=function(e,t){return this.registerResolver(e,new m(3,t))},r.prototype.registerAlias=function(e,t){return this.registerResolver(t,new m(5,e))},r.prototype.registerResolver=function(e,t){S(e);var n=this._resolvers,r=n.get(e);return void 0===r?n.set(e,t):4===r.strategy?r.state.push(t):n.set(e,new m(4,[r,t])),t},r.prototype.autoRegister=function(e,t){if("function"==typeof(t=void 0===t?e:t)){var n=s.metadata.get(s.metadata.registration,t);return void 0===n?this.registerResolver(e,new m(1,t)):n.registerResolver(this,e,t)}return this.registerResolver(e,new m(0,t))},r.prototype.autoRegisterAll=function(e){for(var t=e.length;t--;)this.autoRegister(e[t])},r.prototype.unregister=function(e){this._resolvers.delete(e)},r.prototype.hasResolver=function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return S(e),this._resolvers.has(e)||t&&null!==this.parent&&this.parent.hasResolver(e,t)},r.prototype.getResolver=function(e){return this._resolvers.get(e)},r.prototype.get=function(e){if(S(e),e===r)return this;if(C(e))return e.get(this,e);var t=this._resolvers.get(e);if(void 0===t){if(null===this.parent)return this.autoRegister(e).get(this,e);var n=s.metadata.get(s.metadata.registration,e);return void 0===n?this.parent._get(e):n.registerResolver(this,e,e).get(this,e)}return t.get(this,e)},r.prototype._get=function(e){var t=this._resolvers.get(e);return void 0===t?null===this.parent?this.autoRegister(e).get(this,e):this.parent._get(e):t.get(this,e)},r.prototype.getAll=function(e){S(e);var t=this._resolvers.get(e);if(void 0===t)return null===this.parent?T:this.parent.getAll(e);if(4===t.strategy){for(var n=t.state,r=n.length,i=new Array(r);r--;)i[r]=n[r].get(this,e);return i}return[t.get(this,e)]},r.prototype.createChild=function(){var e=new r(this._configuration);return e.root=this.root,e.parent=this,e},r.prototype.invoke=function(t,e){try{var n=this._handlers.get(t);return void 0===n&&(n=this._createInvocationHandler(t),this._handlers.set(t,n)),n.invoke(this,e)}catch(e){throw new i.AggregateError("Error invoking "+t.name+". Check the inner error for details.",e,!0)}},r.prototype._createInvocationHandler=function(e){var t,n=void 0;if(void 0===e.inject)n=s.metadata.getOwn(s.metadata.paramTypes,e)||T;else{n=[];for(var r=e;"function"==typeof r;){var i;(i=n).push.apply(i,(t=r).hasOwnProperty("inject")?"function"==typeof t.inject?t.inject():t.inject:[]),r=Object.getPrototypeOf(r)}}var o=s.metadata.getOwn(s.metadata.invoker,e)||M[n.length]||M.fallback,a=new O(e,o,n);return void 0!==this._onHandlerCreated?this._onHandlerCreated(a):a},r}()}),define("aurelia-bootstrapper",["module","exports","aurelia-pal","aurelia-polyfills"],function(n,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.starting=void 0,e.bootstrap=d;var s=[],t=void 0,r=new Promise(function(e){return t=e}),l=i.PLATFORM.global,o="undefined"!=typeof process&&!process.browser;function a(){if(i.PLATFORM.Loader)return Promise.resolve(new i.PLATFORM.Loader);if("undefined"==typeof AURELIA_WEBPACK_2_0){if("undefined"!=typeof __webpack_require__){var e=__webpack_require__(require.resolve("aurelia-loader-webpack"));return Promise.resolve(new e.WebpackLoader)}if(l.System&&"function"==typeof l.System.config)return l.System.normalize("aurelia-bootstrapper").then(function(e){return l.System.normalize("aurelia-loader-default",e)}).then(function(e){return l.System.import(e).then(function(e){return new e.DefaultLoader})});if("function"==typeof l.require&&"string"==typeof l.require.version)return new Promise(function(t,e){return l.require(["aurelia-loader-default"],function(e){return t(new e.DefaultLoader)},e)});if(o&&void 0!==n&&void 0!==n.require){var t=n.require("aurelia-loader-nodejs");return Promise.resolve(new t.NodeJsLoader)}}return Promise.reject("No PLATFORM.Loader is defined and there is neither a System API (ES6) or a Require API (AMD) globally available to load your app.")}function u(n){var r=function(t,e){return n.normalize(t,e).then(function(e){return n.map(t,e),e})};return function(e){var t=void 0,n=o&&("renderer"===process.type||process.versions["node-webkit"]);if(o&&!n)t="nodejs";else if("undefined"!=typeof window)t="browser";else{if("undefined"==typeof self)throw new Error("Could not determine platform implementation to load.");t="worker"}return e.loadModule("aurelia-pal-"+t).then(function(e){return"nodejs"===t&&!i.isInitialized&&e.globalize()||e.initialize()})}(n).then(function(){return n.normalize("aurelia-bootstrapper")}).then(function(e){var t=r(i.PLATFORM.moduleName("aurelia-framework",{exports:["Aurelia"]}),e);return Promise.all([t,t.then(function(e){return r("aurelia-dependency-injection",e)}),r("aurelia-router",e),r("aurelia-logging-console",e)])}).then(function(e){var t=e[0];return n.loadModule(t)}).then(function(e){return t(function(){return new e.Aurelia(n)})})}function c(e,t,n){return n.host=e,n.configModuleId=t||null,t?n.loader.loadModule(t).then(function(e){if(!e.configure)throw new Error("Cannot initialize module '"+t+"' without a configure function.");return e.configure(n)}):(n.use.standardConfiguration().developmentLogging(),n.start().then(function(){return n.setRoot()}))}function d(t){var e=r.then(function(e){return t(e())});return s&&s.push(e),e}e.starting=(l.document&&"complete"!==l.document.readyState?new Promise(function(e){function t(){l.document.removeEventListener("DOMContentLoaded",t),l.removeEventListener("load",t),e()}l.document.addEventListener("DOMContentLoaded",t),l.addEventListener("load",t)}):Promise.resolve()).then(a).then(u).then(function(){for(var e=l.document.querySelectorAll("[aurelia-app],[data-aurelia-app]"),t=0,n=e.length;t<n;++t){var r=e[t],i=r.getAttribute("aurelia-app")||r.getAttribute("data-aurelia-app");d(c.bind(null,r,i))}var o=console.error.bind(console),a=s.map(function(e){return e.catch(o)});return s=null,Promise.all(a)})}),define("aurelia-binding",["exports","aurelia-logging","aurelia-pal","aurelia-task-queue","aurelia-metadata"],function(e,t,s,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSetObserver=e.BindingEngine=e.NameExpression=e.Listener=e.ListenerExpression=e.BindingBehaviorResource=e.ValueConverterResource=e.Call=e.CallExpression=e.Binding=e.BindingExpression=e.ObjectObservationAdapter=e.ObserverLocator=e.SVGAnalyzer=e.presentationAttributes=e.presentationElements=e.elements=e.ComputedExpression=e.ClassObserver=e.SelectValueObserver=e.CheckedObserver=e.ValueAttributeObserver=e.StyleObserver=e.DataAttributeObserver=e.dataAttributeAccessor=e.XLinkAttributeObserver=e.SetterObserver=e.PrimitiveObserver=e.propertyAccessor=e.DirtyCheckProperty=e.DirtyChecker=e.EventManager=e.delegationStrategy=e.getMapObserver=e.ParserImplementation=e.Parser=e.Scanner=e.Lexer=e.Token=e.bindingMode=e.ExpressionCloner=e.Unparser=e.LiteralObject=e.LiteralArray=e.LiteralString=e.LiteralPrimitive=e.PrefixNot=e.Binary=e.CallFunction=e.CallMember=e.CallScope=e.AccessKeyed=e.AccessMember=e.AccessScope=e.AccessThis=e.Conditional=e.Assign=e.ValueConverter=e.BindingBehavior=e.Chain=e.Expression=e.getArrayObserver=e.CollectionLengthObserver=e.ModifyCollectionObserver=e.ExpressionObserver=e.sourceContext=e.targetContext=void 0,e.camelCase=C,e.createOverrideContext=O,e.getContextFor=E,e.createScopeForTest=function(e,t){if(t)return{bindingContext:e,overrideContext:O(e,O(t))};return{bindingContext:e,overrideContext:O(e)}},e.connectable=D,e.enqueueBindingConnect=W,e.subscriberCollection=ee,e.calcSplices=oe,e.mergeSplice=ae,e.projectArraySplices=se,e.getChangeRecords=le,e.cloneExpression=function(e){var t=new He;return e.accept(t)},e.hasDeclaredDependencies=En,e.declarePropertyDependencies=function(e,t,n){Object.getOwnPropertyDescriptor(e.prototype,t).get.dependencies=n},e.computedFrom=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e,t,n){return n.get.dependencies=r,n}},e.createComputedObserver=Pn,e.valueConverter=function(t){if(void 0===t||"string"==typeof t)return function(e){r.metadata.define(r.metadata.resource,new Un(t),e)};r.metadata.define(r.metadata.resource,new Un,t)},e.bindingBehavior=function(t){if(void 0===t||"string"==typeof t)return function(e){r.metadata.define(r.metadata.resource,new qn(t),e)};r.metadata.define(r.metadata.resource,new qn,t)},e.observable=function(r,e,t){function i(e,n,t,r){var i=void 0===n;i&&(e=e.prototype,n="string"==typeof r?r:r.name);var o="_"+n,a={configurable:!0,enumerable:!1,writable:!0},s=r&&r.changeHandler||n+"Changed";if(t?"function"==typeof t.initializer&&(a.value=t.initializer()):t={},"enumerable"in t||(t.enumerable=!0),delete t.value,delete t.writable,delete t.initializer,Reflect.defineProperty(e,o,a),t.get=function(){return this[o]},t.set=function(e){var t=this[o];e!==t&&(this[o]=e,Reflect.defineProperty(this,o,{enumerable:!1}),this[s]&&this[s](e,t,n))},t.get.dependencies=[o],!i)return t;Reflect.defineProperty(e,n,t)}if(void 0===e)return function(e,t,n){return i(e,t,n,r)};return i(r,e,t)},e.connectBindingToSignal=Jn,e.signalBindings=function(e){Qn.hasOwnProperty(e)&&Qn[e]++};var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(t);var i,a,l,u,c,d,h,f,p,v,m,g,y,b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},w=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=e.targetContext="Binding:target",S=e.sourceContext="Binding:source",T=Object.create(null);function C(e){if(e in T)return T[e];var t=e.charAt(0).toLowerCase()+e.slice(1).replace(/[_.-](\w|$)/g,function(e,t){return t.toUpperCase()});return T[e]=t}function O(e,t){return{bindingContext:e,parentOverrideContext:t||null}}function E(e,t,n){var r=t.overrideContext;if(n){for(;n&&r;)n--,r=r.parentOverrideContext;if(n||!r)return;return e in r?r:r.bindingContext}for(;r&&!(e in r)&&!(r.bindingContext&&e in r.bindingContext);)r=r.parentOverrideContext;return r?e in r?r:r.bindingContext:t.bindingContext||t.overrideContext}for(var M=[],P=[],A=0;A<100;A++)M.push("_observer"+A),P.push("_observerVersion"+A);function R(e){for(var t=void 0===this._observerSlots?0:this._observerSlots,n=t;n--&&this[M[n]]!==e;);if(-1===n){for(n=0;this[M[n]];)n++;(this[M[n]]=e).subscribe(S,this),n===t&&(this._observerSlots=n+1)}void 0===this._version&&(this._version=0),this[P[n]]=this._version}function j(e,t){var n=this.observerLocator.getObserver(e,t);R.call(this,n)}function I(e){var t=this.observerLocator.getArrayObserver(e);R.call(this,t)}function L(e){for(var t=this._observerSlots;t--;)if(e||this[P[t]]!==this._version){var n=this[M[t]];this[M[t]]=null,n&&n.unsubscribe(S,this)}}function D(){return function(e){e.prototype.observeProperty=j,e.prototype.observeArray=I,e.prototype.unobserve=L,e.prototype.addObserver=R}}var N=[],B={},F=0,V=100,z=15,H=!1,U=0;function q(e){for(var t=N.length,n=0;n<t;){var r=N[n];if(B[r.__connectQueueId]=!1,r.connect(!0),++n%100==0&&s.PLATFORM.performance.now()-e>z)break}N.splice(0,n),N.length?s.PLATFORM.requestAnimationFrame(q):(H=!1,U=0)}function W(e){if(U<V)U++,e.connect(!1);else{var t=e.__connectQueueId;void 0===t&&(t=F,F++,e.__connectQueueId=t),B[t]||(N.push(e),B[t]=!0)}H||(H=!0,s.PLATFORM.requestAnimationFrame(q))}function G(e,t){return!this.hasSubscriber(e,t)&&(this._context0?this._context1?this._context2?this._contextsRest?(this._contextsRest.push(e),this._callablesRest.push(t)):(this._contextsRest=[e],this._callablesRest=[t]):(this._context2=e,this._callable2=t):(this._context1=e,this._callable1=t):(this._context0=e,this._callable0=t),!0)}function Y(e,t){if(this._context0===e&&this._callable0===t)return this._context0=null,!(this._callable0=null);if(this._context1===e&&this._callable1===t)return this._context1=null,!(this._callable1=null);if(this._context2===e&&this._callable2===t)return this._context2=null,!(this._callable2=null);var n=this._callablesRest;if(void 0===n||0===n.length)return!1;for(var r=this._contextsRest,i=0;(n[i]!==t||r[i]!==e)&&n.length>i;)i++;return!(i>=n.length)&&(r.splice(i,1),n.splice(i,1),!0)}var X=[],Z=[],K=[];function $(e,t){var n=this._context0,r=this._callable0,i=this._context1,o=this._callable1,a=this._context2,s=this._callable2,l=this._contextsRest?this._contextsRest.length:0,u=void 0,c=void 0,d=void 0,h=void 0;if(l){for(d=K.length;d--&&K[d];);for(d<0?(d=K.length,u=[],c=[],K.push(!0),X.push(u),Z.push(c)):(K[d]=!0,u=X[d],c=Z[d]),h=l;h--;)u[h]=this._contextsRest[h],c[h]=this._callablesRest[h]}if(n&&(r?r.call(n,e,t):n(e,t)),i&&(o?o.call(i,e,t):i(e,t)),a&&(s?s.call(a,e,t):a(e,t)),l){for(h=0;h<l;h++){var f=c[h],p=u[h];f?f.call(p,e,t):p(e,t),u[h]=null,c[h]=null}K[d]=!1}}function Q(){return!!(this._context0||this._context1||this._context2||this._contextsRest&&this._contextsRest.length)}function J(e,t){if(this._context0===e&&this._callable0===t||this._context1===e&&this._callable1===t||this._context2===e&&this._callable2===t)return!0;var n=void 0,r=this._contextsRest;if(!r||0===(n=r.length))return!1;for(var i=this._callablesRest;n--;)if(r[n]===e&&i[n]===t)return!0;return!1}function ee(){return function(e){e.prototype.addSubscriber=G,e.prototype.removeSubscriber=Y,e.prototype.callSubscribers=$,e.prototype.hasSubscribers=Q,e.prototype.hasSubscriber=J}}var te=e.ExpressionObserver=D()(i=ee()(i=function(){function e(e,t,n,r){this.scope=e,this.expression=t,this.observerLocator=n,this.lookupFunctions=r}return e.prototype.getValue=function(){return this.expression.evaluate(this.scope,this.lookupFunctions)},e.prototype.setValue=function(e){this.expression.assign(this.scope,e)},e.prototype.subscribe=function(e,t){var n=this;if(this.hasSubscribers()||(this.oldValue=this.expression.evaluate(this.scope,this.lookupFunctions),this.expression.connect(this,this.scope)),this.addSubscriber(e,t),1===arguments.length&&e instanceof Function)return{dispose:function(){n.unsubscribe(e,t)}}},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&(this.unobserve(!0),this.oldValue=void 0)},e.prototype.call=function(){var e=this.expression.evaluate(this.scope,this.lookupFunctions),t=this.oldValue;e!==t&&(this.oldValue=e,this.callSubscribers(e,t)),this._version++,this.expression.connect(this,this.scope),this.unobserve(!1)},e}())||i)||i;function ne(e,t,n){return{index:e,removed:t,addedCount:n}}function re(){}re.prototype={calcEditDistances:function(e,t,n,r,i,o){for(var a=o-i+1,s=n-t+1,l=new Array(a),u=void 0,c=void 0,d=0;d<a;++d)l[d]=new Array(s),l[d][0]=d;for(var h=0;h<s;++h)l[0][h]=h;for(var f=1;f<a;++f)for(var p=1;p<s;++p)this.equals(e[t+p-1],r[i+f-1])?l[f][p]=l[f-1][p-1]:(u=l[f-1][p]+1,c=l[f][p-1]+1,l[f][p]=u<c?u:c);return l},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,n=e[0].length-1,r=e[t][n],i=[];0<t||0<n;)if(0!==t)if(0!==n){var o=e[t-1][n-1],a=e[t-1][n],s=e[t][n-1],l=void 0;(l=a<s?a<o?a:o:s<o?s:o)===o?(o===r?i.push(0):(i.push(1),r=o),t--,n--):l===a?(i.push(3),t--,r=a):(i.push(2),n--,r=s)}else i.push(3),t--;else i.push(2),n--;return i.reverse(),i},calcSplices:function(e,t,n,r,i,o){var a=0,s=0,l=Math.min(n-t,o-i);if(0===t&&0===i&&(a=this.sharedPrefix(e,r,l)),n===e.length&&o===r.length&&(s=this.sharedSuffix(e,r,l-a)),i+=a,o-=s,(n-=s)-(t+=a)==0&&o-i==0)return[];if(t===n){for(var u=ne(t,[],0);i<o;)u.removed.push(r[i++]);return[u]}if(i===o)return[ne(t,[],n-t)];for(var c=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,t,n,r,i,o)),d=void 0,h=[],f=t,p=i,v=0;v<c.length;++v)switch(c[v]){case 0:d&&(h.push(d),d=void 0),f++,p++;break;case 1:d||(d=ne(f,[],0)),d.addedCount++,f++,d.removed.push(r[p]),p++;break;case 2:d||(d=ne(f,[],0)),d.addedCount++,f++;break;case 3:d||(d=ne(f,[],0)),d.removed.push(r[p]),p++}return d&&h.push(d),h},sharedPrefix:function(e,t,n){for(var r=0;r<n;++r)if(!this.equals(e[r],t[r]))return r;return n},sharedSuffix:function(e,t,n){for(var r=e.length,i=t.length,o=0;o<n&&this.equals(e[--r],t[--i]);)o++;return o},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}};var ie=new re;function oe(e,t,n,r,i,o){return ie.calcSplices(e,t,n,r,i,o)}function ae(e,t,n,r){for(var i,o,a,s,l=ne(t,n,r),u=!1,c=0,d=0;d<e.length;d++){var h=e[d];if(h.index+=c,!u){var f=(i=l.index,o=l.index+l.removed.length,a=h.index,s=h.index+h.addedCount,o<a||s<i?-1:o===a||s===i?0:i<a?o<s?o-a:s-a:s<o?s-i:o-i);if(0<=f){e.splice(d,1),d--,c-=h.addedCount-h.removed.length,l.addedCount+=h.addedCount-f;var p=l.removed.length+h.removed.length-f;if(l.addedCount||p){var v=h.removed;if(l.index<h.index){var m=l.removed.slice(0,h.index-l.index);Array.prototype.push.apply(m,v),v=m}if(l.index+l.removed.length>h.index+h.addedCount){var g=l.removed.slice(h.index+h.addedCount-l.index);Array.prototype.push.apply(v,g)}l.removed=v,h.index<l.index&&(l.index=h.index)}else u=!0}else if(l.index<h.index){u=!0,e.splice(d,0,l),d++;var y=l.addedCount-l.removed.length;h.index+=y,c+=y}}}u||e.push(l)}function se(t,e){var n=[];return function(e,t){for(var n,r=[],i=0;i<t.length;i++){var o=t[i];switch(o.type){case"splice":ae(r,o.index,o.removed.slice(),o.addedCount);break;case"add":case"update":case"delete":if(+(n=o.name)!=n>>>0)continue;var a=+o.name;if(a<0)continue;ae(r,a,[o.oldValue],"delete"===o.type?0:1);break;default:console.error("Unexpected record type: "+JSON.stringify(o))}}return r}(0,e).forEach(function(e){1!==e.addedCount||1!==e.removed.length?n=n.concat(oe(t,e.index,e.index+e.addedCount,e.removed,0,e.removed.length)):e.removed[0]!==t[e.index]&&n.push(e)}),n}function le(e){for(var t,n,r,i=new Array(e.size),o=e.keys(),a=0,s=void 0;(s=o.next())&&!s.done;)i[a]=(t="added",n=e,r=s.value,{type:t,object:n,key:r,oldValue:void 0}),a++;return i}var ue=e.ModifyCollectionObserver=ee()(a=function(){function e(e,t){this.taskQueue=e,this.queued=!1,this.changeRecords=null,this.oldCollection=null,this.collection=t,this.lengthPropertyName=t instanceof Map||t instanceof Set?"size":"length"}return e.prototype.subscribe=function(e,t){this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},e.prototype.addChangeRecord=function(e){if(this.hasSubscribers()||this.lengthObserver){if("splice"===e.type){var t=e.index,n=e.object.length;n<t?t=n-e.addedCount:t<0&&(t=n+e.removed.length+t-e.addedCount),t<0&&(t=0),e.index=t}null===this.changeRecords?this.changeRecords=[e]:this.changeRecords.push(e),this.queued||(this.queued=!0,this.taskQueue.queueMicroTask(this))}},e.prototype.flushChangeRecords=function(){(this.changeRecords&&this.changeRecords.length||this.oldCollection)&&this.call()},e.prototype.reset=function(e){this.oldCollection=e,this.hasSubscribers()&&!this.queued&&(this.queued=!0,this.taskQueue.queueMicroTask(this))},e.prototype.getLengthObserver=function(){return this.lengthObserver||(this.lengthObserver=new ce(this.collection))},e.prototype.call=function(){var e=this.changeRecords,t=this.oldCollection,n=void 0;this.queued=!1,this.changeRecords=[],this.oldCollection=null,this.hasSubscribers()&&(n=t?this.collection instanceof Map||this.collection instanceof Set?le(t):oe(this.collection,0,this.collection.length,t,0,t.length):this.collection instanceof Map||this.collection instanceof Set?e:se(this.collection,e),this.callSubscribers(n)),this.lengthObserver&&this.lengthObserver.call(this.collection[this.lengthPropertyName])},e}())||a,ce=e.CollectionLengthObserver=ee()(l=function(){function e(e){this.collection=e,this.lengthPropertyName=e instanceof Map||e instanceof Set?"size":"length",this.currentValue=e[this.lengthPropertyName]}return e.prototype.getValue=function(){return this.collection[this.lengthPropertyName]},e.prototype.setValue=function(e){this.collection[this.lengthPropertyName]=e},e.prototype.subscribe=function(e,t){this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},e.prototype.call=function(e){var t=this.currentValue;this.callSubscribers(e,t),this.currentValue=e},e}())||l,de=Array.prototype.pop,he=Array.prototype.push,fe=Array.prototype.reverse,pe=Array.prototype.shift,ve=Array.prototype.sort,me=Array.prototype.splice,ge=Array.prototype.unshift;function ye(e,t){return be.for(e,t)}Array.prototype.pop=function(){var e=0<this.length,t=de.apply(this,arguments);return e&&void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"delete",object:this,name:this.length,oldValue:t}),t},Array.prototype.push=function(){var e=he.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:this.length-arguments.length,removed:[],addedCount:arguments.length}),e},Array.prototype.reverse=function(){var e=void 0;void 0!==this.__array_observer__&&(this.__array_observer__.flushChangeRecords(),e=this.slice());var t=fe.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.reset(e),t},Array.prototype.shift=function(){var e=0<this.length,t=pe.apply(this,arguments);return e&&void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"delete",object:this,name:0,oldValue:t}),t},Array.prototype.sort=function(){var e=void 0;void 0!==this.__array_observer__&&(this.__array_observer__.flushChangeRecords(),e=this.slice());var t=ve.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.reset(e),t},Array.prototype.splice=function(){var e=me.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:+arguments[0],removed:e,addedCount:2<arguments.length?arguments.length-2:0}),e},Array.prototype.unshift=function(){var e=ge.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:0,removed:[],addedCount:arguments.length}),e},e.getArrayObserver=ye;var be=function(n){function r(e,t){return x(this,n.call(this,e,t))}return _(r,n),r.for=function(e,t){return"__array_observer__"in t||Reflect.defineProperty(t,"__array_observer__",{value:r.create(e,t),enumerable:!1,configurable:!1}),t.__array_observer__},r.create=function(e,t){return new r(e,t)},r}(ue),we=e.Expression=function(){function e(){this.isChain=!1,this.isAssignable=!1}return e.prototype.evaluate=function(e,t,n){throw new Error('Binding expression "'+this+'" cannot be evaluated.')},e.prototype.assign=function(e,t,n){throw new Error('Binding expression "'+this+'" cannot be assigned to.')},e.prototype.toString=function(){return"undefined"==typeof FEATURE_NO_UNPARSER?ze.unparse(this):Function.prototype.toString.call(this)},e}(),xe=e.Chain=function(n){function e(e){var t=x(this,n.call(this));return t.expressions=e,t.isChain=!0,t}return _(e,n),e.prototype.evaluate=function(e,t){for(var n=void 0,r=this.expressions,i=void 0,o=0,a=r.length;o<a;++o)null!==(i=r[o].evaluate(e,t))&&(n=i);return n},e.prototype.accept=function(e){return e.visitChain(this)},e}(we),_e=e.BindingBehavior=function(i){function e(e,t,n){var r=x(this,i.call(this));return r.expression=e,r.name=t,r.args=n,r}return _(e,i),e.prototype.evaluate=function(e,t){return this.expression.evaluate(e,t)},e.prototype.assign=function(e,t,n){return this.expression.assign(e,t,n)},e.prototype.accept=function(e){return e.visitBindingBehavior(this)},e.prototype.connect=function(e,t){this.expression.connect(e,t)},e.prototype.bind=function(e,t,n){this.expression.expression&&this.expression.bind&&this.expression.bind(e,t,n);var r=n.bindingBehaviors(this.name);if(!r)throw new Error('No BindingBehavior named "'+this.name+'" was found!');var i="behavior-"+this.name;if(e[i])throw new Error('A binding behavior named "'+this.name+'" has already been applied to "'+this.expression+'"');(e[i]=r).bind.apply(r,[e,t].concat(Fe(t,this.args,e.lookupFunctions)))},e.prototype.unbind=function(e,t){var n="behavior-"+this.name;e[n].unbind(e,t),e[n]=null,this.expression.expression&&this.expression.unbind&&this.expression.unbind(e,t)},e}(we),ke=e.ValueConverter=function(o){function e(e,t,n,r){var i=x(this,o.call(this));return i.expression=e,i.name=t,i.args=n,i.allArgs=r,i}return _(e,o),e.prototype.evaluate=function(e,t){var n=t.valueConverters(this.name);if(!n)throw new Error('No ValueConverter named "'+this.name+'" was found!');return"toView"in n?n.toView.apply(n,Fe(e,this.allArgs,t)):this.allArgs[0].evaluate(e,t)},e.prototype.assign=function(e,t,n){var r=n.valueConverters(this.name);if(!r)throw new Error('No ValueConverter named "'+this.name+'" was found!');return"fromView"in r&&(t=r.fromView.apply(r,[t].concat(Fe(e,this.args,n)))),this.allArgs[0].assign(e,t,n)},e.prototype.accept=function(e){return e.visitValueConverter(this)},e.prototype.connect=function(e,t){for(var n=this.allArgs,r=n.length;r--;)n[r].connect(e,t);var i=e.lookupFunctions.valueConverters(this.name);if(!i)throw new Error('No ValueConverter named "'+this.name+'" was found!');var o=i.signals;if(void 0!==o)for(r=o.length;r--;)Jn(e,o[r])},e}(we),Se=e.Assign=function(r){function e(e,t){var n=x(this,r.call(this));return n.target=e,n.value=t,n.isAssignable=!0,n}return _(e,r),e.prototype.evaluate=function(e,t){return this.target.assign(e,this.value.evaluate(e,t))},e.prototype.accept=function(e){e.visitAssign(this)},e.prototype.connect=function(e,t){},e.prototype.assign=function(e,t){this.value.assign(e,t),this.target.assign(e,t)},e}(we),Te=e.Conditional=function(i){function e(e,t,n){var r=x(this,i.call(this));return r.condition=e,r.yes=t,r.no=n,r}return _(e,i),e.prototype.evaluate=function(e,t){return this.condition.evaluate(e,t)?this.yes.evaluate(e,t):this.no.evaluate(e,t)},e.prototype.accept=function(e){return e.visitConditional(this)},e.prototype.connect=function(e,t){this.condition.connect(e,t),this.condition.evaluate(t)?this.yes.connect(e,t):this.no.connect(e,t)},e}(we),Ce=e.AccessThis=function(n){function e(e){var t=x(this,n.call(this));return t.ancestor=e,t}return _(e,n),e.prototype.evaluate=function(e,t){for(var n=e.overrideContext,r=this.ancestor;r--&&n;)n=n.parentOverrideContext;return r<1&&n?n.bindingContext:void 0},e.prototype.accept=function(e){return e.visitAccessThis(this)},e.prototype.connect=function(e,t){},e}(we),Oe=e.AccessScope=function(r){function e(e,t){var n=x(this,r.call(this));return n.name=e,n.ancestor=t,n.isAssignable=!0,n}return _(e,r),e.prototype.evaluate=function(e,t){return E(this.name,e,this.ancestor)[this.name]},e.prototype.assign=function(e,t){var n=E(this.name,e,this.ancestor);return n?n[this.name]=t:void 0},e.prototype.accept=function(e){return e.visitAccessScope(this)},e.prototype.connect=function(e,t){var n=E(this.name,t,this.ancestor);e.observeProperty(n,this.name)},e}(we),Ee=e.AccessMember=function(r){function e(e,t){var n=x(this,r.call(this));return n.object=e,n.name=t,n.isAssignable=!0,n}return _(e,r),e.prototype.evaluate=function(e,t){var n=this.object.evaluate(e,t);return null==n?n:n[this.name]},e.prototype.assign=function(e,t){var n=this.object.evaluate(e);return null==n&&(n={},this.object.assign(e,n)),n[this.name]=t},e.prototype.accept=function(e){return e.visitAccessMember(this)},e.prototype.connect=function(e,t){this.object.connect(e,t);var n=this.object.evaluate(t);n&&e.observeProperty(n,this.name)},e}(we),Me=e.AccessKeyed=function(r){function e(e,t){var n=x(this,r.call(this));return n.object=e,n.key=t,n.isAssignable=!0,n}return _(e,r),e.prototype.evaluate=function(e,t){return function(e,t){{if(Array.isArray(e))return e[parseInt(t,10)];if(e)return e[t];if(null==e)return}return e[t]}(this.object.evaluate(e,t),this.key.evaluate(e,t))},e.prototype.assign=function(e,t){return function(e,t,n){if(Array.isArray(e)){var r=parseInt(t,10);e.length<=r&&(e.length=r+1),e[r]=n}else e[t]=n;return n}(this.object.evaluate(e),this.key.evaluate(e),t)},e.prototype.accept=function(e){return e.visitAccessKeyed(this)},e.prototype.connect=function(e,t){this.object.connect(e,t);var n=this.object.evaluate(t);if(n instanceof Object){this.key.connect(e,t);var r=this.key.evaluate(t);null==r||Array.isArray(n)&&"number"==typeof r||e.observeProperty(n,r)}},e}(we),Pe=e.CallScope=function(i){function e(e,t,n){var r=x(this,i.call(this));return r.name=e,r.args=t,r.ancestor=n,r}return _(e,i),e.prototype.evaluate=function(e,t,n){var r=Fe(e,this.args,t),i=E(this.name,e,this.ancestor),o=Ve(i,this.name,n);if(o)return o.apply(i,r)},e.prototype.accept=function(e){return e.visitCallScope(this)},e.prototype.connect=function(e,t){for(var n=this.args,r=n.length;r--;)n[r].connect(e,t)},e}(we),Ae=e.CallMember=function(i){function e(e,t,n){var r=x(this,i.call(this));return r.object=e,r.name=t,r.args=n,r}return _(e,i),e.prototype.evaluate=function(e,t,n){var r=this.object.evaluate(e,t),i=Fe(e,this.args,t),o=Ve(r,this.name,n);if(o)return o.apply(r,i)},e.prototype.accept=function(e){return e.visitCallMember(this)},e.prototype.connect=function(e,t){if(this.object.connect(e,t),Ve(this.object.evaluate(t),this.name,!1))for(var n=this.args,r=n.length;r--;)n[r].connect(e,t)},e}(we),Re=e.CallFunction=function(r){function e(e,t){var n=x(this,r.call(this));return n.func=e,n.args=t,n}return _(e,r),e.prototype.evaluate=function(e,t,n){var r=this.func.evaluate(e,t);if("function"==typeof r)return r.apply(null,Fe(e,this.args,t));if(n||null!=r)throw new Error(this.func+" is not a function")},e.prototype.accept=function(e){return e.visitCallFunction(this)},e.prototype.connect=function(e,t){if(this.func.connect(e,t),"function"==typeof this.func.evaluate(t))for(var n=this.args,r=n.length;r--;)n[r].connect(e,t)},e}(we),je=e.Binary=function(i){function e(e,t,n){var r=x(this,i.call(this));return r.operation=e,r.left=t,r.right=n,r}return _(e,i),e.prototype.evaluate=function(e,t){var n=this.left.evaluate(e,t);switch(this.operation){case"&&":return n&&this.right.evaluate(e,t);case"||":return n||this.right.evaluate(e,t)}var r=this.right.evaluate(e,t);switch(this.operation){case"==":return n==r;case"===":return n===r;case"!=":return n!=r;case"!==":return n!==r}if(null===n||null===r||void 0===n||void 0===r){switch(this.operation){case"+":return null!=n?n:null!=r?r:0;case"-":return null!=n?n:null!=r?0-r:0}return null}switch(this.operation){case"+":return function(e,t){if(null!==e&&null!==t)return"string"==typeof e&&"string"!=typeof t?e+t.toString():"string"!=typeof e&&"string"==typeof t?e.toString()+t:e+t;if(null!==e)return e;if(null!==t)return t;return 0}(n,r);case"-":return n-r;case"*":return n*r;case"/":return n/r;case"%":return n%r;case"<":return n<r;case">":return r<n;case"<=":return n<=r;case">=":return r<=n;case"^":return n^r}throw new Error("Internal error ["+this.operation+"] not handled")},e.prototype.accept=function(e){return e.visitBinary(this)},e.prototype.connect=function(e,t){this.left.connect(e,t);var n=this.left.evaluate(t);"&&"===this.operation&&!n||"||"===this.operation&&n||this.right.connect(e,t)},e}(we),Ie=e.PrefixNot=function(r){function e(e,t){var n=x(this,r.call(this));return n.operation=e,n.expression=t,n}return _(e,r),e.prototype.evaluate=function(e,t){return!this.expression.evaluate(e,t)},e.prototype.accept=function(e){return e.visitPrefix(this)},e.prototype.connect=function(e,t){this.expression.connect(e,t)},e}(we),Le=e.LiteralPrimitive=function(n){function e(e){var t=x(this,n.call(this));return t.value=e,t}return _(e,n),e.prototype.evaluate=function(e,t){return this.value},e.prototype.accept=function(e){return e.visitLiteralPrimitive(this)},e.prototype.connect=function(e,t){},e}(we),De=e.LiteralString=function(n){function e(e){var t=x(this,n.call(this));return t.value=e,t}return _(e,n),e.prototype.evaluate=function(e,t){return this.value},e.prototype.accept=function(e){return e.visitLiteralString(this)},e.prototype.connect=function(e,t){},e}(we),Ne=e.LiteralArray=function(n){function e(e){var t=x(this,n.call(this));return t.elements=e,t}return _(e,n),e.prototype.evaluate=function(e,t){for(var n=this.elements,r=[],i=0,o=n.length;i<o;++i)r[i]=n[i].evaluate(e,t);return r},e.prototype.accept=function(e){return e.visitLiteralArray(this)},e.prototype.connect=function(e,t){for(var n=this.elements.length,r=0;r<n;r++)this.elements[r].connect(e,t)},e}(we),Be=e.LiteralObject=function(r){function e(e,t){var n=x(this,r.call(this));return n.keys=e,n.values=t,n}return _(e,r),e.prototype.evaluate=function(e,t){for(var n={},r=this.keys,i=this.values,o=0,a=r.length;o<a;++o)n[r[o]]=i[o].evaluate(e,t);return n},e.prototype.accept=function(e){return e.visitLiteralObject(this)},e.prototype.connect=function(e,t){for(var n=this.keys.length,r=0;r<n;r++)this.values[r].connect(e,t)},e}(we);function Fe(e,t,n){for(var r=t.length,i=[],o=0;o<r;o++)i[o]=t[o].evaluate(e,n);return i}function Ve(e,t,n){var r=null==e?null:e[t];if("function"==typeof r)return r;if(!n&&null==r)return null;throw new Error(t+" is not a function")}var ze=null;e.Unparser=ze,"undefined"==typeof FEATURE_NO_UNPARSER&&(e.Unparser=ze=function(){function e(e){this.buffer=e}return e.unparse=function(e){var t=[],n=new ze(t);return e.accept(n),t.join("")},e.prototype.write=function(e){this.buffer.push(e)},e.prototype.writeArgs=function(e){this.write("(");for(var t=0,n=e.length;t<n;++t)0!==t&&this.write(","),e[t].accept(this);this.write(")")},e.prototype.visitChain=function(e){for(var t=e.expressions,n=0,r=expression.length;n<r;++n)0!==n&&this.write(";"),t[n].accept(this)},e.prototype.visitBindingBehavior=function(e){var t=e.args;e.expression.accept(this),this.write("&"+e.name);for(var n=0,r=t.length;n<r;++n)this.write(":"),t[n].accept(this)},e.prototype.visitValueConverter=function(e){var t=e.args;e.expression.accept(this),this.write("|"+e.name);for(var n=0,r=t.length;n<r;++n)this.write(":"),t[n].accept(this)},e.prototype.visitAssign=function(e){e.target.accept(this),this.write("="),e.value.accept(this)},e.prototype.visitConditional=function(e){e.condition.accept(this),this.write("?"),e.yes.accept(this),this.write(":"),e.no.accept(this)},e.prototype.visitAccessThis=function(e){if(0!==e.ancestor){this.write("$parent");for(var t=e.ancestor-1;t--;)this.write(".$parent")}else this.write("$this")},e.prototype.visitAccessScope=function(e){for(var t=e.ancestor;t--;)this.write("$parent.");this.write(e.name)},e.prototype.visitAccessMember=function(e){e.object.accept(this),this.write("."+e.name)},e.prototype.visitAccessKeyed=function(e){e.object.accept(this),this.write("["),e.key.accept(this),this.write("]")},e.prototype.visitCallScope=function(e){for(var t=e.ancestor;t--;)this.write("$parent.");this.write(e.name),this.writeArgs(e.args)},e.prototype.visitCallFunction=function(e){e.func.accept(this),this.writeArgs(e.args)},e.prototype.visitCallMember=function(e){e.object.accept(this),this.write("."+e.name),this.writeArgs(e.args)},e.prototype.visitPrefix=function(e){this.write("("+e.operation),e.expression.accept(this),this.write(")")},e.prototype.visitBinary=function(e){e.left.accept(this),this.write(e.operation),e.right.accept(this)},e.prototype.visitLiteralPrimitive=function(e){this.write(""+e.value)},e.prototype.visitLiteralArray=function(e){var t=e.elements;this.write("[");for(var n=0,r=t.length;n<r;++n)0!==n&&this.write(","),t[n].accept(this);this.write("]")},e.prototype.visitLiteralObject=function(e){var t=e.keys,n=e.values;this.write("{");for(var r=0,i=t.length;r<i;++r)0!==r&&this.write(","),this.write("'"+t[r]+"':"),n[r].accept(this);this.write("}")},e.prototype.visitLiteralString=function(e){var t=e.value.replace(/'/g,"'");this.write("'"+t+"'")},e}());var He=e.ExpressionCloner=function(){function e(){}return e.prototype.cloneExpressionArray=function(e){for(var t=[],n=e.length;n--;)t[n]=e[n].accept(this);return t},e.prototype.visitChain=function(e){return new xe(this.cloneExpressionArray(e.expressions))},e.prototype.visitBindingBehavior=function(e){return new _e(e.expression.accept(this),e.name,this.cloneExpressionArray(e.args))},e.prototype.visitValueConverter=function(e){return new ke(e.expression.accept(this),e.name,this.cloneExpressionArray(e.args))},e.prototype.visitAssign=function(e){return new Se(e.target.accept(this),e.value.accept(this))},e.prototype.visitConditional=function(e){return new Te(e.condition.accept(this),e.yes.accept(this),e.no.accept(this))},e.prototype.visitAccessThis=function(e){return new Ce(e.ancestor)},e.prototype.visitAccessScope=function(e){return new Oe(e.name,e.ancestor)},e.prototype.visitAccessMember=function(e){return new Ee(e.object.accept(this),e.name)},e.prototype.visitAccessKeyed=function(e){return new Me(e.object.accept(this),e.key.accept(this))},e.prototype.visitCallScope=function(e){return new Pe(e.name,this.cloneExpressionArray(e.args),e.ancestor)},e.prototype.visitCallFunction=function(e){return new Re(e.func.accept(this),this.cloneExpressionArray(e.args))},e.prototype.visitCallMember=function(e){return new Ae(e.object.accept(this),e.name,this.cloneExpressionArray(e.args))},e.prototype.visitPrefix=function(e){return new Ie(e.operation,e.expression.accept(this))},e.prototype.visitBinary=function(e){return new je(e.operation,e.left.accept(this),e.right.accept(this))},e.prototype.visitLiteralPrimitive=function(e){return new Le(e)},e.prototype.visitLiteralArray=function(e){return new Ne(this.cloneExpressionArray(e.elements))},e.prototype.visitLiteralObject=function(e){return new Be(e.keys,this.cloneExpressionArray(e.values))},e.prototype.visitLiteralString=function(e){return new De(e.value)},e}();var Ue=e.bindingMode={oneTime:0,toView:1,oneWay:1,twoWay:2,fromView:3},qe=e.Token=function(){function e(e,t){this.index=e,this.text=t}return e.prototype.withOp=function(e){return this.opKey=e,this},e.prototype.withGetterSetter=function(e){return this.key=e,this},e.prototype.withValue=function(e){return this.value=e,this},e.prototype.toString=function(){return"Token("+this.text+")"},e}(),We=e.Lexer=function(){function e(){}return e.prototype.lex=function(e){for(var t=new Ge(e),n=[],r=t.scanToken();r;)n.push(r),r=t.scanToken();return n},e}(),Ge=e.Scanner=function(){function e(e){this.input=e,this.length=e.length,this.peek=0,this.index=-1,this.advance()}return e.prototype.scanToken=function(){for(;this.peek<=et;){if(++this.index>=this.length)return this.peek=Xe,null;this.peek=this.input.charCodeAt(this.index)}if(qt(this.peek))return this.scanIdentifier();if(Wt(this.peek))return this.scanNumber(this.index);var e,t=this.index;switch(this.peek){case ft:return this.advance(),Wt(this.peek)?this.scanNumber(t):new qe(t,".");case st:case lt:case Vt:case Ht:case Ct:case Et:case dt:case vt:case mt:return this.scanCharacter(t,String.fromCharCode(this.peek));case at:case nt:return this.scanString();case ct:case ht:case ut:case pt:case it:case Mt:case wt:return this.scanOperator(t,String.fromCharCode(this.peek));case gt:case bt:case tt:case yt:return this.scanComplexOperator(t,yt,String.fromCharCode(this.peek),"=");case ot:return this.scanComplexOperator(t,ot,"&","&");case zt:return this.scanComplexOperator(t,zt,"|","|");case Ut:for(;e=this.peek,Ze<=e&&e<=et||e===Ut;)this.advance();return this.scanToken()}var n=String.fromCharCode(this.peek);return this.error("Unexpected character ["+n+"]"),null},e.prototype.scanCharacter=function(e,t){return Yt(this.peek===t.charCodeAt(0)),this.advance(),new qe(e,t)},e.prototype.scanOperator=function(e,t){return Yt(this.peek===t.charCodeAt(0)),Yt(1===Ye[t]),this.advance(),new qe(e,t).withOp(t)},e.prototype.scanComplexOperator=function(e,t,n,r){Yt(this.peek===n.charCodeAt(0)),this.advance();var i=n;return this.peek===t&&(this.advance(),i+=r),this.peek===t&&(this.advance(),i+=r),Yt(1===Ye[i]),new qe(e,i).withOp(i)},e.prototype.scanIdentifier=function(){Yt(qt(this.peek));var e,t=this.index;for(this.advance();e=this.peek,At<=e&&e<=Ft||kt<=e&&e<=Tt||xt<=e&&e<=_t||e===Pt||e===rt;)this.advance();var n=this.input.substring(t,this.index),r=new qe(t,n);return 1===Ye[n]?r.withOp(n):r.withGetterSetter(n),r},e.prototype.scanNumber=function(e){Yt(Wt(this.peek));var t,n,r=this.index===e;for(this.advance();;){if(!Wt(this.peek))if(this.peek===ft)r=!1;else{if((n=this.peek)!==Rt&&n!==St)break;this.advance(),((t=this.peek)===ht||t===ct)&&this.advance(),Wt(this.peek)||this.error("Invalid exponent",-1),r=!1}this.advance()}var i=this.input.substring(e,this.index),o=r?parseInt(i,10):parseFloat(i);return new qe(e,i).withValue(o)},e.prototype.scanString=function(){Yt(this.peek===at||this.peek===nt);var e=this.index,t=this.peek;this.advance();for(var n=void 0,r=this.index;this.peek!==t;)if(this.peek===Ot){n||(n=[]),n.push(this.input.substring(r,this.index)),this.advance();var i=void 0;if(this.peek===Nt){var o=this.input.substring(this.index+1,this.index+5);/[A-Z0-9]{4}/.test(o)||this.error("Invalid unicode escape [\\u"+o+"]"),i=parseInt(o,16);for(var a=0;a<5;++a)this.advance()}else i=Gt(this.peek),this.advance();n.push(String.fromCharCode(i)),r=this.index}else this.peek===Xe?this.error("Unterminated quote"):this.advance();var s=this.input.substring(r,this.index);this.advance();var l=this.input.substring(e,this.index),u=s;return null!=n&&(n.push(s),u=n.join("")),new qe(e,l).withValue(u)},e.prototype.advance=function(){++this.index>=this.length?this.peek=Xe:this.peek=this.input.charCodeAt(this.index)},e.prototype.error=function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=this.index+t;throw new Error("Lexer Error: "+e+" at column "+n+" in expression ["+this.input+"]")},e}(),Ye={undefined:1,null:1,true:1,false:1,"+":1,"-":1,"*":1,"/":1,"%":1,"^":1,"=":1,"==":1,"===":1,"!=":1,"!==":1,"<":1,">":1,"<=":1,">=":1,"&&":1,"||":1,"&":1,"|":1,"!":1,"?":1},Xe=0,Ze=9,Ke=10,$e=11,Qe=12,Je=13,et=32,tt=33,nt=34,rt=36,it=37,ot=38,at=39,st=40,lt=41,ut=42,ct=43,dt=44,ht=45,ft=46,pt=47,vt=58,mt=59,gt=60,yt=61,bt=62,wt=63,xt=48,_t=57,kt=65,St=69,Tt=90,Ct=91,Ot=92,Et=93,Mt=94,Pt=95,At=97,Rt=101,jt=102,It=110,Lt=114,Dt=116,Nt=117,Bt=118,Ft=122,Vt=123,zt=124,Ht=125,Ut=160;function qt(e){return At<=e&&e<=Ft||kt<=e&&e<=Tt||e===Pt||e===rt}function Wt(e){return xt<=e&&e<=_t}function Gt(e){switch(e){case It:return Ke;case jt:return Qe;case Lt:return Je;case Dt:return Ze;case Bt:return $e;default:return e}}function Yt(e,t){if(!e)throw t||"Assertion failed"}var Xt=new qe(-1,null),Zt=e.Parser=function(){function e(){this.cache={},this.lexer=new We}return e.prototype.parse=function(e){return e=e||"",this.cache[e]||(this.cache[e]=new Kt(this.lexer,e).parseChain())},e}(),Kt=e.ParserImplementation=function(){function e(e,t){this.index=0,this.input=t,this.tokens=e.lex(t)}return e.prototype.parseChain=function(){for(var e=!1,t=[];this.optional(";");)e=!0;for(;this.index<this.tokens.length;){")"!==this.peek.text&&"}"!==this.peek.text&&"]"!==this.peek.text||this.error("Unconsumed token "+this.peek.text);var n=this.parseBindingBehavior();for(t.push(n);this.optional(";");)e=!0;e&&this.error("Multiple expressions are not allowed.")}return 1===t.length?t[0]:new xe(t)},e.prototype.parseBindingBehavior=function(){for(var e=this.parseValueConverter();this.optional("&");){var t=this.peek.text,n=[];for(this.advance();this.optional(":");)n.push(this.parseExpression());e=new _e(e,t,n)}return e},e.prototype.parseValueConverter=function(){for(var e=this.parseExpression();this.optional("|");){var t=this.peek.text,n=[];for(this.advance();this.optional(":");)n.push(this.parseExpression());e=new ke(e,t,n,[e].concat(n))}return e},e.prototype.parseExpression=function(){for(var e=this.peek.index,t=this.parseConditional();"="===this.peek.text;){if(!t.isAssignable){var n=this.index<this.tokens.length?this.peek.index:this.input.length,r=this.input.substring(e,n);this.error("Expression "+r+" is not assignable")}this.expect("="),t=new Se(t,this.parseConditional())}return t},e.prototype.parseConditional=function(){var e=this.peek.index,t=this.parseLogicalOr();if(this.optional("?")){var n=this.parseExpression();if(!this.optional(":")){var r=this.index<this.tokens.length?this.peek.index:this.input.length,i=this.input.substring(e,r);this.error("Conditional expression "+i+" requires all 3 expressions")}var o=this.parseExpression();t=new Te(t,n,o)}return t},e.prototype.parseLogicalOr=function(){for(var e=this.parseLogicalAnd();this.optional("||");)e=new je("||",e,this.parseLogicalAnd());return e},e.prototype.parseLogicalAnd=function(){for(var e=this.parseEquality();this.optional("&&");)e=new je("&&",e,this.parseEquality());return e},e.prototype.parseEquality=function(){for(var e=this.parseRelational();;)if(this.optional("=="))e=new je("==",e,this.parseRelational());else if(this.optional("!="))e=new je("!=",e,this.parseRelational());else if(this.optional("==="))e=new je("===",e,this.parseRelational());else{if(!this.optional("!=="))return e;e=new je("!==",e,this.parseRelational())}},e.prototype.parseRelational=function(){for(var e=this.parseAdditive();;)if(this.optional("<"))e=new je("<",e,this.parseAdditive());else if(this.optional(">"))e=new je(">",e,this.parseAdditive());else if(this.optional("<="))e=new je("<=",e,this.parseAdditive());else{if(!this.optional(">="))return e;e=new je(">=",e,this.parseAdditive())}},e.prototype.parseAdditive=function(){for(var e=this.parseMultiplicative();;)if(this.optional("+"))e=new je("+",e,this.parseMultiplicative());else{if(!this.optional("-"))return e;e=new je("-",e,this.parseMultiplicative())}},e.prototype.parseMultiplicative=function(){for(var e=this.parsePrefix();;)if(this.optional("*"))e=new je("*",e,this.parsePrefix());else if(this.optional("%"))e=new je("%",e,this.parsePrefix());else{if(!this.optional("/"))return e;e=new je("/",e,this.parsePrefix())}},e.prototype.parsePrefix=function(){return this.optional("+")?this.parsePrefix():this.optional("-")?new je("-",new Le(0),this.parsePrefix()):this.optional("!")?new Ie("!",this.parsePrefix()):this.parseAccessOrCallMember()},e.prototype.parseAccessOrCallMember=function(){for(var e=this.parsePrimary();;)if(this.optional(".")){var t=this.peek.text;if(this.advance(),this.optional("(")){var n=this.parseExpressionList(")");this.expect(")"),e=e instanceof Ce?new Pe(t,n,e.ancestor):new Ae(e,t,n)}else e=e instanceof Ce?new Oe(t,e.ancestor):new Ee(e,t)}else if(this.optional("[")){var r=this.parseExpression();this.expect("]"),e=new Me(e,r)}else{if(!this.optional("("))return e;var i=this.parseExpressionList(")");this.expect(")"),e=new Re(e,i)}},e.prototype.parsePrimary=function(){if(this.optional("(")){var e=this.parseExpression();return this.expect(")"),e}if(this.optional("null"))return new Le(null);if(this.optional("undefined"))return new Le(void 0);if(this.optional("true"))return new Le(!0);if(this.optional("false"))return new Le(!1);if(this.optional("[")){var t=this.parseExpressionList("]");return this.expect("]"),new Ne(t)}if("{"===this.peek.text)return this.parseObject();if(null!==this.peek.key&&void 0!==this.peek.key)return this.parseAccessOrCallScope();if(null!==this.peek.value&&void 0!==this.peek.value){var n=this.peek.value;return this.advance(),n instanceof String||"string"==typeof n?new De(n):new Le(n)}if(this.index>=this.tokens.length)throw new Error("Unexpected end of expression: "+this.input);this.error("Unexpected token "+this.peek.text)},e.prototype.parseAccessOrCallScope=function(){var e=this.peek.key;if(this.advance(),"$this"===e)return new Ce(0);for(var t=0;"$parent"===e;)if(t++,this.optional("."))e=this.peek.key,this.advance();else{if(this.peek===Xt||"("===this.peek.text||")"===this.peek.text||"["===this.peek.text||"}"===this.peek.text||","===this.peek.text||"|"===this.peek.text||"&"===this.peek.text)return new Ce(t);this.error("Unexpected token "+this.peek.text)}if(this.optional("(")){var n=this.parseExpressionList(")");return this.expect(")"),new Pe(e,n,t)}return new Oe(e,t)},e.prototype.parseObject=function(){var e=[],t=[];if(this.expect("{"),"}"!==this.peek.text)do{var n=this.peek,r=n.value;e.push("string"==typeof r?r:n.text),this.advance(),!n.key||","!==this.peek.text&&"}"!==this.peek.text?(this.expect(":"),t.push(this.parseExpression())):(--this.index,t.push(this.parseAccessOrCallScope()))}while(this.optional(","));return this.expect("}"),new Be(e,t)},e.prototype.parseExpressionList=function(e){var t=[];if(this.peek.text!==e)for(;t.push(this.parseExpression()),this.optional(","););return t},e.prototype.optional=function(e){return this.peek.text===e&&(this.advance(),!0)},e.prototype.expect=function(e){this.peek.text===e?this.advance():this.error("Missing expected "+e)},e.prototype.advance=function(){this.index++},e.prototype.error=function(e){var t=this.index<this.tokens.length?"at column "+(this.tokens[this.index].index+1)+" in":"at the end of the expression";throw new Error("Parser Error: "+e+" "+t+" ["+this.input+"]")},w(e,[{key:"peek",get:function(){return this.index<this.tokens.length?this.tokens[this.index]:Xt}}]),e}(),$t=Map.prototype;function Qt(e,t){return Jt.for(e,t)}e.getMapObserver=Qt;var Jt=function(n){function r(e,t){return x(this,n.call(this,e,t))}return _(r,n),r.for=function(e,t){return"__map_observer__"in t||Reflect.defineProperty(t,"__map_observer__",{value:r.create(e,t),enumerable:!1,configurable:!1}),t.__map_observer__},r.create=function(e,i){var o=new r(e,i),a=$t;return a.set===i.set&&a.delete===i.delete&&a.clear===i.clear||(a={set:i.set,delete:i.delete,clear:i.clear}),i.set=function(){var e=i.has(arguments[0]),t=e?"update":"add",n=i.get(arguments[0]),r=a.set.apply(i,arguments);return e&&n===i.get(arguments[0])||o.addChangeRecord({type:t,object:i,key:arguments[0],oldValue:n}),r},i.delete=function(){var e=i.has(arguments[0]),t=i.get(arguments[0]),n=a.delete.apply(i,arguments);return e&&o.addChangeRecord({type:"delete",object:i,key:arguments[0],oldValue:t}),n},i.clear=function(){var e=a.clear.apply(i,arguments);return o.addChangeRecord({type:"clear",object:i}),e},o},r}(ue);function en(e){return e.path&&e.path[0]||e.deepPath&&e.deepPath[0]||e.target}function tn(){this.standardStopPropagation(),this.propagationStopped=!0}function nn(e){e.standardStopPropagation=e.stopPropagation,e.stopPropagation=tn}function rn(e){var t=!1;e.propagationStopped=!1;for(var n=en(e),r=[];n;){if(n.capturedCallbacks){var i=n.capturedCallbacks[e.type];i&&(t||(nn(e),t=!0),r.push(i))}n=n.parentNode}for(var o=r.length-1;0<=o;o--){var a=r[o];if("handleEvent"in a?a.handleEvent(e):a(e),e.propagationStopped)break}}var on=function(){function e(e){this.eventName=e,this.count=0}return e.prototype.increment=function(){this.count++,1===this.count&&s.DOM.addEventListener(this.eventName,rn,!0)},e.prototype.decrement=function(){this.count--,0===this.count&&s.DOM.removeEventListener(this.eventName,rn,!0)},e}();function an(e){var t=!1;e.propagationStopped=!1;for(var n=en(e);n&&!e.propagationStopped;){if(n.delegatedCallbacks){var r=n.delegatedCallbacks[e.type];r&&(t||(nn(e),t=!0),"handleEvent"in r?r.handleEvent(e):r(e))}n=n.parentNode}}var sn=function(){function e(e){this.eventName=e,this.count=0}return e.prototype.increment=function(){this.count++,1===this.count&&s.DOM.addEventListener(this.eventName,an,!1)},e.prototype.decrement=function(){this.count--,0===this.count&&s.DOM.removeEventListener(this.eventName,an)},e}(),ln=function(){function e(){this.delegatedHandlers={},this.capturedHandlers={}}return e.prototype.subscribe=function(t,n,r,e){var i=this,o=void 0,a=void 0,s=void 0;if(e===un.bubbling){var l=function(){o=i.delegatedHandlers,s=o[n]||(o[n]=new sn(n));var e=t.delegatedCallbacks||(t.delegatedCallbacks={});return s.increment(),e[n]=r,{v:function(){s.decrement(),e[n]=null}}}();if("object"===(void 0===l?"undefined":b(l)))return l.v}if(e===un.capturing){var u=function(){a=i.capturedHandlers,s=a[n]||(a[n]=new on(n));var e=t.capturedCallbacks||(t.capturedCallbacks={});return s.increment(),e[n]=r,{v:function(){s.decrement(),e[n]=null}}}();if("object"===(void 0===u?"undefined":b(u)))return u.v}return t.addEventListener(n,r,!1),function(){t.removeEventListener(n,r)}},e}(),un=e.delegationStrategy={none:0,capturing:1,bubbling:2},cn=e.EventManager=function(){function e(){this.elementHandlerLookup={},this.eventStrategyLookup={},this.registerElementConfig({tagName:"input",properties:{value:["change","input"],checked:["change","input"],files:["change","input"]}}),this.registerElementConfig({tagName:"textarea",properties:{value:["change","input"]}}),this.registerElementConfig({tagName:"select",properties:{value:["change"]}}),this.registerElementConfig({tagName:"content editable",properties:{value:["change","input","blur","keyup","paste"]}}),this.registerElementConfig({tagName:"scrollable element",properties:{scrollTop:["scroll"],scrollLeft:["scroll"]}}),this.defaultEventStrategy=new ln}return e.prototype.registerElementConfig=function(e){var t=e.tagName.toLowerCase(),n=e.properties,r=void 0;for(r in this.elementHandlerLookup[t]={},n)n.hasOwnProperty(r)&&this.registerElementPropertyConfig(t,r,n[r])},e.prototype.registerElementPropertyConfig=function(e,t,n){this.elementHandlerLookup[e][t]=this.createElementHandler(n)},e.prototype.createElementHandler=function(e){return{subscribe:function(t,n){return e.forEach(function(e){t.addEventListener(e,n,!1)}),function(){e.forEach(function(e){t.removeEventListener(e,n,!1)})}}}},e.prototype.registerElementHandler=function(e,t){this.elementHandlerLookup[e.toLowerCase()]=t},e.prototype.registerEventStrategy=function(e,t){this.eventStrategyLookup[e]=t},e.prototype.getElementHandler=function(e,t){var n=void 0,r=this.elementHandlerLookup;if(e.tagName){if(r[n=e.tagName.toLowerCase()]&&r[n][t])return r[n][t];if("textContent"===t||"innerHTML"===t)return r["content editable"].value;if("scrollTop"===t||"scrollLeft"===t)return r["scrollable element"][t]}return null},e.prototype.addEventListener=function(e,t,n,r){return(this.eventStrategyLookup[t]||this.defaultEventStrategy).subscribe(e,t,n,r)},e}(),dn=e.DirtyChecker=function(){function e(){this.tracked=[],this.checkDelay=120}return e.prototype.addProperty=function(e){var t=this.tracked;t.push(e),1===t.length&&this.scheduleDirtyCheck()},e.prototype.removeProperty=function(e){var t=this.tracked;t.splice(t.indexOf(e),1)},e.prototype.scheduleDirtyCheck=function(){var e=this;setTimeout(function(){return e.check()},this.checkDelay)},e.prototype.check=function(){for(var e=this.tracked,t=e.length;t--;){var n=e[t];n.isDirty()&&n.call()}e.length&&this.scheduleDirtyCheck()},e}(),hn=e.DirtyCheckProperty=ee()(u=function(){function e(e,t,n){this.dirtyChecker=e,this.obj=t,this.propertyName=n}return e.prototype.getValue=function(){return this.obj[this.propertyName]},e.prototype.setValue=function(e){this.obj[this.propertyName]=e},e.prototype.call=function(){var e=this.oldValue,t=this.getValue();this.callSubscribers(t,e),this.oldValue=t},e.prototype.isDirty=function(){return this.oldValue!==this.obj[this.propertyName]},e.prototype.subscribe=function(e,t){this.hasSubscribers()||(this.oldValue=this.getValue(),this.dirtyChecker.addProperty(this)),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&this.dirtyChecker.removeProperty(this)},e}())||u,fn=o.getLogger("property-observation"),pn=e.propertyAccessor={getValue:function(e,t){return e[t]},setValue:function(e,t,n){t[n]=e}},vn=e.PrimitiveObserver=function(){function e(e,t){this.doNotCache=!0,this.primitive=e,this.propertyName=t}return e.prototype.getValue=function(){return this.primitive[this.propertyName]},e.prototype.setValue=function(){var e=b(this.primitive);throw new Error("The "+this.propertyName+" property of a "+e+" ("+this.primitive+") cannot be assigned.")},e.prototype.subscribe=function(){},e.prototype.unsubscribe=function(){},e}(),mn=e.SetterObserver=ee()(c=function(){function e(e,t,n){this.taskQueue=e,this.obj=t,this.propertyName=n,this.queued=!1,this.observing=!1}return e.prototype.getValue=function(){return this.obj[this.propertyName]},e.prototype.setValue=function(e){this.obj[this.propertyName]=e},e.prototype.getterValue=function(){return this.currentValue},e.prototype.setterValue=function(e){var t=this.currentValue;t!==e&&(this.queued||(this.oldValue=t,this.queued=!0,this.taskQueue.queueMicroTask(this)),this.currentValue=e)},e.prototype.call=function(){var e=this.oldValue,t=this.currentValue;this.queued=!1,this.callSubscribers(t,e)},e.prototype.subscribe=function(e,t){this.observing||this.convertProperty(),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},e.prototype.convertProperty=function(){this.observing=!0,this.currentValue=this.obj[this.propertyName],this.setValue=this.setterValue,this.getValue=this.getterValue,Reflect.defineProperty(this.obj,this.propertyName,{configurable:!0,enumerable:!(this.propertyName in this.obj)||this.obj.propertyIsEnumerable(this.propertyName),get:this.getValue.bind(this),set:this.setValue.bind(this)})||fn.warn("Cannot observe property '"+this.propertyName+"' of object",this.obj)},e}())||c,gn=e.XLinkAttributeObserver=function(){function e(e,t,n){this.element=e,this.propertyName=t,this.attributeName=n}return e.prototype.getValue=function(){return this.element.getAttributeNS("http://www.w3.org/1999/xlink",this.attributeName)},e.prototype.setValue=function(e){return this.element.setAttributeNS("http://www.w3.org/1999/xlink",this.attributeName,e)},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},e}(),yn=e.dataAttributeAccessor={getValue:function(e,t){return e.getAttribute(t)},setValue:function(e,t,n){null==e?t.removeAttribute(n):t.setAttribute(n,e)}},bn=e.DataAttributeObserver=function(){function e(e,t){this.element=e,this.propertyName=t}return e.prototype.getValue=function(){return this.element.getAttribute(this.propertyName)},e.prototype.setValue=function(e){return null==e?this.element.removeAttribute(this.propertyName):this.element.setAttribute(this.propertyName,e)},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},e}(),wn=e.StyleObserver=function(){function e(e,t){this.element=e,this.propertyName=t,this.styles=null,this.version=0}return e.prototype.getValue=function(){return this.element.style.cssText},e.prototype._setProperty=function(e,t){var n="";null!=t&&"function"==typeof t.indexOf&&-1!==t.indexOf("!important")&&(n="important",t=t.replace("!important","")),this.element.style.setProperty(e,t,n)},e.prototype.setValue=function(e){var t=this.styles||{},n=void 0,r=this.version;if(null!=e)if(e instanceof Object){var i=void 0;for(n in e)e.hasOwnProperty(n)&&(i=e[n],t[n=n.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})]=r,this._setProperty(n,i))}else if(e.length)for(var o=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:^"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g,a=void 0;null!==(a=o.exec(e));)(n=a[1])&&(t[n]=r,this._setProperty(n,a[2]));if(this.styles=t,this.version+=1,0!==r)for(n in r-=1,t)t.hasOwnProperty(n)&&t[n]===r&&this.element.style.removeProperty(n)},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},e}(),xn=e.ValueAttributeObserver=ee()(d=function(){function e(e,t,n){this.element=e,this.propertyName=t,this.handler=n,"files"===t&&(this.setValue=function(){})}return e.prototype.getValue=function(){return this.element[this.propertyName]},e.prototype.setValue=function(e){e=null==e?"":e,this.element[this.propertyName]!==e&&(this.element[this.propertyName]=e,this.notify())},e.prototype.notify=function(){var e=this.oldValue,t=this.getValue();this.callSubscribers(t,e),this.oldValue=t},e.prototype.handleEvent=function(){this.notify()},e.prototype.subscribe=function(e,t){this.hasSubscribers()||(this.oldValue=this.getValue(),this.disposeHandler=this.handler.subscribe(this.element,this)),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&(this.disposeHandler(),this.disposeHandler=null)},e}())||d,_n="CheckedObserver:array",kn="CheckedObserver:value",Sn=e.CheckedObserver=ee()(h=function(){function e(e,t,n){this.element=e,this.handler=t,this.observerLocator=n}return e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e){this.initialSync&&this.value===e||(this.arrayObserver&&(this.arrayObserver.unsubscribe(_n,this),this.arrayObserver=null),"checkbox"===this.element.type&&Array.isArray(e)&&(this.arrayObserver=this.observerLocator.getArrayObserver(e),this.arrayObserver.subscribe(_n,this)),this.oldValue=this.value,this.value=e,this.synchronizeElement(),this.notify(),this.initialSync||(this.initialSync=!0,this.observerLocator.taskQueue.queueMicroTask(this)))},e.prototype.call=function(e,t){this.synchronizeElement(),this.valueObserver||(this.valueObserver=this.element.__observers__.model||this.element.__observers__.value,this.valueObserver&&this.valueObserver.subscribe(kn,this))},e.prototype.synchronizeElement=function(){var e=this.value,t=this.element,n=t.hasOwnProperty("model")?t.model:t.value,r="radio"===t.type,i=t.matcher||function(e,t){return e===t};t.checked=r&&!!i(e,n)||!r&&!0===e||!r&&Array.isArray(e)&&-1!==e.findIndex(function(e){return!!i(e,n)})},e.prototype.synchronizeValue=function(){var e=this.value,t=this.element,n=t.hasOwnProperty("model")?t.model:t.value,r=void 0,i=t.matcher||function(e,t){return e===t};if("checkbox"===t.type){if(Array.isArray(e))return r=e.findIndex(function(e){return!!i(e,n)}),void(t.checked&&-1===r?e.push(n):t.checked||-1===r||e.splice(r,1));e=t.checked}else{if(!t.checked)return;e=n}this.oldValue=this.value,this.value=e,this.notify()},e.prototype.notify=function(){var e=this.oldValue,t=this.value;t!==e&&this.callSubscribers(t,e)},e.prototype.handleEvent=function(){this.synchronizeValue()},e.prototype.subscribe=function(e,t){this.hasSubscribers()||(this.disposeHandler=this.handler.subscribe(this.element,this)),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&(this.disposeHandler(),this.disposeHandler=null)},e.prototype.unbind=function(){this.arrayObserver&&(this.arrayObserver.unsubscribe(_n,this),this.arrayObserver=null),this.valueObserver&&this.valueObserver.unsubscribe(kn,this)},e}())||h,Tn="SelectValueObserver:array",Cn=e.SelectValueObserver=ee()(f=function(){function e(e,t,n){this.element=e,this.handler=t,this.observerLocator=n}return e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e){if(null!=e&&this.element.multiple&&!Array.isArray(e))throw new Error("Only null or Array instances can be bound to a multi-select.");this.value!==e&&(this.arrayObserver&&(this.arrayObserver.unsubscribe(Tn,this),this.arrayObserver=null),Array.isArray(e)&&(this.arrayObserver=this.observerLocator.getArrayObserver(e),this.arrayObserver.subscribe(Tn,this)),this.oldValue=this.value,this.value=e,this.synchronizeOptions(),this.notify(),this.initialSync||(this.initialSync=!0,this.observerLocator.taskQueue.queueMicroTask(this)))},e.prototype.call=function(e,t){this.synchronizeOptions()},e.prototype.synchronizeOptions=function(){var n=this.value,r=void 0;Array.isArray(n)&&(r=!0);for(var i=this.element.options,o=i.length,a=this.element.matcher||function(e,t){return e===t},e=function(){var e=i.item(o),t=e.hasOwnProperty("model")?e.model:e.value;if(r)return e.selected=-1!==n.findIndex(function(e){return!!a(t,e)}),"continue";e.selected=!!a(t,n)};o--;)e()},e.prototype.synchronizeValue=function(){for(var i=this,e=this.element.options,t=0,o=[],n=0,r=e.length;n<r;n++){var a=e.item(n);a.selected&&(o.push(a.hasOwnProperty("model")?a.model:a.value),t++)}if(this.element.multiple){if(Array.isArray(this.value)){var s=function(){for(var n=i.element.matcher||function(e,t){return e===t},e=0,t=function(){var t=i.value[e];-1===o.findIndex(function(e){return n(t,e)})?i.value.splice(e,1):e++};e<i.value.length;)t();e=0;for(var r=function(){var t=o[e];-1===i.value.findIndex(function(e){return n(t,e)})&&i.value.push(t),e++};e<o.length;)r();return{v:void 0}}();if("object"===(void 0===s?"undefined":b(s)))return s.v}}else o=0===t?null:o[0];o!==this.value&&(this.oldValue=this.value,this.value=o,this.notify())},e.prototype.notify=function(){var e=this.oldValue,t=this.value;this.callSubscribers(t,e)},e.prototype.handleEvent=function(){this.synchronizeValue()},e.prototype.subscribe=function(e,t){this.hasSubscribers()||(this.disposeHandler=this.handler.subscribe(this.element,this)),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&(this.disposeHandler(),this.disposeHandler=null)},e.prototype.bind=function(){var e=this;this.domObserver=s.DOM.createMutationObserver(function(){e.synchronizeOptions(),e.synchronizeValue()}),this.domObserver.observe(this.element,{childList:!0,subtree:!0})},e.prototype.unbind=function(){this.domObserver.disconnect(),this.domObserver=null,this.arrayObserver&&(this.arrayObserver.unsubscribe(Tn,this),this.arrayObserver=null)},e}())||f,On=e.ClassObserver=function(){function e(e){this.element=e,this.doNotCache=!0,this.value="",this.version=0}return e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e){var t=this.nameIndex||{},n=this.version,r=void 0,i=void 0;if(null!=e&&e.length)for(var o=0,a=(r=e.split(/\s+/)).length;o<a;o++)""!==(i=r[o])&&(t[i]=n,this.element.classList.add(i));if(this.value=e,this.nameIndex=t,this.version+=1,0!==n)for(i in n-=1,t)t.hasOwnProperty(i)&&t[i]===n&&this.element.classList.remove(i)},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "class" property is not supported.')},e}();function En(e){return!!(e&&e.get&&e.get.dependencies)}var Mn=e.ComputedExpression=function(r){function e(e,t){var n=x(this,r.call(this));return n.name=e,n.dependencies=t,n.isAssignable=!0,n}return _(e,r),e.prototype.evaluate=function(e,t){return e.bindingContext[this.name]},e.prototype.assign=function(e,t){e.bindingContext[this.name]=t},e.prototype.accept=function(e){throw new Error("not implemented")},e.prototype.connect=function(e,t){for(var n=this.dependencies,r=n.length;r--;)n[r].connect(e,t)},e}(we);function Pn(e,t,n,r){var i=n.get.dependencies;if(!(i instanceof Mn)){for(var o=i.length;o--;)i[o]=r.parser.parse(i[o]);i=n.get.dependencies=new Mn(t,i)}var a={bindingContext:e,overrideContext:O(e)};return new te(a,i,r)}var An=void 0,Rn=void 0,jn=void 0,In=void 0;"undefined"==typeof FEATURE_NO_SVG&&function(){An={a:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","target","transform","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],altGlyph:["class","dx","dy","externalResourcesRequired","format","glyphRef","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],altGlyphDef:["id","xml:base","xml:lang","xml:space"],altGlyphItem:["id","xml:base","xml:lang","xml:space"],animate:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateColor:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateMotion:["accumulate","additive","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keyPoints","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","origin","path","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","rotate","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateTransform:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","type","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],circle:["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","r","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],clipPath:["class","clipPathUnits","externalResourcesRequired","id","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],"color-profile":["id","local","name","rendering-intent","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],cursor:["externalResourcesRequired","id","requiredExtensions","requiredFeatures","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],defs:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],desc:["class","id","style","xml:base","xml:lang","xml:space"],ellipse:["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],feBlend:["class","height","id","in","in2","mode","result","style","width","x","xml:base","xml:lang","xml:space","y"],feColorMatrix:["class","height","id","in","result","style","type","values","width","x","xml:base","xml:lang","xml:space","y"],feComponentTransfer:["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],feComposite:["class","height","id","in","in2","k1","k2","k3","k4","operator","result","style","width","x","xml:base","xml:lang","xml:space","y"],feConvolveMatrix:["bias","class","divisor","edgeMode","height","id","in","kernelMatrix","kernelUnitLength","order","preserveAlpha","result","style","targetX","targetY","width","x","xml:base","xml:lang","xml:space","y"],feDiffuseLighting:["class","diffuseConstant","height","id","in","kernelUnitLength","result","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"],feDisplacementMap:["class","height","id","in","in2","result","scale","style","width","x","xChannelSelector","xml:base","xml:lang","xml:space","y","yChannelSelector"],feDistantLight:["azimuth","elevation","id","xml:base","xml:lang","xml:space"],feFlood:["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"],feFuncA:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncB:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncG:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncR:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feGaussianBlur:["class","height","id","in","result","stdDeviation","style","width","x","xml:base","xml:lang","xml:space","y"],feImage:["class","externalResourcesRequired","height","id","preserveAspectRatio","result","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],feMerge:["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"],feMergeNode:["id","xml:base","xml:lang","xml:space"],feMorphology:["class","height","id","in","operator","radius","result","style","width","x","xml:base","xml:lang","xml:space","y"],feOffset:["class","dx","dy","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],fePointLight:["id","x","xml:base","xml:lang","xml:space","y","z"],feSpecularLighting:["class","height","id","in","kernelUnitLength","result","specularConstant","specularExponent","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"],feSpotLight:["id","limitingConeAngle","pointsAtX","pointsAtY","pointsAtZ","specularExponent","x","xml:base","xml:lang","xml:space","y","z"],feTile:["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],feTurbulence:["baseFrequency","class","height","id","numOctaves","result","seed","stitchTiles","style","type","width","x","xml:base","xml:lang","xml:space","y"],filter:["class","externalResourcesRequired","filterRes","filterUnits","height","id","primitiveUnits","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],font:["class","externalResourcesRequired","horiz-adv-x","horiz-origin-x","horiz-origin-y","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],"font-face":["accent-height","alphabetic","ascent","bbox","cap-height","descent","font-family","font-size","font-stretch","font-style","font-variant","font-weight","hanging","id","ideographic","mathematical","overline-position","overline-thickness","panose-1","slope","stemh","stemv","strikethrough-position","strikethrough-thickness","underline-position","underline-thickness","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","widths","x-height","xml:base","xml:lang","xml:space"],"font-face-format":["id","string","xml:base","xml:lang","xml:space"],"font-face-name":["id","name","xml:base","xml:lang","xml:space"],"font-face-src":["id","xml:base","xml:lang","xml:space"],"font-face-uri":["id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],foreignObject:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"],g:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],glyph:["arabic-form","class","d","glyph-name","horiz-adv-x","id","lang","orientation","style","unicode","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],glyphRef:["class","dx","dy","format","glyphRef","id","style","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],hkern:["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"],image:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],line:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","x1","x2","xml:base","xml:lang","xml:space","y1","y2"],linearGradient:["class","externalResourcesRequired","gradientTransform","gradientUnits","id","spreadMethod","style","x1","x2","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y1","y2"],marker:["class","externalResourcesRequired","id","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","style","viewBox","xml:base","xml:lang","xml:space"],mask:["class","externalResourcesRequired","height","id","maskContentUnits","maskUnits","requiredExtensions","requiredFeatures","style","systemLanguage","width","x","xml:base","xml:lang","xml:space","y"],metadata:["id","xml:base","xml:lang","xml:space"],"missing-glyph":["class","d","horiz-adv-x","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],mpath:["externalResourcesRequired","id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],path:["class","d","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","pathLength","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],pattern:["class","externalResourcesRequired","height","id","patternContentUnits","patternTransform","patternUnits","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","viewBox","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],polygon:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],polyline:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],radialGradient:["class","cx","cy","externalResourcesRequired","fx","fy","gradientTransform","gradientUnits","id","r","spreadMethod","style","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],rect:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"],script:["externalResourcesRequired","id","type","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],set:["attributeName","attributeType","begin","dur","end","externalResourcesRequired","fill","id","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],stop:["class","id","offset","style","xml:base","xml:lang","xml:space"],style:["id","media","title","type","xml:base","xml:lang","xml:space"],svg:["baseProfile","class","contentScriptType","contentStyleType","externalResourcesRequired","height","id","onabort","onactivate","onclick","onerror","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onresize","onscroll","onunload","onzoom","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","version","viewBox","width","x","xml:base","xml:lang","xml:space","y","zoomAndPan"],switch:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],symbol:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","style","viewBox","xml:base","xml:lang","xml:space"],text:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","transform","x","xml:base","xml:lang","xml:space","y"],textPath:["class","externalResourcesRequired","id","lengthAdjust","method","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","spacing","startOffset","style","systemLanguage","textLength","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],title:["class","id","style","xml:base","xml:lang","xml:space"],tref:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],tspan:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xml:base","xml:lang","xml:space","y"],use:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],view:["externalResourcesRequired","id","preserveAspectRatio","viewBox","viewTarget","xml:base","xml:lang","xml:space","zoomAndPan"],vkern:["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"]},Rn={a:!0,altGlyph:!0,animate:!0,animateColor:!0,circle:!0,clipPath:!0,defs:!0,ellipse:!0,feBlend:!0,feColorMatrix:!0,feComponentTransfer:!0,feComposite:!0,feConvolveMatrix:!0,feDiffuseLighting:!0,feDisplacementMap:!0,feFlood:!0,feGaussianBlur:!0,feImage:!0,feMerge:!0,feMorphology:!0,feOffset:!0,feSpecularLighting:!0,feTile:!0,feTurbulence:!0,filter:!0,font:!0,foreignObject:!0,g:!0,glyph:!0,glyphRef:!0,image:!0,line:!0,linearGradient:!0,marker:!0,mask:!0,"missing-glyph":!0,path:!0,pattern:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,svg:!0,switch:!0,symbol:!0,text:!0,textPath:!0,tref:!0,tspan:!0,use:!0},jn={"alignment-baseline":!0,"baseline-shift":!0,"clip-path":!0,"clip-rule":!0,clip:!0,"color-interpolation-filters":!0,"color-interpolation":!0,"color-profile":!0,"color-rendering":!0,color:!0,cursor:!0,direction:!0,display:!0,"dominant-baseline":!0,"enable-background":!0,"fill-opacity":!0,"fill-rule":!0,fill:!0,filter:!0,"flood-color":!0,"flood-opacity":!0,"font-family":!0,"font-size-adjust":!0,"font-size":!0,"font-stretch":!0,"font-style":!0,"font-variant":!0,"font-weight":!0,"glyph-orientation-horizontal":!0,"glyph-orientation-vertical":!0,"image-rendering":!0,kerning:!0,"letter-spacing":!0,"lighting-color":!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,mask:!0,opacity:!0,overflow:!0,"pointer-events":!0,"shape-rendering":!0,"stop-color":!0,"stop-opacity":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,stroke:!0,"text-anchor":!0,"text-decoration":!0,"text-rendering":!0,"unicode-bidi":!0,visibility:!0,"word-spacing":!0,"writing-mode":!0};In=function(){function e(){var e,t;"altglyph"===(e="<svg><altGlyph /></svg>",t=s.DOM.createElement("div"),t.innerHTML=e,t.firstChild).firstElementChild.nodeName&&Ln.altGlyph&&(Ln.altglyph=Ln.altGlyph,delete Ln.altGlyph,Ln.altglyphdef=Ln.altGlyphDef,delete Ln.altGlyphDef,Ln.altglyphitem=Ln.altGlyphItem,delete Ln.altGlyphItem,Ln.glyphref=Ln.glyphRef,delete Ln.glyphRef)}return e.prototype.isStandardSvgAttribute=function(e,t){return Dn[e]&&Nn[t]||Ln[e]&&-1!==Ln[e].indexOf(t)},e}()}();var Ln=e.elements=An,Dn=e.presentationElements=Rn,Nn=e.presentationAttributes=jn,Bn=e.SVGAnalyzer=In||function(){function e(){}return e.prototype.isStandardSvgAttribute=function(){return!1},e}(),Fn=e.ObserverLocator=(v=p=function(){function e(e,t,n,r,i){this.taskQueue=e,this.eventManager=t,this.dirtyChecker=n,this.svgAnalyzer=r,this.parser=i,this.adapters=[],this.logger=o.getLogger("observer-locator")}return e.prototype.getObserver=function(e,t){var n,r=e.__observers__;return r&&t in r?r[t]:((n=this.createPropertyObserver(e,t)).doNotCache||(void 0===r&&(r=this.getOrCreateObserversLookup(e)),r[t]=n),n)},e.prototype.getOrCreateObserversLookup=function(e){return e.__observers__||this.createObserversLookup(e)},e.prototype.createObserversLookup=function(e){var t={};return Reflect.defineProperty(e,"__observers__",{enumerable:!1,configurable:!1,writable:!1,value:t})||this.logger.warn("Cannot add observers to object",e),t},e.prototype.addAdapter=function(e){this.adapters.push(e)},e.prototype.getAdapterObserver=function(e,t,n){for(var r=0,i=this.adapters.length;r<i;r++){var o=this.adapters[r].getObserver(e,t,n);if(o)return o}return null},e.prototype.createPropertyObserver=function(e,t){var n,r=void 0,i=void 0;if(!(e instanceof Object))return new vn(e,t);if(e instanceof s.DOM.Element){if("class"===t)return new On(e);if("style"===t||"css"===t)return new wn(e,t);if(r=this.eventManager.getElementHandler(e,t),"value"===t&&"select"===e.tagName.toLowerCase())return new Cn(e,r,this);if("checked"===t&&"input"===e.tagName.toLowerCase())return new Sn(e,r,this);if(r)return new xn(e,t,r);if(i=/^xlink:(.+)$/.exec(t))return new gn(e,t,i[1]);if("role"===t&&(e instanceof s.DOM.Element||e instanceof s.DOM.SVGElement)||/^\w+:|^data-|^aria-/.test(t)||e instanceof s.DOM.SVGElement&&this.svgAnalyzer.isStandardSvgAttribute(e.nodeName,t))return new bn(e,t)}if(En(n=Object.getPropertyDescriptor(e,t)))return Pn(e,t,n,this);if(n){var o=n.get||n.set;if(o){if(o.getObserver)return o.getObserver(e);var a=this.getAdapterObserver(e,t,n);return a||new hn(this.dirtyChecker,e,t)}}return e instanceof Array?"length"===t?this.getArrayObserver(e).getLengthObserver():new hn(this.dirtyChecker,e,t):e instanceof Map?"size"===t?this.getMapObserver(e).getLengthObserver():new hn(this.dirtyChecker,e,t):e instanceof Set?"size"===t?this.getSetObserver(e).getLengthObserver():new hn(this.dirtyChecker,e,t):new mn(this.taskQueue,e,t)},e.prototype.getAccessor=function(e,t){if(e instanceof s.DOM.Element){if("class"===t||"style"===t||"css"===t||"value"===t&&("input"===e.tagName.toLowerCase()||"select"===e.tagName.toLowerCase())||"checked"===t&&"input"===e.tagName.toLowerCase()||"model"===t&&"input"===e.tagName.toLowerCase()||/^xlink:.+$/.exec(t))return this.getObserver(e,t);if(/^\w+:|^data-|^aria-/.test(t)||e instanceof s.DOM.SVGElement&&this.svgAnalyzer.isStandardSvgAttribute(e.nodeName,t)||"img"===e.tagName.toLowerCase()&&"src"===t||"a"===e.tagName.toLowerCase()&&"href"===t)return yn}return pn},e.prototype.getArrayObserver=function(e){return ye(this.taskQueue,e)},e.prototype.getMapObserver=function(e){return Qt(this.taskQueue,e)},e.prototype.getSetObserver=function(e){return Kn(this.taskQueue,e)},e}(),p.inject=[n.TaskQueue,cn,dn,Bn,Zt],v),Vn=(e.ObjectObservationAdapter=function(){function e(){}return e.prototype.getObserver=function(e,t,n){throw new Error("BindingAdapters must implement getObserver(object, propertyName).")},e}(),e.BindingExpression=function(){function e(e,t,n,r,i,o){this.observerLocator=e,this.targetProperty=t,this.sourceExpression=n,this.mode=r,this.lookupFunctions=i,this.attribute=o,this.discrete=!1}return e.prototype.createBinding=function(e){return new zn(this.observerLocator,this.sourceExpression,e,this.targetProperty,this.mode,this.lookupFunctions)},e}()),zn=e.Binding=D()(m=function(){function e(e,t,n,r,i,o){this.observerLocator=e,this.sourceExpression=t,this.target=n,this.targetProperty=r,this.mode=i,this.lookupFunctions=o}return e.prototype.updateTarget=function(e){this.targetObserver.setValue(e,this.target,this.targetProperty)},e.prototype.updateSource=function(e){this.sourceExpression.assign(this.source,e,this.lookupFunctions)},e.prototype.call=function(e,t,n){if(this.isBound){if(e===S)return n=this.targetObserver.getValue(this.target,this.targetProperty),(t=this.sourceExpression.evaluate(this.source,this.lookupFunctions))!==n&&this.updateTarget(t),void(this.mode!==Ue.oneTime&&(this._version++,this.sourceExpression.connect(this,this.source),this.unobserve(!1)));if(e!==k)throw new Error("Unexpected call context "+e);t!==this.sourceExpression.evaluate(this.source,this.lookupFunctions)&&this.updateSource(t)}},e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e,this.sourceExpression.bind&&this.sourceExpression.bind(this,e,this.lookupFunctions);var t=this.mode;if(!this.targetObserver){var n=t===Ue.twoWay||t===Ue.fromView?"getObserver":"getAccessor";this.targetObserver=this.observerLocator[n](this.target,this.targetProperty)}if("bind"in this.targetObserver&&this.targetObserver.bind(),this.mode!==Ue.fromView){var r=this.sourceExpression.evaluate(e,this.lookupFunctions);this.updateTarget(r)}t!==Ue.oneTime&&(t===Ue.toView?W(this):t===Ue.twoWay?(this.sourceExpression.connect(this,e),this.targetObserver.subscribe(k,this)):t===Ue.fromView&&this.targetObserver.subscribe(k,this))},e.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,"unbind"in this.targetObserver&&this.targetObserver.unbind(),this.targetObserver.unsubscribe&&this.targetObserver.unsubscribe(k,this),this.unobserve(!0))},e.prototype.connect=function(e){if(this.isBound){if(e){var t=this.sourceExpression.evaluate(this.source,this.lookupFunctions);this.updateTarget(t)}this.sourceExpression.connect(this,this.source)}},e}())||m,Hn=(e.CallExpression=function(){function e(e,t,n,r){this.observerLocator=e,this.targetProperty=t,this.sourceExpression=n,this.lookupFunctions=r}return e.prototype.createBinding=function(e){return new Hn(this.observerLocator,this.sourceExpression,e,this.targetProperty,this.lookupFunctions)},e}(),e.Call=function(){function e(e,t,n,r,i){this.sourceExpression=t,this.target=n,this.targetProperty=e.getObserver(n,r),this.lookupFunctions=i}return e.prototype.callSource=function(e){var t=this.source.overrideContext;Object.assign(t,e),t.$event=e;var n=this.sourceExpression.evaluate(this.source,this.lookupFunctions,!0);for(var r in delete t.$event,e)delete t[r];return n},e.prototype.bind=function(e){var t=this;if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e,this.sourceExpression.bind&&this.sourceExpression.bind(this,e,this.lookupFunctions),this.targetProperty.setValue(function(e){return t.callSource(e)})},e.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,this.targetProperty.setValue(null))},e}()),Un=e.ValueConverterResource=function(){function t(e){this.name=e}return t.convention=function(e){if(e.endsWith("ValueConverter"))return new t(C(e.substring(0,e.length-14)))},t.prototype.initialize=function(e,t){this.instance=e.get(t)},t.prototype.register=function(e,t){e.registerValueConverter(t||this.name,this.instance)},t.prototype.load=function(e,t){},t}();var qn=e.BindingBehaviorResource=function(){function t(e){this.name=e}return t.convention=function(e){if(e.endsWith("BindingBehavior"))return new t(C(e.substring(0,e.length-15)))},t.prototype.initialize=function(e,t){this.instance=e.get(t)},t.prototype.register=function(e,t){e.registerBindingBehavior(t||this.name,this.instance)},t.prototype.load=function(e,t){},t}();e.ListenerExpression=function(){function e(e,t,n,r,i,o){this.eventManager=e,this.targetEvent=t,this.sourceExpression=n,this.delegationStrategy=r,this.discrete=!0,this.preventDefault=i,this.lookupFunctions=o}return e.prototype.createBinding=function(e){return new Wn(this.eventManager,this.targetEvent,this.delegationStrategy,this.sourceExpression,e,this.preventDefault,this.lookupFunctions)},e}();var Wn=e.Listener=function(){function e(e,t,n,r,i,o,a){this.eventManager=e,this.targetEvent=t,this.delegationStrategy=n,this.sourceExpression=r,this.target=i,this.preventDefault=o,this.lookupFunctions=a}return e.prototype.callSource=function(e){var t=this.source.overrideContext;t.$event=e;var n=this.sourceExpression.evaluate(this.source,this.lookupFunctions,!0);return delete t.$event,!0!==n&&this.preventDefault&&e.preventDefault(),n},e.prototype.handleEvent=function(e){this.callSource(e)},e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e,this.sourceExpression.bind&&this.sourceExpression.bind(this,e,this.lookupFunctions),this._disposeListener=this.eventManager.addEventListener(this.target,this.targetEvent,this,this.delegationStrategy)},e.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,this._disposeListener(),this._disposeListener=null)},e}();function Gn(e){var t=e.au;if(void 0===t)throw new Error('No Aurelia APIs are defined for the element: "'+e.tagName+'".');return t}e.NameExpression=function(){function t(e,t,n){this.sourceExpression=e,this.apiName=t,this.lookupFunctions=n,this.discrete=!0}return t.prototype.createBinding=function(e){return new Yn(this.sourceExpression,t.locateAPI(e,this.apiName),this.lookupFunctions)},t.locateAPI=function(e,t){switch(t){case"element":return e;case"controller":return Gn(e).controller;case"view-model":return Gn(e).controller.viewModel;case"view":return Gn(e).controller.view;default:var n=Gn(e)[t];if(void 0===n)throw new Error('Attempted to reference "'+t+"\", but it was not found amongst the target's API.");return n.viewModel}},t}();var Yn=function(){function e(e,t,n){this.sourceExpression=e,this.target=t,this.lookupFunctions=n}return e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e,this.sourceExpression.bind&&this.sourceExpression.bind(this,e,this.lookupFunctions),this.sourceExpression.assign(this.source,this.target,this.lookupFunctions)},e.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.evaluate(this.source,this.lookupFunctions)===this.target&&this.sourceExpression.assign(this.source,null,this.lookupFunctions),this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null)},e}(),Xn={bindingBehaviors:function(e){return null},valueConverters:function(e){return null}},Zn=(e.BindingEngine=(y=g=function(){function e(e,t){this.observerLocator=e,this.parser=t}return e.prototype.createBindingExpression=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?Ue.toView:arguments[2],r=arguments.length<=3||void 0===arguments[3]?Xn:arguments[3];return new Vn(this.observerLocator,e,this.parser.parse(t),n,r)},e.prototype.propertyObserver=function(n,r){var i=this;return{subscribe:function(e){var t=i.observerLocator.getObserver(n,r);return t.subscribe(e),{dispose:function(){return t.unsubscribe(e)}}}}},e.prototype.collectionObserver=function(n){var r=this;return{subscribe:function(e){var t=void 0;if(n instanceof Array)t=r.observerLocator.getArrayObserver(n);else if(n instanceof Map)t=r.observerLocator.getMapObserver(n);else{if(!(n instanceof Set))throw new Error("collection must be an instance of Array, Map or Set.");t=r.observerLocator.getSetObserver(n)}return t.subscribe(e),{dispose:function(){return t.unsubscribe(e)}}}}},e.prototype.expressionObserver=function(e,t){var n={bindingContext:e,overrideContext:O(e)};return new te(n,this.parser.parse(t),this.observerLocator,Xn)},e.prototype.parseExpression=function(e){return this.parser.parse(e)},e.prototype.registerAdapter=function(e){this.observerLocator.addAdapter(e)},e}(),g.inject=[Fn,Zt],y),Set.prototype);function Kn(e,t){return $n.for(e,t)}e.getSetObserver=Kn;var $n=function(n){function o(e,t){return x(this,n.call(this,e,t))}return _(o,n),o.for=function(e,t){return"__set_observer__"in t||Reflect.defineProperty(t,"__set_observer__",{value:o.create(e,t),enumerable:!1,configurable:!1}),t.__set_observer__},o.create=function(e,n){var r=new o(e,n),i=Zn;return i.add===n.add&&i.delete===n.delete&&i.clear===n.clear||(i={add:n.add,delete:n.delete,clear:n.clear}),n.add=function(){var e=n.size,t=i.add.apply(n,arguments);return n.size===e||r.addChangeRecord({type:"add",object:n,value:Array.from(n).pop()}),t},n.delete=function(){var e=n.has(arguments[0]),t=i.delete.apply(n,arguments);return e&&r.addChangeRecord({type:"delete",object:n,value:arguments[0]}),t},n.clear=function(){var e=i.clear.apply(n,arguments);return r.addChangeRecord({type:"clear",object:n}),e},r},o}(ue);var Qn={};function Jn(e,t){Qn.hasOwnProperty(t)||(Qn[t]=0),e.observeProperty(Qn,t)}});