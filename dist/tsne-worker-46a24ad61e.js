!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).TSNE=e()}}(function(){return function e(t,r,n){function a(s,o){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return a(r||e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)a(n[s]);return a}({1:[function(e,t,r){"use strict";function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}var a=e("./lib/thunk.js");t.exports=function(e){var t=new n;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var i=0;i<r.length;++i){var s=r[i];if("array"===s||"object"==typeof s&&s.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(s.blockIndices?s.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===s)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===s){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===s){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof s||!s.offset)throw new Error("cwise: Unknown argument type "+r[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:s.array,offset:s.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,a(t)}},{"./lib/thunk.js":3}],2:[function(e,t,r){"use strict";function n(e,t,r){var n,a,i=e.length,s=t.arrayArgs.length,o=t.indexArgs.length>0,u=[],l=[],c=0,f=0;for(n=0;i>n;++n)l.push(["i",n,"=0"].join(""));for(a=0;s>a;++a)for(n=0;i>n;++n)f=c,c=e[n],0===n?l.push(["d",a,"s",n,"=t",a,"p",c].join("")):l.push(["d",a,"s",n,"=(t",a,"p",c,"-s",f,"*t",a,"p",f,")"].join(""));for(u.push("var "+l.join(",")),n=i-1;n>=0;--n)c=e[n],u.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(u.push(r),n=0;i>n;++n){for(f=c,c=e[n],a=0;s>a;++a)u.push(["p",a,"+=d",a,"s",n].join(""));o&&(n>0&&u.push(["index[",f,"]-=s",f].join("")),u.push(["++index[",c,"]"].join(""))),u.push("}")}return u.join("\n")}function a(e,t,r){for(var n=e.body,a=[],i=[],s=0;s<e.args.length;++s){var o=e.args[s];if(!(o.count<=0)){var u=new RegExp(o.name,"g"),l="",c=t.arrayArgs.indexOf(s);switch(t.argTypes[s]){case"offset":var f=t.offsetArgIndex.indexOf(s);c=t.offsetArgs[f].array,l="+q"+f;case"array":l="p"+c+l;var p="l"+s,h="a"+c;if(0===t.arrayBlockIndices[c])1===o.count?"generic"===r[c]?o.lvalue?(a.push(["var ",p,"=",h,".get(",l,")"].join("")),n=n.replace(u,p),i.push([h,".set(",l,",",p,")"].join(""))):n=n.replace(u,[h,".get(",l,")"].join("")):n=n.replace(u,[h,"[",l,"]"].join("")):"generic"===r[c]?(a.push(["var ",p,"=",h,".get(",l,")"].join("")),n=n.replace(u,p),o.lvalue&&i.push([h,".set(",l,",",p,")"].join(""))):(a.push(["var ",p,"=",h,"[",l,"]"].join("")),n=n.replace(u,p),o.lvalue&&i.push([h,"[",l,"]=",p].join("")));else{for(var d=[o.name],m=[l],y=0;y<Math.abs(t.arrayBlockIndices[c]);y++)d.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(y+1)+"*t"+c+"b"+y);if(u=new RegExp(d.join(""),"g"),l=m.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[h,"[",l,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+t.scalarArgs.indexOf(s));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[a.join("\n"),n,i.join("\n")].join("\n").trim()}function i(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var a=e[n],i=a.match(/\d+/);i=i?i[0]:"",0===a.charAt(0)?t[n]="u"+a.charAt(1)+i:t[n]=a.charAt(0)+i,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}var s=e("uniq");t.exports=function(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,o=new Array(e.arrayArgs.length),u=new Array(e.arrayArgs.length),l=0;l<e.arrayArgs.length;++l)u[l]=t[2*l],o[l]=t[2*l+1];var c=[],f=[],p=[],h=[],d=[];for(l=0;l<e.arrayArgs.length;++l){e.arrayBlockIndices[l]<0?(p.push(0),h.push(r),c.push(r),f.push(r+e.arrayBlockIndices[l])):(p.push(e.arrayBlockIndices[l]),h.push(e.arrayBlockIndices[l]+r),c.push(0),f.push(e.arrayBlockIndices[l]));for(var m=[],y=0;y<o[l].length;y++)p[l]<=o[l][y]&&o[l][y]<h[l]&&m.push(o[l][y]-p[l]);d.push(m)}var g=["SS"],v=["'use strict'"],b=[];for(y=0;r>y;++y)b.push(["s",y,"=SS[",y,"]"].join(""));for(l=0;l<e.arrayArgs.length;++l){for(g.push("a"+l),g.push("t"+l),g.push("p"+l),y=0;r>y;++y)b.push(["t",l,"p",y,"=t",l,"[",p[l]+y,"]"].join(""));for(y=0;y<Math.abs(e.arrayBlockIndices[l]);++y)b.push(["t",l,"b",y,"=t",l,"[",c[l]+y,"]"].join(""))}for(l=0;l<e.scalarArgs.length;++l)g.push("Y"+l);if(e.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),e.indexArgs.length>0){var _=new Array(r);for(l=0;r>l;++l)_[l]="0";b.push(["index=[",_.join(","),"]"].join(""))}for(l=0;l<e.offsetArgs.length;++l){var w=e.offsetArgs[l],k=[];for(y=0;y<w.offset.length;++y)0!==w.offset[y]&&(1===w.offset[y]?k.push(["t",w.array,"p",y].join("")):k.push([w.offset[y],"*t",w.array,"p",y].join("")));0===k.length?b.push("q"+l+"=0"):b.push(["q",l,"=",k.join("+")].join(""))}var S=s([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));for(b=b.concat(S),v.push("var "+b.join(",")),l=0;l<e.arrayArgs.length;++l)v.push("p"+l+"|=0");e.pre.body.length>3&&v.push(a(e.pre,e,u));var x=a(e.body,e,u),E=function(e){for(var t=0,r=e[0].length;r>t;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}(d);r>E?v.push(function(e,t,r,a){for(var i=t.length,s=r.arrayArgs.length,o=r.blockSize,u=r.indexArgs.length>0,l=[],c=0;s>c;++c)l.push(["var offset",c,"=p",c].join(""));for(c=e;i>c;++c)l.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),l.push(["if(j",c,"<",o,"){"].join("")),l.push(["s",t[c],"=j",c].join("")),l.push(["j",c,"=0"].join("")),l.push(["}else{s",t[c],"=",o].join("")),l.push(["j",c,"-=",o,"}"].join("")),u&&l.push(["index[",t[c],"]=j",c].join(""));for(c=0;s>c;++c){for(var f=["offset"+c],p=e;i>p;++p)f.push(["j",p,"*t",c,"p",t[p]].join(""));l.push(["p",c,"=(",f.join("+"),")"].join(""))}for(l.push(n(t,r,a)),c=e;i>c;++c)l.push("}");return l.join("\n")}(E,d[0],e,x)):v.push(n(d[0],e,x)),e.post.body.length>3&&v.push(a(e.post,e,u)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+v.join("\n")+"\n----------");var A=[e.funcName||"unnamed","_cwise_loop_",o[0].join("s"),"m",E,i(u)].join("");return new Function(["function ",A,"(",g.join(","),"){",v.join("\n"),"} return ",A].join(""))()}},{uniq:17}],3:[function(e,t,r){"use strict";var n=e("./compile.js");t.exports=function(e){var t=["'use strict'","var CACHED={}"],r=[],a=e.funcName+"_cwise_thunk";t.push(["return function ",a,"(",e.shimArgs.join(","),"){"].join(""));for(var i=[],s=[],o=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],u=[],l=[],c=0;c<e.arrayArgs.length;++c){var f=e.arrayArgs[c];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),i.push("t"+f),i.push("r"+f),s.push("t"+f),s.push("r"+f+".join()"),o.push("array"+f+".data"),o.push("array"+f+".stride"),o.push("array"+f+".offset|0"),c>0&&(u.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),l.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}for(e.arrayArgs.length>1&&(t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),c=0;c<e.scalarArgs.length;++c)o.push("scalar"+e.scalarArgs[c]);return r.push(["type=[",s.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",o.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(n.bind(void 0,e))}},{"./compile.js":2}],4:[function(e,t,r){"use strict";function n(e,t,r){this.name=e,this.lvalue=t,this.rvalue=r,this.count=0}function a(e,t,r,n){this.body=e,this.args=t,this.thisVars=r,this.localVars=n}var i=e("esprima"),s=e("uniq"),o=0;t.exports=function(e){function t(e){var t=f+e.replace(/\_/g,"__");return g.push(t),t}function r(e){var t="this_"+e.replace(/\_/g,"__");return v.push(t),t}function u(e,t){for(var r=e.range[0],n=e.range[1],a=r+1;n>a;++a)m[a]="";m[r]=t}for(var l=["(",e,")()"].join(""),c=i.parse(l,{range:!0}),f="_inline_"+o+++"_",p=function(e){for(var t=e.body[0].expression.callee.params,r=new Array(t.length),n=0;n<t.length;++n)r[n]=t[n].name;return r}(c),h=new Array(p.length),d=0;d<p.length;++d)h[d]=new n([f,"arg",d,"_"].join(""),!1,!1);for(var m=new Array(l.length),y=(d=0,l.length);y>d;++d)m[d]=l.charAt(d);var g=[],v=[],b=1,_=2;return function e(n,a){if(n.parent=a,"MemberExpression"===n.type)n.computed?(e(n.object,n),e(n.property,n)):"ThisExpression"===n.object.type?u(n,r(n.property.name)):e(n.object,n);else{if("ThisExpression"===n.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===n.type){var i=n.name,s=p.indexOf(i);if(s>=0){var o=h[s],l=function(e){return"AssignmentExpression"===e.parent.type&&e.parent.left===e?"="===e.parent.operator?b:b|_:"UpdateExpression"===e.parent.type?b|_:_}(n);l&b&&(o.lvalue=!0),l&_&&(o.rvalue=!0),++o.count,u(n,o.name)}else(function(e){if("eval"===e)throw new Error("cwise-parser: eval() not allowed");return"undefined"!=typeof window?e in window:"undefined"!=typeof GLOBAL?e in GLOBAL:"undefined"!=typeof self&&e in self})(i)||u(n,t(i))}else if("Literal"===n.type)"string"==typeof n.value&&u(n,function(e){return"'"+e.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}(n.value));else{if("WithStatement"===n.type)throw new Error("cwise-parser: with() statements not allowed");for(var c=Object.keys(n),f=0,d=c.length;d>f;++f)if("parent"!==c[f]){var m=n[c[f]];if(m)if(m instanceof Array)for(var y=0;y<m.length;++y)m[y]&&"string"==typeof m[y].type&&e(m[y],n);else"string"==typeof m.type&&e(m,n)}}}}(c.body[0].expression.callee.body,void 0),s(g),s(v),new a(function(e){return m.slice(e.range[0],e.range[1]).join("")}(c.body[0].expression.callee.body),h,v,g)}},{esprima:8,uniq:17}],5:[function(e,t,r){"use strict";var n=e("cwise-parser"),a=e("cwise-compiler"),i=["args","body"],s=["pre","post","printCode","funcName","blockSize"];t.exports=function(e){for(var t in e)i.indexOf(t)<0&&s.indexOf(t)<0&&console.warn("cwise: Unknown argument '"+t+"' passed to expression compiler");for(var r=0;r<i.length;++r)if(!e[i[r]])throw new Error("cwise: Missing argument: "+i[r]);return a({args:e.args,pre:n(e.pre||function(){}),body:n(e.body),post:n(e.post||function(){}),debug:!!e.printCode,funcName:e.funcName||e.body.name||"cwise",blockSize:e.blockSize||64})}},{"cwise-compiler":1,"cwise-parser":4}],6:[function(e,t,r){t.exports=e("cwise-compiler")},{"cwise-compiler":1}],7:[function(e,t,r){"use strict";t.exports=function(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(e>0)return function(e,t){var r,n;for(r=new Array(e),n=0;e>n;++n)r[n]=t;return r}(0|e,t);break;case"object":if("number"==typeof e.length)return function e(t,r,n){var a=0|t[n];if(0>=a)return[];var i,s=new Array(a);if(n===t.length-1)for(i=0;a>i;++i)s[i]=r;else for(i=0;a>i;++i)s[i]=e(t,r,n+1);return s}(e,t,0)}return[]}},{}],8:[function(e,t,r){!function(e,t){"use strict";t(void 0!==r?r:e.esprima={})}(this,function(e){"use strict";function t(e,t){if(!e)throw new Error("ASSERT: "+t)}function r(e){return e>=48&&57>=e}function n(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function a(e){return"01234567".indexOf(e)>=0}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function s(e){return 10===e||13===e||8232===e||8233===e}function o(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||92===e||e>=128&&ke.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function u(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||92===e||e>=128&&ke.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function l(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function c(e){return"eval"===e||"arguments"===e}function f(e,r,n,a,i){var s;t("number"==typeof n,"Comment must have valid position"),Ne.lastCommentStart>=n||(Ne.lastCommentStart=n,s={type:e,value:r},Oe.range&&(s.range=[n,a]),Oe.loc&&(s.loc=i),Oe.comments.push(s),Oe.attachComment&&(Oe.leadingComments.push(s),Oe.trailingComments.push(s)))}function p(e){var t,r,n,a;for(t=Ae-e,r={start:{line:Ie,column:Ae-je-e}};Ce>Ae;)if(n=xe.charCodeAt(Ae),++Ae,s(n))return Oe.comments&&(a=xe.slice(t+e,Ae-1),r.end={line:Ie,column:Ae-je-1},f("Line",a,t,Ae-1,r)),13===n&&10===xe.charCodeAt(Ae)&&++Ae,++Ie,void(je=Ae);Oe.comments&&(a=xe.slice(t+e,Ae),r.end={line:Ie,column:Ae-je},f("Line",a,t,Ae,r))}function h(){var e,t,r,n;for(Oe.comments&&(e=Ae-2,t={start:{line:Ie,column:Ae-je-2}});Ce>Ae;)if(s(r=xe.charCodeAt(Ae)))13===r&&10===xe.charCodeAt(Ae+1)&&++Ae,++Ie,je=++Ae,Ae>=Ce&&V({},we.UnexpectedToken,"ILLEGAL");else if(42===r){if(47===xe.charCodeAt(Ae+1))return++Ae,++Ae,void(Oe.comments&&(n=xe.slice(e+2,Ae-2),t.end={line:Ie,column:Ae-je},f("Block",n,e,Ae,t)));++Ae}else++Ae;V({},we.UnexpectedToken,"ILLEGAL")}function d(){var e,t;for(t=0===Ae;Ce>Ae;)if(i(e=xe.charCodeAt(Ae)))++Ae;else if(s(e))++Ae,13===e&&10===xe.charCodeAt(Ae)&&++Ae,++Ie,je=Ae,t=!0;else if(47===e)if(47===(e=xe.charCodeAt(Ae+1)))++Ae,++Ae,p(2),t=!0;else{if(42!==e)break;++Ae,++Ae,h()}else if(t&&45===e){if(45!==xe.charCodeAt(Ae+1)||62!==xe.charCodeAt(Ae+2))break;Ae+=3,p(3)}else{if(60!==e)break;if("!--"!==xe.slice(Ae+1,Ae+4))break;++Ae,++Ae,++Ae,++Ae,p(4)}}function m(e){var t,r,a,i=0;for(r="u"===e?4:2,t=0;r>t;++t){if(!(Ce>Ae&&n(xe[Ae])))return"";a=xe[Ae++],i=16*i+"0123456789abcdef".indexOf(a.toLowerCase())}return String.fromCharCode(i)}function y(){var e,t;for(e=xe.charCodeAt(Ae++),t=String.fromCharCode(e),92===e&&(117!==xe.charCodeAt(Ae)&&V({},we.UnexpectedToken,"ILLEGAL"),++Ae,(e=m("u"))&&"\\"!==e&&o(e.charCodeAt(0))||V({},we.UnexpectedToken,"ILLEGAL"),t=e);Ce>Ae&&u(e=xe.charCodeAt(Ae));)++Ae,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==xe.charCodeAt(Ae)&&V({},we.UnexpectedToken,"ILLEGAL"),++Ae,(e=m("u"))&&"\\"!==e&&u(e.charCodeAt(0))||V({},we.UnexpectedToken,"ILLEGAL"),t+=e);return t}function g(){var e,t;return e=Ae,{type:1===(t=92===xe.charCodeAt(Ae)?y():function(){var e,t;for(e=Ae++;Ce>Ae;){if(92===(t=xe.charCodeAt(Ae)))return Ae=e,y();if(!u(t))break;++Ae}return xe.slice(e,Ae)}()).length?ye.Identifier:function(e){if(Ee&&l(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}(t)?ye.Keyword:"null"===t?ye.NullLiteral:"true"===t||"false"===t?ye.BooleanLiteral:ye.Identifier,value:t,lineNumber:Ie,lineStart:je,start:e,end:Ae}}function v(){var e,t,r,n,a=Ae,i=xe.charCodeAt(Ae),s=xe[Ae];switch(i){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ae,Oe.tokenize&&(40===i?Oe.openParenToken=Oe.tokens.length:123===i&&(Oe.openCurlyToken=Oe.tokens.length)),{type:ye.Punctuator,value:String.fromCharCode(i),lineNumber:Ie,lineStart:je,start:a,end:Ae};default:if(61===(e=xe.charCodeAt(Ae+1)))switch(i){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ae+=2,{type:ye.Punctuator,value:String.fromCharCode(i)+String.fromCharCode(e),lineNumber:Ie,lineStart:je,start:a,end:Ae};case 33:case 61:return Ae+=2,61===xe.charCodeAt(Ae)&&++Ae,{type:ye.Punctuator,value:xe.slice(a,Ae),lineNumber:Ie,lineStart:je,start:a,end:Ae}}}return">>>="===(n=xe.substr(Ae,4))?(Ae+=4,{type:ye.Punctuator,value:n,lineNumber:Ie,lineStart:je,start:a,end:Ae}):">>>"===(r=n.substr(0,3))||"<<="===r||">>="===r?(Ae+=3,{type:ye.Punctuator,value:r,lineNumber:Ie,lineStart:je,start:a,end:Ae}):s===(t=r.substr(0,2))[1]&&"+-<>&|".indexOf(s)>=0||"=>"===t?(Ae+=2,{type:ye.Punctuator,value:t,lineNumber:Ie,lineStart:je,start:a,end:Ae}):"<>=!+-*%&|^/".indexOf(s)>=0?(++Ae,{type:ye.Punctuator,value:s,lineNumber:Ie,lineStart:je,start:a,end:Ae}):void V({},we.UnexpectedToken,"ILLEGAL")}function b(e){for(var t="";Ce>Ae&&n(xe[Ae]);)t+=xe[Ae++];return 0===t.length&&V({},we.UnexpectedToken,"ILLEGAL"),o(xe.charCodeAt(Ae))&&V({},we.UnexpectedToken,"ILLEGAL"),{type:ye.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:Ie,lineStart:je,start:e,end:Ae}}function _(){var e,n,i;if(t(r((i=xe[Ae]).charCodeAt(0))||"."===i,"Numeric literal must start with a decimal digit or a decimal point"),n=Ae,e="","."!==i){if(e=xe[Ae++],i=xe[Ae],"0"===e){if("x"===i||"X"===i)return++Ae,b(n);if(a(i)&&function(){var e,t;for(e=Ae+1;Ce>e;++e){if("8"===(t=xe[e])||"9"===t)return!1;if(!a(t))return!0}return!0}())return function(e){for(var t="0"+xe[Ae++];Ce>Ae&&a(xe[Ae]);)t+=xe[Ae++];return(o(xe.charCodeAt(Ae))||r(xe.charCodeAt(Ae)))&&V({},we.UnexpectedToken,"ILLEGAL"),{type:ye.NumericLiteral,value:parseInt(t,8),octal:!0,lineNumber:Ie,lineStart:je,start:e,end:Ae}}(n)}for(;r(xe.charCodeAt(Ae));)e+=xe[Ae++];i=xe[Ae]}if("."===i){for(e+=xe[Ae++];r(xe.charCodeAt(Ae));)e+=xe[Ae++];i=xe[Ae]}if("e"===i||"E"===i)if(e+=xe[Ae++],("+"===(i=xe[Ae])||"-"===i)&&(e+=xe[Ae++]),r(xe.charCodeAt(Ae)))for(;r(xe.charCodeAt(Ae));)e+=xe[Ae++];else V({},we.UnexpectedToken,"ILLEGAL");return o(xe.charCodeAt(Ae))&&V({},we.UnexpectedToken,"ILLEGAL"),{type:ye.NumericLiteral,value:parseFloat(e),lineNumber:Ie,lineStart:je,start:n,end:Ae}}function w(){var e,r,n,a;for(t("/"===(e=xe[Ae]),"Regular expression literal must start with a slash"),r=xe[Ae++],n=!1,a=!1;Ce>Ae;)if(r+=e=xe[Ae++],"\\"===e)s((e=xe[Ae++]).charCodeAt(0))&&V({},we.UnterminatedRegExp),r+=e;else if(s(e.charCodeAt(0)))V({},we.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){a=!0;break}"["===e&&(n=!0)}return a||V({},we.UnterminatedRegExp),{value:r.substr(1,r.length-2),literal:r}}function k(){var e,t,r,n;return Ve=null,d(),e=Ae,t=w(),r=function(){var e,t,r,n;for(t="",r="";Ce>Ae&&u((e=xe[Ae]).charCodeAt(0));)if(++Ae,"\\"===e&&Ce>Ae)if("u"===(e=xe[Ae])){if(n=++Ae,e=m("u"))for(r+=e,t+="\\u";Ae>n;++n)t+=xe[n];else Ae=n,r+="u",t+="\\u";N({},we.UnexpectedToken,"ILLEGAL")}else t+="\\",N({},we.UnexpectedToken,"ILLEGAL");else r+=e,t+=e;return{value:r,literal:t}}(),n=function(e,t){var r;try{r=new RegExp(e,t)}catch(e){V({},we.InvalidRegExp)}return r}(t.value,r.value),Oe.tokenize?{type:ye.RegularExpression,value:n,lineNumber:Ie,lineStart:je,start:e,end:Ae}:{literal:t.literal+r.literal,value:n,start:e,end:Ae}}function S(){var e,t,r,n;return d(),e=Ae,t={start:{line:Ie,column:Ae-je}},r=k(),t.end={line:Ie,column:Ae-je},Oe.tokenize||(Oe.tokens.length>0&&((n=Oe.tokens[Oe.tokens.length-1]).range[0]===e&&"Punctuator"===n.type&&("/"===n.value||"/="===n.value)&&Oe.tokens.pop()),Oe.tokens.push({type:"RegularExpression",value:r.literal,range:[e,Ae],loc:t})),r}function x(){var e;return d(),Ae>=Ce?{type:ye.EOF,lineNumber:Ie,lineStart:je,start:Ae,end:Ae}:o(e=xe.charCodeAt(Ae))?g():40===e||41===e||59===e?v():39===e||34===e?function(){var e,r,n,i,o,u,l,c,f="",p=!1;for(l=Ie,c=je,t("'"===(e=xe[Ae])||'"'===e,"String literal must starts with a quote"),r=Ae,++Ae;Ce>Ae;){if((n=xe[Ae++])===e){e="";break}if("\\"===n)if((n=xe[Ae++])&&s(n.charCodeAt(0)))++Ie,"\r"===n&&"\n"===xe[Ae]&&++Ae,je=Ae;else switch(n){case"u":case"x":u=Ae,(o=m(n))?f+=o:(Ae=u,f+=n);break;case"n":f+="\n";break;case"r":f+="\r";break;case"t":f+="\t";break;case"b":f+="\b";break;case"f":f+="\f";break;case"v":f+="\v";break;default:a(n)?(0!==(i="01234567".indexOf(n))&&(p=!0),Ce>Ae&&a(xe[Ae])&&(p=!0,i=8*i+"01234567".indexOf(xe[Ae++]),"0123".indexOf(n)>=0&&Ce>Ae&&a(xe[Ae])&&(i=8*i+"01234567".indexOf(xe[Ae++]))),f+=String.fromCharCode(i)):f+=n}else{if(s(n.charCodeAt(0)))break;f+=n}}return""!==e&&V({},we.UnexpectedToken,"ILLEGAL"),{type:ye.StringLiteral,value:f,octal:p,startLineNumber:l,startLineStart:c,lineNumber:Ie,lineStart:je,start:r,end:Ae}}():46===e?r(xe.charCodeAt(Ae+1))?_():v():r(e)?_():Oe.tokenize&&47===e?function(){var e,t;if(!(e=Oe.tokens[Oe.tokens.length-1]))return S();if("Punctuator"===e.type){if("]"===e.value)return v();if(")"===e.value)return!(t=Oe.tokens[Oe.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?v():S();if("}"===e.value){if(Oe.tokens[Oe.openCurlyToken-3]&&"Keyword"===Oe.tokens[Oe.openCurlyToken-3].type){if(!(t=Oe.tokens[Oe.openCurlyToken-4]))return v()}else{if(!Oe.tokens[Oe.openCurlyToken-4]||"Keyword"!==Oe.tokens[Oe.openCurlyToken-4].type)return v();if(!(t=Oe.tokens[Oe.openCurlyToken-5]))return S()}return ve.indexOf(t.value)>=0?v():S()}return S()}return"Keyword"===e.type&&"this"!==e.value?S():v()}():v()}function E(){var e,t,r;return d(),e={start:{line:Ie,column:Ae-je}},t=x(),e.end={line:Ie,column:Ae-je},t.type!==ye.EOF&&(r=xe.slice(t.start,t.end),Oe.tokens.push({type:ge[t.type],value:r,range:[t.start,t.end],loc:e})),t}function A(){var e;return Ae=(e=Ve).end,Ie=e.lineNumber,je=e.lineStart,Ve=void 0!==Oe.tokens?E():x(),Ae=e.end,Ie=e.lineNumber,je=e.lineStart,e}function I(){var e,t,r;e=Ae,t=Ie,r=je,Ve=void 0!==Oe.tokens?E():x(),Ae=e,Ie=t,je=r}function j(e,t){this.line=e,this.column=t}function C(e,t,r,n){this.start=new j(e,t),this.end=new j(r,n)}function L(){var e,t,r,n;return e=Ae,t=Ie,r=je,d(),n=Ie!==t,Ae=e,Ie=t,je=r,n}function V(e,r){var n,a=Array.prototype.slice.call(arguments,2),i=r.replace(/%(\d)/g,function(e,r){return t(r<a.length,"Message reference must be in range"),a[r]});throw"number"==typeof e.lineNumber?((n=new Error("Line "+e.lineNumber+": "+i)).index=e.start,n.lineNumber=e.lineNumber,n.column=e.start-je+1):((n=new Error("Line "+Ie+": "+i)).index=Ae,n.lineNumber=Ie,n.column=Ae-je+1),n.description=i,n}function N(){try{V.apply(null,arguments)}catch(e){if(!Oe.errors)throw e;Oe.errors.push(e)}}function O(e){if(e.type===ye.EOF&&V(e,we.UnexpectedEOS),e.type===ye.NumericLiteral&&V(e,we.UnexpectedNumber),e.type===ye.StringLiteral&&V(e,we.UnexpectedString),e.type===ye.Identifier&&V(e,we.UnexpectedIdentifier),e.type===ye.Keyword){if(function(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(e.value))V(e,we.UnexpectedReserved);else if(Ee&&l(e.value))return void N(e,we.StrictReservedWord);V(e,we.UnexpectedToken,e.value)}V(e,we.UnexpectedToken,e.value)}function P(e){var t=A();(t.type!==ye.Punctuator||t.value!==e)&&O(t)}function M(e){var t=A();(t.type!==ye.Keyword||t.value!==e)&&O(t)}function F(e){return Ve.type===ye.Punctuator&&Ve.value===e}function T(e){return Ve.type===ye.Keyword&&Ve.value===e}function q(){var e,t=Ae,r=Ie,n=je,a=Ve;return 59===xe.charCodeAt(Ae)||F(";")?void A():(e=Ie,d(),Ie!==e?(Ae=t,Ie=r,je=n,void(Ve=a)):void(Ve.type===ye.EOF||F("}")||O(Ve)))}function U(e){return e.type===be.Identifier||e.type===be.MemberExpression}function D(e,t){var r,n,a;return r=Ee,a=Ve,n=ce(),t&&Ee&&c(e[0].name)&&N(t,we.StrictParamName),Ee=r,Le.markEnd(Le.createFunctionExpression(null,e,[],n),a)}function R(){var e,t;return t=Ve,(e=A()).type===ye.StringLiteral||e.type===ye.NumericLiteral?(Ee&&e.octal&&N(e,we.StrictOctalLiteral),Le.markEnd(Le.createLiteral(e),t)):Le.markEnd(Le.createIdentifier(e.value),t)}function B(){var e,t,r,n,a,i;return i=Ve,(e=Ve).type===ye.Identifier?(r=R(),"get"!==e.value||F(":")?"set"!==e.value||F(":")?(P(":"),n=ee(),Le.markEnd(Le.createProperty("init",r,n),i)):(t=R(),P("("),(e=Ve).type!==ye.Identifier?(P(")"),N(e,we.UnexpectedToken,e.value),n=D([])):(a=[ne()],P(")"),n=D(a,e)),Le.markEnd(Le.createProperty("set",t,n),i)):(t=R(),P("("),P(")"),n=D([]),Le.markEnd(Le.createProperty("get",t,n),i))):e.type!==ye.EOF&&e.type!==ye.Punctuator?(t=R(),P(":"),n=ee(),Le.markEnd(Le.createProperty("init",t,n),i)):void O(e)}function z(){var e,t,r,n;if(F("("))return function(){var e;return P("("),e=te(),P(")"),e}();if(F("["))return function(){var e,t=[];for(e=Ve,P("[");!F("]");)F(",")?(A(),t.push(null)):(t.push(ee()),F("]")||P(","));return A(),Le.markEnd(Le.createArrayExpression(t),e)}();if(F("{"))return function(){var e,t,r,n,a,i=[],s={},o=String;for(a=Ve,P("{");!F("}");)t=(e=B()).key.type===be.Identifier?e.key.name:o(e.key.value),n="init"===e.kind?_e.Data:"get"===e.kind?_e.Get:_e.Set,r="$"+t,Object.prototype.hasOwnProperty.call(s,r)?(s[r]===_e.Data?Ee&&n===_e.Data?N({},we.StrictDuplicateProperty):n!==_e.Data&&N({},we.AccessorDataProperty):n===_e.Data?N({},we.AccessorDataProperty):s[r]&n&&N({},we.AccessorGetSet),s[r]|=n):s[r]=n,i.push(e),F("}")||P(",");return P("}"),Le.markEnd(Le.createObjectExpression(i),a)}();if(e=Ve.type,n=Ve,e===ye.Identifier)r=Le.createIdentifier(A().value);else if(e===ye.StringLiteral||e===ye.NumericLiteral)Ee&&Ve.octal&&N(Ve,we.StrictOctalLiteral),r=Le.createLiteral(A());else if(e===ye.Keyword){if(T("function"))return function(){var e,t,r,n,a,i,s,o,u=null,f=[];return o=Ve,M("function"),F("(")||(e=Ve,u=ne(),Ee?c(e.value)&&N(e,we.StrictFunctionName):c(e.value)?(r=e,n=we.StrictFunctionName):l(e.value)&&(r=e,n=we.StrictReservedWord)),a=fe(r),f=a.params,t=a.stricted,r=a.firstRestricted,a.message&&(n=a.message),s=Ee,i=ce(),Ee&&r&&V(r,n),Ee&&t&&N(t,n),Ee=s,Le.markEnd(Le.createFunctionExpression(u,f,[],i),o)}();T("this")?(A(),r=Le.createThisExpression()):O(A())}else e===ye.BooleanLiteral?((t=A()).value="true"===t.value,r=Le.createLiteral(t)):e===ye.NullLiteral?((t=A()).value=null,r=Le.createLiteral(t)):F("/")||F("/=")?(r=void 0!==Oe.tokens?Le.createLiteral(S()):Le.createLiteral(k()),I()):O(A());return Le.markEnd(r,n)}function G(){var e=[];if(P("("),!F(")"))for(;Ce>Ae&&(e.push(ee()),!F(")"));)P(",");return P(")"),e}function W(){var e,t;return t=Ve,function(e){return e.type===ye.Identifier||e.type===ye.Keyword||e.type===ye.BooleanLiteral||e.type===ye.NullLiteral}(e=A())||O(e),Le.markEnd(Le.createIdentifier(e.value),t)}function K(){return P("."),W()}function H(){var e;return P("["),e=te(),P("]"),e}function $(){var e,t,r;return r=Ve,M("new"),e=X(),t=F("(")?G():[],Le.markEnd(Le.createNewExpression(e,t),r)}function X(){var e,r,n;for(t(Ne.allowIn,"callee of new expression always allow in keyword."),n=Ve,e=T("new")?$():z();F(".")||F("[");)F("[")?(r=H(),e=Le.createMemberExpression("[",e,r)):(r=K(),e=Le.createMemberExpression(".",e,r)),Le.markEnd(e,n);return e}function Y(){var e,t,r=Ve;return e=function(){var e,t,r,n,a=Ne.allowIn;for(n=Ve,Ne.allowIn=!0,e=T("new")?$():z();;){if(F("."))r=K(),e=Le.createMemberExpression(".",e,r);else if(F("("))t=G(),e=Le.createCallExpression(e,t);else{if(!F("["))break;r=H(),e=Le.createMemberExpression("[",e,r)}Le.markEnd(e,n)}return Ne.allowIn=a,e}(),Ve.type===ye.Punctuator&&(!F("++")&&!F("--")||L()||(Ee&&e.type===be.Identifier&&c(e.name)&&N({},we.StrictLHSPostfix),U(e)||N({},we.InvalidLHSInAssignment),t=A(),e=Le.markEnd(Le.createPostfixExpression(t.value,e),r))),e}function J(){var e,t,r;return Ve.type!==ye.Punctuator&&Ve.type!==ye.Keyword?t=Y():F("++")||F("--")?(r=Ve,e=A(),t=J(),Ee&&t.type===be.Identifier&&c(t.name)&&N({},we.StrictLHSPrefix),U(t)||N({},we.InvalidLHSInAssignment),t=Le.createUnaryExpression(e.value,t),t=Le.markEnd(t,r)):F("+")||F("-")||F("~")||F("!")?(r=Ve,e=A(),t=J(),t=Le.createUnaryExpression(e.value,t),t=Le.markEnd(t,r)):T("delete")||T("void")||T("typeof")?(r=Ve,e=A(),t=J(),t=Le.createUnaryExpression(e.value,t),t=Le.markEnd(t,r),Ee&&"delete"===t.operator&&t.argument.type===be.Identifier&&N({},we.StrictDelete)):t=Y(),t}function Q(e,t){var r=0;if(e.type!==ye.Punctuator&&e.type!==ye.Keyword)return 0;switch(e.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=t?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11}return r}function Z(){var e,t,r,n,a;return a=Ve,e=function(){var e,t,r,n,a,i,s,o,u,l;if(e=Ve,u=J(),0===(a=Q(n=Ve,Ne.allowIn)))return u;for(n.prec=a,A(),t=[e,Ve],i=[u,n,s=J()];(a=Q(Ve,Ne.allowIn))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)s=i.pop(),o=i.pop().value,u=i.pop(),r=Le.createBinaryExpression(o,u,s),t.pop(),e=t[t.length-1],Le.markEnd(r,e),i.push(r);(n=A()).prec=a,i.push(n),t.push(Ve),r=J(),i.push(r)}for(r=i[l=i.length-1],t.pop();l>1;)r=Le.createBinaryExpression(i[l-1].value,i[l-2],r),l-=2,e=t.pop(),Le.markEnd(r,e);return r}(),F("?")&&(A(),t=Ne.allowIn,Ne.allowIn=!0,r=ee(),Ne.allowIn=t,P(":"),n=ee(),e=Le.createConditionalExpression(e,r,n),Le.markEnd(e,a)),e}function ee(){var e,t,r,n,a;return e=Ve,a=Ve,n=t=Z(),function(){var e;return Ve.type===ye.Punctuator&&("="===(e=Ve.value)||"*="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e)}()&&(U(t)||N({},we.InvalidLHSInAssignment),Ee&&t.type===be.Identifier&&c(t.name)&&N(e,we.StrictLHSAssignment),e=A(),r=ee(),n=Le.markEnd(Le.createAssignmentExpression(e.value,t,r),a)),n}function te(){var e,t=Ve;if(e=ee(),F(",")){for(e=Le.createSequenceExpression([e]);Ce>Ae&&F(",");)A(),e.expressions.push(ee());Le.markEnd(e,t)}return e}function re(){var e,t;return t=Ve,P("{"),e=function(){for(var e,t=[];Ce>Ae&&!F("}")&&void 0!==(e=he());)t.push(e);return t}(),P("}"),Le.markEnd(Le.createBlockStatement(e),t)}function ne(){var e,t;return t=Ve,(e=A()).type!==ye.Identifier&&O(e),Le.markEnd(Le.createIdentifier(e.value),t)}function ae(e){var t,r,n=null;return r=Ve,t=ne(),Ee&&c(t.name)&&N({},we.StrictVarName),"const"===e?(P("="),n=ee()):F("=")&&(A(),n=ee()),Le.markEnd(Le.createVariableDeclarator(t,n),r)}function ie(e){var t=[];do{if(t.push(ae(e)),!F(","))break;A()}while(Ce>Ae);return t}function se(){var e,t,r,n,a,i,s,o=Ne.allowIn;return e=t=r=null,M("for"),P("("),F(";")?A():(T("var")||T("let")?(Ne.allowIn=!1,e=function(){var e,t,r;return r=Ve,e=A(),t=ie(),Le.markEnd(Le.createVariableDeclaration(t,e.value),r)}(),Ne.allowIn=o,1===e.declarations.length&&T("in")&&(A(),n=e,a=te(),e=null)):(Ne.allowIn=!1,e=te(),Ne.allowIn=o,T("in")&&(U(e)||N({},we.InvalidLHSInForIn),A(),n=e,a=te(),e=null)),void 0===n&&P(";")),void 0===n&&(F(";")||(t=te()),P(";"),F(")")||(r=te())),P(")"),s=Ne.inIteration,Ne.inIteration=!0,i=le(),Ne.inIteration=s,void 0===n?Le.createForStatement(e,t,r,i):Le.createForInStatement(n,a,i)}function oe(){var e,t,r,n=[];for(r=Ve,T("default")?(A(),e=null):(M("case"),e=te()),P(":");Ce>Ae&&!(F("}")||T("default")||T("case"));)t=le(),n.push(t);return Le.markEnd(Le.createSwitchCase(e,n),r)}function ue(){var e,t=[],r=null;return M("try"),e=re(),T("catch")&&t.push(function(){var e,t,r;return r=Ve,M("catch"),P("("),F(")")&&O(Ve),e=ne(),Ee&&c(e.name)&&N({},we.StrictCatchVariable),P(")"),t=re(),Le.markEnd(Le.createCatchClause(e,t),r)}()),T("finally")&&(A(),r=re()),0!==t.length||r||V({},we.NoCatchOrFinally),Le.createTryStatement(e,[],t,r)}function le(){var e,t,r,n,a=Ve.type;if(a===ye.EOF&&O(Ve),a===ye.Punctuator&&"{"===Ve.value)return re();if(n=Ve,a===ye.Punctuator)switch(Ve.value){case";":return Le.markEnd((P(";"),Le.createEmptyStatement()),n);case"(":return Le.markEnd(function(){var e=te();return q(),Le.createExpressionStatement(e)}(),n)}if(a===ye.Keyword)switch(Ve.value){case"break":return Le.markEnd(function(){var e,t=null;return M("break"),59===xe.charCodeAt(Ae)?(A(),Ne.inIteration||Ne.inSwitch||V({},we.IllegalBreak),Le.createBreakStatement(null)):L()?(Ne.inIteration||Ne.inSwitch||V({},we.IllegalBreak),Le.createBreakStatement(null)):(Ve.type===ye.Identifier&&(e="$"+(t=ne()).name,Object.prototype.hasOwnProperty.call(Ne.labelSet,e)||V({},we.UnknownLabel,t.name)),q(),null!==t||Ne.inIteration||Ne.inSwitch||V({},we.IllegalBreak),Le.createBreakStatement(t))}(),n);case"continue":return Le.markEnd(function(){var e,t=null;return M("continue"),59===xe.charCodeAt(Ae)?(A(),Ne.inIteration||V({},we.IllegalContinue),Le.createContinueStatement(null)):L()?(Ne.inIteration||V({},we.IllegalContinue),Le.createContinueStatement(null)):(Ve.type===ye.Identifier&&(e="$"+(t=ne()).name,Object.prototype.hasOwnProperty.call(Ne.labelSet,e)||V({},we.UnknownLabel,t.name)),q(),null!==t||Ne.inIteration||V({},we.IllegalContinue),Le.createContinueStatement(t))}(),n);case"debugger":return Le.markEnd((M("debugger"),q(),Le.createDebuggerStatement()),n);case"do":return Le.markEnd(function(){var e,t,r;return M("do"),r=Ne.inIteration,Ne.inIteration=!0,e=le(),Ne.inIteration=r,M("while"),P("("),t=te(),P(")"),F(";")&&A(),Le.createDoWhileStatement(e,t)}(),n);case"for":return Le.markEnd(se(),n);case"function":return Le.markEnd(pe(),n);case"if":return Le.markEnd(function(){var e,t,r;return M("if"),P("("),e=te(),P(")"),t=le(),T("else")?(A(),r=le()):r=null,Le.createIfStatement(e,t,r)}(),n);case"return":return Le.markEnd(function(){var e=null;return M("return"),Ne.inFunctionBody||N({},we.IllegalReturn),32===xe.charCodeAt(Ae)&&o(xe.charCodeAt(Ae+1))?(e=te(),q(),Le.createReturnStatement(e)):L()?Le.createReturnStatement(null):(F(";")||F("}")||Ve.type===ye.EOF||(e=te()),q(),Le.createReturnStatement(e))}(),n);case"switch":return Le.markEnd(function(){var e,t,r,n,a;if(M("switch"),P("("),e=te(),P(")"),P("{"),t=[],F("}"))return A(),Le.createSwitchStatement(e,t);for(n=Ne.inSwitch,Ne.inSwitch=!0,a=!1;Ce>Ae&&!F("}");)null===(r=oe()).test&&(a&&V({},we.MultipleDefaultsInSwitch),a=!0),t.push(r);return Ne.inSwitch=n,P("}"),Le.createSwitchStatement(e,t)}(),n);case"throw":return Le.markEnd(function(){var e;return M("throw"),L()&&V({},we.NewlineAfterThrow),e=te(),q(),Le.createThrowStatement(e)}(),n);case"try":return Le.markEnd(ue(),n);case"var":return Le.markEnd(function(){var e;return M("var"),e=ie(),q(),Le.createVariableDeclaration(e,"var")}(),n);case"while":return Le.markEnd(function(){var e,t,r;return M("while"),P("("),e=te(),P(")"),r=Ne.inIteration,Ne.inIteration=!0,t=le(),Ne.inIteration=r,Le.createWhileStatement(e,t)}(),n);case"with":return Le.markEnd(function(){var e,t;return Ee&&(d(),N({},we.StrictModeWith)),M("with"),P("("),e=te(),P(")"),t=le(),Le.createWithStatement(e,t)}(),n)}return(e=te()).type===be.Identifier&&F(":")?(A(),r="$"+e.name,Object.prototype.hasOwnProperty.call(Ne.labelSet,r)&&V({},we.Redeclaration,"Label",e.name),Ne.labelSet[r]=!0,t=le(),delete Ne.labelSet[r],Le.markEnd(Le.createLabeledStatement(e,t),n)):(q(),Le.markEnd(Le.createExpressionStatement(e),n))}function ce(){var e,t,r,n,a,i,s,o,u=[];for(o=Ve,P("{");Ce>Ae&&Ve.type===ye.StringLiteral&&(t=Ve,e=he(),u.push(e),e.expression.type===be.Literal);)"use strict"===xe.slice(t.start+1,t.end-1)?(Ee=!0,r&&N(r,we.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(n=Ne.labelSet,a=Ne.inIteration,i=Ne.inSwitch,s=Ne.inFunctionBody,Ne.labelSet={},Ne.inIteration=!1,Ne.inSwitch=!1,Ne.inFunctionBody=!0;Ce>Ae&&!F("}")&&void 0!==(e=he());)u.push(e);return P("}"),Ne.labelSet=n,Ne.inIteration=a,Ne.inSwitch=i,Ne.inFunctionBody=s,Le.markEnd(Le.createBlockStatement(u),o)}function fe(e){var t,r,n,a,i,s,o=[];if(P("("),!F(")"))for(a={};Ce>Ae&&(r=Ve,t=ne(),i="$"+r.value,Ee?(c(r.value)&&(n=r,s=we.StrictParamName),Object.prototype.hasOwnProperty.call(a,i)&&(n=r,s=we.StrictParamDupe)):e||(c(r.value)?(e=r,s=we.StrictParamName):l(r.value)?(e=r,s=we.StrictReservedWord):Object.prototype.hasOwnProperty.call(a,i)&&(e=r,s=we.StrictParamDupe)),o.push(t),a[i]=!0,!F(")"));)P(",");return P(")"),{params:o,stricted:n,firstRestricted:e,message:s}}function pe(){var e,t,r,n,a,i,s,o,u,f;return u=Ve,M("function"),r=Ve,e=ne(),Ee?c(r.value)&&N(r,we.StrictFunctionName):c(r.value)?(i=r,s=we.StrictFunctionName):l(r.value)&&(i=r,s=we.StrictReservedWord),f=(a=fe(i)).params,n=a.stricted,i=a.firstRestricted,a.message&&(s=a.message),o=Ee,t=ce(),Ee&&i&&V(i,s),Ee&&n&&N(n,s),Ee=o,Le.markEnd(Le.createFunctionDeclaration(e,f,[],t),u)}function he(){if(Ve.type===ye.Keyword)switch(Ve.value){case"const":case"let":return e=Ve.value,r=Ve,M(e),t=ie(e),q(),Le.markEnd(Le.createVariableDeclaration(t,e),r);case"function":return pe();default:return le()}var e,t,r;return Ve.type!==ye.EOF?le():void 0}function de(){var e,t;return d(),I(),t=Ve,Ee=!1,e=function(){for(var e,t,r,n=[];Ce>Ae&&(t=Ve).type===ye.StringLiteral&&(e=he(),n.push(e),e.expression.type===be.Literal);)"use strict"===xe.slice(t.start+1,t.end-1)?(Ee=!0,r&&N(r,we.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(;Ce>Ae&&void 0!==(e=he());)n.push(e);return n}(),Le.markEnd(Le.createProgram(e),t)}function me(){var e,t,r,n=[];for(e=0;e<Oe.tokens.length;++e)r={type:(t=Oe.tokens[e]).type,value:t.value},Oe.range&&(r.range=t.range),Oe.loc&&(r.loc=t.loc),n.push(r);Oe.tokens=n}var ye,ge,ve,be,_e,we,ke,Se,xe,Ee,Ae,Ie,je,Ce,Le,Ve,Ne,Oe;(ge={})[(ye={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",ge[ye.EOF]="<end>",ge[ye.Identifier]="Identifier",ge[ye.Keyword]="Keyword",ge[ye.NullLiteral]="Null",ge[ye.NumericLiteral]="Numeric",ge[ye.Punctuator]="Punctuator",ge[ye.StringLiteral]="String",ge[ye.RegularExpression]="RegularExpression",ve=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],be={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},_e={Data:1,Get:2,Set:4},we={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},ke={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},Se={name:"SyntaxTree",processComment:function(e){var t,r;if(!(e.type===be.Program&&e.body.length>0)){for(Oe.trailingComments.length>0?Oe.trailingComments[0].range[0]>=e.range[1]?(r=Oe.trailingComments,Oe.trailingComments=[]):Oe.trailingComments.length=0:Oe.bottomRightStack.length>0&&Oe.bottomRightStack[Oe.bottomRightStack.length-1].trailingComments&&Oe.bottomRightStack[Oe.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(r=Oe.bottomRightStack[Oe.bottomRightStack.length-1].trailingComments,delete Oe.bottomRightStack[Oe.bottomRightStack.length-1].trailingComments);Oe.bottomRightStack.length>0&&Oe.bottomRightStack[Oe.bottomRightStack.length-1].range[0]>=e.range[0];)t=Oe.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):Oe.leadingComments.length>0&&Oe.leadingComments[Oe.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=Oe.leadingComments,Oe.leadingComments=[]),r&&(e.trailingComments=r),Oe.bottomRightStack.push(e)}},markEnd:function(e,t){return Oe.range&&(e.range=[t.start,Ae]),Oe.loc&&(e.loc=new C(void 0===t.startLineNumber?t.lineNumber:t.startLineNumber,t.start-(void 0===t.startLineStart?t.lineStart:t.startLineStart),Ie,Ae-je),this.postProcess(e)),Oe.attachComment&&this.processComment(e),e},postProcess:function(e){return Oe.source&&(e.loc.source=Oe.source),e},createArrayExpression:function(e){return{type:be.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,r){return{type:be.AssignmentExpression,operator:e,left:t,right:r}},createBinaryExpression:function(e,t,r){return{type:"||"===e||"&&"===e?be.LogicalExpression:be.BinaryExpression,operator:e,left:t,right:r}},createBlockStatement:function(e){return{type:be.BlockStatement,body:e}},createBreakStatement:function(e){return{type:be.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:be.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:be.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,r){return{type:be.ConditionalExpression,test:e,consequent:t,alternate:r}},createContinueStatement:function(e){return{type:be.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:be.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:be.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:be.EmptyStatement}},createExpressionStatement:function(e){return{type:be.ExpressionStatement,expression:e}},createForStatement:function(e,t,r,n){return{type:be.ForStatement,init:e,test:t,update:r,body:n}},createForInStatement:function(e,t,r){return{type:be.ForInStatement,left:e,right:t,body:r,each:!1}},createFunctionDeclaration:function(e,t,r,n){return{type:be.FunctionDeclaration,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,r,n){return{type:be.FunctionExpression,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:be.Identifier,name:e}},createIfStatement:function(e,t,r){return{type:be.IfStatement,test:e,consequent:t,alternate:r}},createLabeledStatement:function(e,t){return{type:be.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:be.Literal,value:e.value,raw:xe.slice(e.start,e.end)}},createMemberExpression:function(e,t,r){return{type:be.MemberExpression,computed:"["===e,object:t,property:r}},createNewExpression:function(e,t){return{type:be.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:be.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:be.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:be.Program,body:e}},createProperty:function(e,t,r){return{type:be.Property,key:t,value:r,kind:e}},createReturnStatement:function(e){return{type:be.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:be.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:be.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:be.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:be.ThisExpression}},createThrowStatement:function(e){return{type:be.ThrowStatement,argument:e}},createTryStatement:function(e,t,r,n){return{type:be.TryStatement,block:e,guardedHandlers:t,handlers:r,finalizer:n}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:be.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:be.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:be.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:be.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:be.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:be.WithStatement,object:e,body:t}}},e.version="1.2.5",e.tokenize=function(e,t){var r,n;r=String,"string"==typeof e||e instanceof String||(e=r(e)),Le=Se,Ae=0,Ie=(xe=e).length>0?1:0,je=0,Ce=xe.length,Ve=null,Ne={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Oe={},(t=t||{}).tokens=!0,Oe.tokens=[],Oe.tokenize=!0,Oe.openParenToken=-1,Oe.openCurlyToken=-1,Oe.range="boolean"==typeof t.range&&t.range,Oe.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.comment&&t.comment&&(Oe.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(Oe.errors=[]);try{if(I(),Ve.type===ye.EOF)return Oe.tokens;for(A();Ve.type!==ye.EOF;)try{A()}catch(e){if(Oe.errors){Oe.errors.push(e);break}throw e}me(),n=Oe.tokens,void 0!==Oe.comments&&(n.comments=Oe.comments),void 0!==Oe.errors&&(n.errors=Oe.errors)}catch(e){throw e}finally{Oe={}}return n},e.parse=function(e,t){var r,n;n=String,"string"==typeof e||e instanceof String||(e=n(e)),Le=Se,Ae=0,Ie=(xe=e).length>0?1:0,je=0,Ce=xe.length,Ve=null,Ne={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Oe={},void 0!==t&&(Oe.range="boolean"==typeof t.range&&t.range,Oe.loc="boolean"==typeof t.loc&&t.loc,Oe.attachComment="boolean"==typeof t.attachComment&&t.attachComment,Oe.loc&&null!==t.source&&void 0!==t.source&&(Oe.source=n(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(Oe.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(Oe.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(Oe.errors=[]),Oe.attachComment&&(Oe.range=!0,Oe.comments=[],Oe.bottomRightStack=[],Oe.trailingComments=[],Oe.leadingComments=[]));try{r=de(),void 0!==Oe.comments&&(r.comments=Oe.comments),void 0!==Oe.tokens&&(me(),r.tokens=Oe.tokens),void 0!==Oe.errors&&(r.errors=Oe.errors)}catch(e){throw e}finally{Oe={}}return r},e.Syntax=function(){var e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),be)be.hasOwnProperty(e)&&(t[e]=be[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()})},{}],9:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(s(r=this._events[e]))return!1;if(a(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(i(r))for(o=Array.prototype.slice.call(arguments,1),n=(l=r.slice()).length,u=0;n>u;u++)l[u].apply(this,o);return!0},n.prototype.addListener=function(e,t){var r;if(!a(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&((r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!a(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,s,o;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(r=this._events[e]).length,n=-1,r===t||a(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(o=s;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){n=o;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(a(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(a(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],10:[function(e,t,r){"use strict";t.exports=function(e){for(var t=new Array(e),r=0;e>r;++r)t[r]=r;return t}},{}],11:[function(e,t,r){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],12:[function(e,t,r){"use strict";function n(e){if(!e)return s;for(var t=0;t<e.args.length;++t){var r=e.args[t];e.args[t]=0===t?{name:r,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function a(e){for(var t=[],r=0;r<e.args.length;++r)t.push("a"+r);return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(function(e){return i({args:e.args,pre:n(e.pre),body:n(e.body),post:n(e.proc),funcName:e.funcName})}(e))}var i=e("cwise-compiler"),s={body:"",args:[],thisVars:[],localVars:[]},o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in o){var t=o[e];r[e]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),r[e+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in u){var t=u[e];r[e]=a({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),r[e+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in l){var t=l[e];r[e]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),r[e+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<c.length;++e){var t=c[e];r[t]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),r[t+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var e=0;e<f.length;++e){var t=f[e];r[t]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),r[t+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),r[t+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),r[t+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var p=["atan2","pow"];!function(){for(var e=0;e<p.length;++e){var t=p[e];r[t+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),r[t+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),r[t+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),r[t+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),r.any=i({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),r.all=i({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),r.sum=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),r.prod=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),r.norm2squared=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),r.norm2=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),r.norminf=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),r.norm1=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),r.sup=i({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.inf=i({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.argmin=i({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.argmax=i({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),r.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),r.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),r.equals=i({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":1}],13:[function(e,t,r){"use strict";var n=e("ndarray"),a=e("./doConvert.js");t.exports=function(e,t){for(var r=[],i=e,s=1;i instanceof Array;)r.push(i.length),s*=i.length,i=i[0];return 0===r.length?n():(t||(t=n(new Float64Array(s),r)),a(t,e),t)}},{"./doConvert.js":14,ndarray:16}],14:[function(e,t,r){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":1}],15:[function(e,t,r){"use strict";var n=e("dup"),a=e("cwise/lib/wrapper")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_1_a,_inline_1_e=_inline_1_arg1_;for(_inline_1_a=0;_inline_1_a<_inline_1_arg2_.length-1;++_inline_1_a)_inline_1_e=_inline_1_e[_inline_1_arg2_[_inline_1_a]];_inline_1_e[_inline_1_arg2_[_inline_1_arg2_.length-1]]=_inline_1_arg0_}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_a","_inline_1_e"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"unpackCwise",blockSize:64});t.exports=function(e){var t=n(e.shape);return a(e,t),t}},{"cwise/lib/wrapper":6,dup:7}],16:[function(e,t,r){function n(e,t){return e[0]-t[0]}function a(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(n);var a=new Array(r.length);for(e=0;e<a.length;++e)a[e]=r[e][1];return a}function i(e,t){var r=["View",t,"d",e].join("");0>t&&(r="View_Nil"+e);var n="generic"===e;if(-1===t){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(i)()}if(0===t){i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return new Function("TrivialArray",i)(l[e][0])}i=["'use strict'"];var o=s(t),u=o.map(function(e){return"i"+e}),c="this.offset+"+o.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),f=o.map(function(e){return"b"+e}).join(","),p=o.map(function(e){return"c"+e}).join(",");i.push("function "+r+"(a,"+f+","+p+",d){this.data=a","this.shape=["+f+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+o.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),4>t?(i.push("function "+r+"_order(){"),2===t?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+u.join(",")+",v){"),n?i.push("return this.data.set("+c+",v)}"):i.push("return this.data["+c+"]=v}"),i.push("proto.get=function "+r+"_get("+u.join(",")+"){"),n?i.push("return this.data.get("+c+")}"):i.push("return this.data["+c+"]}"),i.push("proto.index=function "+r+"_index(",u.join(),"){return "+c+"}"),i.push("proto.hi=function "+r+"_hi("+u.join(",")+"){return new "+r+"(this.data,"+o.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+o.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var h=o.map(function(e){return"a"+e+"=this.shape["+e+"]"}),d=o.map(function(e){return"c"+e+"=this.stride["+e+"]"});i.push("proto.lo=function "+r+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+d.join(","));for(var m=0;t>m;++m)i.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");i.push("return new "+r+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"c"+e}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+u.join(",")+"){var "+o.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+o.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(m=0;t>m;++m)i.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");i.push("return new "+r+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"b"+e}).join(",")+",c)}");var y=new Array(t),g=new Array(t);for(m=0;t>m;++m)y[m]="a[i"+m+"]",g[m]="b[i"+m+"]";i.push("proto.transpose=function "+r+"_transpose("+u+"){"+u.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+y.join(",")+","+g.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+u+"){var a=[],b=[],c=this.offset");for(m=0;t>m;++m)i.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");return i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+o.map(function(e){return"shape["+e+"]"}).join(",")+","+o.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",i.join("\n"))(l[e],a)}var s=e("iota-array"),o=e("is-buffer"),u="undefined"!=typeof Float64Array,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=function(e,t,r,n){if(void 0===e)return(0,l.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var a=t.length;if(void 0===r){r=new Array(a);for(var s=a-1,c=1;s>=0;--s)r[s]=c,c*=t[s]}if(void 0===n)for(n=0,s=0;a>s;++s)r[s]<0&&(n-=(t[s]-1)*r[s]);for(var f=function(e){if(o(e))return"buffer";if(u)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}(e),p=l[f];p.length<=a+1;)p.push(i(f,p.length-1));return(0,p[a+1])(e,t,r,n)}},{"iota-array":10,"is-buffer":11}],17:[function(e,t,r){"use strict";t.exports=function(e,t,r){return 0===e.length?e:t?(r||e.sort(t),function(e,t){for(var r=1,n=e.length,a=e[0],i=e[0],s=1;n>s;++s)if(i=a,t(a=e[s],i)){if(s===r){r++;continue}e[r++]=a}return e.length=r,e}(e,t)):(r||e.sort(),function(e){for(var t=1,r=e.length,n=e[0],a=e[0],i=1;r>i;++i,a=n)if(a=n,(n=e[i])!==a){if(i===t){t++;continue}e[t++]=n}return e.length=t,e}(e))}},{}],18:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("events"),u=n(e("ndarray")),l=n(e("ndarray-ops")),c=n(e("ndarray-pack")),f=n(e("ndarray-unpack")),p=n(e("cwise")),h=n(e("./randn")),d=n(e("./pairwise-distances")),m=n(e("./joint-probabilities")),y=n(e("./kl-divergence")),g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this));return e=e||{},r.dim=e.dim||2,r.perplexity=e.perplexity||30,r.earlyExaggeration=e.earlyExaggeration||4,r.learningRate=e.learningRate||1e3,r.nIter=e.nIter||1e3,r.metric=e.metric||"euclidean",r.barneshut=e.barneshut||!1,r.inputData=null,r.outputEmbedding=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.EventEmitter),s(t,[{key:"init",value:function(e){var t=(e=e||{}).data||[],r=e.type||"dense";if("dense"===r)this.inputData=(0,c.default)(t);else{if("sparse"!==r)throw new Error("input data type must be dense or sparse");for(var n=[],i=1,s=function(e){var r=Math.max.apply(null,t.map(function(t){return t[e]}))+1;n.push(r),i*=r},o=0;o<t[0].length;o++)s(o);this.inputData=(0,u.default)(new Float64Array(i),n);var l=!0,f=!1,p=void 0;try{for(var d,m=t[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var y,g=d.value;(y=this.inputData).set.apply(y,a(g).concat([1]))}}catch(e){f=!0,p=e}finally{try{!l&&m.return&&m.return()}finally{if(f)throw p}}}this.outputEmbedding=(0,h.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,d.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,m.default)(this.distances,this.perplexity);var e=Number.MAX_VALUE,t=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),l.default.mulseq(this.P,this.earlyExaggeration);var r=this._gradDesc(t,50,.5,0,0),n=i(r,2);n[0],t=n[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var a=this._gradDesc(t+1,100,.8,0,0),s=i(a,2);s[0],t=s[1],this.emit("progressStatus","Final optimization with momentum 0.8"),l.default.divseq(this.P,this.earlyExaggeration);var o=this._gradDesc(t+1,this.nIter,.8,1e-6,1e-6),u=i(o,2);return e=u[0],t=u[1],this.emit("progressStatus","Optimization end"),[e,t]}},{key:"rerun",value:function(){this.outputEmbedding=(0,h.default)(this.inputData.shape[0],this.dim);var e=this.run(),t=i(e,2);return[t[0],t[1]]}},{key:"getOutput",value:function(){return(0,f.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var e=(0,u.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),t=(0,u.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),r=0;r<this.outputEmbedding.shape[1];r++){var n=l.default.sup(l.default.abs(t,this.outputEmbedding.pick(null,r)));l.default.divs(e.pick(null,r),this.outputEmbedding.pick(null,r),n)}return(0,f.default)(e)}},{key:"_gradDesc",value:function(e,t,r){for(var n=arguments.length<=3||void 0===arguments[3]?1e-6:arguments[3],a=arguments.length<=4||void 0===arguments[4]?1e-6:arguments[4],s=(0,u.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),o=new Float64Array(this.outputEmbedding.size),c=0;c<o.length;c++)o[c]=1;var f=(0,u.default)(o,this.outputEmbedding.shape),h=Number.MAX_VALUE,d=Number.MAX_VALUE,m=0,g=(0,p.default)({args:["array"],pre:function(e){this.sum=0},body:function(e){this.sum+=e*e},post:function(e){return Math.sqrt(this.sum)}}),v=(0,p.default)({args:["array","array","array"],body:function(e,t,r){t*r>=0?e+=.05:e*=.95,e=Math.max(e,.01)}}),b=void 0;for(b=e;t>b;b++){var _=(0,y.default)(this.outputEmbedding,this.P,this.alpha),w=i(_,2),k=w[0],S=w[1],x=Math.abs(k-h);h=k;var E=g(S);if(this.emit("progressIter",[b,h,E]),d>h)d=h,m=b;else if(b-m>30)break;if(n>=E)break;if(a>=x)break;v(f,s,S),l.default.muleq(S,f);var A=(0,u.default)(new Float64Array(S.size),S.shape);l.default.muls(A,S,this.learningRate),l.default.mulseq(s,r),l.default.subeq(s,A),l.default.addeq(this.outputEmbedding,s),this.emit("progressData",this.getOutputScaled())}return[h,b]}}]),t}();r.default=g,t.exports=r.default},{"./joint-probabilities":19,"./kl-divergence":20,"./pairwise-distances":21,"./randn":22,cwise:5,events:9,ndarray:16,"ndarray-ops":12,"ndarray-pack":13,"ndarray-unpack":15}],19:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=e.shape[0],n=(0,a.default)(new Float64Array(r*r),[r,r]),l=(0,a.default)(new Float64Array(r*r),[r,r]),c=void 0,f=void 0,p=1/0,h=Math.log(t),d=void 0,m=void 0,y=void 0,g=0;r>g;g++){c=1,f=-1/0,p=1/0;for(var v=0;100>v;v++){for(var b=0;r>b;b++)n.set(g,b,Math.exp(-e.get(g,b)*c));n.set(g,g,0),m=0;for(b=0;r>b;b++)m+=n.get(g,b);0==m&&(m=s),y=0;for(b=0;r>b;b++)n.set(g,b,n.get(g,b)/m),y+=e.get(g,b)*n.get(g,b);if(d=Math.log(m)+c*y-h,Math.abs(d)<=u)break;d>0?(f=c,c=p==1/0?2*c:(c+p)/2):(p=c,f==-1/0?c/=2:c=(c+f)/2)}c}i.default.add(l,n,n.transpose(1,0));var _=Math.max(i.default.sum(l),o);return i.default.divseq(l,_),i.default.maxseq(l,o),l};var a=n(e("ndarray")),i=n(e("ndarray-ops")),s=1e-7,o=Number.EPSILON||2.220446049250313e-16,u=1e-5;t.exports=r.default},{ndarray:16,"ndarray-ops":12}],20:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){var n=e.shape[0],s=e.shape[1],c=(0,a.default)(new Float64Array(n*n),[n,n]),f=(0,o.default)(e,"euclidean");l(f);var p=(r+1)/-2;i.default.powseq(i.default.divseq(i.default.addseq(f,1),r),p);for(var h=0;n>h;h++)f.set(h,h,0);var d=Math.max(i.default.sum(f),u);i.default.divs(c,f,d),i.default.maxseq(c,u);var m=(0,a.default)(new Float64Array(n*n),[n,n]),y=(0,a.default)(new Float64Array(n*n),[n,n]);i.default.div(m,t,c),i.default.logeq(m),i.default.assign(y,t);var g=i.default.sum(i.default.muleq(m,y)),v=(0,a.default)(new Float64Array(e.size),e.shape),b=(0,a.default)(new Float64Array(n*n),[n,n]);i.default.sub(b,t,c),i.default.muleq(b,f);for(h=0;n>h;h++)for(var _=0;s>_;_++){var w=(0,a.default)(new Float64Array(e.shape[0]),[e.shape[0]]);i.default.assign(w,e.pick(null,_)),i.default.addseq(i.default.negeq(w),e.get(h,_)),i.default.muleq(w,b.pick(h,null)),v.set(h,_,i.default.sum(w))}var k=2*(r+1)/r;return i.default.mulseq(v,k),[g,v]};var a=n(e("ndarray")),i=n(e("ndarray-ops")),s=n(e("cwise")),o=n(e("./pairwise-distances")),u=Number.EPSILON||2.220446049250313e-16,l=(0,s.default)({args:["array"],body:function(e){e*=e}});t.exports=r.default},{"./pairwise-distances":21,cwise:5,ndarray:16,"ndarray-ops":12}],21:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=e.shape[0],n=(0,a.default)(new Float64Array(r*r),[r,r]);switch(t){case"euclidean":for(var i=0;r>i;i++)for(var c=i+1;r>c;c++){var f=s(e.pick(i,null),e.pick(c,null));n.set(i,c,f),n.set(c,i,f)}break;case"manhattan":for(i=0;r>i;i++)for(c=i+1;r>c;c++){f=o(e.pick(i,null),e.pick(c,null));n.set(i,c,f),n.set(c,i,f)}break;case"jaccard":for(i=0;r>i;i++)for(c=i+1;r>c;c++){f=u(e.pick(i,null),e.pick(c,null));n.set(i,c,f),n.set(c,i,f)}break;case"dice":for(i=0;r>i;i++)for(c=i+1;r>c;c++){f=l(e.pick(i,null),e.pick(c,null));n.set(i,c,f),n.set(c,i,f)}}return n};var a=n(e("ndarray")),i=n(e("cwise")),s=(0,i.default)({args:["array","array"],pre:function(e,t){this.sum=0},body:function(e,t){var r=e-t;this.sum+=r*r},post:function(e,t){return Math.sqrt(this.sum)}}),o=(0,i.default)({args:["array","array"],pre:function(e,t){this.sum=0},body:function(e,t){this.sum+=Math.abs(e-t)},post:function(e,t){return this.sum}}),u=(0,i.default)({args:["array","array"],pre:function(e,t){this.tf=0,this.tt=0},body:function(e,t){var r=Math.round(e),n=Math.round(t);this.tf+=+(r!=n),this.tt+=+(1==r&&1==n)},post:function(e,t){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),l=(0,i.default)({args:["array","array"],pre:function(e,t){this.tf=0,this.tt=0},body:function(e,t){var r=Math.round(e),n=Math.round(t);this.tf+=+(r!=n),this.tt+=+(1==r&&1==n)},post:function(e,t){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});t.exports=r.default},{cwise:5,ndarray:16}],22:[function(e,t,r){"use strict";function n(){var e=2*Math.random()-1,t=2*Math.random()-1,r=e*e+t*t;return 0==r||r>1?n():e*Math.sqrt(-2*Math.log(r)/r)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=new Float64Array(e*t),a=0;a<r.length;a++)r[a]=1e-4*n();return(0,s.default)(r,[e,t])};var a,i=e("ndarray"),s=(a=i)&&a.__esModule?a:{default:a};t.exports=r.default},{ndarray:16}]},{},[18])(18)}),self.onmessage=function(e){var t,r=e.data,n=100,a=new TSNE({dim:r.dim||2,perplexity:r.perplexity||25,earlyExaggeration:r.earlyExaggeration||4,learningRate:r.learningRate||25,nIter:r.nIter||1e3,metric:r.metric||"euclidean"});a.init({data:r.data,type:"dense"}),a.on("progressData",function(e){self.postMessage({pos:a.getOutputScaled()})}),a.on("progressIter",function(e){n=.9*n+e[1],self.postMessage({iterations:e[0],cost:e[1],stop:n<20})}),t=a.run(),self.postMessage({err:t[0],iterations:t[1],stop:!0})};