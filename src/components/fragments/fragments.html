<template>
  <require from="components/spinner.html"></require>
  <require from="components/svg-icon.html"></require>

  <div class="flex-c flex-a-c flex-jc-c full-dim error-indicator ${isErrored ? 'is-active' : ''}">
    <div class="flex-c flex-d-c flex-jc-c flex-a-c">
      <svg-icon icon-id="warning"></svg-icon>
      <span>${errorMsg}</span>
    </div>
  </div>
  <div class="flex-c flex-a-c flex-jc-c full-dim loading-indicator ${isLoading ? 'is-active' : ''}">
    <spinner if.bind="isLoading"></spinner>
  </div>

  <div class="full-wh flex-c flex-d-c" ref="baseEl">
    <main class="flex-i-g-1 rel fragment-plot">
      <div class="full-dim" background-color="yellow" ref="plotEl"></div>
    </main>
    <footer class="settings-bar">
      <ul class="flex-c settings-list">
        <li class="flex-c flex-d-c">
          <label for="settings-fgm-size">Fragment Size</label>
          <input
            id="settings-fgm-size"
            type="range"
            min="1"
            max="10"
            step="1"
            value.one-way="cellSize"
            change.delegate="cellSizeChangedHandler($event)">
        </li>
        <li class="flex-c flex-d-c">
          <label for="settings-fgm-is-animated">Animate</label>
          <input type="checkbox" id="settings-fgm-is-animated">
        </li>
        <li class="flex-c flex-d-c">
          <label for="settings-fgm-cover">Pile Display Mode</label>
          <select
            id="settings-fgm-cover"
            change.delegate="coverDispModeChangeHandler($event)">
            <option
              value="0"
              selected.bind="allPilesDisplayMode === 0">Harmonic Mean</option>
            <option
              value="3"
              selected.bind="allPilesDisplayMode === 3">Variance</option>
            <option
              value="2"
              selected.bind="allPilesDisplayMode === 2">Trend</option>
          </select>
        </li>
      </ul>
    </footer>
  </div>

  <script type="x-shader/x-vertex" id="shader-vertex">
     attribute vec3 customColor;
     varying vec3 vColor;
     void main() {
        vColor = customColor;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
     }
  </script>

  <script type="x-shader/x-fragment" id="shader-fragment">
     varying vec3 vColor;
     void main() {
       gl_FragColor = vec4( vColor, 1);
     }
  </script>
</template>
